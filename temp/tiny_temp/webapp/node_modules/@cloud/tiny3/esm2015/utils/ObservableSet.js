// TODO:未来看typescript如何继承Set
/**
 * @ignore
 */
export class ObservableSet {
    constructor(items) {
        // 代理模式
        this.set = new Set();
        // 观察者模式
        this.handlerSet = new Set();
        this.set = new Set(items);
    }
    get size() {
        return this.set.size;
    }
    addObserver(handlerFn) {
        this.handlerSet.add(handlerFn);
    }
    removeObserver(handlerFn) {
        this.handlerSet.delete(handlerFn);
    }
    notify(item, isAdd) {
        this.handlerSet.forEach((handlerFn) => {
            handlerFn(item, isAdd);
        });
    }
    add(item) {
        if (!this.set.has(item)) {
            this.set.add(item);
            this.notify(item, true);
        }
        return this;
    }
    delete(item) {
        if (this.set.has(item)) {
            this.set.delete(item);
            this.notify(item, false);
            return true;
        }
        return false;
    }
    has(item) {
        return this.set.has(item);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JzZXJ2YWJsZVNldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL0BjbG91ZC90aW55My91dGlscy9PYnNlcnZhYmxlU2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBLDRCQUE0QjtBQUM1Qjs7R0FFRztBQUNILE1BQU0sT0FBTyxhQUFhO0lBTXRCLFlBQVksS0FBVztRQUx2QixPQUFPO1FBQ0MsUUFBRyxHQUFhLElBQUksR0FBRyxFQUFPLENBQUM7UUFPdkMsUUFBUTtRQUNBLGVBQVUsR0FBMEIsSUFBSSxHQUFHLEVBQW9CLENBQUM7UUFIcEUsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBTEQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQztJQUN6QixDQUFDO0lBTU0sV0FBVyxDQUFDLFNBQTJCO1FBQzFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFDTSxjQUFjLENBQUMsU0FBMkI7UUFDN0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUNPLE1BQU0sQ0FBQyxJQUFTLEVBQUUsS0FBYztRQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQTJCLEVBQUUsRUFBRTtZQUNwRCxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUNNLEdBQUcsQ0FBQyxJQUFTO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztTQUMzQjtRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTSxNQUFNLENBQUMsSUFBUztRQUNuQixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBRXpCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBQ00sR0FBRyxDQUFDLElBQVM7UUFDaEIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5QixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGlnbm9yZVxyXG4gKi9cclxuZXhwb3J0IHR5cGUgU2V0SGFuZGxlckZuVHlwZSA9IChpdGVtOiBhbnksIGFkZDogYm9vbGVhbikgPT4gdm9pZDtcclxuLy8gVE9ETzrmnKrmnaXnnIt0eXBlc2NyaXB05aaC5L2V57un5om/U2V0XHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YWJsZVNldCB7XHJcbiAgICAvLyDku6PnkIbmqKHlvI9cclxuICAgIHByaXZhdGUgc2V0OiBTZXQ8YW55PiA9IG5ldyBTZXQ8YW55PigpO1xyXG4gICAgZ2V0IHNpemUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXQuc2l6ZTtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1zPzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5zZXQgPSBuZXcgU2V0KGl0ZW1zKTtcclxuICAgIH1cclxuICAgIC8vIOinguWvn+iAheaooeW8j1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVyU2V0OiBTZXQ8U2V0SGFuZGxlckZuVHlwZT4gPSBuZXcgU2V0PFNldEhhbmRsZXJGblR5cGU+KCk7XHJcbiAgICBwdWJsaWMgYWRkT2JzZXJ2ZXIoaGFuZGxlckZuOiBTZXRIYW5kbGVyRm5UeXBlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyU2V0LmFkZChoYW5kbGVyRm4pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlbW92ZU9ic2VydmVyKGhhbmRsZXJGbjogU2V0SGFuZGxlckZuVHlwZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlclNldC5kZWxldGUoaGFuZGxlckZuKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgbm90aWZ5KGl0ZW06IGFueSwgaXNBZGQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJTZXQuZm9yRWFjaCgoaGFuZGxlckZuOiBTZXRIYW5kbGVyRm5UeXBlKSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXJGbihpdGVtLCBpc0FkZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkKGl0ZW06IGFueSk6IHRoaXMge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXQuaGFzKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0LmFkZChpdGVtKTtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnkoaXRlbSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHB1YmxpYyBkZWxldGUoaXRlbTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0LmhhcyhpdGVtKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldC5kZWxldGUoaXRlbSk7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGl0ZW0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGhhcyhpdGVtOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXQuaGFzKGl0ZW0pO1xyXG4gICAgfVxyXG59Il19