import { TiLog } from './TiLog';
import { Util } from './Util';
/**
 * @ignore
 * 该类提供公共静态类方法，用于设置在body定位元素基于参照元素的位置信息,提供的核心方法如下：
 * setPosition()
 * 1. 入参为对象，参数信息如下：
 * {
 *   targetEle:需要定位的元素
 *   hostEle：参照元素
 *   position:定位位置
 *   hostSpace：待定位元素和参照元素间距
 *   browserSpace ：待定位元素和浏览器间距, 暂时只在上下位置生效
 *   hOffset: 自定义水平方向的偏移（在定位基础上的水平偏移，向左偏移为负值，向右偏移为正值）
 *   fixMaxHeight: 定位元素最大高度是否固定不变(显示不下时不用压缩高度)
 *   determinPositionFn：决定位置的函数
 * }
 * 2. 返回值为对象，信息如下：
 * {
 *   position:string 最终元素定位位置（当外部定义位置非13个可选位置时，会重新计算合适的位置进行定位，因此提供此位置信息供外部使用）
 *   avilableHeight:number 元素可用高度占位信息(外部可使用该信息进行高度的重新定义)
 * }
 */
export class Position {
    static setPosition(options) {
        // 入参非有效元素情况下，不做处理
        if (!Util.isElement(options.hostEle) || !Util.isElement(options.targetEle)) {
            TiLog.warn('position: hostEle or targetEle type is not element');
            // 防止外部使用报错，此处做返回值处理
            return {
                position: 'top',
                avilableHeight: 9999
            };
        }
        // 分别获取宿主和待定位元素当前位置
        const curLayout = Position.getLayout(options.hostEle, options.targetEle, options.hostEleX);
        const hostSpace = options.hostSpace || 0;
        // 判断元素位置
        const position = (options.determinPositionFn) ? options.determinPositionFn(curLayout)
            : Position.determinPosition(options.position, curLayout, hostSpace, options.browserSpace || 0);
        const elePos = Position.getLayoutParam(curLayout, position, hostSpace, options.browserSpace || 0, options.hasOffsetFix || false);
        const hOffset = options.hOffset || 0;
        Position.setLayout(options.targetEle, elePos, curLayout, hOffset);
        Position.setMaxHeight(options.targetEle, elePos, curLayout, options.fixMaxHeight);
        Position.setDominatorDropDetachState(options.targetEle, elePos, curLayout, options.fixMaxHeight);
        return {
            position,
            avilableHeight: elePos.avilableHeight,
            hostLayout: curLayout.hostLayout
        };
    }
    /**
     * 添加影响host position的事件并返回其事件句柄
     * 由于Angular listen不支持多事件定义，因此在此处封装函数进行单独处理；此外，事件也不支持定义命名空间
     * 监听全局事件，用于处理页面位置出现变化导致宿主元素位置偏移，而tip的特殊情况下tip消失，
     * 并定义组件事件监听句柄，事件取消时会用到
     * 特殊场景包括：
     * 1. 拖动弹框位置导致的宿主元素位置变化
     * 2. 页面局部出滚动条，滚动条位置变化导致的宿主元素位置变化
     *    鼠标导致的滚轮事件可通过mousewheel/DOMMouseScroll监听（有冒泡的特性）
     *    拖拽导致的滚轮变化，需要业务通过trigger Tiny自定义事件tiScroll进行处理（无事件冒泡的特性）
     * 3.页面缩放
     * 4.路由切换页面
     */
    static addPosChangeEvts(eventCallback, render) {
        const eventHandles = [];
        // 修复SSR报错：ERROR ReferenceError: document is not defined
        if (typeof document === 'undefined') {
            return [];
        }
        // 需要添加的事件数据抽象
        const eventArr = [
            {
                ele: typeof document !== 'undefined' ? document : null,
                eventType: 'tiScroll',
                callback: eventCallback
            }, {
                ele: typeof window !== 'undefined' ? window : null,
                eventType: 'resize',
                callback: eventCallback
            }, {
                ele: typeof window !== 'undefined' ? window : null,
                eventType: 'hashchange',
                callback: eventCallback
            }
        ];
        eventArr.forEach((item) => {
            // 修复SSR问题： ERROR TypeError: Cannot read property 'addEventListener' of null
            if (item.ele) {
                return eventHandles.push(render.listen(item.ele, item.eventType, item.callback));
            }
        });
        return eventHandles;
    }
    /**
     * 清除绑定事件，与addPosChangeEvts对称
     */
    static removePosChangeEvts(eventHandles) {
        eventHandles.forEach((item) => {
            if (item) {
                item();
            }
        });
    }
    // 获取host和target元素的布局参数
    static getLayout(hostEle, targetEle, horizonHostEle) {
        const hostLayout = Position.getHostEleLayout(hostEle, horizonHostEle);
        return {
            hostLayout,
            targetLayout: Position.getEleLayout(targetEle),
            avilableLayout: Position.getAvilableLayout(hostLayout)
        };
    }
    /**
     * 根据高亮浮层位置及提示弹窗位置情况计算具体显示位置
     * @param  position 元素位置定义信息
     * @param  layout 宿主和待定位元素位置信息
     * @param  hostSpace 宿主和待定位元素间距
     * @param  browserSpace 浏览器和待定位元素间距
     * @returns 提示弹窗呈现位置
     */
    static determinPosition(position, layout, hostSpace, browserSpace) {
        // position定义有效情况下，不做处理
        if (Position.isValidPosition(position, layout, hostSpace, browserSpace)) {
            return position;
        }
        const targetLayout = layout.targetLayout;
        const avilableLayout = layout.avilableLayout;
        // 元素位置距各部分位置
        const avilableLeft = avilableLayout.left;
        const avilableRight = avilableLayout.right;
        const avilableTop = avilableLayout.top;
        const avilableBottom = avilableLayout.bottom;
        const targetMaxWidth = targetLayout.width + hostSpace + browserSpace;
        const targetMaxHeight = targetLayout.height + hostSpace + browserSpace;
        const hostLayout = layout.hostLayout;
        if (avilableTop >= targetMaxHeight) { // 上方可显示完全
            const positionTop = Position.determinHorizon(layout, hostLayout);
            if (positionTop !== undefined) {
                return 'top' + positionTop;
            }
        }
        if (avilableRight >= targetMaxWidth) { // 右侧可显示完全，具体思路同上方可显示完全情况
            const positionRight = Position.determinVertical(layout, hostLayout);
            if (positionRight !== undefined) {
                return 'right' + positionRight;
            }
        }
        if (avilableBottom >= targetMaxHeight) { // 下方可显示完全，具体思路同上方可显示完全情况
            const positionBottom = Position.determinHorizon(layout, hostLayout);
            if (positionBottom !== undefined) {
                return 'bottom' + positionBottom;
            }
        }
        if (avilableLeft >= targetMaxWidth) { // 左侧足够显示情况下，左侧居中显示
            const positionLeft = Position.determinVertical(layout, hostLayout);
            if (positionLeft !== undefined) {
                return 'left' + positionLeft;
            }
        }
        return 'center'; // 上下左右均无法足够显示情况下，居中显示内容
    }
    /**
     * 垂直位置确定后，确定水平位置
     */
    static determinHorizon(layout, hostLayout) {
        const targetLayout = layout.targetLayout;
        const avilableLayout = layout.avilableLayout;
        const avilableLeft = avilableLayout.left;
        const avilableMaxLeft = avilableLayout.maxLeft;
        const avilableRight = avilableLayout.right;
        const avilableMaxRight = avilableLayout.maxRight;
        const targetWidth = targetLayout.width;
        const targetCenterWidth = (targetLayout.width - hostLayout.width) / 2; // 水平居中情况下，左右侧占用的宽度分别比宿主元素宽多少
        if ((avilableRight >= targetCenterWidth) &&
            (avilableLeft >= targetCenterWidth)) { // 提示元素超出被提示元素部分足够显示的情况下，优先居中显示
            return '';
        }
        if (avilableMaxRight >= targetWidth) { // 提示元素可在被提示元素左边界靠右完全显示情况下，向右显示
            return '-left';
        }
        if (avilableMaxLeft >= targetWidth) { // 提示元素可在被提示元素左边界靠左完全显示情况下，向左显示
            return '-right';
        }
    }
    /**
     * 水平位置确定后，确定垂直位置
     */
    static determinVertical(layout, hostLayout) {
        const targetLayout = layout.targetLayout;
        const avilableLayout = layout.avilableLayout;
        const avilableTop = avilableLayout.top;
        const avilableMaxTop = avilableLayout.maxTop;
        const avilableBottom = avilableLayout.bottom;
        const avilableMaxBottom = avilableLayout.maxBottom;
        const targetHeight = targetLayout.height;
        const targetMiddleHeight = (targetLayout.height - hostLayout.height) / 2; // 垂直居中情况下，上下两侧占用的高度分别比宿主元素高多少
        if ((avilableTop >= targetMiddleHeight) &&
            (avilableBottom >= targetMiddleHeight)) {
            return '';
        }
        if (avilableMaxBottom >= targetHeight) {
            return '-top';
        }
        if (avilableMaxTop >= targetHeight) {
            return '-bottom';
        }
    }
    // 判断定义的position是否为有效位置
    static isValidPosition(position, layout, hostSpace, browserSpace) {
        if (Position.positionArr.indexOf(position) === -1) {
            return false;
        }
        // 判断在指定的position是否能显示下
        const positionFragments = position.split('-');
        const targetLayout = layout.targetLayout;
        const avilableLayout = layout.avilableLayout;
        // 元素位置距各部分位置
        const avilableLeft = avilableLayout.left;
        const avilableRight = avilableLayout.right;
        const avilableTop = avilableLayout.top;
        const avilableBottom = avilableLayout.bottom;
        const targetMaxWidth = targetLayout.width + hostSpace + browserSpace;
        const targetMaxHeight = targetLayout.height + hostSpace + browserSpace;
        if (positionFragments[0] === 'top') {
            if (avilableTop < targetMaxHeight) {
                return false;
            }
            return Position.isValidHorizonPosition(positionFragments[1], layout);
        }
        if (positionFragments[0] === 'bottom') {
            if (avilableBottom < targetMaxHeight) {
                return false;
            }
            return Position.isValidHorizonPosition(positionFragments[1], layout);
        }
        if (positionFragments[0] === 'left') {
            if (avilableLeft < targetMaxWidth) {
                return false;
            }
            return Position.isValidVerticalPosition(positionFragments[1], layout);
        }
        if (positionFragments[0] === 'right') {
            if (avilableRight < targetMaxWidth) {
                return false;
            }
            return Position.isValidVerticalPosition(positionFragments[1], layout);
        }
        return true;
    }
    // 确定垂直位置是有效的后，判断水平位置是否有效
    static isValidHorizonPosition(horizonPosition, layout) {
        const targetLayout = layout.targetLayout;
        const avilableLayout = layout.avilableLayout;
        const hostLayout = layout.hostLayout;
        const avilableLeft = avilableLayout.left;
        const avilableRight = avilableLayout.right;
        const avilableMaxLeft = avilableLayout.maxLeft;
        const avilableMaxRight = avilableLayout.maxRight;
        const targetWidth = targetLayout.width;
        const targetCenterWidth = (targetLayout.width - hostLayout.width) / 2; // 水平居中情况下，左右侧占用的宽度分别比宿主元素宽多少
        if (!horizonPosition) {
            return (avilableRight >= targetCenterWidth) && (avilableLeft >= targetCenterWidth);
        }
        if (horizonPosition === 'left') {
            return avilableMaxRight >= targetWidth;
        }
        if (horizonPosition === 'right') {
            return avilableMaxLeft >= targetWidth;
        }
        return false;
    }
    // 确定水平位置是有效的后，判断垂直位置是否有效
    static isValidVerticalPosition(verticalPosition, layout) {
        const targetLayout = layout.targetLayout;
        const avilableLayout = layout.avilableLayout;
        const hostLayout = layout.hostLayout;
        const avilableTop = avilableLayout.top;
        const avilableBottom = avilableLayout.bottom;
        const avilableMaxTop = avilableLayout.maxTop;
        const avilableMaxBottom = avilableLayout.maxBottom;
        const targetHeight = targetLayout.height;
        const targetMiddleHeight = (targetLayout.height - hostLayout.height) / 2; // 垂直居中情况下，上下两侧占用的高度分别比宿主元素高多少
        if (!verticalPosition) {
            return (avilableTop >= targetMiddleHeight) && (avilableBottom >= targetMiddleHeight);
        }
        if (verticalPosition === 'top') {
            return avilableMaxBottom >= targetHeight;
        }
        if (verticalPosition === 'bottom') {
            return avilableMaxTop >= targetHeight;
        }
        return false;
    }
    // 设置提示弹窗位置
    static setLayout(ele, position, layoutParam, hOffset) {
        if (layoutParam.hostLayout.isFixed) { // fixed定位情况下，滚动条对其不受影响，因此此处需要减掉滚动条的位置影响
            ele.style.position = 'fixed';
            ele.style.left = `${position.left - window.pageXOffset + hOffset}px`;
            ele.style.top = `${position.top - window.pageYOffset}px`;
        }
        else {
            ele.style.left = `${position.left + hOffset}px`;
            ele.style.top = `${position.top}px`;
        }
    }
    // 设置提示弹窗的MaxHeight
    static setMaxHeight(ele, position, layoutParam, fixMaxHeight) {
        if (fixMaxHeight || position.avilableHeight >= layoutParam.targetLayout.height) {
            return;
        }
        ele.style.maxHeight = `${position.avilableHeight}px`;
    }
    /**
     * 当drop固定高度（设置fixMaxHeight=ture)，且空间不足时，dominator和drop不相邻，此场景需要隐藏drop中的边框覆盖线，
     * 添加样式类'ti3-detach-dominator-drop'标记drop的这种场景状态，通过css样式控制drop中边框覆盖线的隐藏和显示
     * 目前该场景出现在日期类组件中
     */
    static setDominatorDropDetachState(ele, position, layoutParam, fixMaxHeight) {
        if (!fixMaxHeight) {
            return;
        }
        if (position.avilableHeight < layoutParam.targetLayout.height) {
            ele.classList.add('ti3-detach-dominator-drop');
        }
        else {
            ele.classList.remove('ti3-detach-dominator-drop');
        }
    }
    static getEleLayout(ele) {
        // 修复SSR报错：ERROR TypeError: ele.getBoundingClientRect is not a function
        return {
            top: ele.offsetTop,
            left: ele.offsetLeft,
            width: (typeof ele.getBoundingClientRect) === 'function' ? ele.getBoundingClientRect().width : 0,
            height: (typeof ele.getBoundingClientRect) === 'function' ? ele.getBoundingClientRect().height : 0
        };
    }
    static getHostEleLayout(hostEle, horizonHostEle) {
        let horizonEle = hostEle;
        if (Util.isElement(horizonHostEle)) {
            horizonEle = horizonHostEle;
        }
        // 修复SSR报错：ERROR TypeError: hostEle.getBoundingClientRect is not a function
        // 元素相对于windows的位置
        let top = (typeof hostEle.getBoundingClientRect) === 'function' ? hostEle.getBoundingClientRect().top : 0;
        let left = (typeof hostEle.getBoundingClientRect) === 'function' ? horizonEle.getBoundingClientRect().left : 0;
        // 修复SSR报错：ERROR ReferenceError: getComputedStyle is not defined
        // 下面利用body相对于windows的位置，计算元素相对于body的位置。
        /* tslint:disable:no-null-keyword */
        const bodyPositon = (typeof getComputedStyle === 'function') ? getComputedStyle(document.body, null).position : 'static';
        // body是static|relative|absolute|fixed都已测试，Chrome高低版本/Firefox/IE11已测。
        if (bodyPositon === 'static') { // static时，body对window没有偏移，但是需要考虑页面滚动条
            if (typeof window !== 'undefined') {
                top += window.pageYOffset;
                left += window.pageXOffset;
            }
        }
        else {
            // relative|fix|absolute时，需要考虑body相对于windows的偏移。
            top -= document.body.getBoundingClientRect().top;
            left -= document.body.getBoundingClientRect().left;
        }
        return {
            top,
            left,
            width: horizonEle.offsetWidth,
            height: hostEle.offsetHeight,
            isFixed: this.isFixedPos(hostEle)
        };
    }
    static getAvilableLayout(hostLayout) {
        // 修复报错：ERROR ReferenceError: document is not defined
        // 当前浏览器可视区域的宽高
        const curBrowseWidth = (typeof document !== 'undefined') ? document.documentElement.clientWidth : 0;
        const curBrowseheight = (typeof document !== 'undefined') ? document.documentElement.clientHeight : 0;
        // 元素位置距各部分位置:
        // 1.以元素四个边为边界，上下左右预留的可用宽高，用avilableLeft等标识
        // 2.去掉元素的宽高占位，计算的最大可用宽高，用avilableMax...标识
        // 修复SSR错误：ERROR ReferenceError: pageXOffset is not defined
        const avilableLeft = hostLayout.left - ((typeof window !== 'undefined') ? window.pageXOffset : 0);
        const avilableMaxLeft = avilableLeft + hostLayout.width;
        const avilableRight = curBrowseWidth - avilableMaxLeft;
        const avilableMaxRight = curBrowseWidth - avilableLeft;
        // document.body.scrollTop  document.documentElement.scrollTop存在浏览器差异，chrome高低版本表现不同。
        const avilableTop = hostLayout.top - ((typeof window !== 'undefined') ? window.pageYOffset : 0); // pageYOffset支持IE9以上。
        const avilableMaxTop = avilableTop + hostLayout.height;
        const avilableBottom = curBrowseheight - avilableMaxTop;
        const avilableMaxBottom = curBrowseheight - avilableTop;
        return {
            left: avilableLeft,
            maxLeft: avilableMaxLeft,
            right: avilableRight,
            maxRight: avilableMaxRight,
            top: avilableTop,
            maxTop: avilableMaxTop,
            bottom: avilableBottom,
            maxBottom: avilableMaxBottom,
            clientHeight: curBrowseheight,
            clientWidth: curBrowseWidth
        };
    }
    // 确定元素是否为fixed定位
    static isFixedPos(ele) {
        if (!ele || ele.nodeName === 'HTML') {
            return false;
        }
        // 修复SSR报错：ERROR ReferenceError: getComputedStyle is not defined
        if (typeof getComputedStyle === 'undefined') {
            return false;
        }
        if (getComputedStyle(ele).position === 'fixed') {
            return true;
        }
        return this.isFixedPos(ele.parentNode);
    }
    static getLayoutParam(layout, position, hostSpace, browserSpace, hasOffsetFix) {
        const positionArr = position.split('-'); // 跟上面静态变量重名,最好改一下
        const left = Position.getHorizionParam(layout, positionArr, hostSpace, hasOffsetFix);
        const verticalParam = Position.getVerticalParam(layout, positionArr, hostSpace, browserSpace, hasOffsetFix);
        return {
            left,
            top: verticalParam.top,
            avilableHeight: verticalParam.avilableHeight
        };
    }
    static getHorizionParam(curLayout, posArr, space, hasOffsetFix) {
        const hostLayout = curLayout.hostLayout;
        const targetLayout = curLayout.targetLayout;
        // 定位偏差调整量（该偏差量针对较小元素，保证 tip 的箭头在被提示元素的中间）
        const offset = hasOffsetFix ? this.getOffsetFixVal(curLayout.hostLayout.width) : 0;
        // 'left', 'left-top', 'left-bottom'
        if (posArr[0] === 'left') {
            return hostLayout.left - targetLayout.width - space;
        }
        // 'right', 'right-top', 'right-bottom'
        if (posArr[0] === 'right') {
            return hostLayout.left + hostLayout.width + space;
        }
        // 'top-left', 'bottom-left'
        if (posArr[1] === 'left') {
            return hostLayout.left - offset;
        }
        // 'top-right', 'bottom-right'
        if (posArr[1] === 'right') {
            return hostLayout.left + hostLayout.width - targetLayout.width + offset;
        }
        // 'top', 'bottom', 'center'
        return hostLayout.left - (targetLayout.width - hostLayout.width) / 2;
    }
    static getVerticalParam(curLayout, posArr, hostSpace, browserSpace, hasOffsetFix) {
        const avilableLayout = curLayout.avilableLayout; // 宿主元素对应的可用位置参数
        const hostHeight = curLayout.hostLayout.height; // 宿主元素本身高度
        const targetLayout = curLayout.targetLayout;
        const hostLayout = curLayout.hostLayout;
        // 定位偏差调整量（该偏差量针对较小元素，保证 tip 的箭头在被提示元素的中间）
        const offset = hasOffsetFix ? this.getOffsetFixVal(curLayout.hostLayout.height) : 0;
        // 纵向可用高度是根据位置中top、bottom、居中情况进行的处理,因此,此处先将position进行分割，再根据其情况进行可用高度计算
        // 弹出元素下边线与宿主元素上边线相接后，弹出元素向上延伸情况，对应位置包含'top', 'top-left', 'top-right'
        if (posArr[0] === 'top') {
            const avilableHeight = avilableLayout.top - hostSpace - browserSpace;
            const top = (avilableHeight >= targetLayout.height) ?
                (hostLayout.top - targetLayout.height - hostSpace) :
                (hostLayout.top - avilableLayout.top + browserSpace);
            return {
                avilableHeight,
                top
            };
        }
        // 弹出元素上边线与宿主元素下边线相接后，弹出元素向下延伸情况，对应位置包含'bottom', 'bottom-left', 'bottom-right'
        if (posArr[0] === 'bottom') {
            return {
                avilableHeight: avilableLayout.bottom - hostSpace - browserSpace,
                top: hostLayout.top + hostLayout.height + hostSpace
            };
        }
        // 弹出元素上边线与宿主元素上边线对齐情况，对应位置包含'left-top', 'right-top'
        if (posArr[1] === 'top') {
            return {
                avilableHeight: avilableLayout.bottom + hostHeight,
                top: hostLayout.top - offset
            };
        }
        // 弹出元素上边线与宿主元素下边线对齐情况，对应位置包含'right-bottom', 'left-bottom'
        if (posArr[1] === 'bottom') {
            return {
                avilableHeight: avilableLayout.top + hostHeight,
                top: hostLayout.top + hostLayout.height - targetLayout.height + offset
            };
        }
        // 弹出元素中线与宿主元素中线对齐情况，对应位置包含'left', 'right', 'center'
        return {
            avilableHeight: avilableLayout.clientHeight,
            top: hostLayout.top - (targetLayout.height - hostLayout.height) / 2
        };
    }
    // 获取定位偏差调整量
    static getOffsetFixVal(hostLayoutSize) {
        return hostLayoutSize / 2 < Position.ADAPTIVE_SIZE ?
            Position.ADAPTIVE_SIZE - hostLayoutSize / 2 : 0;
    }
}
Position.positionArr = ['top', 'top-left', 'top-right', 'bottom', 'bottom-left', 'bottom-right',
    'left', 'left-top', 'left-bottom', 'right', 'right-top', 'right-bottom', 'center'];
/* tip 针对较小元素做位置自适应处理，保证 tip 的箭头在被提示元素的中间，这是宽度或者高度的阈值
 * 取值为 15 的原因： 箭头定位偏移量9 + 箭头宽度的一半6 = 15px 相关变量变化时需要修改该常量
 */
Position.ADAPTIVE_SIZE = 15;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueTMvdXRpbHMvUG9zaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNoQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBa0Q5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQkc7QUFDSCxNQUFNLE9BQU8sUUFBUTtJQU9WLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FXekI7UUFDRyxrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDeEUsS0FBSyxDQUFDLElBQUksQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO1lBRWpFLG9CQUFvQjtZQUNwQixPQUFPO2dCQUNILFFBQVEsRUFBRSxLQUFLO2dCQUNmLGNBQWMsRUFBRSxJQUFJO2FBQ3ZCLENBQUM7U0FDTDtRQUNELG1CQUFtQjtRQUNuQixNQUFNLFNBQVMsR0FBcUIsUUFBUSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdHLE1BQU0sU0FBUyxHQUFXLE9BQU8sQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDO1FBQ2pELFNBQVM7UUFDVCxNQUFNLFFBQVEsR0FBUSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDO1lBQzlFLENBQUMsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE9B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QzNDLEdBQUcsRUFBRSxVQUFVLENBQUMsR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztTQUN0RSxDQUFDO0lBQ04sQ0FBQztJQUNELFlBQVk7SUFDSixNQUFNLENBQUMsZUFBZSxDQUFDLGNBQXNCO1FBQ2pELE9BQU8sY0FBYyxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDaEQsUUFBUSxDQUFDLGFBQWEsR0FBRyxjQUFjLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEQsQ0FBQzs7QUF6Z0JjLG9CQUFXLEdBQWtCLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLGFBQWEsRUFBRSxjQUFjO0lBQ2pHLE1BQU0sRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3RHOztHQUVHO0FBQ3FCLHNCQUFhLEdBQVcsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGlMb2cgfSBmcm9tICcuL1RpTG9nJztcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gJy4vVXRpbCc7XHJcbi8qKlxyXG4gKiDkvY3nva7mmL7npLrnsbvlnovlrprkuYnvvIzlhbbkuK1hdXRv5Luj6KGo6Ieq6YCC5bqU5L2N572u5pi+56S6XHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUaVBvc2l0aW9uVHlwZSA9ICd0b3AnfCAndG9wLWxlZnQnfCAndG9wLXJpZ2h0J3wgJ2JvdHRvbSd8ICdib3R0b20tbGVmdCd8ICdib3R0b20tcmlnaHQnfFxyXG4nbGVmdCd8ICdsZWZ0LXRvcCd8ICdsZWZ0LWJvdHRvbSd8ICdyaWdodCd8ICdyaWdodC10b3AnfCAncmlnaHQtYm90dG9tJ3wgJ2NlbnRlcicgfCAnYXV0bycgfCAnbm9uZSc7XHJcbmludGVyZmFjZSBUaVBvc2l0aW9uTGF5b3V0IHtcclxuICAgIGhvc3RMYXlvdXQ6IFRpSG9zdExheW91dDtcclxuICAgIHRhcmdldExheW91dDogVGlFbGVMYXlvdXQ7XHJcbiAgICBhdmlsYWJsZUxheW91dDogVGlBdmlsYWJsZUxheW91dDtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpSG9zdExheW91dCB7XHJcbiAgICB0b3A6IG51bWJlcjtcclxuICAgIGxlZnQ6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIGlzRml4ZWQ6IGJvb2xlYW47XHJcbn1cclxuaW50ZXJmYWNlIFRpRWxlTGF5b3V0IHtcclxuICAgIHRvcDogbnVtYmVyO1xyXG4gICAgbGVmdDogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG59XHJcbmludGVyZmFjZSBUaUF2aWxhYmxlTGF5b3V0IHtcclxuICAgIGxlZnQ6IG51bWJlcjtcclxuICAgIG1heExlZnQ6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbiAgICBtYXhSaWdodDogbnVtYmVyO1xyXG4gICAgdG9wOiBudW1iZXI7XHJcbiAgICBtYXhUb3A6IG51bWJlcjtcclxuICAgIGJvdHRvbTogbnVtYmVyO1xyXG4gICAgbWF4Qm90dG9tOiBudW1iZXI7XHJcbiAgICBjbGllbnRIZWlnaHQ6IG51bWJlcjtcclxuICAgIGNsaWVudFdpZHRoOiBudW1iZXI7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaVBvc2l0aW9uUmVzdWx0IHtcclxuICAgIHBvc2l0aW9uOiBUaVBvc2l0aW9uVHlwZTtcclxuICAgIGF2aWxhYmxlSGVpZ2h0OiBudW1iZXI7XHJcbiAgICBob3N0TGF5b3V0PzogVGlIb3N0TGF5b3V0O1xyXG59XHJcbmludGVyZmFjZSBUaUxheW91dFBhcmFtcyB7XHJcbiAgICBsZWZ0OiBudW1iZXI7XHJcbiAgICB0b3A6IG51bWJlcjtcclxuICAgIGF2aWxhYmxlSGVpZ2h0OiBudW1iZXI7XHJcbn1cclxuaW50ZXJmYWNlIFRpVmVydGljYWxQYXJhbXMge1xyXG4gICAgYXZpbGFibGVIZWlnaHQ6IG51bWJlcjtcclxuICAgIHRvcDogbnVtYmVyO1xyXG59XHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqIOivpeexu+aPkOS+m+WFrOWFsemdmeaAgeexu+aWueazle+8jOeUqOS6juiuvue9ruWcqGJvZHnlrprkvY3lhYPntKDln7rkuo7lj4LnhaflhYPntKDnmoTkvY3nva7kv6Hmga8s5o+Q5L6b55qE5qC45b+D5pa55rOV5aaC5LiL77yaXHJcbiAqIHNldFBvc2l0aW9uKClcclxuICogMS4g5YWl5Y+C5Li65a+56LGh77yM5Y+C5pWw5L+h5oGv5aaC5LiL77yaXHJcbiAqIHtcclxuICogICB0YXJnZXRFbGU66ZyA6KaB5a6a5L2N55qE5YWD57SgXHJcbiAqICAgaG9zdEVsZe+8muWPgueFp+WFg+e0oFxyXG4gKiAgIHBvc2l0aW9uOuWumuS9jeS9jee9rlxyXG4gKiAgIGhvc3RTcGFjZe+8muW+heWumuS9jeWFg+e0oOWSjOWPgueFp+WFg+e0oOmXtOi3nVxyXG4gKiAgIGJyb3dzZXJTcGFjZSDvvJrlvoXlrprkvY3lhYPntKDlkozmtY/op4jlmajpl7Tot50sIOaaguaXtuWPquWcqOS4iuS4i+S9jee9rueUn+aViFxyXG4gKiAgIGhPZmZzZXQ6IOiHquWumuS5ieawtOW5s+aWueWQkeeahOWBj+enu++8iOWcqOWumuS9jeWfuuehgOS4iueahOawtOW5s+WBj+enu++8jOWQkeW3puWBj+enu+S4uui0n+WAvO+8jOWQkeWPs+WBj+enu+S4uuato+WAvO+8iVxyXG4gKiAgIGZpeE1heEhlaWdodDog5a6a5L2N5YWD57Sg5pyA5aSn6auY5bqm5piv5ZCm5Zu65a6a5LiN5Y+YKOaYvuekuuS4jeS4i+aXtuS4jeeUqOWOi+e8qemrmOW6pilcclxuICogICBkZXRlcm1pblBvc2l0aW9uRm7vvJrlhrPlrprkvY3nva7nmoTlh73mlbBcclxuICogfVxyXG4gKiAyLiDov5Tlm57lgLzkuLrlr7nosaHvvIzkv6Hmga/lpoLkuIvvvJpcclxuICoge1xyXG4gKiAgIHBvc2l0aW9uOnN0cmluZyDmnIDnu4jlhYPntKDlrprkvY3kvY3nva7vvIjlvZPlpJbpg6jlrprkuYnkvY3nva7pnZ4xM+S4quWPr+mAieS9jee9ruaXtu+8jOS8mumHjeaWsOiuoeeul+WQiOmAgueahOS9jee9rui/m+ihjOWumuS9je+8jOWboOatpOaPkOS+m+atpOS9jee9ruS/oeaBr+S+m+WklumDqOS9v+eUqO+8iVxyXG4gKiAgIGF2aWxhYmxlSGVpZ2h0Om51bWJlciDlhYPntKDlj6/nlKjpq5jluqbljaDkvY3kv6Hmga8o5aSW6YOo5Y+v5L2/55So6K+l5L+h5oGv6L+b6KGM6auY5bqm55qE6YeN5paw5a6a5LmJKVxyXG4gKiB9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUG9zaXRpb24ge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcG9zaXRpb25BcnI6IEFycmF5PHN0cmluZz4gPSBbJ3RvcCcsICd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLCAnYm90dG9tJywgJ2JvdHRvbS1sZWZ0JywgJ2JvdHRvbS1yaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJ2xlZnQnLCAnbGVmdC10b3AnLCAnbGVmdC1ib3R0b20nLCAncmlnaHQnLCAncmlnaHQtdG9wJywgJ3JpZ2h0LWJvdHRvbScsICdjZW50ZXInXTtcclxuICAgIC8qIHRpcCDpkojlr7novoPlsI/lhYPntKDlgZrkvY3nva7oh6rpgILlupTlpITnkIbvvIzkv53or4EgdGlwIOeahOeureWktOWcqOiiq+aPkOekuuWFg+e0oOeahOS4remXtO+8jOi/meaYr+WuveW6puaIluiAhemrmOW6pueahOmYiOWAvFxyXG4gICAgICog5Y+W5YC85Li6IDE1IOeahOWOn+WboO+8miDnrq3lpLTlrprkvY3lgY/np7vph485ICsg566t5aS05a695bqm55qE5LiA5Y2KNiA9IDE1cHgg55u45YWz5Y+Y6YeP5Y+Y5YyW5pe26ZyA6KaB5L+u5pS56K+l5bi46YePXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEFEQVBUSVZFX1NJWkU6IG51bWJlciA9IDE1O1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRQb3NpdGlvbihvcHRpb25zOiB7XHJcbiAgICAgICAgdGFyZ2V0RWxlOiBhbnksXHJcbiAgICAgICAgaG9zdEVsZTogYW55LFxyXG4gICAgICAgIGhvc3RFbGVYPzogYW55LCAvLyDlhrPlrprlrprkvY3lhYPntKDmsLTlubPmlrnlkJHnmoTlhYPntKDvvIznlKjkuo7lrr/kuLvlhYPntKDmsLTlubPmlrnlkJHkvY3nva7kuI5ob3N05YWD57Sg5LiN5LiA6Ie055qE5Zy65pmv77yM5pqC5LiN5a+55aSW5byA5pS+XHJcbiAgICAgICAgcG9zaXRpb24/OiBUaVBvc2l0aW9uVHlwZSxcclxuICAgICAgICBob3N0U3BhY2U/OiBudW1iZXIsXHJcbiAgICAgICAgYnJvd3NlclNwYWNlPzogbnVtYmVyLCAvLyDkuI7mtY/op4jlmajot53nprvlg4/ntKBcclxuICAgICAgICBoT2Zmc2V0PzogbnVtYmVyIC8vIOiHquWumuS5ieawtOW5s+aWueWQkeeahOWBj+enu++8iOWcqOWumuS9jeWfuuehgOS4iueahOawtOW5s+WBj+enu++8jOWQkeW3puWBj+enu+S4uui0n+WAvO+8jOWQkeWPs+WBj+enu+S4uuato+WAvO+8iVxyXG4gICAgICAgIGZpeE1heEhlaWdodD86IGJvb2xlYW4gLy8g5a6a5L2N5YWD57Sg5pyA5aSn6auY5bqm5piv5ZCm5Zu65a6a5LiN5Y+YKOaYvuekuuS4jeS4i+aXtuS4jeeUqOWOi+e8qemrmOW6pilcclxuICAgICAgICBkZXRlcm1pblBvc2l0aW9uRm4/KGxheW91dDogYW55KTogc3RyaW5nLFxyXG4gICAgICAgIGhhc09mZnNldEZpeD86IGJvb2xlYW4gLy8g5piv5ZCm5a2Y5Zyo5a6a5L2N5YGP5beu6YeP77yI6ZKI5a+5IHRpcCDnu4Tku7bvvJrlvZPooqvmj5DnpLrlhYPntKDlsLrlr7jovoPlsI/ml7bvvIzkv53or4EgdGlwIOeahOeureWktOWcqOiiq+aPkOekuuWFg+e0oOeahOS4remXtO+8iVxyXG4gICAgfSk6IFRpUG9zaXRpb25SZXN1bHQge1xyXG4gICAgICAgIC8vIOWFpeWPgumdnuacieaViOWFg+e0oOaDheWGteS4i++8jOS4jeWBmuWkhOeQhlxyXG4gICAgICAgIGlmICghVXRpbC5pc0VsZW1lbnQob3B0aW9ucy5ob3N0RWxlKSB8fCAhVXRpbC5pc0VsZW1lbnQob3B0aW9ucy50YXJnZXRFbGUpKSB7XHJcbiAgICAgICAgICAgIFRpTG9nLndhcm4oJ3Bvc2l0aW9uOiBob3N0RWxlIG9yIHRhcmdldEVsZSB0eXBlIGlzIG5vdCBlbGVtZW50Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyDpmLLmraLlpJbpg6jkvb/nlKjmiqXplJnvvIzmraTlpITlgZrov5Tlm57lgLzlpITnkIZcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJyxcclxuICAgICAgICAgICAgICAgIGF2aWxhYmxlSGVpZ2h0OiA5OTk5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWIhuWIq+iOt+WPluWuv+S4u+WSjOW+heWumuS9jeWFg+e0oOW9k+WJjeS9jee9rlxyXG4gICAgICAgIGNvbnN0IGN1ckxheW91dDogVGlQb3NpdGlvbkxheW91dCA9IFBvc2l0aW9uLmdldExheW91dChvcHRpb25zLmhvc3RFbGUsIG9wdGlvbnMudGFyZ2V0RWxlLCBvcHRpb25zLmhvc3RFbGVYKTtcclxuICAgICAgICBjb25zdCBob3N0U3BhY2U6IG51bWJlciA9IG9wdGlvbnMuaG9zdFNwYWNlIHx8IDA7XHJcbiAgICAgICAgLy8g5Yik5pat5YWD57Sg5L2N572uXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb246IGFueSA9IChvcHRpb25zLmRldGVybWluUG9zaXRpb25GbikgPyBvcHRpb25zLmRldGVybWluUG9zaXRpb25GbihjdXJMYXlvdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBQb3NpdGlvbi5kZXRlcm1pblBvc2l0aW9uKG9wdGlvbnMucG9zaXRpb24sIGN1ckxheW91dCwgaG9zdFNwYWNlLCBvcHRpb25zLmJyb3dzZXJTcGFjZSB8fCAwKTtcclxuICAgICAgICBjb25zdCBlbGVQb3M6IFRpTGF5b3V0UGFyYW1zID0gUG9zaXRpb24uZ2V0TGF5b3V0UGFyYW0oY3VyTGF5b3V0LCBwb3NpdGlvbiwgaG9zdFNwYWNlLCBvcHRpb25zLmJyb3dzZXJTcGFjZSB8fCAwLCBvcHRpb25zLmhhc09mZnNldEZpeCB8fCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgaE9mZnNldDogbnVtYmVyID0gb3B0aW9ucy5oT2Zmc2V0IHx8IDA7XHJcbiAgICAgICAgUG9zaXRpb24uc2V0TGF5b3V0KG9wdGlvbnMudGFyZ2V0RWxlLCBlbGVQb3MsIGN1ckxheW91dCwgaE9mZnNldCk7XHJcbiAgICAgICAgUG9zaXRpb24uc2V0TWF4SGVpZ2h0KG9wdGlvbnMudGFyZ2V0RWxlLCBlbGVQb3MsIGN1ckxheW91dCwgb3B0aW9ucy5maXhNYXhIZWlnaHQpO1xyXG4gICAgICAgIFBvc2l0aW9uLnNldERvbWluYXRvckRyb3BEZXRhY2hTdGF0ZShvcHRpb25zLnRhcmdldEVsZSwgZWxlUG9zLCBjdXJMYXlvdXQsIG9wdGlvbnMuZml4TWF4SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcG9zaXRpb24sIC8vIOacgOe7iOWFg+e0oOWumuS9jeS9jee9rlxyXG4gICAgICAgICAgICBhdmlsYWJsZUhlaWdodDogZWxlUG9zLmF2aWxhYmxlSGVpZ2h0LCAvLyDlhYPntKDlj6/nlKjpq5jluqbljaDkvY1cclxuICAgICAgICAgICAgaG9zdExheW91dDogY3VyTGF5b3V0Lmhvc3RMYXlvdXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg5b2x5ZONaG9zdCBwb3NpdGlvbueahOS6i+S7tuW5tui/lOWbnuWFtuS6i+S7tuWPpeafhFxyXG4gICAgICog55Sx5LqOQW5ndWxhciBsaXN0ZW7kuI3mlK/mjIHlpJrkuovku7blrprkuYnvvIzlm6DmraTlnKjmraTlpITlsIHoo4Xlh73mlbDov5vooYzljZXni6zlpITnkIbvvJvmraTlpJbvvIzkuovku7bkuZ/kuI3mlK/mjIHlrprkuYnlkb3lkI3nqbrpl7RcclxuICAgICAqIOebkeWQrOWFqOWxgOS6i+S7tu+8jOeUqOS6juWkhOeQhumhtemdouS9jee9ruWHuueOsOWPmOWMluWvvOiHtOWuv+S4u+WFg+e0oOS9jee9ruWBj+enu++8jOiAjHRpcOeahOeJueauiuaDheWGteS4i3RpcOa2iOWkse+8jFxyXG4gICAgICog5bm25a6a5LmJ57uE5Lu25LqL5Lu255uR5ZCs5Y+l5p+E77yM5LqL5Lu25Y+W5raI5pe25Lya55So5YiwXHJcbiAgICAgKiDnibnmrorlnLrmma/ljIXmi6zvvJpcclxuICAgICAqIDEuIOaLluWKqOW8ueahhuS9jee9ruWvvOiHtOeahOWuv+S4u+WFg+e0oOS9jee9ruWPmOWMllxyXG4gICAgICogMi4g6aG16Z2i5bGA6YOo5Ye65rua5Yqo5p2h77yM5rua5Yqo5p2h5L2N572u5Y+Y5YyW5a+86Ie055qE5a6/5Li75YWD57Sg5L2N572u5Y+Y5YyWXHJcbiAgICAgKiAgICDpvKDmoIflr7zoh7TnmoTmu5rova7kuovku7blj6/pgJrov4dtb3VzZXdoZWVsL0RPTU1vdXNlU2Nyb2xs55uR5ZCs77yI5pyJ5YaS5rOh55qE54m55oCn77yJXHJcbiAgICAgKiAgICDmi5bmi73lr7zoh7TnmoTmu5rova7lj5jljJbvvIzpnIDopoHkuJrliqHpgJrov4d0cmlnZ2VyIFRpbnnoh6rlrprkuYnkuovku7Z0aVNjcm9sbOi/m+ihjOWkhOeQhu+8iOaXoOS6i+S7tuWGkuazoeeahOeJueaAp++8iVxyXG4gICAgICogMy7pobXpnaLnvKnmlL5cclxuICAgICAqIDQu6Lev55Sx5YiH5o2i6aG16Z2iXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkUG9zQ2hhbmdlRXZ0cyhldmVudENhbGxiYWNrOiBhbnksIHJlbmRlcjogYW55KTogQXJyYXk8KCkgPT4gdm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SGFuZGxlczogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcclxuICAgICAgICAvLyDkv67lpI1TU1LmiqXplJnvvJpFUlJPUiBSZWZlcmVuY2VFcnJvcjogZG9jdW1lbnQgaXMgbm90IGRlZmluZWRcclxuICAgICAgICBpZih0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDpnIDopoHmt7vliqDnmoTkuovku7bmlbDmja7mir3osaFcclxuICAgICAgICBjb25zdCBldmVudEFycjogQXJyYXk8YW55PiA9IFtcclxuICAgICAgICAgICAgeyAvLyDpvKDmoIfmi5bliqjpobXpnaLlhoXmu5rliqjmnaHlnLrmma/vvIzor6Xkuovku7bpnIDopoHkuJrliqHpgJrov4d0cmlnZ2VyIHRpU2Nyb2xs5LqL5Lu26L+b6KGM5aSE55CGXHJcbiAgICAgICAgICAgICAgICBlbGU6IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudCA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBldmVudFR5cGU6ICd0aVNjcm9sbCcsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZXZlbnRDYWxsYmFja1xyXG4gICAgICAgICAgICB9LCB7IC8vIOmhtemdoue8qeaUvlxyXG4gICAgICAgICAgICAgICAgZWxlOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBldmVudFR5cGU6ICdyZXNpemUnLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGV2ZW50Q2FsbGJhY2tcclxuICAgICAgICAgICAgfSwgeyAvLyDot6/nlLHliIfmjaLpobXpnaJcclxuICAgICAgICAgICAgICAgIGVsZTogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlOiAnaGFzaGNoYW5nZScsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZXZlbnRDYWxsYmFja1xyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICBldmVudEFyci5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8g5L+u5aSNU1NS6Zeu6aKY77yaIEVSUk9SIFR5cGVFcnJvcjogQ2Fubm90IHJlYWQgcHJvcGVydHkgJ2FkZEV2ZW50TGlzdGVuZXInIG9mIG51bGxcclxuICAgICAgICAgICAgaWYgKGl0ZW0uZWxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRIYW5kbGVzLnB1c2gocmVuZGVyLmxpc3RlbihpdGVtLmVsZSwgaXRlbS5ldmVudFR5cGUsIGl0ZW0uY2FsbGJhY2spKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZXZlbnRIYW5kbGVzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXpmaTnu5Hlrprkuovku7bvvIzkuI5hZGRQb3NDaGFuZ2VFdnRz5a+556ewXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVtb3ZlUG9zQ2hhbmdlRXZ0cyhldmVudEhhbmRsZXM6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGV2ZW50SGFuZGxlcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8g6I635Y+WaG9zdOWSjHRhcmdldOWFg+e0oOeahOW4g+WxgOWPguaVsFxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0TGF5b3V0KGhvc3RFbGU6IGFueSwgdGFyZ2V0RWxlOiBhbnksIGhvcml6b25Ib3N0RWxlOiBhbnkpOiBUaVBvc2l0aW9uTGF5b3V0IHtcclxuICAgICAgICBjb25zdCBob3N0TGF5b3V0OiBUaUhvc3RMYXlvdXQgPSBQb3NpdGlvbi5nZXRIb3N0RWxlTGF5b3V0KGhvc3RFbGUsIGhvcml6b25Ib3N0RWxlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaG9zdExheW91dCxcclxuICAgICAgICAgICAgdGFyZ2V0TGF5b3V0OiBQb3NpdGlvbi5nZXRFbGVMYXlvdXQodGFyZ2V0RWxlKSxcclxuICAgICAgICAgICAgYXZpbGFibGVMYXlvdXQ6IFBvc2l0aW9uLmdldEF2aWxhYmxlTGF5b3V0KGhvc3RMYXlvdXQpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u6auY5Lqu5rWu5bGC5L2N572u5Y+K5o+Q56S65by556qX5L2N572u5oOF5Ya16K6h566X5YW35L2T5pi+56S65L2N572uXHJcbiAgICAgKiBAcGFyYW0gIHBvc2l0aW9uIOWFg+e0oOS9jee9ruWumuS5ieS/oeaBr1xyXG4gICAgICogQHBhcmFtICBsYXlvdXQg5a6/5Li75ZKM5b6F5a6a5L2N5YWD57Sg5L2N572u5L+h5oGvXHJcbiAgICAgKiBAcGFyYW0gIGhvc3RTcGFjZSDlrr/kuLvlkozlvoXlrprkvY3lhYPntKDpl7Tot51cclxuICAgICAqIEBwYXJhbSAgYnJvd3NlclNwYWNlIOa1j+iniOWZqOWSjOW+heWumuS9jeWFg+e0oOmXtOi3nVxyXG4gICAgICogQHJldHVybnMg5o+Q56S65by556qX5ZGI546w5L2N572uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGRldGVybWluUG9zaXRpb24ocG9zaXRpb246IFRpUG9zaXRpb25UeXBlLCBsYXlvdXQ6IFRpUG9zaXRpb25MYXlvdXQsIGhvc3RTcGFjZTogbnVtYmVyLCBicm93c2VyU3BhY2U6IG51bWJlcik6XHJcbiAgICAgICAgc3RyaW5nIHtcclxuICAgICAgICAvLyBwb3NpdGlvbuWumuS5ieacieaViOaDheWGteS4i++8jOS4jeWBmuWkhOeQhlxyXG4gICAgICAgIGlmIChQb3NpdGlvbi5pc1ZhbGlkUG9zaXRpb24ocG9zaXRpb24sIGxheW91dCwgaG9zdFNwYWNlLCBicm93c2VyU3BhY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGF5b3V0OiBUaUVsZUxheW91dCA9IGxheW91dC50YXJnZXRMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMYXlvdXQ6IFRpQXZpbGFibGVMYXlvdXQgPSBsYXlvdXQuYXZpbGFibGVMYXlvdXQ7XHJcbiAgICAgICAgLy8g5YWD57Sg5L2N572u6Led5ZCE6YOo5YiG5L2N572uXHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMZWZ0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5sZWZ0O1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlUmlnaHQ6IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LnJpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlVG9wOiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC50b3A7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVCb3R0b206IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LmJvdHRvbTtcclxuICAgICAgICBjb25zdCB0YXJnZXRNYXhXaWR0aDogbnVtYmVyID0gdGFyZ2V0TGF5b3V0LndpZHRoICsgaG9zdFNwYWNlICsgYnJvd3NlclNwYWNlO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldE1heEhlaWdodDogbnVtYmVyID0gdGFyZ2V0TGF5b3V0LmhlaWdodCArIGhvc3RTcGFjZSArIGJyb3dzZXJTcGFjZTtcclxuICAgICAgICBjb25zdCBob3N0TGF5b3V0OiBUaUhvc3RMYXlvdXQgPSBsYXlvdXQuaG9zdExheW91dDtcclxuICAgICAgICBpZiAoYXZpbGFibGVUb3AgPj0gdGFyZ2V0TWF4SGVpZ2h0KSB7IC8vIOS4iuaWueWPr+aYvuekuuWujOWFqFxyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvblRvcDogc3RyaW5nID0gUG9zaXRpb24uZGV0ZXJtaW5Ib3Jpem9uKGxheW91dCwgaG9zdExheW91dCk7XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvblRvcCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RvcCcgKyBwb3NpdGlvblRvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXZpbGFibGVSaWdodCA+PSB0YXJnZXRNYXhXaWR0aCkgeyAvLyDlj7Pkvqflj6/mmL7npLrlrozlhajvvIzlhbfkvZPmgJ3ot6/lkIzkuIrmlrnlj6/mmL7npLrlrozlhajmg4XlhrVcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25SaWdodDogc3RyaW5nID0gUG9zaXRpb24uZGV0ZXJtaW5WZXJ0aWNhbChsYXlvdXQsIGhvc3RMYXlvdXQpO1xyXG4gICAgICAgICAgICBpZiAocG9zaXRpb25SaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3JpZ2h0JyArIHBvc2l0aW9uUmlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF2aWxhYmxlQm90dG9tID49IHRhcmdldE1heEhlaWdodCkgeyAvLyDkuIvmlrnlj6/mmL7npLrlrozlhajvvIzlhbfkvZPmgJ3ot6/lkIzkuIrmlrnlj6/mmL7npLrlrozlhajmg4XlhrVcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25Cb3R0b206IHN0cmluZyA9IFBvc2l0aW9uLmRldGVybWluSG9yaXpvbihsYXlvdXQsIGhvc3RMYXlvdXQpO1xyXG4gICAgICAgICAgICBpZiAocG9zaXRpb25Cb3R0b20gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdib3R0b20nICsgcG9zaXRpb25Cb3R0b207XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF2aWxhYmxlTGVmdCA+PSB0YXJnZXRNYXhXaWR0aCkgeyAvLyDlt6bkvqfotrPlpJ/mmL7npLrmg4XlhrXkuIvvvIzlt6bkvqflsYXkuK3mmL7npLpcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25MZWZ0OiBzdHJpbmcgPSBQb3NpdGlvbi5kZXRlcm1pblZlcnRpY2FsKGxheW91dCwgaG9zdExheW91dCk7XHJcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbkxlZnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdsZWZ0JyArIHBvc2l0aW9uTGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICdjZW50ZXInOyAvLyDkuIrkuIvlt6blj7PlnYfml6Dms5XotrPlpJ/mmL7npLrmg4XlhrXkuIvvvIzlsYXkuK3mmL7npLrlhoXlrrlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Z6C55u05L2N572u56Gu5a6a5ZCO77yM56Gu5a6a5rC05bmz5L2N572uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGRldGVybWluSG9yaXpvbihsYXlvdXQ6IFRpUG9zaXRpb25MYXlvdXQsIGhvc3RMYXlvdXQ6IFRpSG9zdExheW91dCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGF5b3V0OiBUaUVsZUxheW91dCA9IGxheW91dC50YXJnZXRMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMYXlvdXQ6IFRpQXZpbGFibGVMYXlvdXQgPSBsYXlvdXQuYXZpbGFibGVMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMZWZ0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5sZWZ0O1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlTWF4TGVmdDogbnVtYmVyID0gYXZpbGFibGVMYXlvdXQubWF4TGVmdDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZVJpZ2h0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5yaWdodDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZU1heFJpZ2h0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5tYXhSaWdodDtcclxuICAgICAgICBjb25zdCB0YXJnZXRXaWR0aDogbnVtYmVyID0gdGFyZ2V0TGF5b3V0LndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldENlbnRlcldpZHRoOiBudW1iZXIgPSAodGFyZ2V0TGF5b3V0LndpZHRoIC0gaG9zdExheW91dC53aWR0aCkgLyAyOyAvLyDmsLTlubPlsYXkuK3mg4XlhrXkuIvvvIzlt6blj7PkvqfljaDnlKjnmoTlrr3luqbliIbliKvmr5Tlrr/kuLvlhYPntKDlrr3lpJrlsJFcclxuICAgICAgICBpZiAoKGF2aWxhYmxlUmlnaHQgPj0gdGFyZ2V0Q2VudGVyV2lkdGgpICYmXHJcbiAgICAgICAgICAgICAgICAoYXZpbGFibGVMZWZ0ID49IHRhcmdldENlbnRlcldpZHRoKSkgeyAvLyDmj5DnpLrlhYPntKDotoXlh7rooqvmj5DnpLrlhYPntKDpg6jliIbotrPlpJ/mmL7npLrnmoTmg4XlhrXkuIvvvIzkvJjlhYjlsYXkuK3mmL7npLpcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXZpbGFibGVNYXhSaWdodCA+PSB0YXJnZXRXaWR0aCkgeyAvLyDmj5DnpLrlhYPntKDlj6/lnKjooqvmj5DnpLrlhYPntKDlt6bovrnnlYzpnaDlj7PlrozlhajmmL7npLrmg4XlhrXkuIvvvIzlkJHlj7PmmL7npLpcclxuICAgICAgICAgICAgcmV0dXJuICctbGVmdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdmlsYWJsZU1heExlZnQgPj0gdGFyZ2V0V2lkdGgpIHsgLy8g5o+Q56S65YWD57Sg5Y+v5Zyo6KKr5o+Q56S65YWD57Sg5bem6L6555WM6Z2g5bem5a6M5YWo5pi+56S65oOF5Ya15LiL77yM5ZCR5bem5pi+56S6XHJcbiAgICAgICAgICAgIHJldHVybiAnLXJpZ2h0JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOawtOW5s+S9jee9ruehruWumuWQju+8jOehruWumuWeguebtOS9jee9rlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBkZXRlcm1pblZlcnRpY2FsKGxheW91dDogVGlQb3NpdGlvbkxheW91dCwgaG9zdExheW91dDogVGlIb3N0TGF5b3V0KTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRMYXlvdXQ6IFRpRWxlTGF5b3V0ID0gbGF5b3V0LnRhcmdldExheW91dDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZUxheW91dDogVGlBdmlsYWJsZUxheW91dCA9IGxheW91dC5hdmlsYWJsZUxheW91dDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZVRvcDogbnVtYmVyID0gYXZpbGFibGVMYXlvdXQudG9wO1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlTWF4VG9wOiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5tYXhUb3A7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVCb3R0b206IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LmJvdHRvbTtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZU1heEJvdHRvbTogbnVtYmVyID0gYXZpbGFibGVMYXlvdXQubWF4Qm90dG9tO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEhlaWdodDogbnVtYmVyID0gdGFyZ2V0TGF5b3V0LmhlaWdodDtcclxuICAgICAgICBjb25zdCB0YXJnZXRNaWRkbGVIZWlnaHQ6IG51bWJlciA9ICh0YXJnZXRMYXlvdXQuaGVpZ2h0IC0gaG9zdExheW91dC5oZWlnaHQpIC8gMjsgLy8g5Z6C55u05bGF5Lit5oOF5Ya15LiL77yM5LiK5LiL5Lik5L6n5Y2g55So55qE6auY5bqm5YiG5Yir5q+U5a6/5Li75YWD57Sg6auY5aSa5bCRXHJcbiAgICAgICAgaWYgKChhdmlsYWJsZVRvcCA+PSB0YXJnZXRNaWRkbGVIZWlnaHQpICYmXHJcbiAgICAgICAgICAgIChhdmlsYWJsZUJvdHRvbSA+PSB0YXJnZXRNaWRkbGVIZWlnaHQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF2aWxhYmxlTWF4Qm90dG9tID49IHRhcmdldEhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJy10b3AnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXZpbGFibGVNYXhUb3AgPj0gdGFyZ2V0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnLWJvdHRvbSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICAvLyDliKTmlq3lrprkuYnnmoRwb3NpdGlvbuaYr+WQpuS4uuacieaViOS9jee9rlxyXG4gICAgIHByaXZhdGUgc3RhdGljIGlzVmFsaWRQb3NpdGlvbihwb3NpdGlvbjogVGlQb3NpdGlvblR5cGUsIGxheW91dDogVGlQb3NpdGlvbkxheW91dCwgaG9zdFNwYWNlOiBudW1iZXIsIGJyb3dzZXJTcGFjZTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgIGlmIChQb3NpdGlvbi5wb3NpdGlvbkFyci5pbmRleE9mKHBvc2l0aW9uKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIC8vIOWIpOaWreWcqOaMh+WumueahHBvc2l0aW9u5piv5ZCm6IO95pi+56S65LiLXHJcbiAgICAgICAgIGNvbnN0IHBvc2l0aW9uRnJhZ21lbnRzOiBBcnJheTxzdHJpbmc+ID0gcG9zaXRpb24uc3BsaXQoJy0nKTtcclxuICAgICAgICAgY29uc3QgdGFyZ2V0TGF5b3V0OiBUaUVsZUxheW91dCA9IGxheW91dC50YXJnZXRMYXlvdXQ7XHJcbiAgICAgICAgIGNvbnN0IGF2aWxhYmxlTGF5b3V0OiBUaUF2aWxhYmxlTGF5b3V0ID0gbGF5b3V0LmF2aWxhYmxlTGF5b3V0O1xyXG4gICAgICAgICAvLyDlhYPntKDkvY3nva7ot53lkITpg6jliIbkvY3nva5cclxuICAgICAgICAgY29uc3QgYXZpbGFibGVMZWZ0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5sZWZ0O1xyXG4gICAgICAgICBjb25zdCBhdmlsYWJsZVJpZ2h0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5yaWdodDtcclxuICAgICAgICAgY29uc3QgYXZpbGFibGVUb3A6IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LnRvcDtcclxuICAgICAgICAgY29uc3QgYXZpbGFibGVCb3R0b206IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LmJvdHRvbTtcclxuICAgICAgICAgY29uc3QgdGFyZ2V0TWF4V2lkdGg6IG51bWJlciA9IHRhcmdldExheW91dC53aWR0aCArIGhvc3RTcGFjZSArIGJyb3dzZXJTcGFjZTtcclxuICAgICAgICAgY29uc3QgdGFyZ2V0TWF4SGVpZ2h0OiBudW1iZXIgPSB0YXJnZXRMYXlvdXQuaGVpZ2h0ICsgaG9zdFNwYWNlICsgYnJvd3NlclNwYWNlO1xyXG4gICAgICAgICBpZiAocG9zaXRpb25GcmFnbWVudHNbMF0gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgICAgICBpZiAoYXZpbGFibGVUb3AgPCB0YXJnZXRNYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICByZXR1cm4gUG9zaXRpb24uaXNWYWxpZEhvcml6b25Qb3NpdGlvbihwb3NpdGlvbkZyYWdtZW50c1sxXSwgbGF5b3V0KTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBpZiAocG9zaXRpb25GcmFnbWVudHNbMF0gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgIGlmIChhdmlsYWJsZUJvdHRvbSA8IHRhcmdldE1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBQb3NpdGlvbi5pc1ZhbGlkSG9yaXpvblBvc2l0aW9uKHBvc2l0aW9uRnJhZ21lbnRzWzFdLCBsYXlvdXQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGlmIChwb3NpdGlvbkZyYWdtZW50c1swXSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICBpZiAoYXZpbGFibGVMZWZ0IDwgdGFyZ2V0TWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgcmV0dXJuIFBvc2l0aW9uLmlzVmFsaWRWZXJ0aWNhbFBvc2l0aW9uKHBvc2l0aW9uRnJhZ21lbnRzWzFdLCBsYXlvdXQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGlmIChwb3NpdGlvbkZyYWdtZW50c1swXSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgaWYgKGF2aWxhYmxlUmlnaHQgPCB0YXJnZXRNYXhXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICByZXR1cm4gUG9zaXRpb24uaXNWYWxpZFZlcnRpY2FsUG9zaXRpb24ocG9zaXRpb25GcmFnbWVudHNbMV0sIGxheW91dCk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOehruWumuWeguebtOS9jee9ruaYr+acieaViOeahOWQju+8jOWIpOaWreawtOW5s+S9jee9ruaYr+WQpuacieaViFxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNWYWxpZEhvcml6b25Qb3NpdGlvbihob3Jpem9uUG9zaXRpb246IHN0cmluZywgbGF5b3V0OiBUaVBvc2l0aW9uTGF5b3V0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGF5b3V0OiBUaUVsZUxheW91dCA9IGxheW91dC50YXJnZXRMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMYXlvdXQ6IFRpQXZpbGFibGVMYXlvdXQgPSBsYXlvdXQuYXZpbGFibGVMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgaG9zdExheW91dDogVGlIb3N0TGF5b3V0ID0gbGF5b3V0Lmhvc3RMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMZWZ0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5sZWZ0O1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlUmlnaHQ6IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LnJpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlTWF4TGVmdDogbnVtYmVyID0gYXZpbGFibGVMYXlvdXQubWF4TGVmdDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZU1heFJpZ2h0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5tYXhSaWdodDtcclxuICAgICAgICBjb25zdCB0YXJnZXRXaWR0aDogbnVtYmVyID0gdGFyZ2V0TGF5b3V0LndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldENlbnRlcldpZHRoOiBudW1iZXIgPSAodGFyZ2V0TGF5b3V0LndpZHRoIC0gaG9zdExheW91dC53aWR0aCkgLyAyOyAvLyDmsLTlubPlsYXkuK3mg4XlhrXkuIvvvIzlt6blj7PkvqfljaDnlKjnmoTlrr3luqbliIbliKvmr5Tlrr/kuLvlhYPntKDlrr3lpJrlsJFcclxuICAgICAgICBpZiAoIWhvcml6b25Qb3NpdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGF2aWxhYmxlUmlnaHQgPj0gdGFyZ2V0Q2VudGVyV2lkdGgpICYmIChhdmlsYWJsZUxlZnQgPj0gdGFyZ2V0Q2VudGVyV2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaG9yaXpvblBvc2l0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF2aWxhYmxlTWF4UmlnaHQgPj0gdGFyZ2V0V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChob3Jpem9uUG9zaXRpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF2aWxhYmxlTWF4TGVmdCA+PSB0YXJnZXRXaWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnoa7lrprmsLTlubPkvY3nva7mmK/mnInmlYjnmoTlkI7vvIzliKTmlq3lnoLnm7TkvY3nva7mmK/lkKbmnInmlYhcclxuICAgIHByaXZhdGUgc3RhdGljIGlzVmFsaWRWZXJ0aWNhbFBvc2l0aW9uKHZlcnRpY2FsUG9zaXRpb246IHN0cmluZywgbGF5b3V0OiBUaVBvc2l0aW9uTGF5b3V0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGF5b3V0OiBUaUVsZUxheW91dCA9IGxheW91dC50YXJnZXRMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVMYXlvdXQ6IFRpQXZpbGFibGVMYXlvdXQgPSBsYXlvdXQuYXZpbGFibGVMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgaG9zdExheW91dDogVGlIb3N0TGF5b3V0ID0gbGF5b3V0Lmhvc3RMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVUb3A6IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0LnRvcDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZUJvdHRvbTogbnVtYmVyID0gYXZpbGFibGVMYXlvdXQuYm90dG9tO1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlTWF4VG9wOiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC5tYXhUb3A7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVNYXhCb3R0b206IG51bWJlciA9IGF2aWxhYmxlTGF5b3V0Lm1heEJvdHRvbTtcclxuICAgICAgICBjb25zdCB0YXJnZXRIZWlnaHQ6IG51bWJlciA9IHRhcmdldExheW91dC5oZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TWlkZGxlSGVpZ2h0OiBudW1iZXIgPSAodGFyZ2V0TGF5b3V0LmhlaWdodCAtIGhvc3RMYXlvdXQuaGVpZ2h0KSAvIDI7IC8vIOWeguebtOWxheS4reaDheWGteS4i++8jOS4iuS4i+S4pOS+p+WNoOeUqOeahOmrmOW6puWIhuWIq+avlOWuv+S4u+WFg+e0oOmrmOWkmuWwkVxyXG4gICAgICAgIGlmICghdmVydGljYWxQb3NpdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGF2aWxhYmxlVG9wID49IHRhcmdldE1pZGRsZUhlaWdodCkgJiYgKGF2aWxhYmxlQm90dG9tID49IHRhcmdldE1pZGRsZUhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJ0aWNhbFBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXZpbGFibGVNYXhCb3R0b20gPj0gdGFyZ2V0SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVydGljYWxQb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF2aWxhYmxlTWF4VG9wID49IHRhcmdldEhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDorr7nva7mj5DnpLrlvLnnqpfkvY3nva5cclxuICAgIHByaXZhdGUgc3RhdGljIHNldExheW91dChlbGU6IGFueSwgcG9zaXRpb246IFRpTGF5b3V0UGFyYW1zLCBsYXlvdXRQYXJhbTogVGlQb3NpdGlvbkxheW91dCwgaE9mZnNldDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGxheW91dFBhcmFtLmhvc3RMYXlvdXQuaXNGaXhlZCkgeyAvLyBmaXhlZOWumuS9jeaDheWGteS4i++8jOa7muWKqOadoeWvueWFtuS4jeWPl+W9seWTje+8jOWboOatpOatpOWkhOmcgOimgeWHj+aOiea7muWKqOadoeeahOS9jee9ruW9seWTjVxyXG4gICAgICAgICAgICBlbGUuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgICAgICBlbGUuc3R5bGUubGVmdCA9IGAke3Bvc2l0aW9uLmxlZnQgLSB3aW5kb3cucGFnZVhPZmZzZXQgKyBoT2Zmc2V0fXB4YDtcclxuICAgICAgICAgICAgZWxlLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnRvcCAtIHdpbmRvdy5wYWdlWU9mZnNldH1weGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlLnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvbi5sZWZ0ICsgaE9mZnNldH1weGA7XHJcbiAgICAgICAgICAgIGVsZS5zdHlsZS50b3AgPSBgJHtwb3NpdGlvbi50b3B9cHhgO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOiuvue9ruaPkOekuuW8ueeql+eahE1heEhlaWdodFxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0TWF4SGVpZ2h0KGVsZTogYW55LCBwb3NpdGlvbjogYW55LCBsYXlvdXRQYXJhbTogYW55LCBmaXhNYXhIZWlnaHQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoZml4TWF4SGVpZ2h0IHx8IHBvc2l0aW9uLmF2aWxhYmxlSGVpZ2h0ID49IGxheW91dFBhcmFtLnRhcmdldExheW91dC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGUuc3R5bGUubWF4SGVpZ2h0ID0gYCR7cG9zaXRpb24uYXZpbGFibGVIZWlnaHR9cHhgO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlvZNkcm9w5Zu65a6a6auY5bqm77yI6K6+572uZml4TWF4SGVpZ2h0PXR1cmUp77yM5LiU56m66Ze05LiN6Laz5pe277yMZG9taW5hdG9y5ZKMZHJvcOS4jeebuOmCu++8jOatpOWcuuaZr+mcgOimgemakOiXj2Ryb3DkuK3nmoTovrnmoYbopobnm5bnur/vvIxcclxuICAgICAqIOa3u+WKoOagt+W8j+exuyd0aTMtZGV0YWNoLWRvbWluYXRvci1kcm9wJ+agh+iusGRyb3DnmoTov5nnp43lnLrmma/nirbmgIHvvIzpgJrov4djc3PmoLflvI/mjqfliLZkcm9w5Lit6L655qGG6KaG55uW57q/55qE6ZqQ6JeP5ZKM5pi+56S6XHJcbiAgICAgKiDnm67liY3or6XlnLrmma/lh7rnjrDlnKjml6XmnJ/nsbvnu4Tku7bkuK1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXREb21pbmF0b3JEcm9wRGV0YWNoU3RhdGUoZWxlOiBIVE1MRWxlbWVudCwgcG9zaXRpb246IGFueSwgbGF5b3V0UGFyYW06IGFueSwgZml4TWF4SGVpZ2h0OiBib29sZWFuKTogdm9pZHtcclxuICAgICAgICBpZiAoIWZpeE1heEhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwb3NpdGlvbi5hdmlsYWJsZUhlaWdodCA8IGxheW91dFBhcmFtLnRhcmdldExheW91dC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoJ3RpMy1kZXRhY2gtZG9taW5hdG9yLWRyb3AnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZSgndGkzLWRldGFjaC1kb21pbmF0b3ItZHJvcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRFbGVMYXlvdXQoZWxlOiBhbnkpOiBUaUVsZUxheW91dCB7XHJcbiAgICAgICAgLy8g5L+u5aSNU1NS5oql6ZSZ77yaRVJST1IgVHlwZUVycm9yOiBlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIG5vdCBhIGZ1bmN0aW9uXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wOiBlbGUub2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiBlbGUub2Zmc2V0TGVmdCxcclxuICAgICAgICAgICAgd2lkdGg6ICh0eXBlb2YgZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkgPT09ICdmdW5jdGlvbicgPyBlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggOiAwLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICh0eXBlb2YgZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkgPT09ICdmdW5jdGlvbicgPyBlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IDogMFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEhvc3RFbGVMYXlvdXQoaG9zdEVsZTogYW55LCBob3Jpem9uSG9zdEVsZT86IGFueSk6IFRpSG9zdExheW91dCB7XHJcbiAgICAgICAgbGV0IGhvcml6b25FbGUgPSBob3N0RWxlO1xyXG4gICAgICAgIGlmIChVdGlsLmlzRWxlbWVudChob3Jpem9uSG9zdEVsZSkpIHtcclxuICAgICAgICAgICAgaG9yaXpvbkVsZSA9IGhvcml6b25Ib3N0RWxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDkv67lpI1TU1LmiqXplJnvvJpFUlJPUiBUeXBlRXJyb3I6IGhvc3RFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIG5vdCBhIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8g5YWD57Sg55u45a+55LqOd2luZG93c+eahOS9jee9rlxyXG4gICAgICAgIGxldCB0b3A6IG51bWJlciA9ICh0eXBlb2YgaG9zdEVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpID09PSAnZnVuY3Rpb24nID8gaG9zdEVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgOiAwO1xyXG4gICAgICAgIGxldCBsZWZ0OiBudW1iZXIgPSAodHlwZW9mIGhvc3RFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSA9PT0gJ2Z1bmN0aW9uJyA/IGhvcml6b25FbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCA6IDA7XHJcbiAgICAgICAgLy8g5L+u5aSNU1NS5oql6ZSZ77yaRVJST1IgUmVmZXJlbmNlRXJyb3I6IGdldENvbXB1dGVkU3R5bGUgaXMgbm90IGRlZmluZWRcclxuICAgICAgICAvLyDkuIvpnaLliKnnlKhib2R555u45a+55LqOd2luZG93c+eahOS9jee9ru+8jOiuoeeul+WFg+e0oOebuOWvueS6jmJvZHnnmoTkvY3nva7jgIJcclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1udWxsLWtleXdvcmQgKi9cclxuICAgICAgICBjb25zdCBib2R5UG9zaXRvbjogc3RyaW5nID0gKHR5cGVvZiBnZXRDb21wdXRlZFN0eWxlID09PSAnZnVuY3Rpb24nKSA/IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSwgbnVsbCkucG9zaXRpb24gOiAnc3RhdGljJztcclxuICAgICAgICAvLyBib2R55pivc3RhdGljfHJlbGF0aXZlfGFic29sdXRlfGZpeGVk6YO95bey5rWL6K+V77yMQ2hyb21l6auY5L2O54mI5pysL0ZpcmVmb3gvSUUxMeW3sua1i+OAglxyXG4gICAgICAgIGlmIChib2R5UG9zaXRvbiA9PT0gJ3N0YXRpYycpIHsvLyBzdGF0aWPml7bvvIxib2R55a+5d2luZG935rKh5pyJ5YGP56e777yM5L2G5piv6ZyA6KaB6ICD6JmR6aG16Z2i5rua5Yqo5p2hXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdG9wICs9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICAgICAgICAgIGxlZnQgKz0gd2luZG93LnBhZ2VYT2Zmc2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmVsYXRpdmV8Zml4fGFic29sdXRl5pe277yM6ZyA6KaB6ICD6JmRYm9keeebuOWvueS6jndpbmRvd3PnmoTlgY/np7vjgIJcclxuICAgICAgICAgICAgdG9wIC09IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgICAgICAgICBsZWZ0IC09ICBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3AsXHJcbiAgICAgICAgICAgIGxlZnQsXHJcbiAgICAgICAgICAgIHdpZHRoOiBob3Jpem9uRWxlLm9mZnNldFdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhvc3RFbGUub2Zmc2V0SGVpZ2h0LFxyXG4gICAgICAgICAgICBpc0ZpeGVkOiB0aGlzLmlzRml4ZWRQb3MoaG9zdEVsZSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldEF2aWxhYmxlTGF5b3V0KGhvc3RMYXlvdXQ6IFRpSG9zdExheW91dCk6IFRpQXZpbGFibGVMYXlvdXQge1xyXG4gICAgICAgIC8vIOS/ruWkjeaKpemUme+8mkVSUk9SIFJlZmVyZW5jZUVycm9yOiBkb2N1bWVudCBpcyBub3QgZGVmaW5lZFxyXG4gICAgICAgIC8vIOW9k+WJjea1j+iniOWZqOWPr+inhuWMuuWfn+eahOWuvemrmFxyXG4gICAgICAgIGNvbnN0IGN1ckJyb3dzZVdpZHRoOiBudW1iZXIgPSAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggOiAwO1xyXG4gICAgICAgIGNvbnN0IGN1ckJyb3dzZWhlaWdodDogbnVtYmVyID0gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA6IDA7XHJcbiAgICAgICAgLy8g5YWD57Sg5L2N572u6Led5ZCE6YOo5YiG5L2N572uOlxyXG4gICAgICAgIC8vIDEu5Lul5YWD57Sg5Zub5Liq6L655Li66L6555WM77yM5LiK5LiL5bem5Y+z6aKE55WZ55qE5Y+v55So5a696auY77yM55SoYXZpbGFibGVMZWZ0562J5qCH6K+GXHJcbiAgICAgICAgLy8gMi7ljrvmjonlhYPntKDnmoTlrr3pq5jljaDkvY3vvIzorqHnrpfnmoTmnIDlpKflj6/nlKjlrr3pq5jvvIznlKhhdmlsYWJsZU1heC4uLuagh+ivhlxyXG4gICAgICAgIC8vIOS/ruWkjVNTUumUmeivr++8mkVSUk9SIFJlZmVyZW5jZUVycm9yOiBwYWdlWE9mZnNldCBpcyBub3QgZGVmaW5lZFxyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlTGVmdDogbnVtYmVyID0gaG9zdExheW91dC5sZWZ0IC0gKCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cucGFnZVhPZmZzZXQgOiAwKTtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZU1heExlZnQ6IG51bWJlciA9IGF2aWxhYmxlTGVmdCArIGhvc3RMYXlvdXQud2lkdGg7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVSaWdodDogbnVtYmVyID0gY3VyQnJvd3NlV2lkdGggLSBhdmlsYWJsZU1heExlZnQ7XHJcbiAgICAgICAgY29uc3QgYXZpbGFibGVNYXhSaWdodDogbnVtYmVyID0gY3VyQnJvd3NlV2lkdGggLSBhdmlsYWJsZUxlZnQ7XHJcbiAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3DlrZjlnKjmtY/op4jlmajlt67lvILvvIxjaHJvbWXpq5jkvY7niYjmnKzooajnjrDkuI3lkIzjgIJcclxuICAgICAgICBjb25zdCBhdmlsYWJsZVRvcDogbnVtYmVyID0gaG9zdExheW91dC50b3AgLSAoKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IDApOyAvLyBwYWdlWU9mZnNldOaUr+aMgUlFOeS7peS4iuOAglxyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlTWF4VG9wOiBudW1iZXIgPSBhdmlsYWJsZVRvcCArIGhvc3RMYXlvdXQuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGF2aWxhYmxlQm90dG9tOiBudW1iZXIgPSBjdXJCcm93c2VoZWlnaHQgLSBhdmlsYWJsZU1heFRvcDtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZU1heEJvdHRvbTogbnVtYmVyID0gY3VyQnJvd3NlaGVpZ2h0IC0gYXZpbGFibGVUb3A7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IGF2aWxhYmxlTGVmdCxcclxuICAgICAgICAgICAgbWF4TGVmdDogYXZpbGFibGVNYXhMZWZ0LFxyXG4gICAgICAgICAgICByaWdodDogYXZpbGFibGVSaWdodCxcclxuICAgICAgICAgICAgbWF4UmlnaHQ6IGF2aWxhYmxlTWF4UmlnaHQsXHJcbiAgICAgICAgICAgIHRvcDogYXZpbGFibGVUb3AsXHJcbiAgICAgICAgICAgIG1heFRvcDogYXZpbGFibGVNYXhUb3AsXHJcbiAgICAgICAgICAgIGJvdHRvbTogYXZpbGFibGVCb3R0b20sXHJcbiAgICAgICAgICAgIG1heEJvdHRvbTogYXZpbGFibGVNYXhCb3R0b20sXHJcbiAgICAgICAgICAgIGNsaWVudEhlaWdodDogY3VyQnJvd3NlaGVpZ2h0LFxyXG4gICAgICAgICAgICBjbGllbnRXaWR0aDogY3VyQnJvd3NlV2lkdGhcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8g56Gu5a6a5YWD57Sg5piv5ZCm5Li6Zml4ZWTlrprkvY1cclxuICAgIHByaXZhdGUgc3RhdGljIGlzRml4ZWRQb3MoZWxlOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIWVsZSB8fCBlbGUubm9kZU5hbWUgPT09ICdIVE1MJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS/ruWkjVNTUuaKpemUme+8mkVSUk9SIFJlZmVyZW5jZUVycm9yOiBnZXRDb21wdXRlZFN0eWxlIGlzIG5vdCBkZWZpbmVkXHJcbiAgICAgICAgaWYgKHR5cGVvZiBnZXRDb21wdXRlZFN0eWxlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKGVsZSkucG9zaXRpb24gPT09ICdmaXhlZCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc0ZpeGVkUG9zKGVsZS5wYXJlbnROb2RlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIGdldExheW91dFBhcmFtKGxheW91dDogVGlQb3NpdGlvbkxheW91dCwgcG9zaXRpb246IHN0cmluZywgaG9zdFNwYWNlOiBudW1iZXIsIGJyb3dzZXJTcGFjZTogbnVtYmVyLCBoYXNPZmZzZXRGaXg6IGJvb2xlYW4pOiBUaUxheW91dFBhcmFtcyB7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25BcnI6IEFycmF5PHN0cmluZz4gPSBwb3NpdGlvbi5zcGxpdCgnLScpOyAvLyDot5/kuIrpnaLpnZnmgIHlj5jph4/ph43lkI0s5pyA5aW95pS55LiA5LiLXHJcbiAgICAgICAgY29uc3QgbGVmdDogbnVtYmVyID0gUG9zaXRpb24uZ2V0SG9yaXppb25QYXJhbShsYXlvdXQsIHBvc2l0aW9uQXJyLCBob3N0U3BhY2UsIGhhc09mZnNldEZpeCk7XHJcbiAgICAgICAgY29uc3QgdmVydGljYWxQYXJhbTogVGlWZXJ0aWNhbFBhcmFtcyA9IFBvc2l0aW9uLmdldFZlcnRpY2FsUGFyYW0obGF5b3V0LCBwb3NpdGlvbkFyciwgaG9zdFNwYWNlLCBicm93c2VyU3BhY2UsIGhhc09mZnNldEZpeCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogdmVydGljYWxQYXJhbS50b3AsXHJcbiAgICAgICAgICAgIGF2aWxhYmxlSGVpZ2h0OiB2ZXJ0aWNhbFBhcmFtLmF2aWxhYmxlSGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIGdldEhvcml6aW9uUGFyYW0oY3VyTGF5b3V0OiBUaVBvc2l0aW9uTGF5b3V0LCBwb3NBcnI6IEFycmF5PHN0cmluZz4sIHNwYWNlOiBudW1iZXIsIGhhc09mZnNldEZpeDogYm9vbGVhbik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgaG9zdExheW91dDogVGlIb3N0TGF5b3V0ID0gY3VyTGF5b3V0Lmhvc3RMYXlvdXQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0TGF5b3V0OiBUaUVsZUxheW91dCA9IGN1ckxheW91dC50YXJnZXRMYXlvdXQ7XHJcblxyXG4gICAgICAgIC8vIOWumuS9jeWBj+W3ruiwg+aVtOmHj++8iOivpeWBj+W3rumHj+mSiOWvuei+g+Wwj+WFg+e0oO+8jOS/neivgSB0aXAg55qE566t5aS05Zyo6KKr5o+Q56S65YWD57Sg55qE5Lit6Ze077yJXHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaGFzT2Zmc2V0Rml4ID8gdGhpcy5nZXRPZmZzZXRGaXhWYWwoY3VyTGF5b3V0Lmhvc3RMYXlvdXQud2lkdGgpIDogMDtcclxuXHJcbiAgICAgICAgLy8gJ2xlZnQnLCAnbGVmdC10b3AnLCAnbGVmdC1ib3R0b20nXHJcbiAgICAgICAgaWYgKHBvc0FyclswXSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBob3N0TGF5b3V0LmxlZnQgLSB0YXJnZXRMYXlvdXQud2lkdGggLSBzcGFjZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gJ3JpZ2h0JywgJ3JpZ2h0LXRvcCcsICdyaWdodC1ib3R0b20nXHJcbiAgICAgICAgaWYgKHBvc0FyclswXSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gaG9zdExheW91dC5sZWZ0ICsgaG9zdExheW91dC53aWR0aCArIHNwYWNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAndG9wLWxlZnQnLCAnYm90dG9tLWxlZnQnXHJcbiAgICAgICAgaWYgKHBvc0FyclsxXSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBob3N0TGF5b3V0LmxlZnQgLSBvZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vICd0b3AtcmlnaHQnLCAnYm90dG9tLXJpZ2h0J1xyXG4gICAgICAgIGlmIChwb3NBcnJbMV0gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhvc3RMYXlvdXQubGVmdCArIGhvc3RMYXlvdXQud2lkdGggLSB0YXJnZXRMYXlvdXQud2lkdGggKyBvZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAndG9wJywgJ2JvdHRvbScsICdjZW50ZXInXHJcbiAgICAgICAgcmV0dXJuIGhvc3RMYXlvdXQubGVmdCAtICh0YXJnZXRMYXlvdXQud2lkdGggLSBob3N0TGF5b3V0LndpZHRoKSAvIDI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRWZXJ0aWNhbFBhcmFtKGN1ckxheW91dDogVGlQb3NpdGlvbkxheW91dCwgcG9zQXJyOiBBcnJheTxzdHJpbmc+LCBob3N0U3BhY2U6IG51bWJlciwgYnJvd3NlclNwYWNlOiBudW1iZXIsIGhhc09mZnNldEZpeDogYm9vbGVhbik6XHJcbiAgICBUaVZlcnRpY2FsUGFyYW1zIHtcclxuICAgICAgICBjb25zdCBhdmlsYWJsZUxheW91dDogVGlBdmlsYWJsZUxheW91dCA9IGN1ckxheW91dC5hdmlsYWJsZUxheW91dDsgLy8g5a6/5Li75YWD57Sg5a+55bqU55qE5Y+v55So5L2N572u5Y+C5pWwXHJcbiAgICAgICAgY29uc3QgaG9zdEhlaWdodDogbnVtYmVyID0gY3VyTGF5b3V0Lmhvc3RMYXlvdXQuaGVpZ2h0OyAvLyDlrr/kuLvlhYPntKDmnKzouqvpq5jluqZcclxuICAgICAgICBjb25zdCB0YXJnZXRMYXlvdXQ6IFRpRWxlTGF5b3V0ID0gY3VyTGF5b3V0LnRhcmdldExheW91dDtcclxuICAgICAgICBjb25zdCBob3N0TGF5b3V0OiBUaUhvc3RMYXlvdXQgPSBjdXJMYXlvdXQuaG9zdExheW91dDtcclxuXHJcbiAgICAgICAgLy8g5a6a5L2N5YGP5beu6LCD5pW06YeP77yI6K+l5YGP5beu6YeP6ZKI5a+56L6D5bCP5YWD57Sg77yM5L+d6K+BIHRpcCDnmoTnrq3lpLTlnKjooqvmj5DnpLrlhYPntKDnmoTkuK3pl7TvvIlcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSBoYXNPZmZzZXRGaXggPyB0aGlzLmdldE9mZnNldEZpeFZhbChjdXJMYXlvdXQuaG9zdExheW91dC5oZWlnaHQpIDogMDtcclxuXHJcbiAgICAgICAgLy8g57q15ZCR5Y+v55So6auY5bqm5piv5qC55o2u5L2N572u5LitdG9w44CBYm90dG9t44CB5bGF5Lit5oOF5Ya16L+b6KGM55qE5aSE55CGLOWboOatpCzmraTlpITlhYjlsIZwb3NpdGlvbui/m+ihjOWIhuWJsu+8jOWGjeagueaNruWFtuaDheWGtei/m+ihjOWPr+eUqOmrmOW6puiuoeeul1xyXG4gICAgICAgIC8vIOW8ueWHuuWFg+e0oOS4i+i+uee6v+S4juWuv+S4u+WFg+e0oOS4iui+uee6v+ebuOaOpeWQju+8jOW8ueWHuuWFg+e0oOWQkeS4iuW7tuS8uOaDheWGte+8jOWvueW6lOS9jee9ruWMheWQqyd0b3AnLCAndG9wLWxlZnQnLCAndG9wLXJpZ2h0J1xyXG4gICAgICAgIGlmIChwb3NBcnJbMF0gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2aWxhYmxlSGVpZ2h0OiBudW1iZXIgPSBhdmlsYWJsZUxheW91dC50b3AgLSBob3N0U3BhY2UgLSBicm93c2VyU3BhY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcDogbnVtYmVyID0gKGF2aWxhYmxlSGVpZ2h0ID49IHRhcmdldExheW91dC5oZWlnaHQpID9cclxuICAgICAgICAgICAgICAgIChob3N0TGF5b3V0LnRvcCAtIHRhcmdldExheW91dC5oZWlnaHQgLSBob3N0U3BhY2UpIDpcclxuICAgICAgICAgICAgICAgIChob3N0TGF5b3V0LnRvcCAtIGF2aWxhYmxlTGF5b3V0LnRvcCArIGJyb3dzZXJTcGFjZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYXZpbGFibGVIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB0b3BcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5by55Ye65YWD57Sg5LiK6L6557q/5LiO5a6/5Li75YWD57Sg5LiL6L6557q/55u45o6l5ZCO77yM5by55Ye65YWD57Sg5ZCR5LiL5bu25Ly45oOF5Ya177yM5a+55bqU5L2N572u5YyF5ZCrJ2JvdHRvbScsICdib3R0b20tbGVmdCcsICdib3R0b20tcmlnaHQnXHJcbiAgICAgICAgaWYgKHBvc0FyclswXSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGF2aWxhYmxlSGVpZ2h0OiBhdmlsYWJsZUxheW91dC5ib3R0b20gLSBob3N0U3BhY2UgLSBicm93c2VyU3BhY2UsXHJcbiAgICAgICAgICAgICAgICB0b3A6IGhvc3RMYXlvdXQudG9wICsgaG9zdExheW91dC5oZWlnaHQgKyBob3N0U3BhY2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5by55Ye65YWD57Sg5LiK6L6557q/5LiO5a6/5Li75YWD57Sg5LiK6L6557q/5a+56b2Q5oOF5Ya177yM5a+55bqU5L2N572u5YyF5ZCrJ2xlZnQtdG9wJywgJ3JpZ2h0LXRvcCdcclxuICAgICAgICBpZiAocG9zQXJyWzFdID09PSAndG9wJykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYXZpbGFibGVIZWlnaHQ6IGF2aWxhYmxlTGF5b3V0LmJvdHRvbSArIGhvc3RIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB0b3A6IGhvc3RMYXlvdXQudG9wIC0gb2Zmc2V0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOW8ueWHuuWFg+e0oOS4iui+uee6v+S4juWuv+S4u+WFg+e0oOS4i+i+uee6v+Wvuem9kOaDheWGte+8jOWvueW6lOS9jee9ruWMheWQqydyaWdodC1ib3R0b20nLCAnbGVmdC1ib3R0b20nXHJcbiAgICAgICAgaWYgKHBvc0FyclsxXSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGF2aWxhYmxlSGVpZ2h0OiBhdmlsYWJsZUxheW91dC50b3AgKyBob3N0SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgdG9wOiBob3N0TGF5b3V0LnRvcCArIGhvc3RMYXlvdXQuaGVpZ2h0IC0gdGFyZ2V0TGF5b3V0LmhlaWdodCArIG9mZnNldFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5by55Ye65YWD57Sg5Lit57q/5LiO5a6/5Li75YWD57Sg5Lit57q/5a+56b2Q5oOF5Ya177yM5a+55bqU5L2N572u5YyF5ZCrJ2xlZnQnLCAncmlnaHQnLCAnY2VudGVyJ1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGF2aWxhYmxlSGVpZ2h0OiBhdmlsYWJsZUxheW91dC5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgICAgIHRvcDogaG9zdExheW91dC50b3AgLSAodGFyZ2V0TGF5b3V0LmhlaWdodCAtIGhvc3RMYXlvdXQuaGVpZ2h0KSAvIDJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8g6I635Y+W5a6a5L2N5YGP5beu6LCD5pW06YePXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRPZmZzZXRGaXhWYWwoaG9zdExheW91dFNpemU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGhvc3RMYXlvdXRTaXplIC8gMiA8IFBvc2l0aW9uLkFEQVBUSVZFX1NJWkUgP1xyXG4gICAgICAgICAgICBQb3NpdGlvbi5BREFQVElWRV9TSVpFIC0gaG9zdExheW91dFNpemUgLyAyIDogMDtcclxuICAgIH1cclxufVxyXG4iXX0=