/* eslint-disable no-cond-assign */
// 另，angular也有brower-util.ts，但是没有对浏览器版本号的判断。
/*
 * 浏览器类型的枚举定义。字符串枚举，提供了运行时可读性。
 */
/* export enum Browser {  // export是为了不成为全局定义。此文件存在2个export
    EDGE = 'EDGE',
    IE = 'IE',
    FIREFOX = 'FIREFOX',
    CHROME = 'CHROME',
    OPERA = 'OPERA',
    SAFARI = 'SAFARI',
    OTHER = 'OTHER'
} */
/**
 * BrowserInfo浏览器工具类，提供浏览器类别和版本信息
 *
 * 浏览器的类型及版本信息
 *
 * <h3>示例</h3>
 * <iframe src="../tiny3demo/#/utils/browser-basic" frameborder='0' width="100%" onload="this.height = document.documentElement.clientHeight"></iframe>
 */
export class TiBrowser {
    /**
     * 浏览器类型
     * @returns 返回枚举型浏览器类型字符串
     */
    static browser() {
        TiBrowser.init();
        return TiBrowser._browser;
    }
    /**
     * 浏览器版本
     */
    static version() {
        TiBrowser.init();
        return TiBrowser._version;
    }
    /**
     * 是否Edge
     */
    static isEdge() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.EDGE;
    }
    /**
     * 是否IE
     */
    static isIE() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.IE;
    }
    /**
     * 是否Firefox
     */
    static isFirefox() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.FIREFOX;
    }
    /**
     * 是否Chrome
     */
    static isChrome() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.CHROME;
    }
    /**
     * 是否Opera
     */
    static isOpera() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.OPERA;
    }
    /**
     * 是否Safari
     */
    static isSafari() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.SAFARI;
    }
    /**
     * 是否Other
     */
    static isOther() {
        TiBrowser.init();
        return TiBrowser.browser() === TiBrowser.OTHER;
    }
    static init() {
        if (TiBrowser.isInit) { // 如果已经初始化，那么返回
            return;
        }
        // 浏览器判断，已支持SSR
        const userAgent = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase() : '';
        let aAgentInfo;
        // tslint:disable-next-line:no-conditional-assignment
        (aAgentInfo = userAgent.match(/edge\/([\d.]+)/)) ? TiBrowser._browser = TiBrowser.EDGE :
            // tslint:disable-next-line:no-conditional-assignment
            (aAgentInfo = userAgent.match(/rv:([\d.]+)\) like gecko/)) ? TiBrowser._browser = TiBrowser.IE :
                // tslint:disable-next-line:no-conditional-assignment
                (aAgentInfo = userAgent.match(/msie ([\d.]+)/)) ? TiBrowser._browser = TiBrowser.IE :
                    // tslint:disable-next-line:no-conditional-assignment
                    (aAgentInfo = userAgent.match(/firefox\/([\d.]+)/)) ? TiBrowser._browser = TiBrowser.FIREFOX :
                        // tslint:disable-next-line:no-conditional-assignment
                        (aAgentInfo = userAgent.match(/chrome\/([\d.]+)/)) ? TiBrowser._browser = TiBrowser.CHROME :
                            // tslint:disable-next-line:no-conditional-assignment
                            (aAgentInfo = userAgent.match(/opera.([\d.]+)/)) ? TiBrowser._browser = TiBrowser.OPERA :
                                // tslint:disable-next-line:no-conditional-assignment
                                (aAgentInfo = userAgent.match(/version\/([\d.]+).*safari/)) ? TiBrowser._browser = TiBrowser.SAFARI :
                                    TiBrowser._browser = TiBrowser.OTHER;
        // 版本号取整
        TiBrowser._version = (aAgentInfo !== null) ? parseInt(aAgentInfo[1].split('.')[0], 10) : 0;
        // 改变初始化值
        TiBrowser.isInit = true;
    }
}
/**
 * EDGE浏览器字符串
 */
TiBrowser.EDGE = 'EDGE';
/**
 * IE浏览器字符串
 */
TiBrowser.IE = 'IE';
/**
 * FIREFOX浏览器字符串
 */
TiBrowser.FIREFOX = 'FIREFOX';
/**
 * CHROME浏览器字符串
 */
TiBrowser.CHROME = 'CHROME';
/**
 * OPERA浏览器字符串
 */
TiBrowser.OPERA = 'OPERA';
/**
 * SAFARI浏览器字符串
 */
TiBrowser.SAFARI = 'SAFARI';
/**
 * OTHER浏览器字符串
 */
TiBrowser.OTHER = 'OTHER';
TiBrowser._browser = TiBrowser.OTHER;
TiBrowser._version = 0; // 浏览器的大版本号，整数。取第一个小数点前
TiBrowser.isInit = false;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlCcm93c2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL3V0aWxzL1RpQnJvd3Nlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQ0FBbUM7QUFDbkMsNENBQTRDO0FBRTVDOztHQUVHO0FBQ0g7Ozs7Ozs7O0lBUUk7QUFFSjs7Ozs7OztHQU9HO0FBQ0gsTUFBTSxPQUFPLFNBQVM7SUFrQ2xCOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVqQixPQUFPLFNBQVMsQ0FBQyxRQUFRLENBQUM7SUFDOUIsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLE9BQU87UUFDakIsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRWpCLE9BQU8sU0FBUyxDQUFDLFFBQVEsQ0FBQztJQUM5QixDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLENBQUMsTUFBTTtRQUNoQixTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFakIsT0FBTyxTQUFTLENBQUMsT0FBTyxFQUFFLEtBQUssU0FBUyxDQUFDLElBQUksQ0FBQztJQUNsRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSSxNQUFNLENBQUMsSUFBSTtRQUNkLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVqQixPQUFPLFNBQVMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxTQUFTLENBQUMsRUFBRSxDQUFDO0lBQ2hELENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxTQUFTO1FBQ25CLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVqQixPQUFPLFNBQVMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxTQUFTLENBQUMsT0FBTyxDQUFDO0lBQ3JELENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxRQUFRO1FBQ2xCLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVqQixPQUFPLFNBQVMs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QUFDLENBQUMsQ0FBQztRQUMzRixTQUFTO1FBQ1QsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDNUIsQ0FBQzs7QUFySUQ7O0dBRUc7QUFDb0IsY0FBSSxHQUFXLE1BQU0sQ0FBQztBQUM3Qzs7R0FFRztBQUNvQixZQUFFLEdBQVcsSUFBSSxDQUFDO0FBQ3pDOztHQUVHO0FBQ29CLGlCQUFPLEdBQVcsU0FBUyxDQUFDO0FBQ25EOztHQUVHO0FBQ29CLGdCQUFNLEdBQVcsUUFBUSxDQUFDO0FBQ2pEOztHQUVHO0FBQ29CLGVBQUssR0FBVyxPQUFPLENBQUM7QUFDL0M7O0dBRUc7QUFDb0IsZ0JBQU0sR0FBVyxRQUFRLENBQUM7QUFDakQ7O0dBRUc7QUFDb0IsZUFBSyxHQUFXLE9BQU8sQ0FBQztBQUVoQyxrQkFBUSxHQUFXLFNBQVMsQ0FBQyxLQUFLLENBQUM7QUFDbkMsa0JBQVEsR0FBVyxDQUFDLENBQUMsQ0FBRSx1QkFBdUI7QUFDOUMsZ0JBQU0sR0FBWSxLQUFLLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xyXG4vLyDlj6bvvIxhbmd1bGFy5Lmf5pyJYnJvd2VyLXV0aWwudHPvvIzkvYbmmK/msqHmnInlr7nmtY/op4jlmajniYjmnKzlj7fnmoTliKTmlq3jgIJcclxuXHJcbi8qXHJcbiAqIOa1j+iniOWZqOexu+Wei+eahOaemuS4vuWumuS5ieOAguWtl+espuS4suaemuS4vu+8jOaPkOS+m+S6hui/kOihjOaXtuWPr+ivu+aAp+OAglxyXG4gKi9cclxuLyogZXhwb3J0IGVudW0gQnJvd3NlciB7ICAvLyBleHBvcnTmmK/kuLrkuobkuI3miJDkuLrlhajlsYDlrprkuYnjgILmraTmlofku7blrZjlnKgy5LiqZXhwb3J0XHJcbiAgICBFREdFID0gJ0VER0UnLFxyXG4gICAgSUUgPSAnSUUnLFxyXG4gICAgRklSRUZPWCA9ICdGSVJFRk9YJyxcclxuICAgIENIUk9NRSA9ICdDSFJPTUUnLFxyXG4gICAgT1BFUkEgPSAnT1BFUkEnLFxyXG4gICAgU0FGQVJJID0gJ1NBRkFSSScsXHJcbiAgICBPVEhFUiA9ICdPVEhFUidcclxufSAqL1xyXG5cclxuLyoqXHJcbiAqIEJyb3dzZXJJbmZv5rWP6KeI5Zmo5bel5YW357G777yM5o+Q5L6b5rWP6KeI5Zmo57G75Yir5ZKM54mI5pys5L+h5oGvXHJcbiAqXHJcbiAqIOa1j+iniOWZqOeahOexu+Wei+WPiueJiOacrOS/oeaBr1xyXG4gKlxyXG4gKiA8aDM+56S65L6LPC9oMz5cclxuICogPGlmcmFtZSBzcmM9XCIuLi90aW55M2RlbW8vIy91dGlscy9icm93c2VyLWJhc2ljXCIgZnJhbWVib3JkZXI9JzAnIHdpZHRoPVwiMTAwJVwiIG9ubG9hZD1cInRoaXMuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFwiPjwvaWZyYW1lPlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRpQnJvd3NlciB7XHJcbiAgICAvKipcclxuICAgICAqIEVER0XmtY/op4jlmajlrZfnrKbkuLJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBFREdFOiBzdHJpbmcgPSAnRURHRSc7XHJcbiAgICAvKipcclxuICAgICAqIElF5rWP6KeI5Zmo5a2X56ym5LiyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSUU6IHN0cmluZyA9ICdJRSc7XHJcbiAgICAvKipcclxuICAgICAqIEZJUkVGT1jmtY/op4jlmajlrZfnrKbkuLJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBGSVJFRk9YOiBzdHJpbmcgPSAnRklSRUZPWCc7XHJcbiAgICAvKipcclxuICAgICAqIENIUk9NRea1j+iniOWZqOWtl+espuS4slxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENIUk9NRTogc3RyaW5nID0gJ0NIUk9NRSc7XHJcbiAgICAvKipcclxuICAgICAqIE9QRVJB5rWP6KeI5Zmo5a2X56ym5LiyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT1BFUkE6IHN0cmluZyA9ICdPUEVSQSc7XHJcbiAgICAvKipcclxuICAgICAqIFNBRkFSSea1j+iniOWZqOWtl+espuS4slxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNBRkFSSTogc3RyaW5nID0gJ1NBRkFSSSc7XHJcbiAgICAvKipcclxuICAgICAqIE9USEVS5rWP6KeI5Zmo5a2X56ym5LiyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT1RIRVI6IHN0cmluZyA9ICdPVEhFUic7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2Jyb3dzZXI6IHN0cmluZyA9IFRpQnJvd3Nlci5PVEhFUjtcclxuICAgIHByaXZhdGUgc3RhdGljIF92ZXJzaW9uOiBudW1iZXIgPSAwOyAgLy8g5rWP6KeI5Zmo55qE5aSn54mI5pys5Y+377yM5pW05pWw44CC5Y+W56ys5LiA5Liq5bCP5pWw54K55YmNXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpc0luaXQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOa1j+iniOWZqOexu+Wei1xyXG4gICAgICogQHJldHVybnMg6L+U5Zue5p6a5Li+5Z6L5rWP6KeI5Zmo57G75Z6L5a2X56ym5LiyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYnJvd3NlcigpOiBzdHJpbmcge1xyXG4gICAgICAgIFRpQnJvd3Nlci5pbml0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBUaUJyb3dzZXIuX2Jyb3dzZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa1j+iniOWZqOeJiOacrFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHZlcnNpb24oKTogbnVtYmVyIHtcclxuICAgICAgICBUaUJyb3dzZXIuaW5pdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gVGlCcm93c2VyLl92ZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKZFZGdlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNFZGdlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIFRpQnJvd3Nlci5pbml0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBUaUJyb3dzZXIuYnJvd3NlcigpID09PSBUaUJyb3dzZXIuRURHRTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCmSUVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0lFKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIFRpQnJvd3Nlci5pbml0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBUaUJyb3dzZXIuYnJvd3NlcigpID09PSBUaUJyb3dzZXIuSUU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpkZpcmVmb3hcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0ZpcmVmb3goKTogYm9vbGVhbiB7XHJcbiAgICAgICAgVGlCcm93c2VyLmluaXQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFRpQnJvd3Nlci5icm93c2VyKCkgPT09IFRpQnJvd3Nlci5GSVJFRk9YO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKZDaHJvbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0Nocm9tZSgpOiBib29sZWFuIHtcclxuICAgICAgICBUaUJyb3dzZXIuaW5pdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gVGlCcm93c2VyLmJyb3dzZXIoKSA9PT0gVGlCcm93c2VyLkNIUk9NRTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCmT3BlcmFcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc09wZXJhKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIFRpQnJvd3Nlci5pbml0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBUaUJyb3dzZXIuYnJvd3NlcigpID09PSBUaUJyb3dzZXIuT1BFUkE7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQplNhZmFyaVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzU2FmYXJpKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIFRpQnJvd3Nlci5pbml0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBUaUJyb3dzZXIuYnJvd3NlcigpID09PSBUaUJyb3dzZXIuU0FGQVJJO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKZPdGhlclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzT3RoZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgVGlCcm93c2VyLmluaXQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFRpQnJvd3Nlci5icm93c2VyKCkgPT09IFRpQnJvd3Nlci5PVEhFUjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbml0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChUaUJyb3dzZXIuaXNJbml0KSB7Ly8g5aaC5p6c5bey57uP5Yid5aeL5YyW77yM6YKj5LmI6L+U5ZueXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5rWP6KeI5Zmo5Yik5pat77yM5bey5pSv5oyBU1NSXHJcbiAgICAgICAgY29uc3QgdXNlckFnZW50OiBzdHJpbmcgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTonJztcclxuICAgICAgICBsZXQgYUFnZW50SW5mbzogQXJyYXk8YW55PnxudWxsO1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XHJcbiAgICAgICAgKGFBZ2VudEluZm8gPSB1c2VyQWdlbnQubWF0Y2goL2VkZ2VcXC8oW1xcZC5dKykvKSkgPyBUaUJyb3dzZXIuX2Jyb3dzZXIgPSBUaUJyb3dzZXIuRURHRSA6XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbmRpdGlvbmFsLWFzc2lnbm1lbnRcclxuICAgICAgICAoYUFnZW50SW5mbyA9IHVzZXJBZ2VudC5tYXRjaCgvcnY6KFtcXGQuXSspXFwpIGxpa2UgZ2Vja28vKSkgPyBUaUJyb3dzZXIuX2Jyb3dzZXIgPSBUaUJyb3dzZXIuSUUgOlxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XHJcbiAgICAgICAgKGFBZ2VudEluZm8gPSB1c2VyQWdlbnQubWF0Y2goL21zaWUgKFtcXGQuXSspLykpID8gVGlCcm93c2VyLl9icm93c2VyID0gVGlCcm93c2VyLklFIDpcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxyXG4gICAgICAgIChhQWdlbnRJbmZvID0gdXNlckFnZW50Lm1hdGNoKC9maXJlZm94XFwvKFtcXGQuXSspLykpID8gVGlCcm93c2VyLl9icm93c2VyID0gVGlCcm93c2VyLkZJUkVGT1ggOlxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XHJcbiAgICAgICAgKGFBZ2VudEluZm8gPSB1c2VyQWdlbnQubWF0Y2goL2Nocm9tZVxcLyhbXFxkLl0rKS8pKSA/IFRpQnJvd3Nlci5fYnJvd3NlciA9IFRpQnJvd3Nlci5DSFJPTUUgOlxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XHJcbiAgICAgICAgKGFBZ2VudEluZm8gPSB1c2VyQWdlbnQubWF0Y2goL29wZXJhLihbXFxkLl0rKS8pKSA/IFRpQnJvd3Nlci5fYnJvd3NlciA9IFRpQnJvd3Nlci5PUEVSQSA6XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbmRpdGlvbmFsLWFzc2lnbm1lbnRcclxuICAgICAgICAoYUFnZW50SW5mbyA9IHVzZXJBZ2VudC5tYXRjaCgvdmVyc2lvblxcLyhbXFxkLl0rKS4qc2FmYXJpLykpID8gVGlCcm93c2VyLl9icm93c2VyID0gVGlCcm93c2VyLlNBRkFSSSA6XHJcbiAgICAgICAgVGlCcm93c2VyLl9icm93c2VyID0gVGlCcm93c2VyLk9USEVSO1xyXG4gICAgICAgIC8vIOeJiOacrOWPt+WPluaVtFxyXG4gICAgICAgIFRpQnJvd3Nlci5fdmVyc2lvbiA9IChhQWdlbnRJbmZvICE9PSBudWxsKSA/IHBhcnNlSW50KGFBZ2VudEluZm9bMV0uc3BsaXQoJy4nKVswXSwgMTApIDogMDtcclxuICAgICAgICAvLyDmlLnlj5jliJ3lp4vljJblgLxcclxuICAgICAgICBUaUJyb3dzZXIuaXNJbml0ID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4iXX0=