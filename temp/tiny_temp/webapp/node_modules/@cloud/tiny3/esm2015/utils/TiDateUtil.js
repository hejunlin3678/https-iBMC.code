/**
 * @ignore
 */
export class TiDateUtil {
    /**
     * 日期类组件的默认最小值
     */
    static minDate() {
        return new Date(1970, 0, 1, 0, 0, 0);
    }
    /**
     * 日期类组件的默认最大值
     */
    static maxDate() {
        return new Date(2099, 11, 31, 23, 59, 59);
    }
    /**
     * 判断是不是合法的时间对象
     */
    static isDate(date) {
        // tslint:disable-next-line:triple-equals
        if (Object.prototype.toString.call(date) === '[object Date]' && String(date) !== 'Invalid Date') {
            return true;
        }
        return false;
    }
    /**
     * @description 最大值时分秒置为23:59:59。
     * 原因：date或者dateRange组件中，如果用户动态设置的value为最大年月日并带有时分秒，而设置的maxValue时分秒比较小时，
     * 校验该value是否小于或等于最大值时，会出错。
     * @param maxValue 最大值
     */
    static changeMaxTime(maxValue) {
        if (!TiDateUtil.isDate(maxValue)) {
            return TiDateUtil.maxDate();
        }
        return new Date(maxValue.getFullYear(), maxValue.getMonth(), maxValue.getDate(), 23, 59, 59);
    }
    /**
     * @description 最小值时分秒置为0:0:0。
     * 原因：date或者dateRange组件中，如果用户设置的minValue带有时分秒，这时动态更新value为最小值年月日并时分秒为很小时，会出错。
     * @param minValue 最小值
     * @returns Date
     */
    static changeMinTime(minValue) {
        if (!TiDateUtil.isDate(minValue)) {
            return TiDateUtil.minDate();
        }
        return new Date(minValue.getFullYear(), minValue.getMonth(), minValue.getDate(), 0, 0, 0);
    }
    /**
     * @description 判断两个日期是不是相等：只包括年月日
     * @param newValue 新值
     * @param oldValue 旧值
     */
    static isDateEqual(newValue, oldValue) {
        if (newValue === oldValue) {
            return true;
        }
        // 当两个value都是Date类型时，要判断两个值的年月日是否相等，直接用‘===’判断不准确
        if (TiDateUtil.isDate(newValue) && TiDateUtil.isDate(oldValue)) {
            // 转换成年月日，然后重新生成一个Date，再将其转换成毫秒数进行判断
            const newDate = new Date(newValue.getFullYear(), newValue.getMonth(), newValue.getDate());
            const oldDate = new Date(oldValue.getFullYear(), oldValue.getMonth(), oldValue.getDate());
            if (newDate.getTime() === oldDate.getTime()) {
                return true;
            }
        }
        return false;
    }
    /**
     * @description 判断两个时间日期是不是相等；
     * @param newValue 新值
     * @param oldValue 旧值
     */
    static isDatetimeEqual(newValue, oldValue) {
        if (newValue === oldValue) {
            return true;
        }
        if (TiDateUtil.isDate(newValue) && TiDateUtil.isDate(oldValue)) {
            if (newValue.getTime() === oldValue.getTime()) {
                return true;
            }
        }
        return false;
    }
    /**
     * @description 判断是不是合法的NowDateTime值
     * 存在nowDateTime值，并且是时间对象，且大于最小值小于最大值
     */
    static isValidNowDateTime(nowDateTime, min, max) {
        return nowDateTime && TiDateUtil.isDate(nowDateTime) &&
            (nowDateTime.getTime() >= min.getTime()) &&
            (nowDateTime.getTime() <= max.getTime());
    }
    /**
     * @description 判断value1是否大于value2
     */
    static isBigger(value1, value2) {
        return value1.getTime() > value2.getTime();
    }
    /**
     * @description 判断value1是否大于value2
     */
    static isBiggerOrEqual(value1, value2) {
        return value1.getTime() >= value2.getTime();
    }
    /**
     * @description 判断value1是否小于value2
     */
    static isSmaller(value1, value2) {
        return value1.getTime() < value2.getTime();
    }
    /**
     * @description 将Date类型的日期转换成年月日字符串
     * @param date 要进行转换的日期值
     */
    static getDateStr(date) {
        return `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;
    }
    /**
     * @description 将Date类型的日期转换成时分秒字符串
     * @param date 要进行转换的日期值
     */
    static getTimeStr(date) {
        const hour = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();
        const minute = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();
        const second = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();
        return `${hour}:${minute}:${second}`;
    }
    /**
     * @description 判断是不是一个合法的最大值
     * @param min 最小值
     * @param max 最大值
     */
    static isValidMaxValue(min, max) {
        return TiDateUtil.isDate(max) && (max.getTime() >= min.getTime());
    }
    /**
     * @description 判断是不是一个合法的最小值
     * @param min 最小值
     * @param max 最大值
     */
    static isValidMinValue(min, max) {
        return TiDateUtil.isDate(min) && (max.getTime() >= min.getTime());
    }
    /**
     * @description 是否在最大值最小值区间
     * @param min 最小值
     * @param max 最大值
     */
    static isBetweenMaxAndmin(value, min, max) {
        return (value.getTime() >= min.getTime()) && (value.getTime() <= max.getTime());
    }
    /**
     * @description  12小时制添加AMPM
     */
    static addAmPm(timeFormat) {
        if (timeFormat.match(/h/) && !timeFormat.match(/a/)) { // 已设置ampm格式情况下，不做处理
            return timeFormat + ' a'; // Angular 的datePipe 设置时间时，"a"代表AMPM
        }
        return timeFormat;
    }
    /**
     * @description: 若时间字符串没有一个冒号时处理成合法的事件字符串（加冒号）
     * @param value 时间字符串
     */
    static addColon(value) {
        if (value.match(/:/)) {
            return value;
        }
        const ampm = value.match(/am|AM|pm|PM/) || '';
        return `${parseInt(value, 10)}: ${ampm}`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlEYXRlVXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL0BjbG91ZC90aW55My91dGlscy9UaURhdGVVdGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBQ0gsTUFBTSxPQUFPLFVBQVU7SUFDbkI7O09BRUc7SUFDSSxNQUFNLENBQUMsT0FBTztRQUNqQixPQUFPLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBcUI7UUFDdEMseUNBQXlDO1FBQ3pDLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLGVBQWUsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssY0FBYyxFQUFFO1lBQzdGLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxNQUFNLENBQUMsYUFBYSxDQUFDLFFBQWM7UUFDdEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDOUIsT0FBTyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDL0I7UUFFRCxPQUFPLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQ3ZELFFBQVEsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFF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QUFNLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDL0MsQ0FBQztJQUVEOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBVTtRQUMvQixPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7SUFDNUUsQ0FBQztJQUVEOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBVTtRQUMvQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDNUUsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BGLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUVwRixPQUFPLEdBQUcsSUFBSSxJQUFJLE1BQU0sSUFBSSxNQUFNLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLE1BQU0sQ0FBQyxlQUFlLENBQUMsR0FBUyxFQUFFLEdBQVM7UUFDOUMsT0FBTyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLGVBQWUsQ0FBQyxHQUFTLEVBQUUsR0FBUztRQUM5QyxPQUFPLFVBQVUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsS0FBVyxFQUFFLEdBQVMsRUFBRSxHQUFTO1FBQzlELE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDcEYsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFrQjtRQUNwQyxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsb0JBQW9CO1lBQ3ZFLE9BQU8sVUFBVSxHQUFHLElBQUksQ0FBQyxDQUFDLG9DQUFvQztTQUNqRTtRQUVELE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQWE7UUFDaEMsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ2xCLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsTUFBTSxJQUFJLEdBQVEsS0FBSyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFbkQsT0FBTyxHQUFHLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7SUFDN0MsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBpZ25vcmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaURhdGVVdGlsIHtcclxuICAgIC8qKlxyXG4gICAgICog5pel5pyf57G757uE5Lu255qE6buY6K6k5pyA5bCP5YC8XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgbWluRGF0ZSgpOiBEYXRlIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoMTk3MCwgMCwgMSwgMCwgMCwgMCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaXpeacn+exu+e7hOS7tueahOm7mOiupOacgOWkp+WAvFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIG1heERhdGUoKTogRGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKDIwOTksIDExLCAzMSwgMjMsIDU5LCA1OSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+S4jeaYr+WQiOazleeahOaXtumXtOWvueixoVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzRGF0ZShkYXRlOiBvYmplY3QgfCBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dHJpcGxlLWVxdWFsc1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGF0ZSkgPT09ICdbb2JqZWN0IERhdGVdJyAmJiBTdHJpbmcoZGF0ZSkgIT09ICdJbnZhbGlkIERhdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOacgOWkp+WAvOaXtuWIhuenkue9ruS4ujIzOjU5OjU544CCXHJcbiAgICAgKiDljp/lm6DvvJpkYXRl5oiW6ICFZGF0ZVJhbmdl57uE5Lu25Lit77yM5aaC5p6c55So5oi35Yqo5oCB6K6+572u55qEdmFsdWXkuLrmnIDlpKflubTmnIjml6XlubbluKbmnInml7bliIbnp5LvvIzogIzorr7nva7nmoRtYXhWYWx1ZeaXtuWIhuenkuavlOi+g+Wwj+aXtu+8jFxyXG4gICAgICog5qCh6aqM6K+ldmFsdWXmmK/lkKblsI/kuo7miJbnrYnkuo7mnIDlpKflgLzml7bvvIzkvJrlh7rplJnjgIJcclxuICAgICAqIEBwYXJhbSBtYXhWYWx1ZSDmnIDlpKflgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjaGFuZ2VNYXhUaW1lKG1heFZhbHVlOiBEYXRlKTogRGF0ZSB7XHJcbiAgICAgICAgaWYgKCFUaURhdGVVdGlsLmlzRGF0ZShtYXhWYWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRpRGF0ZVV0aWwubWF4RGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG1heFZhbHVlLmdldEZ1bGxZZWFyKCksIG1heFZhbHVlLmdldE1vbnRoKCksXHJcbiAgICAgICAgICAgIG1heFZhbHVlLmdldERhdGUoKSwgMjMsIDU5LCA1OSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5pyA5bCP5YC85pe25YiG56eS572u5Li6MDowOjDjgIJcclxuICAgICAqIOWOn+WboO+8mmRhdGXmiJbogIVkYXRlUmFuZ2Xnu4Tku7bkuK3vvIzlpoLmnpznlKjmiLforr7nva7nmoRtaW5WYWx1ZeW4puacieaXtuWIhuenku+8jOi/meaXtuWKqOaAgeabtOaWsHZhbHVl5Li65pyA5bCP5YC85bm05pyI5pel5bm25pe25YiG56eS5Li65b6I5bCP5pe277yM5Lya5Ye66ZSZ44CCXHJcbiAgICAgKiBAcGFyYW0gbWluVmFsdWUg5pyA5bCP5YC8XHJcbiAgICAgKiBAcmV0dXJucyBEYXRlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2hhbmdlTWluVGltZShtaW5WYWx1ZTogRGF0ZSk6IERhdGUge1xyXG4gICAgICAgIGlmICghVGlEYXRlVXRpbC5pc0RhdGUobWluVmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUaURhdGVVdGlsLm1pbkRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShtaW5WYWx1ZS5nZXRGdWxsWWVhcigpLCBtaW5WYWx1ZS5nZXRNb250aCgpLFxyXG4gICAgICAgICAgICBtaW5WYWx1ZS5nZXREYXRlKCksIDAsIDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOWIpOaWreS4pOS4quaXpeacn+aYr+S4jeaYr+ebuOetie+8muWPquWMheaLrOW5tOaciOaXpVxyXG4gICAgICogQHBhcmFtIG5ld1ZhbHVlIOaWsOWAvFxyXG4gICAgICogQHBhcmFtIG9sZFZhbHVlIOaXp+WAvFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzRGF0ZUVxdWFsKG5ld1ZhbHVlOiBEYXRlLCBvbGRWYWx1ZTogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlvZPkuKTkuKp2YWx1ZemDveaYr0RhdGXnsbvlnovml7bvvIzopoHliKTmlq3kuKTkuKrlgLznmoTlubTmnIjml6XmmK/lkKbnm7jnrYnvvIznm7TmjqXnlKjigJg9PT3igJnliKTmlq3kuI3lh4bnoa5cclxuICAgICAgICBpZiAoVGlEYXRlVXRpbC5pc0RhdGUobmV3VmFsdWUpICYmIFRpRGF0ZVV0aWwuaXNEYXRlKG9sZFZhbHVlKSkge1xyXG4gICAgICAgICAgICAvLyDovazmjaLmiJDlubTmnIjml6XvvIznhLblkI7ph43mlrDnlJ/miJDkuIDkuKpEYXRl77yM5YaN5bCG5YW26L2s5o2i5oiQ5q+r56eS5pWw6L+b6KGM5Yik5patXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0RhdGU6IERhdGUgPSBuZXcgRGF0ZShuZXdWYWx1ZS5nZXRGdWxsWWVhcigpLCBuZXdWYWx1ZS5nZXRNb250aCgpLCBuZXdWYWx1ZS5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGREYXRlOiBEYXRlID0gbmV3IERhdGUob2xkVmFsdWUuZ2V0RnVsbFllYXIoKSwgb2xkVmFsdWUuZ2V0TW9udGgoKSwgb2xkVmFsdWUuZ2V0RGF0ZSgpKTtcclxuICAgICAgICAgICAgaWYgKG5ld0RhdGUuZ2V0VGltZSgpID09PSBvbGREYXRlLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliKTmlq3kuKTkuKrml7bpl7Tml6XmnJ/mmK/kuI3mmK/nm7jnrYnvvJtcclxuICAgICAqIEBwYXJhbSBuZXdWYWx1ZSDmlrDlgLxcclxuICAgICAqIEBwYXJhbSBvbGRWYWx1ZSDml6flgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0RhdGV0aW1lRXF1YWwobmV3VmFsdWU6IERhdGUsIG9sZFZhbHVlOiBEYXRlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChUaURhdGVVdGlsLmlzRGF0ZShuZXdWYWx1ZSkgJiYgVGlEYXRlVXRpbC5pc0RhdGUob2xkVmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZS5nZXRUaW1lKCkgPT09IG9sZFZhbHVlLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliKTmlq3mmK/kuI3mmK/lkIjms5XnmoROb3dEYXRlVGltZeWAvFxyXG4gICAgICog5a2Y5Zyobm93RGF0ZVRpbWXlgLzvvIzlubbkuJTmmK/ml7bpl7Tlr7nosaHvvIzkuJTlpKfkuo7mnIDlsI/lgLzlsI/kuo7mnIDlpKflgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc1ZhbGlkTm93RGF0ZVRpbWUobm93RGF0ZVRpbWU6IERhdGUsIG1pbjogRGF0ZSwgbWF4OiBEYXRlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIG5vd0RhdGVUaW1lICYmIFRpRGF0ZVV0aWwuaXNEYXRlKG5vd0RhdGVUaW1lKSAmJlxyXG4gICAgICAgICAgICAgICAgKG5vd0RhdGVUaW1lLmdldFRpbWUoKSA+PSBtaW4uZ2V0VGltZSgpKSAmJlxyXG4gICAgICAgICAgICAgICAgKG5vd0RhdGVUaW1lLmdldFRpbWUoKSA8PSBtYXguZ2V0VGltZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliKTmlq12YWx1ZTHmmK/lkKblpKfkuo52YWx1ZTJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0JpZ2dlcih2YWx1ZTE6IERhdGUsIHZhbHVlMjogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTEuZ2V0VGltZSgpID4gdmFsdWUyLmdldFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliKTmlq12YWx1ZTHmmK/lkKblpKfkuo52YWx1ZTJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0JpZ2dlck9yRXF1YWwodmFsdWUxOiBEYXRlLCB2YWx1ZTI6IERhdGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUxLmdldFRpbWUoKSA+PSB2YWx1ZTIuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOWIpOaWrXZhbHVlMeaYr+WQpuWwj+S6jnZhbHVlMlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzU21hbGxlcih2YWx1ZTE6IERhdGUsIHZhbHVlMjogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTEuZ2V0VGltZSgpIDwgdmFsdWUyLmdldFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDlsIZEYXRl57G75Z6L55qE5pel5pyf6L2s5o2i5oiQ5bm05pyI5pel5a2X56ym5LiyXHJcbiAgICAgKiBAcGFyYW0gZGF0ZSDopoHov5vooYzovazmjaLnmoTml6XmnJ/lgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXREYXRlU3RyKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LyR7ZGF0ZS5nZXRNb250aCgpICsgMX0vJHtkYXRlLmdldERhdGUoKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOWwhkRhdGXnsbvlnovnmoTml6XmnJ/ovazmjaLmiJDml7bliIbnp5LlrZfnrKbkuLJcclxuICAgICAqIEBwYXJhbSBkYXRlIOimgei/m+ihjOi9rOaNoueahOaXpeacn+WAvFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFRpbWVTdHIoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IGRhdGUuZ2V0SG91cnMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRIb3VycygpIDogZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldFNlY29uZHMoKSA6IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG5cclxuICAgICAgICByZXR1cm4gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5Yik5pat5piv5LiN5piv5LiA5Liq5ZCI5rOV55qE5pyA5aSn5YC8XHJcbiAgICAgKiBAcGFyYW0gbWluIOacgOWwj+WAvFxyXG4gICAgICogQHBhcmFtIG1heCDmnIDlpKflgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpc1ZhbGlkTWF4VmFsdWUobWluOiBEYXRlLCBtYXg6IERhdGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gVGlEYXRlVXRpbC5pc0RhdGUobWF4KSAmJiAobWF4LmdldFRpbWUoKSA+PSBtaW4uZ2V0VGltZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliKTmlq3mmK/kuI3mmK/kuIDkuKrlkIjms5XnmoTmnIDlsI/lgLxcclxuICAgICAqIEBwYXJhbSBtaW4g5pyA5bCP5YC8XHJcbiAgICAgKiBAcGFyYW0gbWF4IOacgOWkp+WAvFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzVmFsaWRNaW5WYWx1ZShtaW46IERhdGUsIG1heDogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBUaURhdGVVdGlsLmlzRGF0ZShtaW4pICYmIChtYXguZ2V0VGltZSgpID49IG1pbi5nZXRUaW1lKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOaYr+WQpuWcqOacgOWkp+WAvOacgOWwj+WAvOWMuumXtFxyXG4gICAgICogQHBhcmFtIG1pbiDmnIDlsI/lgLxcclxuICAgICAqIEBwYXJhbSBtYXgg5pyA5aSn5YC8XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNCZXR3ZWVuTWF4QW5kbWluKHZhbHVlOiBEYXRlLCBtaW46IERhdGUsIG1heDogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodmFsdWUuZ2V0VGltZSgpID49IG1pbi5nZXRUaW1lKCkpICYmICh2YWx1ZS5nZXRUaW1lKCkgPD0gbWF4LmdldFRpbWUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gIDEy5bCP5pe25Yi25re75YqgQU1QTVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZEFtUG0odGltZUZvcm1hdDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGltZUZvcm1hdC5tYXRjaCgvaC8pICYmICF0aW1lRm9ybWF0Lm1hdGNoKC9hLykpIHsgLy8g5bey6K6+572uYW1wbeagvOW8j+aDheWGteS4i++8jOS4jeWBmuWkhOeQhlxyXG4gICAgICAgICAgICByZXR1cm4gdGltZUZvcm1hdCArICcgYSc7IC8vIEFuZ3VsYXIg55qEZGF0ZVBpcGUg6K6+572u5pe26Ze05pe277yMXCJhXCLku6PooahBTVBNXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGltZUZvcm1hdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6Iul5pe26Ze05a2X56ym5Liy5rKh5pyJ5LiA5Liq5YaS5Y+35pe25aSE55CG5oiQ5ZCI5rOV55qE5LqL5Lu25a2X56ym5Liy77yI5Yqg5YaS5Y+377yJXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg5pe26Ze05a2X56ym5LiyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkQ29sb24odmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHZhbHVlLm1hdGNoKC86LykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYW1wbTogYW55ID0gdmFsdWUubWF0Y2goL2FtfEFNfHBtfFBNLykgfHwgJyc7XHJcblxyXG4gICAgICAgIHJldHVybiBgJHtwYXJzZUludCh2YWx1ZSwgMTApfTogJHthbXBtfWA7XHJcbiAgICB9XHJcbn1cclxuIl19