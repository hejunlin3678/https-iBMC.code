import { Util } from '../../../utils/Util';
import { TiPwdMsgComponent } from '../TiPwdMsgComponent';
import { BlurCheck } from './BlurCheck';
import { TiValidationDefaultConfig } from '../TiValidationConfig';
/**
 * @ignore
 */
export class PwdCheck extends BlurCheck {
    constructor(config, common) {
        super(config, common);
        this.config = config;
        this.common = common;
        const pwdConfig = this.config && this.config.passwordConfig;
        // 设置参数，用于规则提示组件数据组装
        this._setValidator(pwdConfig);
        this._setMsgItems();
        this._setLevelFn(pwdConfig);
    }
    onFocus(ele, formControl) {
        // 由于密码组件需要依赖于其他输入框，因此在focus时需要更新其状态
        formControl.control.updateValueAndValidity();
        super.onFocus(ele, formControl);
    }
    // 设置validator params和msg
    _setValidator(pwdConfig) {
        let pwdValidator = TiValidationDefaultConfig.pwdValidator;
        if (pwdConfig && pwdConfig.validator) { // validator定义情况下,处理validator
            const pwdValidatorConfig = pwdConfig.validator;
            if (Util.isUndefined(pwdValidatorConfig.rule) ||
                pwdValidatorConfig.rule === pwdValidator.rule) { // 依然使用默认规则情况下,只做参数合并
                pwdValidator = {
                    params: Object.assign(Object.assign({}, pwdValidator.params), pwdValidatorConfig.params),
                    message: Object.assign(Object.assign({}, pwdValidator.message), pwdValidatorConfig.message)
                };
            }
            else {
                pwdValidator = {
                    params: pwdValidatorConfig.params,
                    message: pwdValidatorConfig.message
                };
            }
        }
        this.validator = pwdValidator;
    }
    // 设置msgItems,msgItems数据格式为:{ruleKey: msgStr,...}
    // 其中msgStr为格式化后的页面可显示字串
    _setMsgItems() {
        const validatorConfig = this.validator;
        const msgConfig = validatorConfig.message;
        const paramsConfig = validatorConfig.params;
        let msgStr;
        const msgItems = {};
        // msgConfig中定义的规则提示才会在页面中显示
        for (const key in msgConfig) {
            if (msgConfig.hasOwnProperty(key)) {
                // 规则提示优先从config中读取,如果读取到的是无效字串,则从国际化默认配置中读取
                msgStr = msgConfig[key] || this.common.getMsg(key);
                // 如果对应的规则有参数的情况下,则根据参数做字串格式化
                if (paramsConfig && paramsConfig.hasOwnProperty(key)) {
                    msgStr = Util.formatEntry(msgStr, paramsConfig[key]);
                }
                msgItems[key] = msgStr;
            }
        }
        this.msgItems = msgItems;
    }
    // 设置levelFn:levelFn支持业务自定义
    _setLevelFn(pwdConfig) {
        let levelFn = TiValidationDefaultConfig.pwdLevelFn;
        if (pwdConfig && Util.isFunction(pwdConfig.levelFn)) {
            levelFn = pwdConfig.levelFn;
        }
        this.levelFn = levelFn;
    }
    addTip(ele, validationConf, formControl) {
        this.commonHandle.destroyTip(ele); // 清除先前提示信息
        const inputsObj = {
            msgItems: this.msgItems,
            validator: this.validator,
            control: formControl,
            levelFn: this.levelFn
        };
        // tip默认值设置
        const configAssigned = Object.assign({ tipPosition: TiValidationDefaultConfig.pwdTipPostion, tipMaxWidth: TiValidationDefaultConfig.pwdTipMaxWidth }, validationConf);
        this.common.generateTip(ele, TiPwdMsgComponent, configAssigned, inputsObj);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHdkQ2hlY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueTMvZGlyZWN0aXZlcy92YWxpZGF0aW9uL2NoZWNrSGFuZGxlL1B3ZENoZWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMzQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRXhDLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBTWxFOztHQUVHO0FBQ0gsTUFBTSxPQUFPLFFBQVMsU0FBUSxTQUFTO0lBSW5DLFlBQW9CLE1BQTBCLEVBQVUsTUFBVztRQUMvRCxLQUFLLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRE4sV0FBTSxHQUFOLE1BQU0sQ0FBb0I7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFLO1FBRS9ELE1BQU0sU0FBUyxHQUFRLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUM7UUFDakUsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVELE9BQU8sQ0FBQyxHQUFlLEVBQUUsV0FBc0I7UUFDM0Msb0NBQW9DO1FBQ3BDLFdBQVcsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUM3QyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQseUJBQXlCO0lBQ2pCLGFBQWEsQ0FBQyxTQUFjO1FBQ2hDLElB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Q0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDL0UsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL1V0aWwnO1xyXG5pbXBvcnQgeyBUaVB3ZE1zZ0NvbXBvbmVudCB9IGZyb20gJy4uL1RpUHdkTXNnQ29tcG9uZW50JztcclxuaW1wb3J0IHsgQmx1ckNoZWNrIH0gZnJvbSAnLi9CbHVyQ2hlY2snO1xyXG5pbXBvcnQgeyBDaGVja0hhbmRsZSB9IGZyb20gJy4vQ2hlY2tIYW5kbGUnO1xyXG5pbXBvcnQgeyBUaVZhbGlkYXRpb25EZWZhdWx0Q29uZmlnIH0gZnJvbSAnLi4vVGlWYWxpZGF0aW9uQ29uZmlnJztcclxuaW1wb3J0IHsgVGlQYXNzd29yZFZhbGlkYXRvckNvbmZpZywgVGlWYWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vVGlWYWxpZGF0aW9uSW50ZXJmYWNlJztcclxuLyogdHNsaW50OmRpc2FibGU6bm8taW1wbGljaXQtZGVwZW5kZW5jaWVzICovXHJcbmltcG9ydCB7IE5nQ29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgRWxlbWVudFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuLyoqXHJcbiAqIEBpZ25vcmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBQd2RDaGVjayBleHRlbmRzIEJsdXJDaGVjayBpbXBsZW1lbnRzIENoZWNrSGFuZGxlIHtcclxuICAgIHByaXZhdGUgbXNnSXRlbXM6IGFueTtcclxuICAgIHByaXZhdGUgdmFsaWRhdG9yOiBUaVBhc3N3b3JkVmFsaWRhdG9yQ29uZmlnO1xyXG4gICAgcHJpdmF0ZSBsZXZlbEZuOiAodmFsdWU6IHN0cmluZywgdmFsaWRhdG9yOiBUaVBhc3N3b3JkVmFsaWRhdG9yQ29uZmlnKSA9PiB2b2lkO1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IFRpVmFsaWRhdGlvbkNvbmZpZywgcHJpdmF0ZSBjb21tb246IGFueSkge1xyXG4gICAgICAgIHN1cGVyKGNvbmZpZywgY29tbW9uKTtcclxuICAgICAgICBjb25zdCBwd2RDb25maWc6IGFueSA9IHRoaXMuY29uZmlnICYmIHRoaXMuY29uZmlnLnBhc3N3b3JkQ29uZmlnO1xyXG4gICAgICAgIC8vIOiuvue9ruWPguaVsO+8jOeUqOS6juinhOWImeaPkOekuue7hOS7tuaVsOaNrue7hOijhVxyXG4gICAgICAgIHRoaXMuX3NldFZhbGlkYXRvcihwd2RDb25maWcpO1xyXG4gICAgICAgIHRoaXMuX3NldE1zZ0l0ZW1zKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0TGV2ZWxGbihwd2RDb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRm9jdXMoZWxlOiBFbGVtZW50UmVmLCBmb3JtQ29udHJvbDogTmdDb250cm9sKTogdm9pZCB7XHJcbiAgICAgICAgLy8g55Sx5LqO5a+G56CB57uE5Lu26ZyA6KaB5L6d6LWW5LqO5YW25LuW6L6T5YWl5qGG77yM5Zug5q2k5ZyoZm9jdXPml7bpnIDopoHmm7TmlrDlhbbnirbmgIFcclxuICAgICAgICBmb3JtQ29udHJvbC5jb250cm9sLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcclxuICAgICAgICBzdXBlci5vbkZvY3VzKGVsZSwgZm9ybUNvbnRyb2wpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiuvue9rnZhbGlkYXRvciBwYXJhbXPlkoxtc2dcclxuICAgIHByaXZhdGUgX3NldFZhbGlkYXRvcihwd2RDb25maWc6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBwd2RWYWxpZGF0b3I6IGFueSA9IFRpVmFsaWRhdGlvbkRlZmF1bHRDb25maWcucHdkVmFsaWRhdG9yO1xyXG4gICAgICAgIGlmIChwd2RDb25maWcgJiYgcHdkQ29uZmlnLnZhbGlkYXRvcikgey8vIHZhbGlkYXRvcuWumuS5ieaDheWGteS4iyzlpITnkIZ2YWxpZGF0b3JcclxuICAgICAgICAgICAgY29uc3QgcHdkVmFsaWRhdG9yQ29uZmlnOiBUaVBhc3N3b3JkVmFsaWRhdG9yQ29uZmlnID0gcHdkQ29uZmlnLnZhbGlkYXRvcjtcclxuICAgICAgICAgICAgaWYgKFV0aWwuaXNVbmRlZmluZWQocHdkVmFsaWRhdG9yQ29uZmlnLnJ1bGUpIHx8XHJcbiAgICAgICAgICAgICAgICBwd2RWYWxpZGF0b3JDb25maWcucnVsZSA9PT0gcHdkVmFsaWRhdG9yLnJ1bGUpIHsgLy8g5L6d54S25L2/55So6buY6K6k6KeE5YiZ5oOF5Ya15LiLLOWPquWBmuWPguaVsOWQiOW5tlxyXG4gICAgICAgICAgICAgICAgcHdkVmFsaWRhdG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogey4uLnB3ZFZhbGlkYXRvci5wYXJhbXMsIC4uLnB3ZFZhbGlkYXRvckNvbmZpZy5wYXJhbXN9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHsuLi5wd2RWYWxpZGF0b3IubWVzc2FnZSwgLi4ucHdkVmFsaWRhdG9yQ29uZmlnLm1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHdkVmFsaWRhdG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogcHdkVmFsaWRhdG9yQ29uZmlnLnBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBwd2RWYWxpZGF0b3JDb25maWcubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbGlkYXRvciA9IHB3ZFZhbGlkYXRvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDorr7nva5tc2dJdGVtcyxtc2dJdGVtc+aVsOaNruagvOW8j+S4ujp7cnVsZUtleTogbXNnU3RyLC4uLn1cclxuICAgIC8vIOWFtuS4rW1zZ1N0cuS4uuagvOW8j+WMluWQjueahOmhtemdouWPr+aYvuekuuWtl+S4slxyXG4gICAgcHJpdmF0ZSBfc2V0TXNnSXRlbXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yQ29uZmlnOiBUaVBhc3N3b3JkVmFsaWRhdG9yQ29uZmlnID0gdGhpcy52YWxpZGF0b3I7XHJcbiAgICAgICAgY29uc3QgbXNnQ29uZmlnOiBhbnkgPSB2YWxpZGF0b3JDb25maWcubWVzc2FnZTtcclxuICAgICAgICBjb25zdCBwYXJhbXNDb25maWc6IGFueSA9IHZhbGlkYXRvckNvbmZpZy5wYXJhbXM7XHJcbiAgICAgICAgbGV0IG1zZ1N0cjogc3RyaW5nO1xyXG4gICAgICAgIGNvbnN0IG1zZ0l0ZW1zOiBhbnkgPSB7fTtcclxuICAgICAgICAvLyBtc2dDb25maWfkuK3lrprkuYnnmoTop4TliJnmj5DnpLrmiY3kvJrlnKjpobXpnaLkuK3mmL7npLpcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtc2dDb25maWcpIHtcclxuICAgICAgICAgICAgaWYgKG1zZ0NvbmZpZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDop4TliJnmj5DnpLrkvJjlhYjku45jb25maWfkuK3or7vlj5Ys5aaC5p6c6K+75Y+W5Yiw55qE5piv5peg5pWI5a2X5LiyLOWImeS7juWbvemZheWMlum7mOiupOmFjee9ruS4reivu+WPllxyXG4gICAgICAgICAgICAgICAgbXNnU3RyID0gbXNnQ29uZmlnW2tleV0gfHwgdGhpcy5jb21tb24uZ2V0TXNnKGtleSk7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlr7nlupTnmoTop4TliJnmnInlj4LmlbDnmoTmg4XlhrXkuIss5YiZ5qC55o2u5Y+C5pWw5YGa5a2X5Liy5qC85byP5YyWXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zQ29uZmlnICYmIHBhcmFtc0NvbmZpZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXNnU3RyID0gVXRpbC5mb3JtYXRFbnRyeShtc2dTdHIsIHBhcmFtc0NvbmZpZ1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1zZ0l0ZW1zW2tleV0gPSBtc2dTdHI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tc2dJdGVtcyA9IG1zZ0l0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiuvue9rmxldmVsRm46bGV2ZWxGbuaUr+aMgeS4muWKoeiHquWumuS5iVxyXG4gICAgcHJpdmF0ZSBfc2V0TGV2ZWxGbihwd2RDb25maWc6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBsZXZlbEZuOiAodmFsdWU6IHN0cmluZywgdmFsaWRhdG9yOiBUaVBhc3N3b3JkVmFsaWRhdG9yQ29uZmlnKSA9PiB2b2lkID0gVGlWYWxpZGF0aW9uRGVmYXVsdENvbmZpZy5wd2RMZXZlbEZuO1xyXG4gICAgICAgIGlmIChwd2RDb25maWcgJiYgVXRpbC5pc0Z1bmN0aW9uKHB3ZENvbmZpZy5sZXZlbEZuKSkge1xyXG4gICAgICAgICAgICBsZXZlbEZuID0gcHdkQ29uZmlnLmxldmVsRm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGV2ZWxGbiA9IGxldmVsRm47XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkVGlwKGVsZTogRWxlbWVudFJlZiwgdmFsaWRhdGlvbkNvbmY6IFRpVmFsaWRhdGlvbkNvbmZpZywgZm9ybUNvbnRyb2w6IE5nQ29udHJvbCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29tbW9uSGFuZGxlLmRlc3Ryb3lUaXAoZWxlKTsgLy8g5riF6Zmk5YWI5YmN5o+Q56S65L+h5oGvXHJcbiAgICAgICAgY29uc3QgaW5wdXRzT2JqOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIG1zZ0l0ZW1zOiB0aGlzLm1zZ0l0ZW1zLFxyXG4gICAgICAgICAgICB2YWxpZGF0b3I6IHRoaXMudmFsaWRhdG9yLFxyXG4gICAgICAgICAgICBjb250cm9sOiBmb3JtQ29udHJvbCxcclxuICAgICAgICAgICAgbGV2ZWxGbjogdGhpcy5sZXZlbEZuXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB0aXDpu5jorqTlgLzorr7nva5cclxuICAgICAgICBjb25zdCBjb25maWdBc3NpZ25lZDogVGlWYWxpZGF0aW9uRGVmYXVsdENvbmZpZyA9IHtcclxuICAgICAgICAgICAgdGlwUG9zaXRpb246IFRpVmFsaWRhdGlvbkRlZmF1bHRDb25maWcucHdkVGlwUG9zdGlvbixcclxuICAgICAgICAgICAgdGlwTWF4V2lkdGg6IFRpVmFsaWRhdGlvbkRlZmF1bHRDb25maWcucHdkVGlwTWF4V2lkdGgsXHJcbiAgICAgICAgICAgIC4uLnZhbGlkYXRpb25Db25mfTtcclxuICAgICAgICB0aGlzLmNvbW1vbi5nZW5lcmF0ZVRpcChlbGUsIFRpUHdkTXNnQ29tcG9uZW50LCBjb25maWdBc3NpZ25lZCwgaW5wdXRzT2JqKTtcclxuICAgIH1cclxufVxyXG4iXX0=