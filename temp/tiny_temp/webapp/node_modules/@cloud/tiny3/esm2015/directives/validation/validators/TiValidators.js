/* eslint-disable no-eq-null */
/* eslint-disable eqeqeq */
/* tslint:disable:no-implicit-dependencies */
import { Validators } from '@angular/forms';
import { Util } from '../../../utils/Util';
import { TiPwdConfig } from '../checkHandle/TiPwdConfig';
// 下面注释，可以避免编译lib时正则报错。原理未知，副作用未知。
// @dynamic
/**
 * Tiny封装的常用校验规则及校验方法
 *
 * ### 规则使用
 * **提供了两种使用方式：**
 *
 * 1.静态方法：通过TiValidators.XXX（规则名）在JS中定义
 *
 * 2.指令方式：对应规则的指令名为tiXXX(规则名首字母大写)，如required规则的指令名为 tiRequired
 *
 * **支持的校验规则如下：**
 *
 * | 规则名称    |  配置参数意义/类型   |  规则描述  |
 * | --------   | :-----   | :---- |
 * | required   | 无       |  为空校验    |
 * | maxLength    | 最大字符长度/number      |  字符长度最大值校验    |
 * | minLength    | 最小字符长度/number      |   字符长度最小值校验    |
 * | rangeSize    | 最小长度限制/number <br/> 最大长度限制/number      |   字符长度大小区间校验    |
 * | maxValue    | 最大数值/number      |  数字最大数值校验    |
 * | minValue    | 最小数值/number      |   数字最小数值校验    |
 * | rangeValue    | 最小数值限制/number <br/> 最大数值限制/number    |   数字大小区间校验    |
 * | regExp   | 正则表达式参数/RegExp|string（不包括正则表达式头尾标识符'^(?:'、')$'）       |  正则校验    |
 * | email    | 无      |  邮箱校验    |
 * | contains    | 包含的内容/(string/number)     |   包含校验    |
 * | notContains    | 不包含的内容/(string/number)      |   不包含校验    |
 * | equal   | 相等的内容/(string/number)     |  相等校验    |
 * | notEqual    | 不相等的内容/(string/number)    |  不相等校验    |
 * | notScript    | 无      |   包含script标签校验    |
 * | port    |  无     |   端口号校验，范围为0~65535    |
 * | date    | 无      |   日期类型校验    |
 * | url    |  无     |   url校验    |
 * | integer    | 无      |   整数校验    |
 * | number    |  无     |   数字校验 |
 * | digits    | 无      |   正整数校验    |
 * | ipv4    |  无     |   ipv4校验    |
 * | ipv6    |  无     |   ipv6校验    |
 * | minCharType | 1. 符合要求的字符种类/number;<br/>2. 字符集对象类型（可选）/{string:RegExp}。<br/>默认的字符种类分别为：大写字母、小写字母、数字、特殊字符`~!@#$%^&*()-_=+\\\|[{}];:\'\",<.>/?  和空格 | 符合最小字符种类校验，默认情况为至少包含2种字符类型`。  |
 * | notEqualPosRev    |  需要比对的表单formControl对象获取函数/ () => AbstractControl     |   不能和表单对象的正序或倒序相同    |
 * | password    | 密码校验各项规则参数/对象形式 |   密码校验   |
 *
 *
 *  **password规则的参数类型**
 *
 *    {
 *        rangeSize?: [number, number],
 *        minCharType?: [bumber, {
 *            digitsCharReg: RegExp,
 *            specialCharReg: RegExp,
 *            lowerCharReg: RegExp,
 *            upperCharReg: RegExp}],
 *        notEqualPosRev: () => AbstractControl
 *    }
 */
export class TiValidators {
    static isEmptyInputValue(value) {
        // we don't check for string here so it also works with arrays
        // tslint:disable-next-line:no-null-keyword
        return value == null || value.length === 0;
    }
    /**
     * @ignore
     */
    static required(control) {
        return Validators.required(control);
    }
    /**
     * @ignore
     */
    static maxLength(maxLength) {
        return (control) => {
            const length = control.value ? control.value.length : 0;
            return length > maxLength ?
                { maxLength: { requiredLength: maxLength, actualLength: length } } :
                null;
        };
    }
    /**
     * @ignore
     */
    static minLength(minLength) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value)) {
                return null; // don't validate empty values to allow optional controls
            }
            const length = control.value ? control.value.length : 0;
            return length < minLength ?
                { minLength: { requiredLength: minLength, actualLength: length } } :
                null;
        };
    }
    /**
     * @ignore
     */
    static rangeSize(minLength, maxLength) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value)) {
                return null; // don't validate empty values to allow optional controls
            }
            const length = control.value ? control.value.length : 0;
            return length > maxLength || length < minLength ?
                { rangeSize: { requiredMinLength: minLength, requiredMaxLength: maxLength, actualLength: length } } :
                null;
        };
    }
    /**
     * @ignore
     */
    static maxValue(max) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(max)) {
                return null; // don't validate empty values to allow optional controls
            }
            const value = parseFloat(control.value);
            // Controls with NaN values after parsing should be treated as not having a
            // maximum, per the HTML forms spec: https://www.w3.org/TR/html5/forms.html#attr-input-max
            return !isNaN(value) && value > max ? { maxValue: { requiredMaxValue: max, actual: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static minValue(min) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(min)) {
                return null; // don't validate empty values to allow optional controls
            }
            const value = parseFloat(control.value);
            // Controls with NaN values after parsing should be treated as not having a
            // maximum, per the HTML forms spec: https://www.w3.org/TR/html5/forms.html#attr-input-max
            return !isNaN(value) && value < min ? { minValue: { requiredMinValue: min, actual: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static rangeValue(min, max) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(min) || TiValidators.isEmptyInputValue(max)) {
                return null; // don't validate empty values to allow optional controls
            }
            const value = parseFloat(control.value);
            // Controls with NaN values after parsing should be treated as not having a
            // maximum, per the HTML forms spec: https://www.w3.org/TR/html5/forms.html#attr-input-max
            return !isNaN(value) && (value < min || value > max) ? { rangeValue: { requiredMinValue: min,
                    requiredMaxValue: max, actual: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static regExp(pattern) {
        if (!pattern) {
            return Validators.nullValidator;
        }
        let regex;
        let regexStr;
        if (typeof pattern === 'string') {
            regexStr = '';
            if (pattern.charAt(0) !== '^') {
                regexStr += '^';
            }
            regexStr += pattern;
            if (pattern.charAt(pattern.length - 1) !== '$') {
                regexStr += '$';
            }
            regex = new RegExp(regexStr);
        }
        else {
            regexStr = pattern.toString();
            regex = pattern;
        }
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value)) {
                return null; // don't validate empty values to allow optional controls
            }
            const value = control.value;
            return regex.test(value) ? null : { regExp: { requiredPattern: regexStr, actualValue: value } };
        };
    }
    /**
     * @ignore
     */
    static email(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.EMAIL_REGEXP.test(control.value) ? null : { email: true };
    }
    /**
     * @ignore
     */
    static contains(contain) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(contain)) {
                return null; // don't validate empty values to allow optional controls
            }
            return control.value.indexOf(contain) === -1 ?
                { contains: { requiredContains: contain, actualValue: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static notContains(contain) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(contain)) {
                return null; // don't validate empty values to allow optional controls
            }
            return control.value.indexOf(contain) !== -1 ?
                { notContains: { requiredNotContains: contain, actualValue: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static equal(equal) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(equal)) {
                return null; // don't validate empty values to allow optional controls
            }
            return control.value !== equal ?
                { equal: { requiredEqual: equal, actualValue: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static notEqual(equal) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(equal)) {
                return null; // don't validate empty values to allow optional controls
            }
            return control.value === equal ?
                { notEqual: { requiredNotEqual: equal, actualValue: control.value } } : null;
        };
    }
    /**
     * @ignore
     */
    static notScript(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.SCRIPT_REGEXP.test(control.value) ? { notScript: true } : null;
    }
    /**
     * @ignore
     */
    static port(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.DIGITS_REGEXP.test(control.value) && (control.value >= TiValidators.PORT_RANGE[0]) &&
            (control.value <= TiValidators.PORT_RANGE[1]) ?
            null : { port: { min: TiValidators.PORT_RANGE[0], max: TiValidators.PORT_RANGE[1] } };
    }
    /**
     * @ignore
     */
    static date(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return !/Invalid|NaN/.test(new Date(control.value).toString()) ?
            null : { date: true };
    }
    /**
     * @ignore
     */
    static url(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.URL_REGEXP.test(control.value) ?
            null : { url: true };
    }
    /**
     * @ignore
     */
    static integer(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.INTEGER_REGEXP.test(control.value) ?
            null : { integer: true };
    }
    /**
     * @ignore
     */
    static number(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.NUMBER_REGEXP.test(control.value) ?
            null : { number: true };
    }
    /**
     * @ignore
     */
    static digits(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.DIGITS_REGEXP.test(control.value) ?
            null : { digits: true };
    }
    /**
     * @ignore
     */
    static ipv4(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.IPV4_REGEXP.test(control.value) ?
            null : { ipv4: true };
    }
    /**
     * @ignore
     */
    static ipv6(control) {
        if (TiValidators.isEmptyInputValue(control.value)) {
            return null; // don't validate empty values to allow optional controls
        }
        return TiValidators.IPV6_REGEXP.test(control.value) ?
            null : { ipv6: true };
    }
    /**
     * @ignore
     * 密码字符类型最小种类校验
     * 用于密码校验，其规则如下：
     * 口令必须包含且只能包含如下至少两种字符的组合:
     * －至少一个小写字母；
     * －至少一个大写字母；
     * －至少一个数字；
     * －至少一个特殊字符：`~!@#$%^&*()-_=+\|[{}];:'",<.>/?和空格
     * @param  num 字符类型最小个数
     * @param  charTypeRegObj 字符类型校验正则表达式，涉及到强度计算，参考defaults中定义
     */
    static minCharType(num, charTypeRegObj) {
        /**
         * 正则表达式转为字符串并首尾去除“/”符号，为添加g修饰符做准备
         */
        function regExpToString(regExp) {
            if (typeof regExp !== 'object') {
                return '';
            }
            const regExpStr = String(regExp);
            return regExpStr.substring(1, regExpStr.length - 1);
        }
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || TiValidators.isEmptyInputValue(num) || num === 0) {
                return null; // don't validate empty values to allow optional controls
            }
            // 各类字符校验正则表达式集合,默认使用pwdConfig中的默认配置
            const charRegObj = typeof charTypeRegObj === 'object' ? charTypeRegObj :
                TiPwdConfig.pwdCharTypeRegObj;
            // 校验输入是否符合单条校验字符规则，并记录符合的单条规则个数
            let checkValidNum = 0; // 校验通过结果个数
            let checkResult; // 校验结果临时变量
            let replacedValue = control.value; // 正则替换后的value值
            for (const key in charRegObj) {
                if (charRegObj.hasOwnProperty(key)) {
                    const regExp = charRegObj[key];
                    checkResult = regExp.test(control.value);
                    if (checkResult) {
                        checkValidNum++;
                        // 使用全局替换方式，用于替换字串中所有符合正则规则的字符
                        replacedValue = regExp.global
                            ? replacedValue.replace(regExp, '')
                            : replacedValue.replace(new RegExp(regExpToString(regExp), 'g'), '');
                    }
                }
            }
            // 替换后的值非空情况:代表值中存在非法字符
            return replacedValue.length > 0 || checkValidNum < num ?
                { minCharType: true } : null;
        };
    }
    /**
     * @ignore
     * 用于密码校验：密码不能和用户名或其倒序相同
     * @param  getControlFn 获取对比的表单元素formControl函数
     */
    static notEqualPosRev(getControlFn) {
        return (control) => {
            if (TiValidators.isEmptyInputValue(control.value) || Util.isUndefined(getControlFn && getControlFn())) {
                return null; // don't validate empty values to allow optional controls
            }
            const value = control.value;
            const refreValue = getControlFn().value;
            // 使用如下方式会出现卡顿的情况：
            // 对比formControl value修改时，需要同步修改该表单的状态，否则会存在下次focus该元素或表单整体校验时
            // 该元素校验结果依然是上次的结果
            // getControlFn().valueChanges.subscribe(() => {
            //   control.updateValueAndValidity();
            // });
            return (value.toLowerCase() !== refreValue.split('')
                .reverse()
                .join('')
                .toLowerCase()) &&
                (value.toLowerCase() !== refreValue.toLowerCase()) ?
                null : { notEqualPosRev: true };
        };
    }
    /**
     * @ignore
     * 密码校验规则
     * @param pValue 规则参数:{ruleKey: param}
     */
    static password(pValue) {
        const rangeSizeParamArr = pValue.rangeSize || TiPwdConfig.pwdValidator.params.rangeSize;
        const minCharTypeParamArr = pValue.minCharType || TiPwdConfig.pwdValidator.params.minCharType;
        if (Util.isUndefined(minCharTypeParamArr[1])) {
            minCharTypeParamArr[1] = TiPwdConfig.pwdCharTypeRegObj;
        }
        const validatorComposeArr = [TiValidators.required,
            TiValidators.rangeSize(rangeSizeParamArr[0], rangeSizeParamArr[1]),
            TiValidators.minCharType(minCharTypeParamArr[0], minCharTypeParamArr[1]),
            TiValidators.notEqualPosRev(pValue.notEqualPosRev)];
        // 由于错误提示为password专有提示,需要自定义password error,而compose方法不能自定义,因此此处未使用compose
        // 此外,各子规则的错误依然需要保留,用于规则提示信息
        return (control) => {
            return _mergeErrorsPwd(_executeValidators(control, validatorComposeArr));
        };
        function _executeValidators(control, validators) {
            return validators.map((v) => v(control));
        }
        function _mergeErrorsPwd(arrayOfErrors) {
            const res = arrayOfErrors.reduce((resource, errors) => {
                return errors != null ? Object.assign(Object.assign({}, resource), errors) : resource;
            }, {});
            return Object.keys(res).length === 0 ? null : Object.assign({ password: true }, res);
        }
    }
    // 该方法用于整体校验:由于表单未foucs时,即使错误也不会显示红框,
    // 而整体校验时需要将错误的表单边框标红显示,因此需要显示调用整体校验方法
    /**
     * 该方法用于整体校验
     *
     * 参数form：需要校验的表单族
     *
     * 参数updateValueAndValidityConfig：可选，check方法内部使用的校验方法是AbstractControl的updateValueAndValidity方法，此处将方法参数开放给开发者，参数意义具体可参考https://angular.io/api/forms/AbstractControl#updatevalueandvalidity
     *
     * 返回：表单错误信息
     */
    static check(form, updateValueAndValidityConfig) {
        let errors = {};
        if (form.errors) {
            errors = Object.assign(Object.assign({}, errors), form.errors);
        }
        for (const key in form.controls) {
            if (form.controls.hasOwnProperty(key)) {
                const control = form.controls[key];
                if (control.controls) { // 嵌套的FormArray,FormGroup
                    const checkedErrors = TiValidators.check(control, updateValueAndValidityConfig);
                    if (checkedErrors !== null) {
                        errors[key] = checkedErrors;
                    }
                }
                else {
                    control.markAsTouched();
                    // 由于表单间可能有关联关系（如密码校验的notEqualPosRev，该关联关系需要对单个表单元素再次校验
                    control.updateValueAndValidity(updateValueAndValidityConfig);
                    // 读取errors信息
                    if (control.errors !== null) {
                        errors[key] = control.errors;
                    }
                }
            }
        }
        // 无errors信息时，设置为null，方便业务处理
        if (JSON.stringify(errors) === '{}') {
            errors = null;
        }
        return errors;
    }
}
/* tslint:disable:max-line-length */
TiValidators.EMAIL_REGEXP = /^((([A-Za-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([A-Za-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([A-Za-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([A-Za-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([A-Za-z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([A-Za-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([A-Za-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([A-Za-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([A-Za-z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([A-Za-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/;
TiValidators.SCRIPT_REGEXP = /<+\/?[Ss][Cc][Rr][Ii][Pp][Tt] *.*>*/;
TiValidators.DIGITS_REGEXP = /^\d+$/;
TiValidators.PORT_RANGE = [0, 65535];
// URL规则，其中IPv4部分，采用了下面华为自研的ipv4正则表达式
TiValidators.URL_REGEXP = /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;
TiValidators.INTEGER_REGEXP = /^-?\d+$/;
TiValidators.NUMBER_REGEXP = /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;
// 采用华为自研的ipv4正则表达式
TiValidators.IPV4_REGEXP = /^(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))$/i;
// 采用华为自研的ipv6正则表达式
TiValidators.IPV6_REGEXP = /^(((([\da-f]{1,4}):){7}([\da-f]{1,4}))|(((([\da-f]{1,4}):){1,7}:)|((([\da-f]{1,4}):){6}:([\da-f]{1,4}))|((([\da-f]{1,4}):){5}:(([\da-f]{1,4}):)?([\da-f]{1,4}))|((([\da-f]{1,4}):){4}:(([\da-f]{1,4}):){0,2}([\da-f]{1,4}))|((([\da-f]{1,4}):){3}:(([\da-f]{1,4}):){0,3}([\da-f]{1,4}))|((([\da-f]{1,4}):){2}:(([\da-f]{1,4}):){0,4}([\da-f]{1,4}))|((([\da-f]{1,4}):){1}:(([\da-f]{1,4}):){0,5}([\da-f]{1,4}))|(::(([\da-f]{1,4}):){0,6}([\da-f]{1,4}))|(::([\da-f]{1,4})?))|(((([\da-f]{1,4}):){6}(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|((([\da-f]{1,4}):){5}:(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|((([\da-f]{1,4}):){4}:(([\da-f]{1,4}):)?(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|((([\da-f]{1,4}):){3}:(([\da-f]{1,4}):){0,2}(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|((([\da-f]{1,4}):){2}:(([\da-f]{1,4}):){0,3}(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|(([\da-f]{1,4})::(([\da-f]{1,4}):){0,4}(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))|(::(([\da-f]{1,4}):){0,5}(((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5]))\.){3}((1?[1-9]?\d)|(10\d)|(2[0-4]\d)|(25[0-5])))))$/i;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlWYWxpZGF0b3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL2RpcmVjdGl2ZXMvdmFsaWRhdGlvbi92YWxpZGF0b3JzL1RpVmFsaWRhdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwrQkFBK0I7QUFDL0IsMkJBQTJCO0FBQzNCLDZDQUE2QztBQUM3QyxPQUFPLEVBQTZELFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3ZHLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDekQsa0NBQWtDO0FBQ2xDLFdBQVc7QUFDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW9ERztBQUNILE1BQU0sT0FBTyxZQUFZO0lBY2YsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEtBQVU7UUFDekMsOERBQThEO1FBQzlELDJDQUEyQztRQUMzQyxPQUFPLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUF3QjtRQUM3QyxPQUFPLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFpQjtRQUN2QyxPQUFPLENBQUMsT0FBd0IsRUFBMkIsRUFBRTtZQUMzRCxNQUFNLE1BQU0sR0FBVyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRWhFLE9BQU8sTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDO2dCQUN2QixFQUFD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SSxtQkFBbUI7QUFDSyx3QkFBVyxHQUFXLDAwQ0FBMDBDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1lcS1udWxsICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xyXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbXBsaWNpdC1kZXBlbmRlbmNpZXMgKi9cclxuaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sLCBGb3JtR3JvdXAsIFZhbGlkYXRpb25FcnJvcnMsIFZhbGlkYXRvckZuLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvVXRpbCc7XHJcbmltcG9ydCB7IFRpUHdkQ29uZmlnIH0gZnJvbSAnLi4vY2hlY2tIYW5kbGUvVGlQd2RDb25maWcnO1xyXG4vLyDkuIvpnaLms6jph4rvvIzlj6/ku6Xpgb/lhY3nvJbor5FsaWLml7bmraPliJnmiqXplJnjgILljp/nkIbmnKrnn6XvvIzlia/kvZznlKjmnKrnn6XjgIJcclxuLy8gQGR5bmFtaWNcclxuLyoqXHJcbiAqIFRpbnnlsIHoo4XnmoTluLjnlKjmoKHpqozop4TliJnlj4rmoKHpqozmlrnms5VcclxuICpcclxuICogIyMjIOinhOWImeS9v+eUqFxyXG4gKiAqKuaPkOS+m+S6huS4pOenjeS9v+eUqOaWueW8j++8mioqXHJcbiAqXHJcbiAqIDEu6Z2Z5oCB5pa55rOV77ya6YCa6L+HVGlWYWxpZGF0b3JzLlhYWO+8iOinhOWImeWQje+8ieWcqEpT5Lit5a6a5LmJXHJcbiAqXHJcbiAqIDIu5oyH5Luk5pa55byP77ya5a+55bqU6KeE5YiZ55qE5oyH5Luk5ZCN5Li6dGlYWFgo6KeE5YiZ5ZCN6aaW5a2X5q+N5aSn5YaZKe+8jOWmgnJlcXVpcmVk6KeE5YiZ55qE5oyH5Luk5ZCN5Li6IHRpUmVxdWlyZWRcclxuICpcclxuICogKirmlK/mjIHnmoTmoKHpqozop4TliJnlpoLkuIvvvJoqKlxyXG4gKlxyXG4gKiB8IOinhOWImeWQjeensCAgICB8ICDphY3nva7lj4LmlbDmhI/kuYkv57G75Z6LICAgfCAg6KeE5YiZ5o+P6L+wICB8XHJcbiAqIHwgLS0tLS0tLS0gICB8IDotLS0tLSAgIHwgOi0tLS0gfFxyXG4gKiB8IHJlcXVpcmVkICAgfCDml6AgICAgICAgfCAg5Li656m65qCh6aqMICAgIHxcclxuICogfCBtYXhMZW5ndGggICAgfCDmnIDlpKflrZfnrKbplb/luqYvbnVtYmVyICAgICAgfCAg5a2X56ym6ZW/5bqm5pyA5aSn5YC85qCh6aqMICAgIHxcclxuICogfCBtaW5MZW5ndGggICAgfCDmnIDlsI/lrZfnrKbplb/luqYvbnVtYmVyICAgICAgfCAgIOWtl+espumVv+W6puacgOWwj+WAvOagoemqjCAgICB8XHJcbiAqIHwgcmFuZ2VTaXplICAgIHwg5pyA5bCP6ZW/5bqm6ZmQ5Yi2L251bWJlciA8YnIvPiDmnIDlpKfplb/luqbpmZDliLYvbnVtYmVyICAgICAgfCAgIOWtl+espumVv+W6puWkp+Wwj+WMuumXtOagoemqjCAgICB8XHJcbiAqIHwgbWF4VmFsdWUgICAgfCDmnIDlpKfmlbDlgLwvbnVtYmVyICAgICAgfCAg5pWw5a2X5pyA5aSn5pWw5YC85qCh6aqMICAgIHxcclxuICogfCBtaW5WYWx1ZSAgICB8IOacgOWwj+aVsOWAvC9udW1iZXIgICAgICB8ICAg5pWw5a2X5pyA5bCP5pWw5YC85qCh6aqMICAgIHxcclxuICogfCByYW5nZVZhbHVlICAgIHwg5pyA5bCP5pWw5YC86ZmQ5Yi2L251bWJlciA8YnIvPiDmnIDlpKfmlbDlgLzpmZDliLYvbnVtYmVyICAgIHwgICDmlbDlrZflpKflsI/ljLrpl7TmoKHpqowgICAgfFxyXG4gKiB8IHJlZ0V4cCAgIHwg5q2j5YiZ6KGo6L6+5byP5Y+C5pWwL1JlZ0V4cHxzdHJpbmfvvIjkuI3ljIXmi6zmraPliJnooajovr7lvI/lpLTlsL7moIfor4bnrKYnXig/OifjgIEnKSQn77yJICAgICAgIHwgIOato+WImeagoemqjCAgICB8XHJcbiAqIHwgZW1haWwgICAgfCDml6AgICAgICB8ICDpgq7nrrHmoKHpqowgICAgfFxyXG4gKiB8IGNvbnRhaW5zICAgIHwg5YyF5ZCr55qE5YaF5a65LyhzdHJpbmcvbnVtYmVyKSAgICAgfCAgIOWMheWQq+agoemqjCAgICB8XHJcbiAqIHwgbm90Q29udGFpbnMgICAgfCDkuI3ljIXlkKvnmoTlhoXlrrkvKHN0cmluZy9udW1iZXIpICAgICAgfCAgIOS4jeWMheWQq+agoemqjCAgICB8XHJcbiAqIHwgZXF1YWwgICB8IOebuOetieeahOWGheWuuS8oc3RyaW5nL251bWJlcikgICAgIHwgIOebuOetieagoemqjCAgICB8XHJcbiAqIHwgbm90RXF1YWwgICAgfCDkuI3nm7jnrYnnmoTlhoXlrrkvKHN0cmluZy9udW1iZXIpICAgIHwgIOS4jeebuOetieagoemqjCAgICB8XHJcbiAqIHwgbm90U2NyaXB0ICAgIHwg5pegICAgICAgfCAgIOWMheWQq3NjcmlwdOagh+etvuagoemqjCAgICB8XHJcbiAqIHwgcG9ydCAgICB8ICDml6AgICAgIHwgICDnq6/lj6Plj7fmoKHpqozvvIzojIPlm7TkuLowfjY1NTM1ICAgIHxcclxuICogfCBkYXRlICAgIHwg5pegICAgICAgfCAgIOaXpeacn+exu+Wei+agoemqjCAgICB8XHJcbiAqIHwgdXJsICAgIHwgIOaXoCAgICAgfCAgIHVybOagoemqjCAgICB8XHJcbiAqIHwgaW50ZWdlciAgICB8IOaXoCAgICAgIHwgICDmlbTmlbDmoKHpqowgICAgfFxyXG4gKiB8IG51bWJlciAgICB8ICDml6AgICAgIHwgICDmlbDlrZfmoKHpqowgfFxyXG4gKiB8IGRpZ2l0cyAgICB8IOaXoCAgICAgIHwgICDmraPmlbTmlbDmoKHpqowgICAgfFxyXG4gKiB8IGlwdjQgICAgfCAg5pegICAgICB8ICAgaXB2NOagoemqjCAgICB8XHJcbiAqIHwgaXB2NiAgICB8ICDml6AgICAgIHwgICBpcHY25qCh6aqMICAgIHxcclxuICogfCBtaW5DaGFyVHlwZSB8IDEuIOespuWQiOimgeaxgueahOWtl+espuenjeexuy9udW1iZXI7PGJyLz4yLiDlrZfnrKbpm4blr7nosaHnsbvlnovvvIjlj6/pgInvvIkve3N0cmluZzpSZWdFeHB944CCPGJyLz7pu5jorqTnmoTlrZfnrKbnp43nsbvliIbliKvkuLrvvJrlpKflhpnlrZfmr43jgIHlsI/lhpnlrZfmr43jgIHmlbDlrZfjgIHnibnmrorlrZfnrKZgfiFAIyQlXiYqKCktXz0rXFxcXFxcfFt7fV07OlxcJ1xcXCIsPC4+Lz8gIOWSjOepuuagvCB8IOespuWQiOacgOWwj+Wtl+espuenjeexu+agoemqjO+8jOm7mOiupOaDheWGteS4uuiHs+WwkeWMheWQqzLnp43lrZfnrKbnsbvlnotg44CCICB8XHJcbiAqIHwgbm90RXF1YWxQb3NSZXYgICAgfCAg6ZyA6KaB5q+U5a+555qE6KGo5Y2VZm9ybUNvbnRyb2zlr7nosaHojrflj5blh73mlbAvICgpID0+IEFic3RyYWN0Q29udHJvbCAgICAgfCAgIOS4jeiDveWSjOihqOWNleWvueixoeeahOato+W6j+aIluWAkuW6j+ebuOWQjCAgICB8XHJcbiAqIHwgcGFzc3dvcmQgICAgfCDlr4bnoIHmoKHpqozlkITpobnop4TliJnlj4LmlbAv5a+56LGh5b2i5byPIHwgICDlr4bnoIHmoKHpqowgICB8XHJcbiAqXHJcbiAqXHJcbiAqICAqKnBhc3N3b3Jk6KeE5YiZ55qE5Y+C5pWw57G75Z6LKipcclxuICpcclxuICogICAge1xyXG4gKiAgICAgICAgcmFuZ2VTaXplPzogW251bWJlciwgbnVtYmVyXSxcclxuICogICAgICAgIG1pbkNoYXJUeXBlPzogW2J1bWJlciwge1xyXG4gKiAgICAgICAgICAgIGRpZ2l0c0NoYXJSZWc6IFJlZ0V4cCxcclxuICogICAgICAgICAgICBzcGVjaWFsQ2hhclJlZzogUmVnRXhwLFxyXG4gKiAgICAgICAgICAgIGxvd2VyQ2hhclJlZzogUmVnRXhwLFxyXG4gKiAgICAgICAgICAgIHVwcGVyQ2hhclJlZzogUmVnRXhwfV0sXHJcbiAqICAgICAgICBub3RFcXVhbFBvc1JldjogKCkgPT4gQWJzdHJhY3RDb250cm9sXHJcbiAqICAgIH1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaVZhbGlkYXRvcnMge1xyXG4gIC8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEVNQUlMX1JFR0VYUDogUmVnRXhwID0gL14oKChbQS1aYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbQS1aYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW0EtWmEtel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFtBLVphLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW0EtWmEtel18XFxkfC18X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW0EtWmEtel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFtBLVphLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFtBLVphLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbQS1aYS16XXxcXGR8LXxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbQS1aYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNDUklQVF9SRUdFWFA6IFJlZ0V4cCA9IC88K1xcLz9bU3NdW0NjXVtScl1bSWldW1BwXVtUdF0gKi4qPiovO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERJR0lUU19SRUdFWFA6IFJlZ0V4cCA9IC9eXFxkKyQvO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFBPUlRfUkFOR0U6IEFycmF5PG51bWJlcj4gPSBbMCwgNjU1MzVdO1xyXG4gIC8vIFVSTOinhOWIme+8jOWFtuS4rUlQdjTpg6jliIbvvIzph4fnlKjkuobkuIvpnaLljY7kuLroh6rnoJTnmoRpcHY05q2j5YiZ6KGo6L6+5byPXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVVJMX1JFR0VYUDogUmVnRXhwID0gL14oaHR0cHM/fHM/ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoKCgxP1sxLTldP1xcZCl8KDEwXFxkKXwoMlswLTRdXFxkKXwoMjVbMC01XSkpXFwuKXszfSgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKSl8KCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuPykoOlxcZCopPykoXFwvKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSsoXFwvKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKikqKT8pPyhcXD8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFtcXHVFMDAwLVxcdUY4RkZdfFxcL3xcXD8pKik/KCMoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFxcL3xcXD8pKik/JC9pO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOVEVHRVJfUkVHRVhQOiBSZWdFeHAgPSAvXi0/XFxkKyQvO1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IE5VTUJFUl9SRUdFWFA6IFJlZ0V4cCA9IC9eKD86LT9cXGQrfC0/XFxkezEsM30oPzosXFxkezN9KSspPyg/OlxcLlxcZCspPyQvO1xyXG4gIC8vIOmHh+eUqOWNjuS4uuiHqueglOeahGlwdjTmraPliJnooajovr7lvI9cclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBJUFY0X1JFR0VYUDogUmVnRXhwID0gL14oKCgxP1sxLTldP1xcZCl8KDEwXFxkKXwoMlswLTRdXFxkKXwoMjVbMC01XSkpXFwuKXszfSgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKSQvaTtcclxuICAvLyDph4fnlKjljY7kuLroh6rnoJTnmoRpcHY25q2j5YiZ6KGo6L6+5byPXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgSVBWNl9SRUdFWFA6IFJlZ0V4cCA9IC9eKCgoKFtcXGRhLWZdezEsNH0pOil7N30oW1xcZGEtZl17MSw0fSkpfCgoKChbXFxkYS1mXXsxLDR9KTopezEsN306KXwoKChbXFxkYS1mXXsxLDR9KTopezZ9OihbXFxkYS1mXXsxLDR9KSl8KCgoW1xcZGEtZl17MSw0fSk6KXs1fTooKFtcXGRhLWZdezEsNH0pOik/KFtcXGRhLWZdezEsNH0pKXwoKChbXFxkYS1mXXsxLDR9KTopezR9OigoW1xcZGEtZl17MSw0fSk6KXswLDJ9KFtcXGRhLWZdezEsNH0pKXwoKChbXFxkYS1mXXsxLDR9KTopezN9OigoW1xcZGEtZl17MSw0fSk6KXswLDN9KFtcXGRhLWZdezEsNH0pKXwoKChbXFxkYS1mXXsxLDR9KTopezJ9OigoW1xcZGEtZl17MSw0fSk6KXswLDR9KFtcXGRhLWZdezEsNH0pKXwoKChbXFxkYS1mXXsxLDR9KTopezF9OigoW1xcZGEtZl17MSw0fSk6KXswLDV9KFtcXGRhLWZdezEsNH0pKXwoOjooKFtcXGRhLWZdezEsNH0pOil7MCw2fShbXFxkYS1mXXsxLDR9KSl8KDo6KFtcXGRhLWZdezEsNH0pPykpfCgoKChbXFxkYS1mXXsxLDR9KTopezZ9KCgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKVxcLil7M30oKDE/WzEtOV0/XFxkKXwoMTBcXGQpfCgyWzAtNF1cXGQpfCgyNVswLTVdKSkpfCgoKFtcXGRhLWZdezEsNH0pOil7NX06KCgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKVxcLil7M30oKDE/WzEtOV0/XFxkKXwoMTBcXGQpfCgyWzAtNF1cXGQpfCgyNVswLTVdKSkpfCgoKFtcXGRhLWZdezEsNH0pOil7NH06KChbXFxkYS1mXXsxLDR9KTopPygoKDE/WzEtOV0/XFxkKXwoMTBcXGQpfCgyWzAtNF1cXGQpfCgyNVswLTVdKSlcXC4pezN9KCgxP1sxLTldP1xcZCl8KDEwXFxkKXwoMlswLTRdXFxkKXwoMjVbMC01XSkpKXwoKChbXFxkYS1mXXsxLDR9KTopezN9OigoW1xcZGEtZl17MSw0fSk6KXswLDJ9KCgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKVxcLil7M30oKDE/WzEtOV0/XFxkKXwoMTBcXGQpfCgyWzAtNF1cXGQpfCgyNVswLTVdKSkpfCgoKFtcXGRhLWZdezEsNH0pOil7Mn06KChbXFxkYS1mXXsxLDR9KTopezAsM30oKCgxP1sxLTldP1xcZCl8KDEwXFxkKXwoMlswLTRdXFxkKXwoMjVbMC01XSkpXFwuKXszfSgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKSl8KChbXFxkYS1mXXsxLDR9KTo6KChbXFxkYS1mXXsxLDR9KTopezAsNH0oKCgxP1sxLTldP1xcZCl8KDEwXFxkKXwoMlswLTRdXFxkKXwoMjVbMC01XSkpXFwuKXszfSgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKSl8KDo6KChbXFxkYS1mXXsxLDR9KTopezAsNX0oKCgxP1sxLTldP1xcZCl8KDEwXFxkKXwoMlswLTRdXFxkKXwoMjVbMC01XSkpXFwuKXszfSgoMT9bMS05XT9cXGQpfCgxMFxcZCl8KDJbMC00XVxcZCl8KDI1WzAtNV0pKSkpKSQvaTtcclxuICBwcml2YXRlIHN0YXRpYyBpc0VtcHR5SW5wdXRWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAvLyB3ZSBkb24ndCBjaGVjayBmb3Igc3RyaW5nIGhlcmUgc28gaXQgYWxzbyB3b3JrcyB3aXRoIGFycmF5c1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW51bGwta2V5d29yZFxyXG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgdmFsdWUubGVuZ3RoID09PSAwO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyByZXF1aXJlZChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzfG51bGwge1xyXG4gICAgcmV0dXJuIFZhbGlkYXRvcnMucmVxdWlyZWQoY29udHJvbCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG1heExlbmd0aChtYXhMZW5ndGg6IG51bWJlcik6IFZhbGlkYXRvckZuIHtcclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IGNvbnRyb2wudmFsdWUgPyBjb250cm9sLnZhbHVlLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICByZXR1cm4gbGVuZ3RoID4gbWF4TGVuZ3RoID9cclxuICAgICAgICAgIHttYXhMZW5ndGg6IHtyZXF1aXJlZExlbmd0aDogbWF4TGVuZ3RoLCBhY3R1YWxMZW5ndGg6IGxlbmd0aH19IDpcclxuICAgICAgICAgIG51bGw7XHJcbiAgICB9O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBtaW5MZW5ndGgobWluTGVuZ3RoOiBudW1iZXIpOiBWYWxpZGF0b3JGbiB7XHJcbiAgICByZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsID0+IHtcclxuICAgICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbGVuZ3RoOiBudW1iZXIgPSBjb250cm9sLnZhbHVlID8gY29udHJvbC52YWx1ZS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgcmV0dXJuIGxlbmd0aCA8IG1pbkxlbmd0aCA/XHJcbiAgICAgICAgICB7bWluTGVuZ3RoOiB7cmVxdWlyZWRMZW5ndGg6IG1pbkxlbmd0aCwgYWN0dWFsTGVuZ3RoOiBsZW5ndGh9fSA6XHJcbiAgICAgICAgICBudWxsO1xyXG4gICAgfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgcmFuZ2VTaXplKG1pbkxlbmd0aDogbnVtYmVyLCBtYXhMZW5ndGg6IG51bWJlcik6IFZhbGlkYXRvckZuIHtcclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7ICAvLyBkb24ndCB2YWxpZGF0ZSBlbXB0eSB2YWx1ZXMgdG8gYWxsb3cgb3B0aW9uYWwgY29udHJvbHNcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IGNvbnRyb2wudmFsdWUgPyBjb250cm9sLnZhbHVlLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICByZXR1cm4gbGVuZ3RoID4gbWF4TGVuZ3RoIHx8IGxlbmd0aCA8IG1pbkxlbmd0aCA/XHJcbiAgICAgICAgICB7cmFuZ2VTaXplOiB7cmVxdWlyZWRNaW5MZW5ndGg6IG1pbkxlbmd0aCwgcmVxdWlyZWRNYXhMZW5ndGg6IG1heExlbmd0aCwgYWN0dWFsTGVuZ3RoOiBsZW5ndGh9fSA6XHJcbiAgICAgICAgICBudWxsO1xyXG4gICAgfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgbWF4VmFsdWUobWF4OiBudW1iZXIpOiBWYWxpZGF0b3JGbiB7XHJcbiAgICByZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsID0+IHtcclxuICAgICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSB8fCBUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUobWF4KSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdmFsdWU6IG51bWJlciA9IHBhcnNlRmxvYXQoY29udHJvbC52YWx1ZSk7XHJcblxyXG4gICAgICAvLyBDb250cm9scyB3aXRoIE5hTiB2YWx1ZXMgYWZ0ZXIgcGFyc2luZyBzaG91bGQgYmUgdHJlYXRlZCBhcyBub3QgaGF2aW5nIGFcclxuICAgICAgLy8gbWF4aW11bSwgcGVyIHRoZSBIVE1MIGZvcm1zIHNwZWM6IGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI2F0dHItaW5wdXQtbWF4XHJcbiAgICAgIHJldHVybiAhaXNOYU4odmFsdWUpICYmIHZhbHVlID4gbWF4ID8ge21heFZhbHVlOiB7cmVxdWlyZWRNYXhWYWx1ZTogbWF4LCBhY3R1YWw6IGNvbnRyb2wudmFsdWV9fSA6IG51bGw7XHJcbiAgICB9O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBtaW5WYWx1ZShtaW46IG51bWJlcik6IFZhbGlkYXRvckZuIHtcclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpIHx8IFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShtaW4pKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7ICAvLyBkb24ndCB2YWxpZGF0ZSBlbXB0eSB2YWx1ZXMgdG8gYWxsb3cgb3B0aW9uYWwgY29udHJvbHNcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB2YWx1ZTogbnVtYmVyID0gcGFyc2VGbG9hdChjb250cm9sLnZhbHVlKTtcclxuXHJcbiAgICAgIC8vIENvbnRyb2xzIHdpdGggTmFOIHZhbHVlcyBhZnRlciBwYXJzaW5nIHNob3VsZCBiZSB0cmVhdGVkIGFzIG5vdCBoYXZpbmcgYVxyXG4gICAgICAvLyBtYXhpbXVtLCBwZXIgdGhlIEhUTUwgZm9ybXMgc3BlYzogaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjYXR0ci1pbnB1dC1tYXhcclxuICAgICAgcmV0dXJuICFpc05hTih2YWx1ZSkgJiYgdmFsdWUgPCBtaW4gPyB7bWluVmFsdWU6IHtyZXF1aXJlZE1pblZhbHVlOiBtaW4sIGFjdHVhbDogY29udHJvbC52YWx1ZX19IDogbnVsbDtcclxuICAgIH07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHJhbmdlVmFsdWUobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogVmFsaWRhdG9yRm4ge1xyXG4gICAgcmV0dXJuIChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCA9PiB7XHJcbiAgICAgIGlmIChUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUoY29udHJvbC52YWx1ZSkgfHwgVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKG1pbikgfHwgVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKG1heCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHZhbHVlOiBudW1iZXIgPSBwYXJzZUZsb2F0KGNvbnRyb2wudmFsdWUpO1xyXG5cclxuICAgICAgLy8gQ29udHJvbHMgd2l0aCBOYU4gdmFsdWVzIGFmdGVyIHBhcnNpbmcgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgbm90IGhhdmluZyBhXHJcbiAgICAgIC8vIG1heGltdW0sIHBlciB0aGUgSFRNTCBmb3JtcyBzcGVjOiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNhdHRyLWlucHV0LW1heFxyXG4gICAgICByZXR1cm4gIWlzTmFOKHZhbHVlKSAmJiAodmFsdWUgPCBtaW4gfHwgdmFsdWUgPiBtYXgpID8ge3JhbmdlVmFsdWU6IHtyZXF1aXJlZE1pblZhbHVlOiBtaW4sXHJcbiAgICAgICAgICByZXF1aXJlZE1heFZhbHVlOiBtYXgsIGFjdHVhbDogY29udHJvbC52YWx1ZX19IDogbnVsbDtcclxuICAgIH07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHJlZ0V4cChwYXR0ZXJuOiBzdHJpbmd8UmVnRXhwKTogVmFsaWRhdG9yRm4ge1xyXG4gICAgaWYgKCFwYXR0ZXJuKSB7XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3JzLm51bGxWYWxpZGF0b3I7XHJcbiAgICB9XHJcbiAgICBsZXQgcmVnZXg6IFJlZ0V4cDtcclxuICAgIGxldCByZWdleFN0cjogc3RyaW5nO1xyXG4gICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZWdleFN0ciA9ICcnO1xyXG5cclxuICAgICAgaWYgKHBhdHRlcm4uY2hhckF0KDApICE9PSAnXicpIHtcclxuICAgICAgICByZWdleFN0ciArPSAnXic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlZ2V4U3RyICs9IHBhdHRlcm47XHJcblxyXG4gICAgICBpZiAocGF0dGVybi5jaGFyQXQocGF0dGVybi5sZW5ndGggLSAxKSAhPT0gJyQnKSB7XHJcbiAgICAgICAgcmVnZXhTdHIgKz0gJyQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZWdleCA9IG5ldyBSZWdFeHAocmVnZXhTdHIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVnZXhTdHIgPSBwYXR0ZXJuLnRvU3RyaW5nKCk7XHJcbiAgICAgIHJlZ2V4ID0gcGF0dGVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsID0+IHtcclxuICAgICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdmFsdWU6IHN0cmluZyA9IGNvbnRyb2wudmFsdWU7XHJcblxyXG4gICAgICByZXR1cm4gcmVnZXgudGVzdCh2YWx1ZSkgPyBudWxsIDoge3JlZ0V4cDoge3JlcXVpcmVkUGF0dGVybjogcmVnZXhTdHIsIGFjdHVhbFZhbHVlOiB2YWx1ZX19O1xyXG4gICAgfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZW1haWwoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9yc3xudWxsIHtcclxuICAgIGlmIChUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUoY29udHJvbC52YWx1ZSkpIHtcclxuICAgICAgcmV0dXJuIG51bGw7ICAvLyBkb24ndCB2YWxpZGF0ZSBlbXB0eSB2YWx1ZXMgdG8gYWxsb3cgb3B0aW9uYWwgY29udHJvbHNcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gVGlWYWxpZGF0b3JzLkVNQUlMX1JFR0VYUC50ZXN0KGNvbnRyb2wudmFsdWUpID8gbnVsbCA6IHtlbWFpbDogdHJ1ZX07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbnRhaW5zKGNvbnRhaW46IHN0cmluZ3xudW1iZXIpOiBWYWxpZGF0b3JGbiB7XHJcbiAgICByZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsID0+IHtcclxuICAgICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSB8fCBUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUoY29udGFpbikpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY29udHJvbC52YWx1ZS5pbmRleE9mKGNvbnRhaW4pID09PSAtMSA/XHJcbiAgICAgICAge2NvbnRhaW5zOiB7cmVxdWlyZWRDb250YWluczogY29udGFpbiwgYWN0dWFsVmFsdWU6IGNvbnRyb2wudmFsdWV9fSA6IG51bGw7XHJcbiAgICB9O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBub3RDb250YWlucyhjb250YWluOiBzdHJpbmd8bnVtYmVyKTogVmFsaWRhdG9yRm4ge1xyXG4gICAgcmV0dXJuIChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCA9PiB7XHJcbiAgICAgIGlmIChUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUoY29udHJvbC52YWx1ZSkgfHwgVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRhaW4pKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7ICAvLyBkb24ndCB2YWxpZGF0ZSBlbXB0eSB2YWx1ZXMgdG8gYWxsb3cgb3B0aW9uYWwgY29udHJvbHNcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGNvbnRyb2wudmFsdWUuaW5kZXhPZihjb250YWluKSAhPT0gLTEgP1xyXG4gICAgICAgIHtub3RDb250YWluczoge3JlcXVpcmVkTm90Q29udGFpbnM6IGNvbnRhaW4sIGFjdHVhbFZhbHVlOiBjb250cm9sLnZhbHVlfX0gOiBudWxsO1xyXG4gICAgfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZXF1YWwoZXF1YWw6IHN0cmluZ3xudW1iZXIpOiBWYWxpZGF0b3JGbiB7XHJcbiAgICByZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsID0+IHtcclxuICAgICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSB8fCBUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUoZXF1YWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7ICAvLyBkb24ndCB2YWxpZGF0ZSBlbXB0eSB2YWx1ZXMgdG8gYWxsb3cgb3B0aW9uYWwgY29udHJvbHNcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGNvbnRyb2wudmFsdWUgIT09IGVxdWFsID9cclxuICAgICAgICB7ZXF1YWw6IHtyZXF1aXJlZEVxdWFsOiBlcXVhbCwgYWN0dWFsVmFsdWU6IGNvbnRyb2wudmFsdWV9fSA6IG51bGw7XHJcbiAgICB9O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBub3RFcXVhbChlcXVhbDogc3RyaW5nfG51bWJlcik6IFZhbGlkYXRvckZuIHtcclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpIHx8IFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShlcXVhbCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY29udHJvbC52YWx1ZSA9PT0gZXF1YWwgP1xyXG4gICAgICAgIHtub3RFcXVhbDoge3JlcXVpcmVkTm90RXF1YWw6IGVxdWFsLCBhY3R1YWxWYWx1ZTogY29udHJvbC52YWx1ZX19IDogbnVsbDtcclxuICAgIH07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG5vdFNjcmlwdChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzfG51bGwge1xyXG4gICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBUaVZhbGlkYXRvcnMuU0NSSVBUX1JFR0VYUC50ZXN0KGNvbnRyb2wudmFsdWUpID8ge25vdFNjcmlwdDogdHJ1ZX0gOiBudWxsO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBwb3J0KGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnN8bnVsbCB7XHJcbiAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFRpVmFsaWRhdG9ycy5ESUdJVFNfUkVHRVhQLnRlc3QoY29udHJvbC52YWx1ZSkgJiYgKGNvbnRyb2wudmFsdWUgPj0gVGlWYWxpZGF0b3JzLlBPUlRfUkFOR0VbMF0pICYmXHJcbiAgICAgICAgKGNvbnRyb2wudmFsdWUgPD0gVGlWYWxpZGF0b3JzLlBPUlRfUkFOR0VbMV0pID9cclxuICAgICAgICBudWxsIDoge3BvcnQ6IHttaW46IFRpVmFsaWRhdG9ycy5QT1JUX1JBTkdFWzBdLCBtYXg6IFRpVmFsaWRhdG9ycy5QT1JUX1JBTkdFWzFdfX07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGRhdGUoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9yc3xudWxsIHtcclxuICAgIGlmIChUaVZhbGlkYXRvcnMuaXNFbXB0eUlucHV0VmFsdWUoY29udHJvbC52YWx1ZSkpIHtcclxuICAgICAgcmV0dXJuIG51bGw7ICAvLyBkb24ndCB2YWxpZGF0ZSBlbXB0eSB2YWx1ZXMgdG8gYWxsb3cgb3B0aW9uYWwgY29udHJvbHNcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gIS9JbnZhbGlkfE5hTi8udGVzdChuZXcgRGF0ZShjb250cm9sLnZhbHVlKS50b1N0cmluZygpKSA/XHJcbiAgICAgICAgbnVsbCA6IHtkYXRlOiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgdXJsKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnN8bnVsbCB7XHJcbiAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFRpVmFsaWRhdG9ycy5VUkxfUkVHRVhQLnRlc3QoY29udHJvbC52YWx1ZSkgP1xyXG4gICAgICAgIG51bGwgOiB7dXJsOiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaW50ZWdlcihjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzfG51bGwge1xyXG4gICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBUaVZhbGlkYXRvcnMuSU5URUdFUl9SRUdFWFAudGVzdChjb250cm9sLnZhbHVlKSA/XHJcbiAgICAgICAgbnVsbCA6IHtpbnRlZ2VyOiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgbnVtYmVyKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnN8bnVsbCB7XHJcbiAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFRpVmFsaWRhdG9ycy5OVU1CRVJfUkVHRVhQLnRlc3QoY29udHJvbC52YWx1ZSkgP1xyXG4gICAgICAgIG51bGwgOiB7bnVtYmVyOiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZGlnaXRzKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnN8bnVsbCB7XHJcbiAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFRpVmFsaWRhdG9ycy5ESUdJVFNfUkVHRVhQLnRlc3QoY29udHJvbC52YWx1ZSkgP1xyXG4gICAgICAgIG51bGwgOiB7ZGlnaXRzOiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaXB2NChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzfG51bGwge1xyXG4gICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBUaVZhbGlkYXRvcnMuSVBWNF9SRUdFWFAudGVzdChjb250cm9sLnZhbHVlKSA/XHJcbiAgICAgICAgbnVsbCA6IHtpcHY0OiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaXB2Nihjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzfG51bGwge1xyXG4gICAgaWYgKFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShjb250cm9sLnZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gbnVsbDsgIC8vIGRvbid0IHZhbGlkYXRlIGVtcHR5IHZhbHVlcyB0byBhbGxvdyBvcHRpb25hbCBjb250cm9sc1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBUaVZhbGlkYXRvcnMuSVBWNl9SRUdFWFAudGVzdChjb250cm9sLnZhbHVlKSA/XHJcbiAgICAgICAgbnVsbCA6IHtpcHY2OiB0cnVlfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIOWvhueggeWtl+espuexu+Wei+acgOWwj+enjeexu+agoemqjFxyXG4gICAqIOeUqOS6juWvhueggeagoemqjO+8jOWFtuinhOWImeWmguS4i++8mlxyXG4gICAqIOWPo+S7pOW/hemhu+WMheWQq+S4lOWPquiDveWMheWQq+WmguS4i+iHs+WwkeS4pOenjeWtl+espueahOe7hOWQiDpcclxuICAgKiDvvI3oh7PlsJHkuIDkuKrlsI/lhpnlrZfmr43vvJtcclxuICAgKiDvvI3oh7PlsJHkuIDkuKrlpKflhpnlrZfmr43vvJtcclxuICAgKiDvvI3oh7PlsJHkuIDkuKrmlbDlrZfvvJtcclxuICAgKiDvvI3oh7PlsJHkuIDkuKrnibnmrorlrZfnrKbvvJpgfiFAIyQlXiYqKCktXz0rXFx8W3t9XTs6J1wiLDwuPi8/5ZKM56m65qC8XHJcbiAgICogQHBhcmFtICBudW0g5a2X56ym57G75Z6L5pyA5bCP5Liq5pWwXHJcbiAgICogQHBhcmFtICBjaGFyVHlwZVJlZ09iaiDlrZfnrKbnsbvlnovmoKHpqozmraPliJnooajovr7lvI/vvIzmtonlj4rliLDlvLrluqborqHnrpfvvIzlj4LogINkZWZhdWx0c+S4reWumuS5iVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgbWluQ2hhclR5cGUobnVtOiBudW1iZXIsIGNoYXJUeXBlUmVnT2JqPzogYW55KTogVmFsaWRhdG9yRm4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmraPliJnooajovr7lvI/ovazkuLrlrZfnrKbkuLLlubbpppblsL7ljrvpmaTigJwv4oCd56ym5Y+377yM5Li65re75YqgZ+S/rumlsOespuWBmuWHhuWkh1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZWdFeHBUb1N0cmluZyhyZWdFeHA6IFJlZ0V4cCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiByZWdFeHAgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVnRXhwU3RyOiBzdHJpbmcgPSBTdHJpbmcocmVnRXhwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlZ0V4cFN0ci5zdWJzdHJpbmcoMSwgcmVnRXhwU3RyLmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpIHx8IFRpVmFsaWRhdG9ycy5pc0VtcHR5SW5wdXRWYWx1ZShudW0pIHx8IG51bSA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICAgIH1cclxuICAgICAgLy8g5ZCE57G75a2X56ym5qCh6aqM5q2j5YiZ6KGo6L6+5byP6ZuG5ZCILOm7mOiupOS9v+eUqHB3ZENvbmZpZ+S4reeahOm7mOiupOmFjee9rlxyXG4gICAgICBjb25zdCBjaGFyUmVnT2JqOiBhbnkgPSB0eXBlb2YgY2hhclR5cGVSZWdPYmogPT09ICdvYmplY3QnID8gY2hhclR5cGVSZWdPYmogOlxyXG4gICAgICAgICAgVGlQd2RDb25maWcucHdkQ2hhclR5cGVSZWdPYmo7XHJcblxyXG4gICAgICAvLyDmoKHpqozovpPlhaXmmK/lkKbnrKblkIjljZXmnaHmoKHpqozlrZfnrKbop4TliJnvvIzlubborrDlvZXnrKblkIjnmoTljZXmnaHop4TliJnkuKrmlbBcclxuICAgICAgbGV0IGNoZWNrVmFsaWROdW06IG51bWJlciA9IDA7IC8vIOagoemqjOmAmui/h+e7k+aenOS4quaVsFxyXG4gICAgICBsZXQgY2hlY2tSZXN1bHQ6IGFueTsgLy8g5qCh6aqM57uT5p6c5Li05pe25Y+Y6YePXHJcbiAgICAgIGxldCByZXBsYWNlZFZhbHVlOiBzdHJpbmcgPSBjb250cm9sLnZhbHVlOyAvLyDmraPliJnmm7/mjaLlkI7nmoR2YWx1ZeWAvFxyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBjaGFyUmVnT2JqKSB7XHJcbiAgICAgICAgaWYgKGNoYXJSZWdPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgY29uc3QgcmVnRXhwOiBSZWdFeHAgPSBjaGFyUmVnT2JqW2tleV07XHJcbiAgICAgICAgICBjaGVja1Jlc3VsdCA9IHJlZ0V4cC50ZXN0KGNvbnRyb2wudmFsdWUpO1xyXG4gICAgICAgICAgaWYgKGNoZWNrUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgY2hlY2tWYWxpZE51bSsrO1xyXG4gICAgICAgICAgICAgIC8vIOS9v+eUqOWFqOWxgOabv+aNouaWueW8j++8jOeUqOS6juabv+aNouWtl+S4suS4reaJgOacieespuWQiOato+WImeinhOWImeeahOWtl+esplxyXG4gICAgICAgICAgICAgIHJlcGxhY2VkVmFsdWUgPSByZWdFeHAuZ2xvYmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZWRWYWx1ZS5yZXBsYWNlKHJlZ0V4cCwgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVwbGFjZWRWYWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAocmVnRXhwVG9TdHJpbmcocmVnRXhwKSwgJ2cnKSwgJycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5pu/5o2i5ZCO55qE5YC86Z2e56m65oOF5Ya1OuS7o+ihqOWAvOS4reWtmOWcqOmdnuazleWtl+esplxyXG4gICAgICByZXR1cm4gcmVwbGFjZWRWYWx1ZS5sZW5ndGggPiAwIHx8IGNoZWNrVmFsaWROdW0gPCBudW0gP1xyXG4gICAgICAgIHttaW5DaGFyVHlwZTogdHJ1ZX0gOiBudWxsO1xyXG4gICAgfTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIOeUqOS6juWvhueggeagoemqjO+8muWvhueggeS4jeiDveWSjOeUqOaIt+WQjeaIluWFtuWAkuW6j+ebuOWQjFxyXG4gICAqIEBwYXJhbSAgZ2V0Q29udHJvbEZuIOiOt+WPluWvueavlOeahOihqOWNleWFg+e0oGZvcm1Db250cm9s5Ye95pWwXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBub3RFcXVhbFBvc1JldihnZXRDb250cm9sRm46ICgpID0+IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRvckZuIHtcclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICBpZiAoVGlWYWxpZGF0b3JzLmlzRW1wdHlJbnB1dFZhbHVlKGNvbnRyb2wudmFsdWUpIHx8IFV0aWwuaXNVbmRlZmluZWQoZ2V0Q29udHJvbEZuICYmIGdldENvbnRyb2xGbigpKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAgLy8gZG9uJ3QgdmFsaWRhdGUgZW1wdHkgdmFsdWVzIHRvIGFsbG93IG9wdGlvbmFsIGNvbnRyb2xzXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdmFsdWU6IHN0cmluZyA9IGNvbnRyb2wudmFsdWU7XHJcbiAgICAgIGNvbnN0IHJlZnJlVmFsdWU6IHN0cmluZyA9IGdldENvbnRyb2xGbigpLnZhbHVlO1xyXG5cclxuICAgICAgLy8g5L2/55So5aaC5LiL5pa55byP5Lya5Ye6546w5Y2h6aG/55qE5oOF5Ya177yaXHJcbiAgICAgIC8vIOWvueavlGZvcm1Db250cm9sIHZhbHVl5L+u5pS55pe277yM6ZyA6KaB5ZCM5q2l5L+u5pS56K+l6KGo5Y2V55qE54q25oCB77yM5ZCm5YiZ5Lya5a2Y5Zyo5LiL5qyhZm9jdXPor6XlhYPntKDmiJbooajljZXmlbTkvZPmoKHpqozml7ZcclxuICAgICAgLy8g6K+l5YWD57Sg5qCh6aqM57uT5p6c5L6d54S25piv5LiK5qyh55qE57uT5p6cXHJcbiAgICAgIC8vIGdldENvbnRyb2xGbigpLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAvLyAgIGNvbnRyb2wudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xyXG4gICAgICAvLyB9KTtcclxuXHJcbiAgICAgIHJldHVybiAodmFsdWUudG9Mb3dlckNhc2UoKSAhPT0gcmVmcmVWYWx1ZS5zcGxpdCgnJylcclxuICAgICAgICAgIC5yZXZlcnNlKClcclxuICAgICAgICAgIC5qb2luKCcnKVxyXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCkpICYmXHJcbiAgICAgICAgICAodmFsdWUudG9Mb3dlckNhc2UoKSAhPT0gcmVmcmVWYWx1ZS50b0xvd2VyQ2FzZSgpKSA/XHJcbiAgICAgICAgICBudWxsIDoge25vdEVxdWFsUG9zUmV2OiB0cnVlfTtcclxuICAgIH07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBpZ25vcmVcclxuICAgKiDlr4bnoIHmoKHpqozop4TliJlcclxuICAgKiBAcGFyYW0gcFZhbHVlIOinhOWImeWPguaVsDp7cnVsZUtleTogcGFyYW19XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBwYXNzd29yZChwVmFsdWU6IHtcclxuICAgIHJhbmdlU2l6ZT86IFtudW1iZXIsIG51bWJlcl07XHJcbiAgICBtaW5DaGFyVHlwZT86IFtudW1iZXIsIGFueV07XHJcbiAgICBub3RFcXVhbFBvc1Jldj8oKTogQWJzdHJhY3RDb250cm9sO1xyXG4gIH0pOiBWYWxpZGF0b3JGbiB7XHJcbiAgICBjb25zdCByYW5nZVNpemVQYXJhbUFycjogQXJyYXk8bnVtYmVyPiA9IHBWYWx1ZS5yYW5nZVNpemUgfHwgVGlQd2RDb25maWcucHdkVmFsaWRhdG9yLnBhcmFtcy5yYW5nZVNpemU7XHJcbiAgICBjb25zdCBtaW5DaGFyVHlwZVBhcmFtQXJyOiBBcnJheTxhbnk+ID0gcFZhbHVlLm1pbkNoYXJUeXBlIHx8IFRpUHdkQ29uZmlnLnB3ZFZhbGlkYXRvci5wYXJhbXMubWluQ2hhclR5cGU7XHJcbiAgICBpZiAoVXRpbC5pc1VuZGVmaW5lZChtaW5DaGFyVHlwZVBhcmFtQXJyWzFdKSkge1xyXG4gICAgICBtaW5DaGFyVHlwZVBhcmFtQXJyWzFdID0gVGlQd2RDb25maWcucHdkQ2hhclR5cGVSZWdPYmo7XHJcbiAgICB9XHJcbiAgICBjb25zdCB2YWxpZGF0b3JDb21wb3NlQXJyOiBBcnJheTxhbnk+ID0gW1RpVmFsaWRhdG9ycy5yZXF1aXJlZCxcclxuICAgICAgVGlWYWxpZGF0b3JzLnJhbmdlU2l6ZShyYW5nZVNpemVQYXJhbUFyclswXSwgcmFuZ2VTaXplUGFyYW1BcnJbMV0pLFxyXG4gICAgICBUaVZhbGlkYXRvcnMubWluQ2hhclR5cGUobWluQ2hhclR5cGVQYXJhbUFyclswXSwgbWluQ2hhclR5cGVQYXJhbUFyclsxXSksXHJcbiAgICAgIFRpVmFsaWRhdG9ycy5ub3RFcXVhbFBvc1JldihwVmFsdWUubm90RXF1YWxQb3NSZXYpXTtcclxuXHJcbiAgICAgIC8vIOeUseS6jumUmeivr+aPkOekuuS4unBhc3N3b3Jk5LiT5pyJ5o+Q56S6LOmcgOimgeiHquWumuS5iXBhc3N3b3JkIGVycm9yLOiAjGNvbXBvc2Xmlrnms5XkuI3og73oh6rlrprkuYks5Zug5q2k5q2k5aSE5pyq5L2/55SoY29tcG9zZVxyXG4gICAgLy8g5q2k5aSWLOWQhOWtkOinhOWImeeahOmUmeivr+S+neeEtumcgOimgeS/neeVmSznlKjkuo7op4TliJnmj5DnpLrkv6Hmga9cclxuICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogYW55ID0+IHtcclxuICAgICAgcmV0dXJuIF9tZXJnZUVycm9yc1B3ZChfZXhlY3V0ZVZhbGlkYXRvcnMoY29udHJvbCwgdmFsaWRhdG9yQ29tcG9zZUFycikpO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIF9leGVjdXRlVmFsaWRhdG9ycyhjb250cm9sOiBBYnN0cmFjdENvbnRyb2wsIHZhbGlkYXRvcnM6IEFycmF5PFZhbGlkYXRvckZuPik6IEFycmF5PGFueT4ge1xyXG4gICAgICByZXR1cm4gdmFsaWRhdG9ycy5tYXAoKHY6IGFueSkgPT4gdihjb250cm9sKSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBfbWVyZ2VFcnJvcnNQd2QoYXJyYXlPZkVycm9yczogQXJyYXk8VmFsaWRhdGlvbkVycm9ycz4pOiBWYWxpZGF0aW9uRXJyb3JzfG51bGwge1xyXG4gICAgICBjb25zdCByZXM6IHtba2V5OiBzdHJpbmddOiBhbnl9ID1cclxuICAgICAgICAgIGFycmF5T2ZFcnJvcnMucmVkdWNlKChyZXNvdXJjZTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwsIGVycm9yczogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGVycm9ycyAhPSBudWxsID8gey4uLnJlc291cmNlLCAuLi5lcnJvcnN9IDogcmVzb3VyY2U7XHJcbiAgICAgICAgICB9LCB7fSk7XHJcblxyXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocmVzKS5sZW5ndGggPT09IDAgPyBudWxsIDoge3Bhc3N3b3JkOiB0cnVlLCAuLi5yZXN9O1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyDor6Xmlrnms5XnlKjkuo7mlbTkvZPmoKHpqow655Sx5LqO6KGo5Y2V5pyqZm91Y3Pml7Ys5Y2z5L2/6ZSZ6K+v5Lmf5LiN5Lya5pi+56S657qi5qGGLFxyXG4gIC8vIOiAjOaVtOS9k+agoemqjOaXtumcgOimgeWwhumUmeivr+eahOihqOWNlei+ueahhuagh+e6ouaYvuekuizlm6DmraTpnIDopoHmmL7npLrosIPnlKjmlbTkvZPmoKHpqozmlrnms5VcclxuICAvKipcclxuICAgKiDor6Xmlrnms5XnlKjkuo7mlbTkvZPmoKHpqoxcclxuICAgKlxyXG4gICAqIOWPguaVsGZvcm3vvJrpnIDopoHmoKHpqoznmoTooajljZXml49cclxuICAgKlxyXG4gICAqIOWPguaVsHVwZGF0ZVZhbHVlQW5kVmFsaWRpdHlDb25maWfvvJrlj6/pgInvvIxjaGVja+aWueazleWGhemDqOS9v+eUqOeahOagoemqjOaWueazleaYr0Fic3RyYWN0Q29udHJvbOeahHVwZGF0ZVZhbHVlQW5kVmFsaWRpdHnmlrnms5XvvIzmraTlpITlsIbmlrnms5Xlj4LmlbDlvIDmlL7nu5nlvIDlj5HogIXvvIzlj4LmlbDmhI/kuYnlhbfkvZPlj6/lj4LogINodHRwczovL2FuZ3VsYXIuaW8vYXBpL2Zvcm1zL0Fic3RyYWN0Q29udHJvbCN1cGRhdGV2YWx1ZWFuZHZhbGlkaXR5XHJcbiAgICpcclxuICAgKiDov5Tlm57vvJrooajljZXplJnor6/kv6Hmga9cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNoZWNrKGZvcm06IEZvcm1Hcm91cCwgdXBkYXRlVmFsdWVBbmRWYWxpZGl0eUNvbmZpZz86IHsgb25seVNlbGY/OiBib29sZWFuOyBlbWl0RXZlbnQ/OiBib29sZWFuOyB9KTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwge1xyXG4gICAgbGV0IGVycm9yczogYW55ID0ge307XHJcbiAgICBpZiAoZm9ybS5lcnJvcnMpIHtcclxuICAgICAgZXJyb3JzID0gey4uLmVycm9ycywgLi4uZm9ybS5lcnJvcnN9O1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZm9ybS5jb250cm9scykge1xyXG4gICAgICBpZiAoZm9ybS5jb250cm9scy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbDogQWJzdHJhY3RDb250cm9sIHwgYW55ID0gZm9ybS5jb250cm9sc1trZXldO1xyXG4gICAgICAgIGlmIChjb250cm9sLmNvbnRyb2xzKSB7IC8vIOW1jOWll+eahEZvcm1BcnJheSxGb3JtR3JvdXBcclxuICAgICAgICAgIGNvbnN0IGNoZWNrZWRFcnJvcnM6IGFueSA9IFRpVmFsaWRhdG9ycy5jaGVjayhjb250cm9sLCB1cGRhdGVWYWx1ZUFuZFZhbGlkaXR5Q29uZmlnKTtcclxuICAgICAgICAgIGlmIChjaGVja2VkRXJyb3JzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVycm9yc1trZXldID0gY2hlY2tlZEVycm9ycztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29udHJvbC5tYXJrQXNUb3VjaGVkKCk7XHJcbiAgICAgICAgICAvLyDnlLHkuo7ooajljZXpl7Tlj6/og73mnInlhbPogZTlhbPns7vvvIjlpoLlr4bnoIHmoKHpqoznmoRub3RFcXVhbFBvc1Jldu+8jOivpeWFs+iBlOWFs+ezu+mcgOimgeWvueWNleS4quihqOWNleWFg+e0oOWGjeasoeagoemqjFxyXG4gICAgICAgICAgY29udHJvbC51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KHVwZGF0ZVZhbHVlQW5kVmFsaWRpdHlDb25maWcpO1xyXG4gICAgICAgICAgLy8g6K+75Y+WZXJyb3Jz5L+h5oGvXHJcbiAgICAgICAgICBpZiAoY29udHJvbC5lcnJvcnMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZXJyb3JzW2tleV0gPSBjb250cm9sLmVycm9ycztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOaXoGVycm9yc+S/oeaBr+aXtu+8jOiuvue9ruS4um51bGzvvIzmlrnkvr/kuJrliqHlpITnkIZcclxuICAgIGlmIChKU09OLnN0cmluZ2lmeShlcnJvcnMpID09PSAne30nKSB7XHJcbiAgICAgIGVycm9ycyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGVycm9ycztcclxuICB9XHJcbn1cclxuIl19