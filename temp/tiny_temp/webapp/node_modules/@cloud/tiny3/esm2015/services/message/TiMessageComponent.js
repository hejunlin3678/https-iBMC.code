import { Component, Input } from '@angular/core';
import { TiLocale } from '../../locale/TiLocaleModule';
import { Util } from '../../utils/Util';
/**
 * @ignore
 * message模板组件定义
 */
export class TiMessageComponent {
    constructor() {
        // 常量配置
        this.CONST_CONFIG = {
            validType: ['confirm', 'error', 'warn', 'prompt'],
            defaultType: 'confirm'
        };
        this.localeWords = TiLocale.getLocaleWords();
    }
    /**
     * 设置按钮属性（除primary和autofocus外）
     * @param options 外部配置属性
     * @param defaults 按钮text和click属性
     * @returns 合并后的属性
     */
    static setBtn(options, defaults) {
        const defaultOpts = Object.assign({ show: true, disabled: false }, defaults);
        if (typeof options === 'object') {
            return Object.assign(Object.assign({}, defaultOpts), options);
        }
        return defaultOpts;
    }
    ngOnInit() {
        this.setType();
        this.setTitle();
        this.setBtns();
        this.setContent();
    }
    setType() {
        const validType = this.CONST_CONFIG.validType;
        const defaultType = this.CONST_CONFIG.defaultType;
        if (validType.indexOf(this.type) === -1) {
            this.type = defaultType;
        }
    }
    setTitle() {
        if (typeof this.title === 'string') {
            return;
        }
        // 不同类型的message有默认title
        this.title = this.localeWords.tiMessage[this.type];
    }
    /**
     * 设置按钮属性：
     * 对按钮的设置支持Object类型
     * 为Object类型时，覆盖和扩展默认设置
     */
    setBtns() {
        this.okButton = TiMessageComponent.setBtn(this.okButton, {
            text: this.localeWords.tiMessage.ok,
            click: () => {
                this.close();
            }
        });
        this.cancelButton = TiMessageComponent.setBtn(this.cancelButton, {
            text: this.localeWords.tiMessage.cancel,
            click: () => {
                this.dismiss();
            }
        });
        this.setBtnUniqueState('autofocus');
        this.setBtnUniqueState('primary');
    }
    /**
     * 设置按钮属性，确保默认状态只在一个按钮生效
     * @param prop 按钮属性
     */
    setBtnUniqueState(prop) {
        if (Util.isUndefined(this.okButton[prop]) && Util.isUndefined(this.cancelButton[prop])) {
            this.okButton[prop] = true;
        }
    }
    setContent() {
        this.contentConfig = {
            content: this.content,
            context: this.context
        };
    }
    setId(suffix) {
        if (Util.isUndefined(this.id)) {
            return '';
        }
        return `${this.id}${suffix}`;
    }
}
TiMessageComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-message',
                template: "<ti-modal-header class=\"ti3-msg-header\">\r\n    <div class=\"ti3-msg-icon ti3-icon\"\r\n         [ngClass]=\"{ 'ti3-icon-check-circle': type === 'confirm',\r\n                    'ti3-icon-exclamation-circle ti3-msg-icon-error': type === 'error',\r\n                    'ti3-icon-warn ti3-msg-icon-warn': type ===  'warn',\r\n                    'ti3-icon-info-circle': type === 'prompt'}\">\r\n    </div>\r\n    <span *ngIf='title' class=\"ti3-msg-content-title\" [innerHtml]='title' [id]=\"setId('_title')\"></span>\r\n</ti-modal-header>\r\n<ti-modal-body>\r\n    <div class=\"ti3-msg-content-wrapper\" [tiTransclude]='contentConfig' [id]=\"setId('_body')\"></div>\r\n</ti-modal-body>\r\n<ti-modal-footer>\r\n    <button type=\"button\" tiButton\r\n            [color]=\"okButton.primary ? 'danger' : ''\"\r\n            [autofocus]=\"okButton.autofocus\"\r\n            *ngIf=\"okButton.show\"\r\n            [disabled]=\"okButton.disabled\"\r\n            (click)=\"okButton.click()\"\r\n            [id]='setId(\"_ok_btn\")'>{{okButton.text}}</button><!--\r\n    \u9700\u8981\u5C4F\u853D\u6362\u884C\u5BF9\u6309\u94AE\u95F4\u8DDD\u7684\u5F71\u54CD--><button type=\"button\" tiButton\r\n            [color]=\"cancelButton.primary ? 'danger' : ''\"\r\n            *ngIf=\"cancelButton.show\"\r\n            [autofocus]=\"cancelButton.autofocus\"\r\n            [disabled]=\"cancelButton.disabled\"\r\n            (click)=\"cancelButton.click()\"\r\n            [id]='setId(\"_cancel_btn\")'>{{cancelButton.text}}</button>\r\n</ti-modal-footer>",
                styles: ["::ng-deep :root{--ti-message-icon-margin-right:var(--ti-common-space-2x);--ti-message-icon-size:24px}ti-modal-header.ti3-msg-header{padding-bottom:var(--ti-common-space-3x)}.ti3-msg-icon{float:left;font-size:var(--ti-message-icon-size);line-height:normal;margin-right:var(--ti-message-icon-margin-right)}.ti3-msg-icon.ti3-icon-check-circle{color:var(--ti-message-prompt-icon-color)}.ti3-msg-icon.ti3-msg-icon-warn{color:var(--ti-message-warn-icon-color)}.ti3-msg-icon.ti3-icon-info-circle{color:var(--ti-message-confirm-icon-color)}.ti3-msg-icon.ti3-msg-icon-error{color:var(--ti-message-error-icon-color)}.ti3-msg-body{overflow:auto;padding:0 var(--ti-common-space-8x);position:relative}.ti3-msg-content-wrapper{color:var(--ti-common-color-text-secondary);font-size:var(--ti-common-font-size-base);line-height:var(--ti-common-line-height-number);overflow:inherit;word-wrap:break-word}.ti3-msg-content-title{color:var(--ti-common-color-text-primary);display:inline-block;font-size:var(--ti-message-content-title-font-size);font-weight:700;line-height:26px;width:calc(100% - var(--ti-message-icon-size) - var(--ti-message-icon-margin-right))}"]
            },] }
];
TiMessageComponent.propDecorators = {
    id: [{ type: Input }],
    title: [{ type: Input }],
    type: [{ type: Input }],
    content: [{ type: Input }],
    context: [{ type: Input }],
    okButton: [{ type: Input }],
    cancelButton: [{ type: Input }],
    close: [{ type: Input }],
    dismiss: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlNZXNzYWdlQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL3NlcnZpY2VzL21lc3NhZ2UvVGlNZXNzYWdlQ29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxRQUFRLEVBQWlCLE1BQU0sNkJBQTZCLENBQUM7QUFDdEUsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBT3hDOzs7R0FHRztBQU1ILE1BQU0sT0FBTyxrQkFBa0I7SUFML0I7UUFNSSxPQUFPO1FBQ0MsaUJBQVksR0FBUTtZQUN4QixTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUM7WUFDakQsV0FBVyxFQUFFLFNBQVM7U0FDekIsQ0FBQztRQVdlLGdCQUFXLEdBQWtCLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQXdGNUUsQ0FBQztJQXRGRzs7Ozs7T0FLRztJQUNLLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBOEIsRUFBRSxRQUdyRDtRQUNHLE1BQU0sV0FBVyxtQkFDYixJQUFJLEVBQUUsSUFBSSxFQUNWLFFBQVEsRUFBRSxLQUFLLElBQ1osUUFBUSxDQUNkLENBQUM7UUFDRixJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsRUFBRTtZQUM3Qix1Q0FBVyxXQUFXLEdBQUssT0FBTyxFQUFFO1NBQ3ZDO1FBRUQsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztJQUVELFFBQVE7UUFDSixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDZixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFDTyxPQUFPO1FBQ1gsTUFBTSxTQUFTLEdBQTBCLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDO1FBQ3JFLE1BQU0sV0FBVyxHQUFrQixJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQztRQUNqRSxJQUFJLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDO1NBQzNCO0lBQ0wsQ0FBQztJQUNPLFFBQVE7UUFDWixJQUFJLE9BQU8sSUFBSSxDQUFDLEtBQUssS0FBSyxRQUFRLEVBQUU7WUFDaEMsT0FBTztTQUNWO1FBQ0QsdUJBQXVCO1FBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFDRDs7OztPQUlHO0lBQ0ssT0FBTztRQUNYLElBQUksQ0FBQyxRQUFRLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDckQsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDbkMsS0FBSyxFQUFFLEdBQVMsRUFBRTtnQkFDZCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDakIsQ0FBQztTQUNKLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxZQUFZLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDN0QsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU07WUFDdkMsS0FBSyxFQUFFLEdBQVMsRUFBRTtnQkFDZCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDbkIsQ0FBQztTQUNKLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUNEOzs7T0FHRztJQUNLLGlCQUFpQixDQUFDLElBQVk7UUFDbEMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtZQUNwRixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztTQUM5QjtJQUNMLENBQUM7SUFDTyxVQUFVO1FBQ2QsSUFBSSxDQUFDLGFBQWEsR0FBRztZQUNqQixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87WUFDckIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1NBQ3hCLENBQUM7SUFDTixDQUFDO0lBQ00sS0FBSyxDQUFDLE1BQWM7UUFDdkIsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUMzQixPQUFPLEVBQUUsQ0FBQztTQUNiO1FBRUQsT0FBTyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsTUFBTSxFQUFFLENBQUM7SUFDakMsQ0FBQzs7O1lBNUdKLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsWUFBWTtnQkFDdEIsd2hEQUF3Qzs7YUFFM0M7OztpQkFPSSxLQUFLO29CQUNMLEtBQUs7bUJBQ0wsS0FBSztzQkFDTCxLQUFLO3NCQUNMLEtBQUs7dUJBQ0wsS0FBSzsyQkFDTCxLQUFLO29CQUNMLEtBQUs7c0JBQ0wsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUaUxvY2FsZSwgVGlMb2NhbGVXb3JkcyB9IGZyb20gJy4uLy4uL2xvY2FsZS9UaUxvY2FsZU1vZHVsZSc7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tICcuLi8uLi91dGlscy9VdGlsJztcclxuaW1wb3J0IHsgVGlNZXNzYWdlQnV0dG9uQ29uZmlnIH0gZnJvbSAnLi9UaU1lc3NhZ2VJbnRlcmZhY2UnO1xyXG5cclxuLyoqXHJcbiAqIG1lc3NnZeexu+Wei+iuvue9rlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVGlNZXNzYWdlVHlwZSA9ICdwcm9tcHQnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdjb25maXJtJztcclxuLyoqXHJcbiAqIEBpZ25vcmVcclxuICogbWVzc2FnZeaooeadv+e7hOS7tuWumuS5iVxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3RpLW1lc3NhZ2UnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL1RpTWVzc2FnZUNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL21lc3NhZ2UubGVzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUaU1lc3NhZ2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgLy8g5bi46YeP6YWN572uXHJcbiAgICBwcml2YXRlIENPTlNUX0NPTkZJRzogYW55ID0ge1xyXG4gICAgICAgIHZhbGlkVHlwZTogWydjb25maXJtJywgJ2Vycm9yJywgJ3dhcm4nLCAncHJvbXB0J10sXHJcbiAgICAgICAgZGVmYXVsdFR5cGU6ICdjb25maXJtJ1xyXG4gICAgfTtcclxuICAgIEBJbnB1dCgpIGlkOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSB0aXRsZTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgdHlwZTogVGlNZXNzYWdlVHlwZTtcclxuICAgIEBJbnB1dCgpIGNvbnRlbnQ6IGFueTtcclxuICAgIEBJbnB1dCgpIGNvbnRleHQ6IGFueTtcclxuICAgIEBJbnB1dCgpIG9rQnV0dG9uOiBUaU1lc3NhZ2VCdXR0b25Db25maWc7XHJcbiAgICBASW5wdXQoKSBjYW5jZWxCdXR0b246IFRpTWVzc2FnZUJ1dHRvbkNvbmZpZztcclxuICAgIEBJbnB1dCgpIGNsb3NlOiAoKSA9PiB2b2lkO1xyXG4gICAgQElucHV0KCkgZGlzbWlzczogKCkgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBjb250ZW50Q29uZmlnOiBhbnk7IC8vIOWGheWuueWMuuWfn+WxnuaAp+mFjee9rlxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2NhbGVXb3JkczogVGlMb2NhbGVXb3JkcyA9IFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7mjInpkq7lsZ7mgKfvvIjpmaRwcmltYXJ55ZKMYXV0b2ZvY3Vz5aSW77yJXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyDlpJbpg6jphY3nva7lsZ7mgKdcclxuICAgICAqIEBwYXJhbSBkZWZhdWx0cyDmjInpkq50ZXh05ZKMY2xpY2vlsZ7mgKdcclxuICAgICAqIEByZXR1cm5zIOWQiOW5tuWQjueahOWxnuaAp1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzZXRCdG4ob3B0aW9uczogVGlNZXNzYWdlQnV0dG9uQ29uZmlnLCBkZWZhdWx0czoge1xyXG4gICAgICAgIHRleHQ/OiBzdHJpbmcsXHJcbiAgICAgICAgY2xpY2soKTogdm9pZDtcclxuICAgIH0pOiBUaU1lc3NhZ2VCdXR0b25Db25maWcge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRPcHRzOiBUaU1lc3NhZ2VCdXR0b25Db25maWcgPSB7XHJcbiAgICAgICAgICAgIHNob3c6IHRydWUsXHJcbiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgLi4uZGVmYXVsdHNcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsuLi5kZWZhdWx0T3B0cywgLi4ub3B0aW9uc307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGVmYXVsdE9wdHM7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRUeXBlKCk7XHJcbiAgICAgICAgdGhpcy5zZXRUaXRsZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0QnRucygpO1xyXG4gICAgICAgIHRoaXMuc2V0Q29udGVudCgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzZXRUeXBlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkVHlwZTogQXJyYXk8VGlNZXNzYWdlVHlwZT4gID0gdGhpcy5DT05TVF9DT05GSUcudmFsaWRUeXBlO1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRUeXBlOiBUaU1lc3NhZ2VUeXBlID0gdGhpcy5DT05TVF9DT05GSUcuZGVmYXVsdFR5cGU7XHJcbiAgICAgICAgaWYgKHZhbGlkVHlwZS5pbmRleE9mKHRoaXMudHlwZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGRlZmF1bHRUeXBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0VGl0bGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRpdGxlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS4jeWQjOexu+Wei+eahG1lc3NhZ2XmnInpu5jorqR0aXRsZVxyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLmxvY2FsZVdvcmRzLnRpTWVzc2FnZVt0aGlzLnR5cGVdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7mjInpkq7lsZ7mgKfvvJpcclxuICAgICAqIOWvueaMiemSrueahOiuvue9ruaUr+aMgU9iamVjdOexu+Wei1xyXG4gICAgICog5Li6T2JqZWN057G75Z6L5pe277yM6KaG55uW5ZKM5omp5bGV6buY6K6k6K6+572uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0QnRucygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9rQnV0dG9uID0gVGlNZXNzYWdlQ29tcG9uZW50LnNldEJ0bih0aGlzLm9rQnV0dG9uLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMubG9jYWxlV29yZHMudGlNZXNzYWdlLm9rLFxyXG4gICAgICAgICAgICBjbGljazogKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24gPSBUaU1lc3NhZ2VDb21wb25lbnQuc2V0QnRuKHRoaXMuY2FuY2VsQnV0dG9uLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMubG9jYWxlV29yZHMudGlNZXNzYWdlLmNhbmNlbCxcclxuICAgICAgICAgICAgY2xpY2s6ICgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0QnRuVW5pcXVlU3RhdGUoJ2F1dG9mb2N1cycpO1xyXG4gICAgICAgIHRoaXMuc2V0QnRuVW5pcXVlU3RhdGUoJ3ByaW1hcnknKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5oyJ6ZKu5bGe5oCn77yM56Gu5L+d6buY6K6k54q25oCB5Y+q5Zyo5LiA5Liq5oyJ6ZKu55Sf5pWIXHJcbiAgICAgKiBAcGFyYW0gcHJvcCDmjInpkq7lsZ7mgKdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRCdG5VbmlxdWVTdGF0ZShwcm9wOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAoVXRpbC5pc1VuZGVmaW5lZCh0aGlzLm9rQnV0dG9uW3Byb3BdKSAmJiBVdGlsLmlzVW5kZWZpbmVkKHRoaXMuY2FuY2VsQnV0dG9uW3Byb3BdKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9rQnV0dG9uW3Byb3BdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldENvbnRlbnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50Q29uZmlnID0ge1xyXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0SWQoc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChVdGlsLmlzVW5kZWZpbmVkKHRoaXMuaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmlkfSR7c3VmZml4fWA7XHJcbiAgICB9XHJcbn1cclxuIl19