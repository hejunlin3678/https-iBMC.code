import { Component, ContentChild, ElementRef, EventEmitter, HostListener, Input, NgZone, Output, Renderer2, TemplateRef, ViewChild } from '@angular/core';
import { TiFormComponent } from '../base/TiBaseModule';
import { TiBrowser, TiKeymap } from '../../utils/Util';
import { TiLocale } from '../../locale/TiLocaleModule'; // 获取词条
/**
 * @ignore
 *  列表组件，使用者有menu、droplist
 */
export class TiListComponent extends TiFormComponent {
    constructor(render, hostRef, zone) {
        super(hostRef, render);
        this.zone = zone;
        // 列表数据配置
        this.multiple = false; // 是否多选
        this.labelKey = 'label'; // 要显示的字段
        this.tipPosition = 'right';
        this.noDataText = '...'; // 无数据时的显示文本
        this.hideEmptyOption = false; // 过滤空字符串选项
        this.selectAll = false; // 多选模式下是否有全选功能
        /**
         * 10.0.4 版本新增，
         * 用于配置是否显示children字段数据，大部分场景需要显示children，cascader不需要
         */
        this.showChildren = true;
        /**
         * @ignore
         * 10.1.0新增
         * 适配内部time类组件，点选滚动效果,暂不开放。
         */
        this.scrollTop = 0;
        /**
         * 选中事件，向外通知option数据
         */
        // tslint:disable-next-line:no-output-named-after-standard-event
        this.select = new EventEmitter();
        this.hover = new EventEmitter();
        /**
         *  需要阻止失焦标记: 点击面板时，会触发失焦，需要阻止失焦。
         *  IE兼容性问题: 点击滚动条，触发失焦，面板会收起
         *  修复方案：点击list面板区域（包含滚动条）后，给失焦元素强制获取焦点。修改Form基类不触发组件整体失焦。
         */
        this.stopBlur = false;
        this.unlistenIEScrollbarBugFns = [];
        this.selectAllText = TiLocale.getLocaleWords().tiList.selectAll;
        this.optionSelectAll = 'all';
        this.optionScrollTopLastTime = 0;
        // 判断是否禁用的函数: 函数类型是(any) => boolean，赋值是(item: any) => {}
        this.isDisabledFn = (item) => {
            return item && item.disabled === true;
            // tslint:disable-next-line:semicolon
        }; // 这个分号是书写正确的
    }
    get hoverOption() {
        return this._hoverOption;
    }
    set hoverOption(hoverOption) {
        if (this._hoverOption !== hoverOption) {
            this._hoverOption = hoverOption;
            this.hover.emit(hoverOption);
        }
    }
    // 在Selected使用List时，Selected的聚焦元素是Dominator和Searchbox，它们接收按键，并调用list来处理。
    // 在表格列设置时，List自己聚焦，List处理按键。
    onKeydown(event) {
        // 10.0.2删除 KEY_SPACE 空格快捷键的响应
        switch (event.keyCode) {
            case TiKeymap.KEY_ENTER: // ENTER键 相当于click
            case TiKeymap.KEY_NUMPAD_ENTER: // ENTER键(苹果数字小键盘)
                if (this.hoverOption) {
                    this.selectOption(this.hoverOption);
                }
                break;
            case TiKeymap.KEY_ESCAPE: // Esc键，仅可关闭
            case TiKeymap.KEY_TAB: // Tab键，仅可关闭
                break;
            case TiKeymap.KEY_ARROW_UP: // 向上箭头，上移选项
                event.preventDefault(); // 防止上下按键默认行为：移动滚动条
                this.nextOption(true);
                break;
            case TiKeymap.KEY_ARROW_DOWN: // 向下箭头，下移选项
                event.preventDefault(); // 防止上下按键默认行为：移动滚动条
                this.nextOption(false);
                break;
            default:
                break;
        }
    }
    ngOnInit() {
        this.zone.runOutsideAngular(() => {
            this.renderer.listen(this.nativeElement, 'mousedown', (event) => {
                // Select时，点击滚动条和点击面板，不要触发默认行为：dominator blur
                // 现在，list默认不聚焦。在所有场合，点击面板或者滚动条，都不触发默认焦点事件。
                event.preventDefault(); // 防止dominator blur行为
                // list自身可以落焦点时，需要聚焦的默认行为。
            });
            // list内部滚动条会引起外部滚动条事件触发，引起弹框内的下拉组件无法使用鼠标拖动滚动条，因此此处阻止事件冒泡
            this.renderer.listen(this.nativeElement, 'mousewheel', (event) => {
                event.stopPropagation();
            });
            this.renderer.listen(this.nativeElement, 'DOMMouseScroll', (event) => {
                event.stopPropagation();
            });
        });
    }
    ngOnChanges(changes) {
        super.ngOnChanges(changes);
        if (this.multiple && this.selectAll) {
            const optionsChange = changes['options'];
            if (optionsChange) {
                this.setSelectedAllState();
            }
        }
        // time及datetime/datetimeRange组件使用list，点选时候需要滚动效果
        if (changes['scrollTop'] && !changes['scrollTop'].firstChange) {
            this.setScrollFn();
        }
        if (changes['options']) {
            this.setHoverOption();
        }
    }
    ngAfterViewInit() {
        if (this.scrollTop > 0) {
            this.setScrollFn();
        }
    }
    writeValue(model) {
        super.writeValue(model);
        if (this.multiple && this.selectAll) {
            this.setSelectedAllState();
        }
    }
    // time及datetime/datetimeRange组件使用list，点选时候需要滚动效果
    setScrollFn() {
        if (TiBrowser.isIE()) {
            this.renderer.setProperty(this.hostRef.nativeElement, 'scrollTop', this.scrollTop);
            return;
        }
        this.hostRef.nativeElement.scrollTo(0, this.scrollTop);
    }
    // 下拉选项的鼠标按下操作
    onMousedownItem(event, own) {
        event.preventDefault();
        event.stopPropagation();
        own.classList.add('ti3-menu-panel-list-active');
    }
    // 下拉选项的鼠标按下后的抬起操作
    onMouseupItem(event, own) {
        this.removeClass(event, own);
    }
    // 下拉选项的鼠标离开时的操作
    onMouseleaveItem(event, own) {
        this.removeClass(event, own);
    }
    // 移除li元素上的ti3-menu-panel-list-active类
    removeClass(event, own) {
        event.preventDefault();
        event.stopPropagation();
        own.classList.remove('ti3-menu-panel-list-active');
    }
    // 下拉选项的单击操作（包括组名所在的<li>元素）
    onClickItem(event, option) {
        // Selected时，点击选项，不要触发默认行为：dominator blur。
        event.preventDefault(); // 防止dominator blur行为
        // Group节点和禁用节点，无需响应。
        if (this.isGroup(option) || this.isDisabledFn(option)) {
            event.stopPropagation();
            return;
        }
        // 只处理左键和中键
        if (event.button !== TiKeymap.MOUSE_LEFT_BUTTON
            && event.button !== TiKeymap.MOUSE_MIDDLE_BUTTON) { // Tiny2这里逻辑错误TODO：
            return;
        }
        // 点击选中项
        this.selectOption(option);
        // 更新hover
        this.hoverOption = option;
    }
    selectOption(option) {
        // 全选
        if (this.multiple && this.selectAll && option === this.optionSelectAll) {
            this.selectAllOptions();
            this.select.emit(option);
            return;
        }
        let index = -1;
        if (this.multiple) { // 多选
            if (!this.model) { // 如果为空值
                this.model = [];
            }
            // 是否选中，取反
            index = this.model.indexOf(option);
            if (index === -1) {
                this.model.push(option); // 点击下拉项选中，选中项按用户操作顺序显示
            }
            else if (index !== -1) {
                this.model.splice(index, 1);
            }
            // 强行向外通知model改变。
            this.model = this.model.concat();
            // 设置全选状态
            if (this.selectAll) {
                this.setSelectedAllState();
            }
        }
        else { // 单选
            this.model = option;
        }
        this.select.emit(option);
    }
    selectAllOptions() {
        if (!this.model) { // 如果为空值
            this.model = [];
        }
        const listOptions = this.getListOptions();
        let isChange = false;
        if (this.selectAllState === false || this.selectAllState === null) {
            listOptions.forEach((item) => {
                if (this.model.indexOf(item) === -1 && this.isSelectable(item)) { // 不在当前选中项且为可选数据项（排除禁用项和组名项）
                    // 点击全选按钮时的选中值顺序与option的顺序一致
                    const insertIndex = this.getInsertIndex(item);
                    this.model.splice(insertIndex, 0, item);
                    isChange = true;
                }
            });
            this.selectAllState = true;
        }
        else {
            listOptions.forEach((item) => {
                const index = this.model.indexOf(item);
                if (index !== -1 && !this.isDisabledFn(item)) {
                    this.model.splice(index, 1);
                    isChange = true;
                }
            });
            this.selectAllState = false;
        }
        if (isChange) {
            // model的值在以上循环中，多次变化，或者不变，根据isChange，一次性触发变化检测
            this.model = this.model.concat();
        }
    }
    setSelectedAllState() {
        if (!this.model || this.model.length === 0 || !this.options || this.options.length === 0) {
            this.selectAllState = false;
            return;
        }
        const listOptions = this.getListOptions();
        const selectedOptions = listOptions.filter((item) => {
            return this.isSelectable(item) && this.model.includes(item);
        });
        if (selectedOptions.length === 0) {
            this.selectAllState = false;
            return;
        }
        const selectableOptions = listOptions.filter((item) => {
            return this.isSelectable(item);
        });
        this.selectAllState = selectedOptions.length === selectableOptions.length ? true : null;
    }
    // 获取新插入元素的插入次序，该次序与list集合中的元素顺序保持一致
    getInsertIndex(option) {
        const listOptions = this.getListOptions();
        const indexOfList = listOptions.indexOf(option); // 当前元素在list中的排序
        // 将该元素与已选中在list中的次序进行比较，如果该元素在某选中项次序之后，则将其插入该元素之后
        for (let i = this.model.length; i > 0; i--) {
            const itemIndexOfList = listOptions.indexOf(this.model[i - 1]);
            if (itemIndexOfList < indexOfList) {
                return i;
            }
        }
        return 0;
    }
    onMouseenterItem(event, option) {
        // 是可选项，且不是在选中项置Top时鼠标经过。
        // tslint:disable-next-line:prefer-conditional-expression
        if (this.isSelectable(option) && new Date().getTime() - this.optionScrollTopLastTime > TiListComponent.SCROLL_TOP_TIME) {
            this.hoverOption = option; // 更新hover
        }
    }
    // 寻找下一个可选项。参数：向上/向下
    nextOption(isUp) {
        const listOptions = this.getListOptions();
        if (this.multiple && this.selectAll) {
            listOptions.unshift(this.optionSelectAll);
        }
        if (listOptions.filter((x) => this.isSelectable(x)).length === 0) { // 没有可选中的项目
            return;
        }
        let nextOption = this.hoverOption;
        let curIndex = listOptions.indexOf(nextOption);
        do {
            if (isUp) {
                // tslint:disable-next-line:prefer-conditional-expression
                if (curIndex > 0) { // 找到了，且不是第一个元素
                    curIndex = curIndex - 1;
                }
                else { // -1没有找到, 0第一个元素
                    curIndex = listOptions.length - 1; // 跳到第一个元素。
                }
            }
            else {
                // tslint:disable-next-line:prefer-conditional-expression
                if (curIndex < listOptions.length - 1) { // -1没有找到, 和不是最后一个
                    curIndex = curIndex + 1;
                }
                else { // length - 1 最后一个元素
                    curIndex = 0; // 跳到第一个元素。
                }
            }
            nextOption = listOptions[curIndex];
        } while (!(this.isSelectable(nextOption) || nextOption === this.hoverOption)); // 找到停止，或者寻找一圈停止
        // 没有找到结果
        if (nextOption === null || nextOption === this.hoverOption) {
            return;
        }
        // 改变hover选项。
        this.hoverOption = nextOption;
        // 更新滚动条
        this.optionScollTop(this.hoverOption);
    }
    getListOptions() {
        let listOptions = []; // 装有所有选项的数组
        if (this.options) {
            this.options.forEach((x) => {
                listOptions.push(x);
                if (this.isGroup(x)) {
                    listOptions = listOptions.concat(x.children);
                }
            });
        }
        return listOptions;
    }
    // 滚动到选中项元素，多选定位到第一个选中项元素，无选中项时定义到第一项元素；
    // 适用于每次下拉打开的场景
    scrollToSelected() {
        // 获取当前选中项
        let selectedItem;
        // tslint:disable-next-line:prefer-conditional-expression
        if (this.multiple) {
            selectedItem = (this.model && this.model.length > 0) ? this.model[0] : null;
        }
        else {
            selectedItem = this.model;
        }
        if (selectedItem) { // 有选中项时，自动定位到第一个选中元素
            this.scrollToEle(selectedItem, true);
        }
        else { // 无选中项时，定位在第一项元素
            this.nativeElement.scrollTop = 0;
        }
        this.setHoverOption();
    }
    /**
     * 设置hoverOption
     * 用于数据更新时，非鼠标或快捷键操作时
     */
    setHoverOption() {
        var _a, _b;
        this.hoverOption = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.length) > 0
            ? (this.hasSelectedinList()
                ? this.getHoverOptionInModel()
                : (this.multiple && this.selectAll
                    ? this.optionSelectAll
                    : (((_b = this.options[0]) === null || _b === void 0 ? void 0 : _b.children) ? this.getGroupHoverOption()
                        : this.options.find((option) => !this.isDisabledFn(option)))))
            : undefined;
    }
    /**
     * 单选有model的时候，单选的model不会是禁用项，hoverOption应当是model，
     * 多选有model的时候，hoverOption是第一个非禁用的model，如果model全部禁用，hoverOption是第一个禁用项往下的第一个可用项。
     */
    getHoverOptionInModel() {
        return this.multiple
            ? (this.model.find((item) => !this.isDisabledFn(item))
                || this.options.find((item, index) => {
                    return index > this.options.indexOf(this.model[0]) && !this.isDisabledFn(item);
                }))
            : this.model;
    }
    /**
     * 判断当前list中是否有选中项，过滤后的数据有可能不含有选中项
     */
    hasSelectedinList() {
        var _a;
        const listOption = this.getListOptions();
        if (this.multiple && ((_a = this.model) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            return !!this.model.find((item) => listOption.includes(item));
        }
        else if (this.model) {
            return listOption.includes(this.model);
        }
        else {
            return false;
        }
    }
    // 分组情况下，找到hoverOption
    getGroupHoverOption() {
        let groupHoverOption;
        this.options.find((option) => {
            if (option.children.length > 0) {
                groupHoverOption = option.children.find((child) => !this.isDisabledFn(child));
            }
            return groupHoverOption ? true : false; // 这个return只是为了结束find方法
        });
        return groupHoverOption; // 这个return是为了返回查找结果
    }
    scrollToEle(option, isScrollBySelected = false) {
        if (!option || !this.ulRef) { // 第一次model值改变时, ulRef不存在。
            return;
        }
        const listOptions = this.getListOptions();
        if (this.multiple && this.selectAll) {
            listOptions.unshift(this.optionSelectAll);
        }
        const curIndex = listOptions.indexOf(option);
        if (curIndex < 2 && isScrollBySelected) {
            return; // 前两项不需要滚动
        }
        // 下拉框有滚动条时，若上下选项足够，选中项为下拉框的第二项，这样可以展示选中项的前后选项
        const scrollTopOptionIndex = Math.max(curIndex - 1, 0);
        const ele = this.ulRef.nativeElement.getElementsByTagName('LI')[scrollTopOptionIndex];
        if (ele) {
            this.nativeElement.scrollTop = ele.offsetTop;
        }
    }
    optionScollTop(option) {
        this.optionScrollTopLastTime = new Date().getTime();
        this.scrollToEle(option);
    }
    // 是组数据项
    isGroup(item) {
        return item && item.hasOwnProperty('children') && this.showChildren;
    }
    // 是可选数据项
    isSelectable(item) {
        return !this.isGroup(item) && !this.isDisabledFn(item);
    }
    // 是已选中数据项
    isSelected(item) {
        return (!this.multiple && item === this.model) ||
            (this.multiple && this.model && this.model.includes(item));
    }
    /**
     * 修复点击IE滚动条，面板关闭。
     * 打开面板时监听，关闭和销毁面板时取消监听。
     */
    listenIESrollbarBug() {
        // IE兼容性涉及知识，见本文件底部。
        // IE兼容性问题: 点击滚动条，触发失焦，面板会收起
        // 修复方案：点击list面板区域（包含滚动条）后，给失焦元素强制获取焦点。修改Form基类不触发组件整体失焦。
        if (TiBrowser.isIE()) {
            // 点击面板，阻止Blur
            this.unlistenIEScrollbarBugFns.push(this.renderer.listen(this.nativeElement, 'mousedown', (event) => {
                this.stopBlur = true; // 标记，以供focusin消耗
                // 阻止冒泡到document，因为document会把标志位改回false。和下面修复双击滚动条Bug配合
                event.stopPropagation();
            }));
            // 修复bug：双击滚动条，再点击面板之外，不失焦。
            this.unlistenIEScrollbarBugFns.push(this.renderer.listen(document, 'mousedown', (event) => {
                // 点击面板之外区域，不阻止blur
                this.stopBlur = false;
            }));
            // IE事件顺序：focusout->foucsin->blur->focus, 支持冒泡的focusin/focusout, 不支持冒泡的是focus/blur
            this.unlistenIEScrollbarBugFns.push(this.renderer.listen(document.body, 'focusin', (event) => {
                if (this.stopBlur && event.relatedTarget !== document.body) {
                    // 本来不需要!==document, 但连续多次点击太快，会发生：刚点击一下，上次的dominator->body focusin, 会进来
                    // 清零，因为下面的聚焦事件，又会触发focusin事件，并不想处理
                    this.stopBlur = false; // 一般情况这里置为false是可以的。
                    // focusin事件，target是聚焦元素。relatedTarget是失焦元素。
                    // 强制让失焦元素，重新获得焦点。
                    event.relatedTarget.focus();
                }
            }));
        }
    }
    unlistenIESrollbarBug() {
        if (TiBrowser.isIE()) {
            // 解绑监听
            for (const x of this.unlistenIEScrollbarBugFns) {
                x();
            }
        }
    }
}
TiListComponent.SCROLL_TOP_TIME = 200; // 设置选中项滚动到TOP所需时间。Chorme下简单测试。TODO：其他浏览器、复杂数据
TiListComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-list',
                template: "<ul #ulRef tabindex=\"-1\" *ngIf=\"options&&options.length > 0 else nodatatemplate\"  [ngClass]=\"{'ti3-dropdown-group':isGroup(options[0])}\" class=\"ti3-drop-list-ul\" [id]=\"appendId('list')\">\r\n        <li *ngIf=\"selectAll && multiple\"\r\n            class=\"ti3-dropdown-option\"\r\n            [ngClass]=\"{'ti3-dropdown-option-hover': optionSelectAll === hoverOption}\"\r\n            (click)=\"onClickItem($event, optionSelectAll)\"\r\n            (mouseenter)=\"onMouseenterItem($event, optionSelectAll)\"\r\n            [id]=\"appendId('select_all')\">\r\n                <section class=\"ti3-overflow-padding\">\r\n                        <label  class=\"ti3-icon ti3-icon-checkmark ti3-multi-select-checkbox\"\r\n                                [ngClass]=\"{'ti3-multi-select-checkbox-selected': selectAllState === true,\r\n                                            'ti3-multi-select-checkbox-indeterminate': selectAllState === null}\">\r\n                        </label>\r\n                        <span [title]=\"selectAllText\">{{selectAllText}}</span>\r\n                </section>\r\n\r\n        </li>\r\n        <ng-container *ngFor=\"let option of options; let i = index\">\r\n                <ng-container *ngTemplateOutlet=\"optionTemplate; context:  {$implicit: option, index: i, liid: i}\">\r\n                </ng-container>\r\n                <ng-container *ngIf=\"showChildren\">\r\n                        <ng-container *ngFor=\"let child of option.children; let j = index;let last = last;\">\r\n                                <ng-container *ngTemplateOutlet=\"optionTemplate; context:  {$implicit: child, index: j, liid: i+'_'+j,last: last}\">\r\n                                </ng-container>\r\n                        </ng-container>\r\n                </ng-container>\r\n        </ng-container>\r\n</ul>\r\n<!-- no data\u6A21\u677F -->\r\n<ng-template #nodatatemplate>\r\n        <div class=\"ti3-dropdown-no-data\" [innerHtml]=\"noDataText\"></div>\r\n</ng-template>\r\n<!-- \u5206\u7EC4\u548C\u9009\u9879\u7684\u6A21\u677F -->\r\n<ng-template #optionTemplate let-item let-i=index let-lid=liid let-last=last><!--\u4E24\u5C42\u6A21\u677F\u5D4C\u5957\uFF0C\u6709\u70B9\u96BE\u7406\u89E3-->\r\n        <li #liRefs [ngClass]=\"{'ti3-dropdown-group-list':isGroup(item),\r\n                'ti3-dropdown-group-list-cascader': item.children && item.children.length > 0 && !showChildren,\r\n                'ti3-dropdown-option':!isGroup(item),\r\n                'ti3-dropdown-option-disabled': !isGroup(item)&&isDisabledFn(item),\r\n                'ti3-dropdown-option-selected': !isGroup(item)&&!multiple&&isSelected(item),\r\n                'ti3-dropdown-option-hover': !isGroup(item)&&item === hoverOption}\"\r\n                (click)=\"onClickItem($event, item)\"\r\n                (mouseenter)=\"onMouseenterItem($event, item)\"\r\n                [id]=\"appendId(lid)\">\r\n                        <section [tiTip]=\"item.tip\"\r\n                                [tiTipPosition]=\"tipPosition\"\r\n                                [tiTipHostEleX]=\"nativeElement\"\r\n                                [tiTipContext]=\"item\"\r\n                                class=\"ti3-overflow-padding\">\r\n                                <label *ngIf=\"multiple&&!isGroup(item)\"\r\n                                        class=\"ti3-icon ti3-icon-checkmark ti3-multi-select-checkbox\"\r\n                                        [ngClass]=\"{'ti3-multi-select-checkbox-selected': isSelected(item)}\">\r\n                                </label>\r\n                                <ng-container *ngIf=\"itemTemplate else labelTemplate\">\r\n                                        <ng-container *ngTemplateOutlet=\"itemTemplate; context: {$implicit: item, index: i,last: last}\">\r\n                                        </ng-container>\r\n                                </ng-container>\r\n                                <ng-template #labelTemplate><span [title]=\"item[labelKey]\">{{item[labelKey]}}</span></ng-template>\r\n                        </section>\r\n        </li>\r\n</ng-template>",
                providers: [TiFormComponent.getValueAccessor(TiListComponent)],
                styles: ["::ng-deep :root{--ti-multiselect-text-min-height:30px}:host{box-sizing:border-box;display:inline-block;overflow-x:hidden;overflow-y:auto;padding:var(--ti-common-space-base) 0;position:relative}:host:focus{outline:none}.ti3-dropdown-group>.ti3-dropdown-option{padding-left:var(--ti-common-space-3x)}.ti3-overflow-padding{overflow:hidden;padding:0 10px;text-overflow:ellipsis;white-space:nowrap}.ti3-dropdown-option{background-color:var(--ti-common-color-bg-white-normal);color:inherit;cursor:pointer;line-height:var(--ti-common-line-height-number);list-style:none;padding:var(--ti-common-space-6) 0;text-align:left}.ti3-dropdown-option [tiTextweaken]{color:var(--ti-common-color-text-weaken)}.ti3-dropdown-option:first-child{margin-top:0}.ti3-dropdown-group-list{box-sizing:border-box;color:var(--ti-select-group-color);font-weight:700;height:var(--ti-multiselect-text-min-height);line-height:var(--ti-multiselect-text-min-height);text-align:left}.ti3-dropdown-group-list-cascader{padding-right:var(--ti-common-space-4x);position:relative}.ti3-dropdown-group-list-cascader:after{border-bottom:5px solid var(--ti-common-color-icon-normal);border-left:4px solid transparent;border-right:4px solid transparent;content:\"\";display:block;height:0;position:absolute;right:calc(var(--ti-common-space-3x) - 2px);top:50%;transform:translateY(-50%) rotate(90deg);width:0}.ti3-dropdown-option-selected.ti3-dropdown-group-list-cascader:after{border-bottom-color:var(--ti-common-color-icon-white)}.ti3-dropdown-option-disabled.ti3-dropdown-group-list-cascader:after{border-bottom-color:var(--ti-common-color-icon-disabled)}.ti3-dropdown-no-data,.ti3-dropdown-option.ti3-dropdown-option-disabled,.ti3-dropdown-option.ti3-dropdown-option-disabled:hover,.ti3-dropdown-option.ti3-dropdown-option-disabled [tiTextweaken],.ti3-dropdown-option.ti3-dropdown-option-disabled [tiTextweaken]:hover{color:var(--ti-common-color-text-disabled);cursor:not-allowed}.ti3-dropdown-no-data{line-height:var(--ti-common-line-height-number);padding:var(--ti-common-space-6) var(--ti-input-padding-horizontal)}.ti3-dropdown-option-hover,.ti3-dropdown-option-hover [tiTextweaken]{background-color:var(--ti-select-item-bg-color-hover);color:var(--ti-select-item-text-color-hover)}.ti3-dropdown-option-selected,.ti3-dropdown-option-selected [tiTextweaken]{background-color:var(--ti-select-item-selected-bg-color);color:var(--ti-select-item-selected-text-color)}.ti3-drop-list-ul{overflow-x:hidden;overflow-y:auto}", ".ti3-multi-select-checkbox{-ms-box-sizing:border-box;background-color:var(--ti-checkbox-bg-color);border:1px solid var(--ti-checkbox-border-color);border-radius:var(--ti-common-border-radius-normal);box-sizing:border-box;color:var(--ti-common-color-text-white);cursor:pointer;display:inline-block;height:var(--ti-checkbox-size);line-height:var(--ti-checkbox-mark-size);margin-right:10px;text-align:center;width:var(--ti-checkbox-size)}.ti3-dropdown-option .ti3-multi-select-checkbox-selected{background:var(--ti-checkbox-bg-color-checked);border-color:var(--ti-checkbox-bg-color-checked)}.ti3-dropdown-option .ti3-multi-select-checkbox-indeterminate{border-color:var(--ti-checkbox-bg-color-checked);border-width:5px;vertical-align:sub}.ti3-dropdown-option .ti3-multi-select-checkbox-indeterminate:before{content:\"\"}.ti3-dropdown-option-disabled .ti3-multi-select-checkbox{background:var(--ti-checkbox-bg-color-disable);border-color:var(--ti-common-color-line-dividing);color:var(--ti-checkbox-bg-color-disable);cursor:not-allowed}.ti3-dropdown-option-disabled .ti3-multi-select-checkbox.ti3-multi-select-checkbox-selected{color:var(--ti-checkbox-mark-color-disabled)}"]
            },] }
];
TiListComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: NgZone }
];
TiListComponent.propDecorators = {
    multiple: [{ type: Input }],
    options: [{ type: Input }],
    labelKey: [{ type: Input }],
    tipPosition: [{ type: Input }],
    noDataText: [{ type: Input }],
    hideEmptyOption: [{ type: Input }],
    selectAll: [{ type: Input }],
    showChildren: [{ type: Input }],
    scrollTop: [{ type: Input }],
    select: [{ type: Output }],
    hover: [{ type: Output }],
    itemTemplate: [{ type: ContentChild, args: [TemplateRef, /* TODO: add static flag */ { static: true },] }],
    ulRef: [{ type: ViewChild, args: ['ulRef',] }],
    isDisabledFn: [{ type: Input }],
    onKeydown: [{ type: HostListener, args: ['keydown', ['$event'],] }]
};
/*
IE兼容性问题：点击面板滚动条，触发失焦，无法阻止。
解决方案：给失焦元素强制获取焦点。修改Form基类不触发组件整体失焦。

涉及知识点：
点击div面板的滚动条，浏览器会失焦，焦点到body。event.preventDefault();，可以阻止默认失焦行为。
点击div面板的滚动条，浏览器会失焦，焦点到body。无法阻止。（问题产生）

Chrome浏览器事件顺序：
blur->focusout->focus->foucsin
IE浏览器事件顺序：
focusout->focusin->blur->focus

IE浏览器，在blur事件里，失焦元素.focus(),	会先显示失焦css，后显示聚焦css，会闪一下。
IE浏览器，在focusout事件里，失焦元素.focus(), 无效。
IE浏览器，在focusin事件里，失焦元素.focus(), 会一直显示聚焦css，不会闪。（作为解决问题的方案）

Chrome blur事件时，document.activeElement是body
IE blur事件时，document.activeElement是将要聚焦的元素。
IE 如果在focusin里，失焦元素.focus()，那么blur时document.activeElement刚好是这个失焦并强制聚焦的元素。

第一版方案：
强制聚焦，用了延时处理
整体onBlur时，IE特殊处理，不闭合面板
闭合面板时，处理标志位。
解决双击滚动条bug，利用监听面板之外点击。

第二版方案：
强制聚焦，不用延时。
修复Form基类，不再触发整体失焦/聚焦。
闭合面板时，处理标志位 （TODO: 设法去除。尽量集中对标志位的管理）
解决双击滚动条bug，利用监听面板之外点击。（TODO: 设法去除。尽量集中对标志位的管理）

第三版方案：
面板打开时监听mouse，面板闭合时不再监听

 */
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlMaXN0Q29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL2NvbXBvbmVudHMvbGlzdC9UaUxpc3RDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQ3BFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBK0IsV0FBVyxFQUFFLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUNoSCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQVEsTUFBTSxrQkFBa0IsQ0FBQztBQUU3RCxPQUFPLEVBQUUsUUFBUSxFQUFpQyxNQUFNLDZCQUE2QixDQUFDLENBQUMsT0FBTztBQUU5Rjs7O0dBR0c7QUFPSCxNQUFNLE9BQU8sZUFBZ0IsU0FBUSxlQUFlO0lBNERoRCxZQUFZLE1BQWlCLEVBQUUsT0FBbUIsRUFBVSxJQUFZO1FBQ3BFLEtBQUssQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFEaUMsU0FBSSxHQUFKLElBQUksQ0FBUTtRQXpEeEUsU0FBUztRQUNBLGFBQVEsR0FBWSxLQUFLLENBQUMsQ0FBQyxPQUFPO1FBRWxDLGFBQVEsR0FBVyxPQUFPLENBQUMsQ0FBQyxTQUFTO1FBQ3JDLGdCQUFXLEdBQW1CLE9BQU8sQ0FBQztRQUN0QyxlQUFVLEdBQVcsS0FBSyxDQUFDLENBQU8sWUFBWTtRQUM5QyxvQkFBZSxHQUFZLEtBQUssQ0FBQyxDQUFPLFdBQVc7UUFDbkQsY0FBUyxHQUFZLEtBQUssQ0FBQyxDQUFDLGVBQWU7UUFDcEQ7OztXQUdHO1FBQ00saUJBQVksR0FBWSxJQUFJLENBQUM7UUFDdEM7Ozs7V0FJRztRQUNNLGNBQVMsR0FBVyxDQUFDLENBQUM7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SSxJQUFJLENBQUMseUJBQXlCLEVBQUU7Z0JBQzVDLENBQUMsRUFBRSxDQUFDO2FBQ1A7U0FDSjtJQUNMLENBQUM7O0FBdmdCeUIsK0JBQWUsR0FBVyxHQUFHLENBQUMsQ0FBQyw4Q0FBOEM7O1lBUjFHLFNBQVMsU0FBQztnQkFDTCxRQUFRLEVBQUUsU0FBUztnQkFDbkIsK2lJQUEwQjtnQkFFMUIsU0FBUyxFQUFFLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDOzthQUNuRTs7O1lBZjBCLFNBQVM7WUFERixVQUFVO1lBQ2pDLE1BQU07Ozt1QkFvQlosS0FBSztzQkFDTCxLQUFLO3VCQUNMLEtBQUs7MEJBQ0wsS0FBSzt5QkFDTCxLQUFLOzhCQUNMLEtBQUs7d0JBQ0wsS0FBSzsyQkFLTCxLQUFLO3dCQU1MLEtBQUs7cUJBTUwsTUFBTTtvQkFDTixNQUFNOzJCQUVOLFlBQVksU0FBQyxXQUFXLEVBQUUsMkJBQTJCLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO29CQUN0RSxTQUFTLFNBQUMsT0FBTzsyQkF5QmpCLEtBQUs7d0JBVUwsWUFBWSxTQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQzs7QUF5Y3ZDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQ0ciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsXHJcbiAgICBJbnB1dCwgTmdab25lLCBPdXRwdXQsIFJlbmRlcmVyMiwgU2ltcGxlQ2hhbmdlLCBTaW1wbGVDaGFuZ2VzLCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVGlGb3JtQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9UaUJhc2VNb2R1bGUnO1xyXG5pbXBvcnQgeyBUaUJyb3dzZXIsIFRpS2V5bWFwLCBVdGlsIH0gZnJvbSAnLi4vLi4vdXRpbHMvVXRpbCc7XHJcbmltcG9ydCB7IFRpUG9zaXRpb25UeXBlIH0gZnJvbSAnLi4vLi4vdXRpbHMvUG9zaXRpb24nO1xyXG5pbXBvcnQgeyBUaUxvY2FsZSwgVGlMb2NhbGVGb3JtYXQsIFRpTG9jYWxlV29yZHMgfSBmcm9tICcuLi8uLi9sb2NhbGUvVGlMb2NhbGVNb2R1bGUnOyAvLyDojrflj5bor43mnaFcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqICDliJfooajnu4Tku7bvvIzkvb/nlKjogIXmnIltZW5144CBZHJvcGxpc3RcclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgICBzZWxlY3RvcjogJ3RpLWxpc3QnLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogJy4vbGlzdC5odG1sJyxcclxuICAgICAgc3R5bGVVcmxzOiBbJy4vbGlzdC5sZXNzJywgJy4vbGlzdC1tdWx0aS5sZXNzJ10sXHJcbiAgICAgIHByb3ZpZGVyczogW1RpRm9ybUNvbXBvbmVudC5nZXRWYWx1ZUFjY2Vzc29yKFRpTGlzdENvbXBvbmVudCldXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUaUxpc3RDb21wb25lbnQgZXh0ZW5kcyBUaUZvcm1Db21wb25lbnQge1xyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgU0NST0xMX1RPUF9USU1FOiBudW1iZXIgPSAyMDA7IC8vIOiuvue9rumAieS4remhuea7muWKqOWIsFRPUOaJgOmcgOaXtumXtOOAgkNob3JtZeS4i+eugOWNlea1i+ivleOAglRPRE/vvJrlhbbku5bmtY/op4jlmajjgIHlpI3mnYLmlbDmja5cclxuICAgIC8vIOWIl+ihqOaVsOaNrumFjee9rlxyXG4gICAgQElucHV0KCkgbXVsdGlwbGU6IGJvb2xlYW4gPSBmYWxzZTsgLy8g5piv5ZCm5aSa6YCJXHJcbiAgICBASW5wdXQoKSBvcHRpb25zOiBBcnJheTxhbnk+OyAvLyDkuIvmi4npgInpobnnmoTlhajpg6jmlbDmja5cclxuICAgIEBJbnB1dCgpIGxhYmVsS2V5OiBzdHJpbmcgPSAnbGFiZWwnOyAvLyDopoHmmL7npLrnmoTlrZfmrrVcclxuICAgIEBJbnB1dCgpIHRpcFBvc2l0aW9uOiBUaVBvc2l0aW9uVHlwZSA9ICdyaWdodCc7XHJcbiAgICBASW5wdXQoKSBub0RhdGFUZXh0OiBzdHJpbmcgPSAnLi4uJzsgICAgICAgLy8g5peg5pWw5o2u5pe255qE5pi+56S65paH5pysXHJcbiAgICBASW5wdXQoKSBoaWRlRW1wdHlPcHRpb246IGJvb2xlYW4gPSBmYWxzZTsgICAgICAgLy8g6L+H5ruk56m65a2X56ym5Liy6YCJ6aG5XHJcbiAgICBASW5wdXQoKSBzZWxlY3RBbGw6IGJvb2xlYW4gPSBmYWxzZTsgLy8g5aSa6YCJ5qih5byP5LiL5piv5ZCm5pyJ5YWo6YCJ5Yqf6IO9XHJcbiAgICAvKipcclxuICAgICAqIDEwLjAuNCDniYjmnKzmlrDlop7vvIxcclxuICAgICAqIOeUqOS6jumFjee9ruaYr+WQpuaYvuekumNoaWxkcmVu5a2X5q615pWw5o2u77yM5aSn6YOo5YiG5Zy65pmv6ZyA6KaB5pi+56S6Y2hpbGRyZW7vvIxjYXNjYWRlcuS4jemcgOimgVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzaG93Q2hpbGRyZW46IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiAxMC4xLjDmlrDlop5cclxuICAgICAqIOmAgumFjeWGhemDqHRpbWXnsbvnu4Tku7bvvIzngrnpgInmu5rliqjmlYjmnpws5pqC5LiN5byA5pS+44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNjcm9sbFRvcDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reS6i+S7tu+8jOWQkeWklumAmuefpW9wdGlvbuaVsOaNrlxyXG4gICAgICovXHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tb3V0cHV0LW5hbWVkLWFmdGVyLXN0YW5kYXJkLWV2ZW50XHJcbiAgICBAT3V0cHV0KCkgcmVhZG9ubHkgc2VsZWN0OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IGhvdmVyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLy8gaXRlbeaooeadv1xyXG4gICAgQENvbnRlbnRDaGlsZChUZW1wbGF0ZVJlZiwgLyogVE9ETzogYWRkIHN0YXRpYyBmbGFnICovIHsgc3RhdGljOiB0cnVlIH0pIGl0ZW1UZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIEBWaWV3Q2hpbGQoJ3VsUmVmJykgdWxSZWY6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg6ZyA6KaB6Zi75q2i5aSx54Sm5qCH6K6wOiDngrnlh7vpnaLmnb/ml7bvvIzkvJrop6blj5HlpLHnhKbvvIzpnIDopoHpmLvmraLlpLHnhKbjgIJcclxuICAgICAqICBJReWFvOWuueaAp+mXrumimDog54K55Ye75rua5Yqo5p2h77yM6Kem5Y+R5aSx54Sm77yM6Z2i5p2/5Lya5pS26LW3XHJcbiAgICAgKiAg5L+u5aSN5pa55qGI77ya54K55Ye7bGlzdOmdouadv+WMuuWfn++8iOWMheWQq+a7muWKqOadoe+8ieWQju+8jOe7meWkseeEpuWFg+e0oOW8uuWItuiOt+WPlueEpueCueOAguS/ruaUuUZvcm3ln7rnsbvkuI3op6blj5Hnu4Tku7bmlbTkvZPlpLHnhKbjgIJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdG9wQmx1cjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSB1bmxpc3RlbklFU2Nyb2xsYmFyQnVnRm5zOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xyXG4gICAgcHVibGljIHNlbGVjdEFsbFN0YXRlOiBib29sZWFuO1xyXG4gICAgcHVibGljIHNlbGVjdEFsbFRleHQ6IHN0cmluZyA9IFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudGlMaXN0LnNlbGVjdEFsbDtcclxuICAgIHB1YmxpYyBvcHRpb25TZWxlY3RBbGw6IHN0cmluZyA9ICdhbGwnO1xyXG5cclxuICAgIHByaXZhdGUgX2hvdmVyT3B0aW9uOiBhbnk7XHJcbiAgICBwdWJsaWMgZ2V0IGhvdmVyT3B0aW9uKCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvdmVyT3B0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBob3Zlck9wdGlvbihob3Zlck9wdGlvbjogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hvdmVyT3B0aW9uICE9PSBob3Zlck9wdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9ob3Zlck9wdGlvbiA9IGhvdmVyT3B0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmhvdmVyLmVtaXQoaG92ZXJPcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByb3RlY3RlZCBvcHRpb25TY3JvbGxUb3BMYXN0VGltZTogbnVtYmVyID0gMDtcclxuICAgIC8vIOWIpOaWreaYr+WQpuemgeeUqOeahOWHveaVsDog5Ye95pWw57G75Z6L5pivKGFueSkgPT4gYm9vbGVhbu+8jOi1i+WAvOaYryhpdGVtOiBhbnkpID0+IHt9XHJcbiAgICBASW5wdXQoKSBpc0Rpc2FibGVkRm46IChpdGVtOiBhbnkpID0+IGJvb2xlYW4gPSAoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0gJiYgaXRlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6c2VtaWNvbG9uXHJcbiAgICB9OyAgLy8g6L+Z5Liq5YiG5Y+35piv5Lmm5YaZ5q2j56Gu55qEXHJcbiAgICBjb25zdHJ1Y3RvcihyZW5kZXI6IFJlbmRlcmVyMiwgaG9zdFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSB6b25lOiBOZ1pvbmUpIHtcclxuICAgICAgICBzdXBlcihob3N0UmVmLCByZW5kZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWcqFNlbGVjdGVk5L2/55SoTGlzdOaXtu+8jFNlbGVjdGVk55qE6IGa54Sm5YWD57Sg5pivRG9taW5hdG9y5ZKMU2VhcmNoYm9477yM5a6D5Lus5o6l5pS25oyJ6ZSu77yM5bm26LCD55SobGlzdOadpeWkhOeQhuOAglxyXG4gICAgLy8g5Zyo6KGo5qC85YiX6K6+572u5pe277yMTGlzdOiHquW3seiBmueEpu+8jExpc3TlpITnkIbmjInplK7jgIJcclxuICAgIEBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKSBvbktleWRvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyAxMC4wLjLliKDpmaQgS0VZX1NQQUNFIOepuuagvOW/q+aNt+mUrueahOWTjeW6lFxyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRpS2V5bWFwLktFWV9FTlRFUjogLy8gRU5URVLplK4g55u45b2T5LqOY2xpY2tcclxuICAgICAgICAgICAgY2FzZSBUaUtleW1hcC5LRVlfTlVNUEFEX0VOVEVSOiAvLyBFTlRFUumUrijoi7nmnpzmlbDlrZflsI/plK7nm5gpXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ob3Zlck9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKHRoaXMuaG92ZXJPcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVGlLZXltYXAuS0VZX0VTQ0FQRTogLy8gRXNj6ZSu77yM5LuF5Y+v5YWz6ZetXHJcbiAgICAgICAgICAgIGNhc2UgVGlLZXltYXAuS0VZX1RBQjogLy8gVGFi6ZSu77yM5LuF5Y+v5YWz6ZetXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUaUtleW1hcC5LRVlfQVJST1dfVVA6IC8vIOWQkeS4iueureWktO+8jOS4iuenu+mAiemhuVxyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g6Ziy5q2i5LiK5LiL5oyJ6ZSu6buY6K6k6KGM5Li677ya56e75Yqo5rua5Yqo5p2hXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRPcHRpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUaUtleW1hcC5LRVlfQVJST1dfRE9XTjogLy8g5ZCR5LiL566t5aS077yM5LiL56e76YCJ6aG5XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyDpmLLmraLkuIrkuIvmjInplK7pu5jorqTooYzkuLrvvJrnp7vliqjmu5rliqjmnaFcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dE9wdGlvbihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLm5hdGl2ZUVsZW1lbnQsICdtb3VzZWRvd24nLCAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFNlbGVjdOaXtu+8jOeCueWHu+a7muWKqOadoeWSjOeCueWHu+mdouadv++8jOS4jeimgeinpuWPkem7mOiupOihjOS4uu+8mmRvbWluYXRvciBibHVyXHJcbiAgICAgICAgICAgICAgICAvLyDnjrDlnKjvvIxsaXN06buY6K6k5LiN6IGa54Sm44CC5Zyo5omA5pyJ5Zy65ZCI77yM54K55Ye76Z2i5p2/5oiW6ICF5rua5Yqo5p2h77yM6YO95LiN6Kem5Y+R6buY6K6k54Sm54K55LqL5Lu244CCXHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyDpmLLmraJkb21pbmF0b3IgYmx1cuihjOS4ulxyXG4gICAgICAgICAgICAgICAgLy8gbGlzdOiHqui6q+WPr+S7peiQveeEpueCueaXtu+8jOmcgOimgeiBmueEpueahOm7mOiupOihjOS4uuOAglxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGxpc3TlhoXpg6jmu5rliqjmnaHkvJrlvJXotbflpJbpg6jmu5rliqjmnaHkuovku7bop6blj5HvvIzlvJXotbflvLnmoYblhoXnmoTkuIvmi4nnu4Tku7bml6Dms5Xkvb/nlKjpvKDmoIfmi5bliqjmu5rliqjmnaHvvIzlm6DmraTmraTlpITpmLvmraLkuovku7blhpLms6FcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5uYXRpdmVFbGVtZW50LCAnbW91c2V3aGVlbCcsIChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLm5hdGl2ZUVsZW1lbnQsICdET01Nb3VzZVNjcm9sbCcsIChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5uZ09uQ2hhbmdlcyhjaGFuZ2VzKTtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLnNlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zQ2hhbmdlOiBTaW1wbGVDaGFuZ2UgPSBjaGFuZ2VzWydvcHRpb25zJ107XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aW1l5Y+KZGF0ZXRpbWUvZGF0ZXRpbWVSYW5nZee7hOS7tuS9v+eUqGxpc3TvvIzngrnpgInml7blgJnpnIDopoHmu5rliqjmlYjmnpxcclxuICAgICAgICBpZiAoY2hhbmdlc1snc2Nyb2xsVG9wJ10gJiYgIWNoYW5nZXNbJ3Njcm9sbFRvcCddLmZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsRm4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ29wdGlvbnMnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEhvdmVyT3B0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zY3JvbGxUb3AgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsRm4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVWYWx1ZShtb2RlbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIud3JpdGVWYWx1ZShtb2RlbCk7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5zZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEFsbFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gdGltZeWPimRhdGV0aW1lL2RhdGV0aW1lUmFuZ2Xnu4Tku7bkvb/nlKhsaXN077yM54K56YCJ5pe25YCZ6ZyA6KaB5rua5Yqo5pWI5p6cXHJcbiAgICBwcml2YXRlIHNldFNjcm9sbEZuKCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChUaUJyb3dzZXIuaXNJRSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQsICdzY3JvbGxUb3AnLCB0aGlzLnNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG8oMCwgdGhpcy5zY3JvbGxUb3ApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyDkuIvmi4npgInpobnnmoTpvKDmoIfmjInkuIvmk43kvZxcclxuICAgIHB1YmxpYyBvbk1vdXNlZG93bkl0ZW0oZXZlbnQ6IE1vdXNlRXZlbnQsIG93bjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIG93bi5jbGFzc0xpc3QuYWRkKCd0aTMtbWVudS1wYW5lbC1saXN0LWFjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS4i+aLiemAiemhueeahOm8oOagh+aMieS4i+WQjueahOaKrOi1t+aTjeS9nFxyXG4gICAgcHVibGljIG9uTW91c2V1cEl0ZW0oZXZlbnQ6IE1vdXNlRXZlbnQsIG93bjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKGV2ZW50LCBvd24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS4i+aLiemAiemhueeahOm8oOagh+emu+W8gOaXtueahOaTjeS9nFxyXG4gICAgcHVibGljIG9uTW91c2VsZWF2ZUl0ZW0oZXZlbnQ6IE1vdXNlRXZlbnQsIG93bjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKGV2ZW50LCBvd24pO1xyXG4gICAgfVxyXG4gICAgLy8g56e76ZmkbGnlhYPntKDkuIrnmoR0aTMtbWVudS1wYW5lbC1saXN0LWFjdGl2Zeexu1xyXG4gICAgcHVibGljIHJlbW92ZUNsYXNzKGV2ZW50OiBNb3VzZUV2ZW50LCBvd246IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBvd24uY2xhc3NMaXN0LnJlbW92ZSgndGkzLW1lbnUtcGFuZWwtbGlzdC1hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDkuIvmi4npgInpobnnmoTljZXlh7vmk43kvZzvvIjljIXmi6znu4TlkI3miYDlnKjnmoQ8bGk+5YWD57Sg77yJXHJcbiAgICBwdWJsaWMgb25DbGlja0l0ZW0oZXZlbnQ6IE1vdXNlRXZlbnQsIG9wdGlvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gU2VsZWN0ZWTml7bvvIzngrnlh7vpgInpobnvvIzkuI3opoHop6blj5Hpu5jorqTooYzkuLrvvJpkb21pbmF0b3IgYmx1cuOAglxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIOmYsuatomRvbWluYXRvciBibHVy6KGM5Li6XHJcbiAgICAgICAgLy8gR3JvdXDoioLngrnlkoznpoHnlKjoioLngrnvvIzml6DpnIDlk43lupTjgIJcclxuICAgICAgICBpZiAodGhpcy5pc0dyb3VwKG9wdGlvbikgfHwgdGhpcy5pc0Rpc2FibGVkRm4ob3B0aW9uKSkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Y+q5aSE55CG5bem6ZSu5ZKM5Lit6ZSuXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiAhPT0gVGlLZXltYXAuTU9VU0VfTEVGVF9CVVRUT05cclxuICAgICAgICAgICAgJiYgZXZlbnQuYnV0dG9uICE9PSBUaUtleW1hcC5NT1VTRV9NSURETEVfQlVUVE9OKSB7IC8vIFRpbnky6L+Z6YeM6YC76L6R6ZSZ6K+vVE9ET++8mlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDngrnlh7vpgInkuK3poblcclxuICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHRpb24pO1xyXG4gICAgICAgIC8vIOabtOaWsGhvdmVyXHJcbiAgICAgICAgdGhpcy5ob3Zlck9wdGlvbiA9IG9wdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbGVjdE9wdGlvbihvcHRpb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIOWFqOmAiVxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMuc2VsZWN0QWxsICYmIG9wdGlvbiA9PT0gdGhpcy5vcHRpb25TZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RBbGxPcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0LmVtaXQob3B0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyID0gLTE7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsgLy8g5aSa6YCJXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tb2RlbCkgeyAvLyDlpoLmnpzkuLrnqbrlgLxcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDmmK/lkKbpgInkuK3vvIzlj5blj41cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLm1vZGVsLmluZGV4T2Yob3B0aW9uKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5wdXNoKG9wdGlvbik7IC8vIOeCueWHu+S4i+aLiemhuemAieS4re+8jOmAieS4remhueaMieeUqOaIt+aTjeS9nOmhuuW6j+aYvuekulxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOW8uuihjOWQkeWklumAmuefpW1vZGVs5pS55Y+Y44CCXHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLm1vZGVsLmNvbmNhdCgpO1xyXG4gICAgICAgICAgICAvLyDorr7nva7lhajpgInnirbmgIFcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIOWNlemAiVxyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gb3B0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdC5lbWl0KG9wdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZWxlY3RBbGxPcHRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCkgeyAvLyDlpoLmnpzkuLrnqbrlgLxcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsaXN0T3B0aW9uczogQXJyYXk8YW55PiA9IHRoaXMuZ2V0TGlzdE9wdGlvbnMoKTtcclxuICAgICAgICBsZXQgaXNDaGFuZ2U6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RBbGxTdGF0ZSA9PT0gZmFsc2UgfHwgdGhpcy5zZWxlY3RBbGxTdGF0ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsaXN0T3B0aW9ucy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsLmluZGV4T2YoaXRlbSkgPT09IC0xICYmIHRoaXMuaXNTZWxlY3RhYmxlKGl0ZW0pKSB7IC8vIOS4jeWcqOW9k+WJjemAieS4remhueS4lOS4uuWPr+mAieaVsOaNrumhue+8iOaOkumZpOemgeeUqOmhueWSjOe7hOWQjemhue+8iVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOeCueWHu+WFqOmAieaMiemSruaXtueahOmAieS4reWAvOmhuuW6j+S4jm9wdGlvbueahOmhuuW6j+S4gOiHtFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc2VydEluZGV4OiBudW1iZXIgPSB0aGlzLmdldEluc2VydEluZGV4KGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc3BsaWNlKGluc2VydEluZGV4LCAwLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RBbGxTdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGlzdE9wdGlvbnMuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleDogbnVtYmVyID0gdGhpcy5tb2RlbC5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSAmJiAhdGhpcy5pc0Rpc2FibGVkRm4oaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RBbGxTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNDaGFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gbW9kZWznmoTlgLzlnKjku6XkuIrlvqrnjq/kuK3vvIzlpJrmrKHlj5jljJbvvIzmiJbogIXkuI3lj5jvvIzmoLnmja5pc0NoYW5nZe+8jOS4gOasoeaAp+inpuWPkeWPmOWMluajgOa1i1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5tb2RlbC5jb25jYXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFNlbGVjdGVkQWxsU3RhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsIHx8IHRoaXMubW9kZWwubGVuZ3RoID09PSAwIHx8ICF0aGlzLm9wdGlvbnMgfHwgdGhpcy5vcHRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEFsbFN0YXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxpc3RPcHRpb25zOiBBcnJheTxhbnk+ID0gdGhpcy5nZXRMaXN0T3B0aW9ucygpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uczogQXJyYXk8YW55PiA9IGxpc3RPcHRpb25zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzU2VsZWN0YWJsZShpdGVtKSAmJiB0aGlzLm1vZGVsLmluY2x1ZGVzKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QWxsU3RhdGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0YWJsZU9wdGlvbnM6IEFycmF5PGFueT4gPSBsaXN0T3B0aW9ucy5maWx0ZXIoKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1NlbGVjdGFibGUoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RBbGxTdGF0ZSA9IHNlbGVjdGVkT3B0aW9ucy5sZW5ndGggPT09IHNlbGVjdGFibGVPcHRpb25zLmxlbmd0aCA/IHRydWUgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPluaWsOaPkuWFpeWFg+e0oOeahOaPkuWFpeasoeW6j++8jOivpeasoeW6j+S4jmxpc3Tpm4blkIjkuK3nmoTlhYPntKDpobrluo/kv53mjIHkuIDoh7RcclxuICAgIHByaXZhdGUgZ2V0SW5zZXJ0SW5kZXgob3B0aW9uOiBhbnkpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGxpc3RPcHRpb25zOiBBcnJheTxhbnk+ID0gdGhpcy5nZXRMaXN0T3B0aW9ucygpO1xyXG4gICAgICAgIGNvbnN0IGluZGV4T2ZMaXN0OiBudW1iZXIgPSBsaXN0T3B0aW9ucy5pbmRleE9mKG9wdGlvbik7IC8vIOW9k+WJjeWFg+e0oOWcqGxpc3TkuK3nmoTmjpLluo9cclxuICAgICAgICAvLyDlsIbor6XlhYPntKDkuI7lt7LpgInkuK3lnKhsaXN05Lit55qE5qyh5bqP6L+b6KGM5q+U6L6D77yM5aaC5p6c6K+l5YWD57Sg5Zyo5p+Q6YCJ5Lit6aG55qyh5bqP5LmL5ZCO77yM5YiZ5bCG5YW25o+S5YWl6K+l5YWD57Sg5LmL5ZCOXHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gdGhpcy5tb2RlbC5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbUluZGV4T2ZMaXN0OiBudW1iZXIgPSBsaXN0T3B0aW9ucy5pbmRleE9mKHRoaXMubW9kZWxbaSAtIDFdKTtcclxuICAgICAgICAgICAgaWYgKGl0ZW1JbmRleE9mTGlzdCA8IGluZGV4T2ZMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Nb3VzZWVudGVySXRlbShldmVudDogTW91c2VFdmVudCwgb3B0aW9uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyDmmK/lj6/pgInpobnvvIzkuJTkuI3mmK/lnKjpgInkuK3pobnnva5Ub3Dml7bpvKDmoIfnu4/ov4fjgIJcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWNvbmRpdGlvbmFsLWV4cHJlc3Npb25cclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdGFibGUob3B0aW9uKSAmJiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMub3B0aW9uU2Nyb2xsVG9wTGFzdFRpbWUgPiBUaUxpc3RDb21wb25lbnQuU0NST0xMX1RPUF9USU1FKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXJPcHRpb24gPSBvcHRpb247ICAvLyDmm7TmlrBob3ZlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWvu+aJvuS4i+S4gOS4quWPr+mAiemhueOAguWPguaVsO+8muWQkeS4ii/lkJHkuItcclxuICAgIHB1YmxpYyBuZXh0T3B0aW9uKGlzVXA6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBsaXN0T3B0aW9uczogQXJyYXk8YW55PiA9IHRoaXMuZ2V0TGlzdE9wdGlvbnMoKTtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLnNlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICBsaXN0T3B0aW9ucy51bnNoaWZ0KHRoaXMub3B0aW9uU2VsZWN0QWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpc3RPcHRpb25zLmZpbHRlcigoeDogYW55KSA9PiB0aGlzLmlzU2VsZWN0YWJsZSh4KSkubGVuZ3RoID09PSAwKSB7IC8vIOayoeacieWPr+mAieS4reeahOmhueebrlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBuZXh0T3B0aW9uOiBhbnkgPSB0aGlzLmhvdmVyT3B0aW9uO1xyXG4gICAgICAgIGxldCBjdXJJbmRleDogbnVtYmVyID0gbGlzdE9wdGlvbnMuaW5kZXhPZihuZXh0T3B0aW9uKTtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChpc1VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWNvbmRpdGlvbmFsLWV4cHJlc3Npb25cclxuICAgICAgICAgICAgICAgIGlmIChjdXJJbmRleCA+IDApIHsgLy8g5om+5Yiw5LqG77yM5LiU5LiN5piv56ys5LiA5Liq5YWD57SgXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBjdXJJbmRleCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyAtMeayoeacieaJvuWIsCwgMOesrOS4gOS4quWFg+e0oFxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gbGlzdE9wdGlvbnMubGVuZ3RoIC0gMTsgLy8g6Lez5Yiw56ys5LiA5Liq5YWD57Sg44CCXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWNvbmRpdGlvbmFsLWV4cHJlc3Npb25cclxuICAgICAgICAgICAgICAgIGlmIChjdXJJbmRleCA8IGxpc3RPcHRpb25zLmxlbmd0aCAtIDEpIHsgLy8gLTHmsqHmnInmib7liLAsIOWSjOS4jeaYr+acgOWQjuS4gOS4qlxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gY3VySW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gbGVuZ3RoIC0gMSDmnIDlkI7kuIDkuKrlhYPntKBcclxuICAgICAgICAgICAgICAgICAgICBjdXJJbmRleCA9IDA7IC8vIOi3s+WIsOesrOS4gOS4quWFg+e0oOOAglxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5leHRPcHRpb24gPSBsaXN0T3B0aW9uc1tjdXJJbmRleF07XHJcbiAgICAgICAgfSB3aGlsZSAoISh0aGlzLmlzU2VsZWN0YWJsZShuZXh0T3B0aW9uKSB8fCBuZXh0T3B0aW9uID09PSB0aGlzLmhvdmVyT3B0aW9uKSk7IC8vIOaJvuWIsOWBnOatou+8jOaIluiAheWvu+aJvuS4gOWciOWBnOatolxyXG4gICAgICAgIC8vIOayoeacieaJvuWIsOe7k+aenFxyXG4gICAgICAgIGlmIChuZXh0T3B0aW9uID09PSBudWxsIHx8ICBuZXh0T3B0aW9uID09PSB0aGlzLmhvdmVyT3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5pS55Y+YaG92ZXLpgInpobnjgIJcclxuICAgICAgICB0aGlzLmhvdmVyT3B0aW9uID0gbmV4dE9wdGlvbjtcclxuICAgICAgICAvLyDmm7TmlrDmu5rliqjmnaFcclxuICAgICAgICB0aGlzLm9wdGlvblNjb2xsVG9wKHRoaXMuaG92ZXJPcHRpb24pO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGdldExpc3RPcHRpb25zKCk6IEFycmF5PGFueT4ge1xyXG4gICAgICAgIGxldCBsaXN0T3B0aW9uczogQXJyYXk8YW55PiA9IFtdOyAvLyDoo4XmnInmiYDmnInpgInpobnnmoTmlbDnu4RcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKFxyXG4gICAgICAgICAgICAgICAgKHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RPcHRpb25zLnB1c2goeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cCh4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0T3B0aW9ucyA9IGxpc3RPcHRpb25zLmNvbmNhdCh4LmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGlzdE9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICAvLyDmu5rliqjliLDpgInkuK3pobnlhYPntKDvvIzlpJrpgInlrprkvY3liLDnrKzkuIDkuKrpgInkuK3pobnlhYPntKDvvIzml6DpgInkuK3pobnml7blrprkuYnliLDnrKzkuIDpobnlhYPntKDvvJtcclxuICAgIC8vIOmAgueUqOS6juavj+asoeS4i+aLieaJk+W8gOeahOWcuuaZr1xyXG4gICAgcHVibGljIHNjcm9sbFRvU2VsZWN0ZWQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN6YCJ5Lit6aG5XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkSXRlbTogYW55O1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItY29uZGl0aW9uYWwtZXhwcmVzc2lvblxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkSXRlbSA9ICh0aGlzLm1vZGVsICYmIHRoaXMubW9kZWwubGVuZ3RoID4gMCkgPyB0aGlzLm1vZGVsWzBdIDogbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW0gPSB0aGlzLm1vZGVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtKSB7IC8vIOaciemAieS4remhueaXtu+8jOiHquWKqOWumuS9jeWIsOesrOS4gOS4qumAieS4reWFg+e0oFxyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvRWxlKHNlbGVjdGVkSXRlbSwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8g5peg6YCJ5Lit6aG55pe277yM5a6a5L2N5Zyo56ys5LiA6aG55YWD57SgXHJcbiAgICAgICAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldEhvdmVyT3B0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9rmhvdmVyT3B0aW9uXHJcbiAgICAgKiDnlKjkuo7mlbDmja7mm7TmlrDml7bvvIzpnZ7pvKDmoIfmiJblv6vmjbfplK7mk43kvZzml7ZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRIb3Zlck9wdGlvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmhvdmVyT3B0aW9uID0gdGhpcy5vcHRpb25zPy5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgID8gKHRoaXMuaGFzU2VsZWN0ZWRpbkxpc3QoKVxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmdldEhvdmVyT3B0aW9uSW5Nb2RlbCgpXHJcbiAgICAgICAgICAgICAgICA6ICh0aGlzLm11bHRpcGxlICYmIHRoaXMuc2VsZWN0QWxsXHJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLm9wdGlvblNlbGVjdEFsbFxyXG4gICAgICAgICAgICAgICAgICAgIDogKHRoaXMub3B0aW9uc1swXT8uY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmdldEdyb3VwSG92ZXJPcHRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMub3B0aW9ucy5maW5kKChvcHRpb246IGFueSkgPT4gIXRoaXMuaXNEaXNhYmxlZEZuKG9wdGlvbikpKSkpXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V6YCJ5pyJbW9kZWznmoTml7blgJnvvIzljZXpgInnmoRtb2RlbOS4jeS8muaYr+emgeeUqOmhue+8jGhvdmVyT3B0aW9u5bqU5b2T5pivbW9kZWzvvIxcclxuICAgICAqIOWkmumAieaciW1vZGVs55qE5pe25YCZ77yMaG92ZXJPcHRpb27mmK/nrKzkuIDkuKrpnZ7npoHnlKjnmoRtb2RlbO+8jOWmguaenG1vZGVs5YWo6YOo56aB55So77yMaG92ZXJPcHRpb27mmK/nrKzkuIDkuKrnpoHnlKjpobnlvoDkuIvnmoTnrKzkuIDkuKrlj6/nlKjpobnjgIJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRIb3Zlck9wdGlvbkluTW9kZWwoKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBsZVxyXG4gICAgICAgICAgICA/ICh0aGlzLm1vZGVsLmZpbmQoKGl0ZW06IGFueSkgPT4gIXRoaXMuaXNEaXNhYmxlZEZuKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5vcHRpb25zLmZpbmQoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA+IHRoaXMub3B0aW9ucy5pbmRleE9mKHRoaXMubW9kZWxbMF0pICYmICF0aGlzLmlzRGlzYWJsZWRGbihpdGVtKTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICA6IHRoaXMubW9kZWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreW9k+WJjWxpc3TkuK3mmK/lkKbmnInpgInkuK3pobnvvIzov4fmu6TlkI7nmoTmlbDmja7mnInlj6/og73kuI3lkKvmnInpgInkuK3poblcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoYXNTZWxlY3RlZGluTGlzdCgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBsaXN0T3B0aW9uOiBBcnJheTxhbnk+ID0gdGhpcy5nZXRMaXN0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMubW9kZWw/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5tb2RlbC5maW5kKChpdGVtOiBhbnkpID0+IGxpc3RPcHRpb24uaW5jbHVkZXMoaXRlbSkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdE9wdGlvbi5pbmNsdWRlcyh0aGlzLm1vZGVsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIhue7hOaDheWGteS4i++8jOaJvuWIsGhvdmVyT3B0aW9uXHJcbiAgICBwcml2YXRlIGdldEdyb3VwSG92ZXJPcHRpb24oKTogYW55IHtcclxuICAgICAgICBsZXQgZ3JvdXBIb3Zlck9wdGlvbjogYW55O1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy5maW5kKChvcHRpb246IGFueSk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwSG92ZXJPcHRpb24gPSBvcHRpb24uY2hpbGRyZW4uZmluZCgoY2hpbGQ6IGFueSkgPT4gIXRoaXMuaXNEaXNhYmxlZEZuKGNoaWxkKSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBIb3Zlck9wdGlvbiA/IHRydWUgOiBmYWxzZTsgLy8g6L+Z5LiqcmV0dXJu5Y+q5piv5Li65LqG57uT5p2fZmluZOaWueazlVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZ3JvdXBIb3Zlck9wdGlvbjsgLy8g6L+Z5LiqcmV0dXJu5piv5Li65LqG6L+U5Zue5p+l5om+57uT5p6cXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNjcm9sbFRvRWxlKG9wdGlvbjogYW55LCBpc1Njcm9sbEJ5U2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghb3B0aW9uIHx8ICF0aGlzLnVsUmVmKSB7IC8vIOesrOS4gOasoW1vZGVs5YC85pS55Y+Y5pe2LCB1bFJlZuS4jeWtmOWcqOOAglxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxpc3RPcHRpb25zOiBBcnJheTxhbnk+ID0gdGhpcy5nZXRMaXN0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMuc2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgIGxpc3RPcHRpb25zLnVuc2hpZnQodGhpcy5vcHRpb25TZWxlY3RBbGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJJbmRleDogbnVtYmVyID0gbGlzdE9wdGlvbnMuaW5kZXhPZihvcHRpb24pO1xyXG4gICAgICAgIGlmIChjdXJJbmRleCA8IDIgJiYgaXNTY3JvbGxCeVNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8g5YmN5Lik6aG55LiN6ZyA6KaB5rua5YqoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS4i+aLieahhuaciea7muWKqOadoeaXtu+8jOiLpeS4iuS4i+mAiemhuei2s+Wkn++8jOmAieS4remhueS4uuS4i+aLieahhueahOesrOS6jOmhue+8jOi/meagt+WPr+S7peWxleekuumAieS4remhueeahOWJjeWQjumAiemhuVxyXG4gICAgICAgIGNvbnN0IHNjcm9sbFRvcE9wdGlvbkluZGV4OiBudW1iZXIgPSBNYXRoLm1heChjdXJJbmRleCAtIDEsIDApO1xyXG4gICAgICAgIGNvbnN0IGVsZTogSFRNTEVsZW1lbnQgPSAgdGhpcy51bFJlZi5uYXRpdmVFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdMSScpW3Njcm9sbFRvcE9wdGlvbkluZGV4XTtcclxuICAgICAgICBpZiAoZWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zY3JvbGxUb3AgPSBlbGUub2Zmc2V0VG9wO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb3B0aW9uU2NvbGxUb3Aob3B0aW9uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9wdGlvblNjcm9sbFRvcExhc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxUb0VsZShvcHRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaYr+e7hOaVsOaNrumhuVxyXG4gICAgcHVibGljIGlzR3JvdXAoaXRlbTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0gJiYgaXRlbS5oYXNPd25Qcm9wZXJ0eSgnY2hpbGRyZW4nKSAmJiB0aGlzLnNob3dDaGlsZHJlbjtcclxuICAgIH1cclxuICAgIC8vIOaYr+WPr+mAieaVsOaNrumhuVxyXG4gICAgcHJvdGVjdGVkIGlzU2VsZWN0YWJsZShpdGVtOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNHcm91cChpdGVtKSAmJiAhdGhpcy5pc0Rpc2FibGVkRm4oaXRlbSk7XHJcbiAgICB9XHJcbiAgICAvLyDmmK/lt7LpgInkuK3mlbDmja7poblcclxuICAgIHB1YmxpYyBpc1NlbGVjdGVkKGl0ZW06IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoIXRoaXMubXVsdGlwbGUgJiYgaXRlbSA9PT0gdGhpcy5tb2RlbCkgfHxcclxuICAgICAgICAgICAgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5tb2RlbCAmJiB0aGlzLm1vZGVsLmluY2x1ZGVzKGl0ZW0pKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5L+u5aSN54K55Ye7SUXmu5rliqjmnaHvvIzpnaLmnb/lhbPpl63jgIJcclxuICAgICAqIOaJk+W8gOmdouadv+aXtuebkeWQrO+8jOWFs+mXreWSjOmUgOavgemdouadv+aXtuWPlua2iOebkeWQrOOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbGlzdGVuSUVTcm9sbGJhckJ1ZygpOiB2b2lkIHtcclxuICAgICAgICAvLyBJReWFvOWuueaAp+a2ieWPiuefpeivhu+8jOingeacrOaWh+S7tuW6lemDqOOAglxyXG4gICAgICAgIC8vIElF5YW85a655oCn6Zeu6aKYOiDngrnlh7vmu5rliqjmnaHvvIzop6blj5HlpLHnhKbvvIzpnaLmnb/kvJrmlLbotbdcclxuICAgICAgICAvLyDkv67lpI3mlrnmoYjvvJrngrnlh7tsaXN06Z2i5p2/5Yy65Z+f77yI5YyF5ZCr5rua5Yqo5p2h77yJ5ZCO77yM57uZ5aSx54Sm5YWD57Sg5by65Yi26I635Y+W54Sm54K544CC5L+u5pS5Rm9ybeWfuuexu+S4jeinpuWPkee7hOS7tuaVtOS9k+WkseeEpuOAglxyXG4gICAgICAgIGlmIChUaUJyb3dzZXIuaXNJRSgpKSB7XHJcbiAgICAgICAgICAgIC8vIOeCueWHu+mdouadv++8jOmYu+atokJsdXJcclxuICAgICAgICAgICAgdGhpcy51bmxpc3RlbklFU2Nyb2xsYmFyQnVnRm5zLnB1c2goXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLm5hdGl2ZUVsZW1lbnQsICdtb3VzZWRvd24nLFxyXG4gICAgICAgICAgICAgICAgICAgIChldmVudDogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BCbHVyID0gdHJ1ZTsgLy8g5qCH6K6w77yM5Lul5L6bZm9jdXNpbua2iOiAl1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDpmLvmraLlhpLms6HliLBkb2N1bWVudO+8jOWboOS4umRvY3VtZW505Lya5oqK5qCH5b+X5L2N5pS55ZueZmFsc2XjgILlkozkuIvpnaLkv67lpI3lj4zlh7vmu5rliqjmnaFCdWfphY3lkIhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAvLyDkv67lpI1idWfvvJrlj4zlh7vmu5rliqjmnaHvvIzlho3ngrnlh7vpnaLmnb/kuYvlpJbvvIzkuI3lpLHnhKbjgIJcclxuICAgICAgICAgICAgdGhpcy51bmxpc3RlbklFU2Nyb2xsYmFyQnVnRm5zLnB1c2goXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgJ21vdXNlZG93bicsXHJcbiAgICAgICAgICAgICAgICAgICAgKGV2ZW50OiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeCueWHu+mdouadv+S5i+WkluWMuuWfn++8jOS4jemYu+atomJsdXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wQmx1ciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElF5LqL5Lu26aG65bqP77yaZm9jdXNvdXQtPmZvdWNzaW4tPmJsdXItPmZvY3VzLCDmlK/mjIHlhpLms6HnmoRmb2N1c2luL2ZvY3Vzb3V0LCDkuI3mlK/mjIHlhpLms6HnmoTmmK9mb2N1cy9ibHVyXHJcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5JRVNjcm9sbGJhckJ1Z0Zucy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQuYm9keSwgJ2ZvY3VzaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIChldmVudDogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdG9wQmx1ciAmJiBldmVudC5yZWxhdGVkVGFyZ2V0ICE9PSBkb2N1bWVudC5ib2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmnKzmnaXkuI3pnIDopoEhPT1kb2N1bWVudCwg5L2G6L+e57ut5aSa5qyh54K55Ye75aSq5b+r77yM5Lya5Y+R55Sf77ya5Yia54K55Ye75LiA5LiL77yM5LiK5qyh55qEZG9taW5hdG9yLT5ib2R5IGZvY3VzaW4sIOS8mui/m+adpVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOa4hembtu+8jOWboOS4uuS4i+mdoueahOiBmueEpuS6i+S7tu+8jOWPiOS8muinpuWPkWZvY3VzaW7kuovku7bvvIzlubbkuI3mg7PlpITnkIZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcEJsdXIgPSBmYWxzZTsgLy8g5LiA6Iis5oOF5Ya16L+Z6YeM572u5Li6ZmFsc2XmmK/lj6/ku6XnmoTjgIJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb2N1c2lu5LqL5Lu277yMdGFyZ2V05piv6IGa54Sm5YWD57Sg44CCcmVsYXRlZFRhcmdldOaYr+WkseeEpuWFg+e0oOOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5by65Yi26K6p5aSx54Sm5YWD57Sg77yM6YeN5paw6I635b6X54Sm54K544CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXZlbnQucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdW5saXN0ZW5JRVNyb2xsYmFyQnVnKCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChUaUJyb3dzZXIuaXNJRSgpKSB7XHJcbiAgICAgICAgICAgIC8vIOino+e7keebkeWQrFxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHggb2YgdGhpcy51bmxpc3RlbklFU2Nyb2xsYmFyQnVnRm5zKSB7XHJcbiAgICAgICAgICAgICAgICB4KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLypcclxuSUXlhbzlrrnmgKfpl67popjvvJrngrnlh7vpnaLmnb/mu5rliqjmnaHvvIzop6blj5HlpLHnhKbvvIzml6Dms5XpmLvmraLjgIJcclxu6Kej5Yaz5pa55qGI77ya57uZ5aSx54Sm5YWD57Sg5by65Yi26I635Y+W54Sm54K544CC5L+u5pS5Rm9ybeWfuuexu+S4jeinpuWPkee7hOS7tuaVtOS9k+WkseeEpuOAglxyXG5cclxu5raJ5Y+K55+l6K+G54K577yaXHJcbueCueWHu2Rpdumdouadv+eahOa7muWKqOadoe+8jOa1j+iniOWZqOS8muWkseeEpu+8jOeEpueCueWIsGJvZHnjgIJldmVudC5wcmV2ZW50RGVmYXVsdCgpO++8jOWPr+S7pemYu+atoum7mOiupOWkseeEpuihjOS4uuOAglxyXG7ngrnlh7tkaXbpnaLmnb/nmoTmu5rliqjmnaHvvIzmtY/op4jlmajkvJrlpLHnhKbvvIznhKbngrnliLBib2R544CC5peg5rOV6Zi75q2i44CC77yI6Zeu6aKY5Lqn55Sf77yJXHJcblxyXG5DaHJvbWXmtY/op4jlmajkuovku7bpobrluo/vvJpcclxuYmx1ci0+Zm9jdXNvdXQtPmZvY3VzLT5mb3Vjc2luXHJcbklF5rWP6KeI5Zmo5LqL5Lu26aG65bqP77yaXHJcbmZvY3Vzb3V0LT5mb2N1c2luLT5ibHVyLT5mb2N1c1xyXG5cclxuSUXmtY/op4jlmajvvIzlnKhibHVy5LqL5Lu26YeM77yM5aSx54Sm5YWD57SgLmZvY3VzKCksXHTkvJrlhYjmmL7npLrlpLHnhKZjc3PvvIzlkI7mmL7npLrogZrnhKZjc3PvvIzkvJrpl6rkuIDkuIvjgIJcclxuSUXmtY/op4jlmajvvIzlnKhmb2N1c291dOS6i+S7tumHjO+8jOWkseeEpuWFg+e0oC5mb2N1cygpLCDml6DmlYjjgIJcclxuSUXmtY/op4jlmajvvIzlnKhmb2N1c2lu5LqL5Lu26YeM77yM5aSx54Sm5YWD57SgLmZvY3VzKCksIOS8muS4gOebtOaYvuekuuiBmueEpmNzc++8jOS4jeS8mumXquOAgu+8iOS9nOS4uuino+WGs+mXrumimOeahOaWueahiO+8iVxyXG5cclxuQ2hyb21lIGJsdXLkuovku7bml7bvvIxkb2N1bWVudC5hY3RpdmVFbGVtZW505pivYm9keVxyXG5JRSBibHVy5LqL5Lu25pe277yMZG9jdW1lbnQuYWN0aXZlRWxlbWVudOaYr+WwhuimgeiBmueEpueahOWFg+e0oOOAglxyXG5JRSDlpoLmnpzlnKhmb2N1c2lu6YeM77yM5aSx54Sm5YWD57SgLmZvY3VzKCnvvIzpgqPkuYhibHVy5pe2ZG9jdW1lbnQuYWN0aXZlRWxlbWVudOWImuWlveaYr+i/meS4quWkseeEpuW5tuW8uuWItuiBmueEpueahOWFg+e0oOOAglxyXG5cclxu56ys5LiA54mI5pa55qGI77yaXHJcbuW8uuWItuiBmueEpu+8jOeUqOS6huW7tuaXtuWkhOeQhlxyXG7mlbTkvZNvbkJsdXLml7bvvIxJReeJueauiuWkhOeQhu+8jOS4jemXreWQiOmdouadv1xyXG7pl63lkIjpnaLmnb/ml7bvvIzlpITnkIbmoIflv5fkvY3jgIJcclxu6Kej5Yaz5Y+M5Ye75rua5Yqo5p2hYnVn77yM5Yip55So55uR5ZCs6Z2i5p2/5LmL5aSW54K55Ye744CCXHJcblxyXG7nrKzkuozniYjmlrnmoYjvvJpcclxu5by65Yi26IGa54Sm77yM5LiN55So5bu25pe244CCXHJcbuS/ruWkjUZvcm3ln7rnsbvvvIzkuI3lho3op6blj5HmlbTkvZPlpLHnhKYv6IGa54Sm44CCXHJcbumXreWQiOmdouadv+aXtu+8jOWkhOeQhuagh+W/l+S9jSDvvIhUT0RPOiDorr7ms5XljrvpmaTjgILlsL3ph4/pm4bkuK3lr7nmoIflv5fkvY3nmoTnrqHnkIbvvIlcclxu6Kej5Yaz5Y+M5Ye75rua5Yqo5p2hYnVn77yM5Yip55So55uR5ZCs6Z2i5p2/5LmL5aSW54K55Ye744CC77yIVE9ETzog6K6+5rOV5Y676Zmk44CC5bC96YeP6ZuG5Lit5a+55qCH5b+X5L2N55qE566h55CG77yJXHJcblxyXG7nrKzkuInniYjmlrnmoYjvvJpcclxu6Z2i5p2/5omT5byA5pe255uR5ZCsbW91c2XvvIzpnaLmnb/pl63lkIjml7bkuI3lho3nm5HlkKxcclxuXHJcbiAqL1xyXG4iXX0=