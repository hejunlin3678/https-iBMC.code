import { Component, ElementRef, EventEmitter, Input, IterableDiffers, NgZone, Output, Renderer2, ViewEncapsulation } from '@angular/core';
import { TiRenderer } from '../../services/renderer/TiRenderer';
import { Util } from '../../utils/Util';
import { Subject } from 'rxjs';
import { TiTableFixedHeadService } from './TiTableFixedHeadService';
import { TiBaseComponent } from '../base/TiBaseModule';
/**
 * TiTable 表格组件
 *
 * 支持以表格的形式展示多条数据
 *
 * 支持前后台分页、搜索、排序、详情展开、列拖动（调整列宽）、控制列动态隐藏/显示、行复选、行单选、
 * 表格单元格(th, td)智能tip、树表、列文本对齐方式、表头固定等功能
 *
 * <example-url>../tiny3demo/#/table/table-all</example-url>
 */
export class TiTableComponent extends TiBaseComponent {
    constructor(iterableDiffers, elementRef, fixedHeadService, renderer, zone, tiRenderer) {
        super(elementRef, renderer);
        this.iterableDiffers = iterableDiffers;
        this.fixedHeadService = fixedHeadService;
        this.zone = zone;
        this.tiRenderer = tiRenderer;
        /**
         * 设置表格源数据及其处理数据状态
         *
         * data: 表格源数据。一般情况下，前台分页时传入表格全部数据，后台分页时传入当前页数据。
         *
         * state: 用来标识传入的表格源数据是否已经经过排序(sorted)、过滤(searched)、分页(paginated)等处理。
         *
         * 应用举例：后台分页场景下，传入的data为当前页数据（即已经进行了分页），因此应将paginated设置为true；
         *          如果传入的数据已经进行了排序（如后台排序场景），则应将sorted设置为true。
         */
        this.srcData = TiTableComponent.DEFAULT_SRC_DATA;
        /**
         * 表格记忆各项开关配置
         * 10.0.4 新增
         */
        this.storageConfig = {
            sort: true,
            pagination: true,
            colsWidth: true,
        };
        /**
         * 表格实时呈现的数据改变时向外通知
         */
        this.displayedDataChange = new EventEmitter();
        /**
         * 设置表格的各列信息。开发者可以使用该接口的值在 thead>tr>th 中完成对表头内容的设置；
         *
         * 控件内部根据columns设置完成必要的逻辑处理。 建议对columns数组中的对象设置如下属性：
         *
         * title: 表头列文本内容。当某一列的title为空字符串时，当前列一直在表格中显示，但是不出现在控制列动态
         *         隐藏/显示 设置面板中，例如单选列、多选列、详情展开图标列;
         *
         * width: 设置列宽，支持百分比和px值;
         *
         * show: 此属性只有在表格具有列动态 显示/隐藏 功能时才需要设置，show可以分别设置如下值：
         *
         *       true： 表示该列默认显示，用户可以通过面板操作切换其 显示/隐藏 状态。
         *
         *       false : 表示该列默认隐藏，用户可以通过面板操作切换其 显示/隐藏 状态。
         *
         *       undefined : 表示该列不具备动态 显示/隐藏 功能，固定显示。
         *
         *       注意：设置show属性值时，title为空字符串时，该列固定显示，但不出现在列操作面板中。
         */
        this.columns = [];
        /**
         * 设置表格搜索功能的需被检索的字符串的集合。
         *
         * 此接口需配合searchKeys使用。
         *
         *  1. searchWords长度为1时，在searchKeys指定的字段下搜索searchWords[0]指定的字符串,
         *     在指定字段中的任一字段中搜索到时即满足条件(并集)。如：searchWords: ['b'],
         *     searchKeys: ['firstName', 'lastName']，则在firstName字段包含‘b’，
         *     或在lastName字段包含‘b’时本行数据即满足搜索条件;
         *
         * 2. searchWords长度大于1且searchKeys与searchWords长度相等时，在searchKeys指定的字段下搜索searchWords对应(按顺序)元素指定的字符串,
         *    在指定字段中的所有字段搜索到对应字符串时才满足条件(交集)。如：searchWords: ['b', '18'],
         *    searchKeys: ['firstName', 'age']，则在firstName字段包含‘b’且
         *    在age字段包含‘18’时本行数据才满足搜索条件。
         */
        this.searchWords = null;
        /**
         * 为表格搜索功能指定搜索的字段范围。
         *
         * 此接口需配合searchWords使用。
         */
        this.searchKeys = null; // 是否使用null
        /**
         * 有详情功能时，设置组件是否开启当前页只显示一行详情的功能。
         *
         * 设置为true，表示表格中当前页只展示一行的详情，不设置或设为false时，可展开多行的详情。
         */
        this.closeOtherDetails = false;
        /**
         * 当表格数据状态变化时向外通知
         *
         * 1.功能描述：
         *
         * 状态变化指的是表格的排序、搜索、分页参数发生了变化，触发变化的原因可能是用户操作，也可能是开发者设置。
         * 该回调为后台分页、后台排序和后台过滤提供了处理时机，例如，用户点击第2页时，由于页码的变化，必定会触发本回调函数，
         * 进而开发者可以在该回调中向后台发请求获取第2页的数据，并赋给表格。
         *
         * 注意事项：初始化时不会触发该回调，只有表格状态动态改变时才会触发该回调，所以需要用户自己在初始时向后端发送请求获取表格初始化数据。
         *
         * 2.函数入参：TiTableComponent 组件实例
         *
         */
        this.stateUpdate = new EventEmitter();
        this.promise = Promise.resolve(null);
        /**
         * @ignore 判断是否使用了ti-head-sort组件
         */
        this.enableSort = false;
        /**
         * @ignore
         */
        this.paginationSubject = new Subject();
        /**
         * @ignore
         */
        this.viewInitSubject = new Subject();
        /**
        * @ignore
        */
        this.containerScrollXChangeSubject = new Subject();
        /**
         * @ignore
         */
        this.thResizeSubject = new Subject();
        /**
         * @ignore
         */
        this.updateFixedThLeftSubject = new Subject();
        /**
         * @ignore
         */
        this.updateFixedTdLeftSubject = new Subject();
        /**
         * @ignore
         */
        this.updateColumnsSubject = new Subject();
        /**
         * @ignore
         * 其中包含了sort、search、pagination三个属性，每个属性都描述了当前表格数据的参数状态:
         *
         * sort：object类型，包含了sortKey（类型为string，进行排序的数据属性）、asc（类型为Boolean，是否为升序）属性；
         *
         * search: object类型，包含了searchWords（类型为array<string>，搜索字符串集合）、searchKeys（类型为Array，搜索指定的字段范围）属性；
         *
         * pagination: object类型，包含了currentPage（类型number，表示当前页）、itemsPerPage（类型为Number，每页显示条数）属性。
         */
        this.dataState = {
            search: { searchWords: null, searchKeys: null },
            sort: { sortKey: '', asc: null },
            pagination: { currentPage: -1, itemsPerPage: -1 }
        };
        this.isDataStateChange = false;
        this.oldSearchWords = null;
        this.oldSearchKeys = null;
        this.oldPagination = { currentPage: -1, itemsPerPage: -1 };
        this.oldSort = { sortKey: '', asc: null };
        this.searchedResult = [];
        /**
         * @ignore
         * 表格是否为表头锁定
         */
        this.isFixedHead = false;
        this.oldTbodyHeight = 0;
        /**
         * @ignore
         */
        this.fixedColumnInfo = {};
        this.compareTo = (v1, v2) => {
            let result = 0;
            if (Util.isFunction(this.customCompareFn)) {
                result = this.customCompareFn(v1.value, v2.value, this.dataState.sort.sortKey);
            }
            else {
                result = TiTableComponent.doCompare(v1.predicateValueObj, v2.predicateValueObj);
                if (result === 0) {
                    result = v1.index - v2.index;
                }
            }
            return result;
        };
        this.hostEle = elementRef.nativeElement;
    }
    /**
     * 测试某一字串(testStr)中是否存在子串(key)
     * @param testStr 待检索的字符串或数值
     * @param key 检索的子串
     */
    static isMatched(testStr, keywords) {
        return (Util.isString(testStr) || Util.isNumber(testStr)) ?
            (String(testStr)).toLowerCase()
                .indexOf(keywords.toLowerCase()) >= 0 : false;
    }
    static searchByOneWord(src, searchWords, searchKeys) {
        const output = [];
        src.forEach((item) => {
            if (searchKeys && searchKeys.length > 0) {
                for (const key of searchKeys) {
                    if (TiTableComponent.isMatched(item[key], searchWords[0])) {
                        output.push(item);
                        break;
                    }
                }
            }
            else {
                for (const key in item) {
                    if (TiTableComponent.isMatched(item[key], searchWords[0])) {
                        output.push(item);
                        break;
                    }
                }
            }
        });
        return output;
    }
    static searchByMoreThanOneWord(src, searchWords, searchKeys) {
        const output = [];
        src.forEach((item) => {
            let isMatched = true;
            for (let i = 0; i < searchKeys.length; i++) {
                if (!TiTableComponent.isMatched(item[searchKeys[i]], searchWords[i])) {
                    isMatched = false;
                    break;
                }
            }
            if (isMatched) {
                output.push(item);
            }
        });
        return output;
    }
    static getSearchedData(inputData, searchWords, searchKeys) {
        let outData = [];
        if (searchWords && searchWords.length === 1) {
            outData = TiTableComponent.searchByOneWord(inputData, searchWords, searchKeys);
        }
        else if (searchWords && searchWords.length > 1 && searchKeys &&
            searchKeys.length === searchWords.length) {
            outData = TiTableComponent.searchByMoreThanOneWord(inputData, searchWords, searchKeys);
        }
        return outData;
    }
    static doCompare(a, b) {
        let result = 0;
        if (a.type === b.type) {
            if (a.value !== b.value) {
                result = a.value < b.value ? -1 : 1;
            }
        }
        else {
            result = a.type < b.type ? -1 : 1;
        }
        return result;
    }
    static getPredicateValue(value, predicate) {
        if (!Util.isEmptyString(predicate) && value.hasOwnProperty(predicate)) {
            return value[predicate];
        }
        return value;
    }
    static getPredicateValueObj(value, index) {
        let resultVal = value;
        if (value === null) {
            resultVal = 'null';
        }
        else if (Util.isString(value)) {
            resultVal = value.toLowerCase();
        }
        else if (Util.isArray(value)) {
            resultVal = value.toString();
        }
        else if (typeof value === 'object') {
            resultVal = index;
        }
        else if (Util.isFunction(value)) {
            const resultValue = value();
            return TiTableComponent.getPredicateValueObj(resultValue, index);
        }
        const type = typeof resultVal;
        return { value: resultVal, type };
    }
    static safeCopy(data) {
        return data ? [].concat(data) : [];
    }
    static isValueEqual(n, o) {
        if (!(n instanceof Object) || !(o instanceof Object)) {
            return n === o;
        }
        if (Util.isArray(n) && Util.isArray(o)) {
            if (n.length !== o.length) {
                return false;
            }
            else {
                for (let i = 0; i < o.length; i++) {
                    if (n[i] !== o[i]) {
                        return false;
                    }
                }
            }
            return true;
        }
        if (Object.keys(n).length !== Object.keys(o).length) {
            return false;
        }
        else {
            for (const key in n) {
                if (!o.hasOwnProperty(key) || n[key] !== o[key]) {
                    return false;
                }
            }
        }
        return true;
    }
    ngOnInit() {
        super.ngOnInit();
        if (!this.srcData) {
            this.srcData = TiTableComponent.DEFAULT_SRC_DATA;
        }
        if (!this.srcData.data) {
            this.srcData.data = [];
        }
        this.srcDataDiffer = this.iterableDiffers.find(this.srcData.data)
            .create();
        if (this.searchWords !== null) {
            this.oldSearchWords = TiTableComponent.safeCopy(this.searchWords);
            this.dataState.search.searchWords = this.searchWords;
        }
        if (this.searchKeys !== null) {
            this.oldSearchKeys = TiTableComponent.safeCopy(this.searchKeys);
            this.dataState.search.searchKeys = this.searchKeys;
        }
        // 表格记忆
        if (this.storageId) {
            this.initStorageDataState();
        }
    }
    ngAfterViewInit() {
        this.initFixedHead();
        if (this.fixedColumnInfo.hasFixedColumn) {
            this.addFixedColumnBehavior();
        }
        this.viewInitSubject.next();
        if (this.storageId) {
            // 在ngOnDestroy 无法保存，所有使用beforeunload
            // 为什么不用unload? beforeunload 兼容比unload效果好
            // 参考：https://sinaad.github.io/xfe/2016/06/29/beforeunlod-vs-unload/
            // 修复SSR报错：ERROR ReferenceError: window is not defined
            if (typeof window === 'undefined') {
                return;
            }
            this.unlistenWindowBeforeunload = this.renderer.listen(window, 'beforeunload', () => {
                this.updateStorageDataState();
            });
        }
    }
    // 为了确保表格内嵌组件(比如tiHeadSort,tiPagination等)的数据变化在表格组件中能监听到，排序、搜索、分页
    // 的相关数据监听需要放在表格组件的AfterViewChecked周期中。因为表格组件的AfterViewChecked生命周期晚于
    // 内嵌组件(比如tiHeadSort,tiPagination等)的各个checked生命周期。
    // tslint:disable-next-line:cyclomatic-complexity
    // eslint-disable-next-line complexity
    ngAfterViewChecked() {
        // 监听srcData.data的变化
        const dataArr = this.srcData && this.srcData.data ? this.srcData.data : [];
        const srcDataDiffer = this.srcDataDiffer.diff(dataArr);
        if (srcDataDiffer) {
            this.updateSafeCopy();
            this.data2displayed();
        }
        // 监听search相关接口值变化
        if (this.searchWords !== null &&
            !TiTableComponent.isValueEqual(this.searchWords, this.oldSearchWords)) {
            this.oldSearchWords = TiTableComponent.safeCopy(this.searchWords);
            this.isDataStateChange = true;
            this.triggerEvent = 'search';
            this.dataState.search.searchWords = this.searchWords;
            // 搜索时，如果使用分页时，把用于表格内部计算分页的当前页码置为1
            if (this.dataState.pagination.itemsPerPage !== -1 && this.dataState.pagination.currentPage !== 1) {
                this.dataState.pagination.currentPage = 1;
                // 使用Promise是为了解决使用stateUpdate接口做后台分页+后台搜索时，
                // 分页组件ExpressionChangedAfterItHasBeenCheckedError报错问题。
                // 此处不能使用setTimeout来解决，使用setTimeout会导致stateUpdate多次执行。
                this.promise.then(() => {
                    this.paginationSubject.next({ currentPage: 1 });
                });
            }
        }
        if (this.searchKeys !== null && this.searchWords.length > 0 &&
            !TiTableComponent.isValueEqual(this.searchKeys, this.oldSearchKeys)) {
            this.oldSearchKeys = TiTableComponent.safeCopy(this.searchKeys);
            this.isDataStateChange = true;
            this.triggerEvent = 'search';
            this.dataState.search.searchKeys = this.searchKeys;
            // 搜索时，如果使用分页时，把用于表格内部计算分页的当前页码置为1
            if (this.dataState.pagination.itemsPerPage !== -1 && this.dataState.pagination.currentPage !== 1) {
                this.dataState.pagination.currentPage = 1;
                this.promise.then(() => {
                    this.paginationSubject.next({ currentPage: 1 });
                });
            }
        }
        if (!TiTableComponent.isValueEqual(this.dataState.sort, this.oldSort)) {
            this.oldSort = Object.assign({}, this.dataState.sort);
            this.isDataStateChange = true;
            this.triggerEvent = 'sort';
        }
        if (this.dataState.pagination.currentPage !== -1 &&
            this.dataState.pagination.itemsPerPage !== -1 &&
            !TiTableComponent.isValueEqual(this.dataState.pagination, this.oldPagination)) {
            this.oldPagination = Object.assign({}, this.dataState.pagination);
            this.isDataStateChange = true;
            this.triggerEvent = 'pagination';
        }
        if (this.isDataStateChange) {
            this.updateTable();
            this.isDataStateChange = false;
        }
        if (this.isFixedHead && this.getTbodyHeight() !== this.oldTbodyHeight) {
            // 有些场景下(例如，两页显示数据条数相同，从其中一页跳到另一页时)获取高度不准确，
            // 所以此处添加setTimeout
            setTimeout(() => {
                if (this.hostEle.hasAttribute('tiColsResizable') && this.processYScrollStateChangeWithColsResizable) {
                    this.processYScrollStateChangeWithColsResizable();
                }
                else {
                    this.fixedHeadService.processOverflowY(this.theadContainer, this.tbodyContainer, this);
                }
                this.fixedHeadService.removeTbodyContainerBorderBottom(this.tbodyContainer, this.displayedData);
            }, 0);
            this.oldTbodyHeight = this.getTbodyHeight();
        }
        // 表格容器宽度改变时，列宽和横向滚动条状态都可能发生改变，这时需要处理表格列固定
        if (this.fixedColumnInfo.hasFixedColumn) {
            const containerWidth = this.fixedColumnInfo.container.clientWidth;
            if (containerWidth !== this.fixedColumnInfo.containerWidth) {
                this.fixedColumnInfo.containerWidth = containerWidth;
                this.processFixedColumn();
            }
        }
    }
    ngOnDestroy() {
        if (this.isFixedHead && this.unlistenFixedHeadWindowResize) {
            this.unlistenFixedHeadWindowResize();
        }
        if (this.unlistenFixedColumnWindowResize) {
            this.unlistenFixedColumnWindowResize();
        }
        if (this.storageId) {
            // 路由跳转时，页面没有刷新，beforeunload监听不生效，所以要更新一次记忆数据。
            this.updateStorageDataState();
            // 修复SSR错误：TypeError: this.unlistenWindowBeforeunload is not a function
            (typeof this.unlistenWindowBeforeunload === 'function') && this.unlistenWindowBeforeunload();
        }
    }
    // 初始化表格记忆
    initStorageDataState() {
        // 修复SSR报错：ERROR ReferenceError: window is not defined
        if (typeof window === 'undefined') {
            return;
        }
        // 缓存在sessionStorage中的数据
        let sessionStorageState = window.sessionStorage.getItem(this.storageId);
        // 缓存在localStorage 中的数据
        let localStorageState = window.localStorage.getItem(this.storageId);
        // 版本发布后，用户第一次访问时，sessionStorageState、localStorageState是null
        this.sessionStorageState = sessionStorageState ? JSON.parse(sessionStorageState) : {};
        this.localStorageState = localStorageState ? JSON.parse(localStorageState) : {};
    }
    // 更新本地存储中的
    updateStorageDataState() {
        const localStorageState = Object.assign({}, this.localStorageState);
        const sessionStorageState = Object.assign({}, this.sessionStorageState);
        // 排序
        if (this.storageConfig.sort && this.dataState.sort.sortKey) {
            sessionStorageState['sort'] = this.dataState.sort;
        }
        // 表格分页
        // tslint:disable-next-line: max-line-length
        if ((this.storageConfig.pagination === true || (this.storageConfig.pagination && this.storageConfig.pagination['itemsPerPage'] === true)) &&
            this.dataState.pagination.itemsPerPage !== -1) {
            // 每页条数
            localStorageState['itemsPerPage'] = this.dataState.pagination.itemsPerPage;
        }
        // 表格分页
        // tslint:disable-next-line: max-line-length
        if ((this.storageConfig.pagination === true || (this.storageConfig.pagination && this.storageConfig.pagination['currentPage'] === true)) &&
            this.dataState.pagination.currentPage !== -1) {
            // 当前页
            sessionStorageState['currentPage'] = this.dataState.pagination.currentPage;
        }
        if (this.dataState.search.searchKeys) {
            localStorageState['searchKeys'] = this.dataState.search.searchKeys;
        }
        if (this.dataState.search.searchWords) {
            localStorageState['searchWords'] = this.dataState.search.searchWords;
        }
        if (Object.keys(sessionStorageState).length > 0) {
            // 修复：SSR报错：ReferenceError: window is not defined
            (typeof window !== 'undefined') && window.sessionStorage.setItem(this.storageId, JSON.stringify(sessionStorageState));
        }
        if (Object.keys(localStorageState).length > 0) {
            (typeof window !== 'undefined') && window.localStorage.setItem(this.storageId, JSON.stringify(localStorageState));
        }
    }
    /**
     * @ignore
     */
    updatePagination(currentPage, itemsPerPage) {
        if (this.oldPagination.currentPage === -1 &&
            this.oldPagination.itemsPerPage === -1) {
            this.oldPagination = {
                currentPage,
                itemsPerPage
            };
        }
        this.dataState.pagination.currentPage = currentPage;
        this.dataState.pagination.itemsPerPage = itemsPerPage;
    }
    /**
     * @ignore
     * 排序状态更新及处理
     *
     * @param sortKey - 进行排序的数据属性（如对数据的name属性值进行排序，则传入"name"）
     * @param reverse - 是否为降序，true表示降序，false表示升序，null表示无序
     * @param isDefaultSort - 是否为默认排序
     */
    updateSort(sortKey, reverse, isDefaultSort, compareFn) {
        if (isDefaultSort) {
            this.oldSort = {
                sortKey,
                asc: !reverse
            };
        }
        this.dataState.sort.sortKey = sortKey;
        this.dataState.sort.asc = Util.isNull(reverse) ? reverse : !reverse;
        this.customCompareFn = compareFn;
    }
    /**
     * 获取表格当前的数据状态(sort、search、pagination)
     * @return TiTableDataState
     */
    getDataState() {
        return this.dataState;
    }
    /**
     * 获取当前触发 stateUpdate 的事件(即引起表格数据状态改变的起因事件)
     * @return 有"search", "sort", "pagination"这三个值
     */
    getTriggerEvent() {
        return this.triggerEvent;
    }
    /**
     * 如果使用到了表格组件搜索功能，可通过此方法获取到搜索的数据结果。
     * @return 搜索到的数据集合
     *
     * 3.0.9新增
     */
    getSearchedResult() {
        return this.searchedResult;
    }
    updateTable() {
        if (this.isFrontPagination() || this.isFrontSort() || this.isFrontSearch()) {
            this.data2displayed();
        }
        // 延时的目的是防止stateUpdate 回调中同步修改数据时报错。
        this.promise.then(() => {
            this.stateUpdate.emit(this);
        });
    }
    /**
     * 根据数据状态(search,sort,pagination)处理数据
     */
    dataProcessor(data) {
        let output = data;
        // 如果存在过滤条件且开发者传递的源数据尚未进行过滤处理，则进行前台过滤处理
        if (this.isFrontSearch()) {
            output = TiTableComponent.getSearchedData(output, this.searchWords, this.searchKeys);
            this.searchedResult = [].concat(output);
            const totalNumber = output.length;
            // 如果存在分页且开发者传递的源数据尚未进行分页处理，即进行前台分页,
            if (this.isFrontPagination()) {
                this.promise.then(() => {
                    this.paginationSubject.next({ totalNumber });
                });
            }
        }
        // 如果存在排序且开发者传递的源数据尚未进行排序处理，则进行前台排序处理（字典排序）
        if (this.isFrontSort()) {
            output = this.getSortedData(output, this.dataState.sort.sortKey, this.dataState.sort.asc);
        }
        // 存在分页且开发者传递的源数据尚未进行分页处理，则进行前台分页
        if (this.isFrontPagination()) {
            const pagination = this.dataState.pagination;
            const start = (pagination.currentPage - 1) * pagination.itemsPerPage;
            output = output.slice(start, start + parseInt(pagination.itemsPerPage.toString(), 10));
        }
        return output;
    }
    /**
     * data => displayedData，处理分3步：
     * 1. 复制data数据
     * 2. 根据 分页、过滤、排序 处理数据
     * 3. 通过displayedDataChange 事件更新到displayedData
     */
    data2displayed() {
        // 复制源数据
        let output = TiTableComponent.safeCopy(this.data);
        // 处理数据
        output = this.dataProcessor(output);
        // 更新到displayedData
        this.promise.then(() => {
            // 同步修改内部数据
            this.displayedData = output;
            this.displayedDataChange.emit(output);
        });
    }
    isFrontSearch() {
        const srcState = this.getSrcState();
        return (this.searchWords && this.searchWords.length > 0) && (!srcState || !srcState.searched);
    }
    isFrontSort() {
        const srcState = this.getSrcState();
        return this.enableSort && (!srcState || !srcState.sorted);
    }
    isFrontPagination() {
        const srcState = this.getSrcState();
        const pagination = this.dataState.pagination;
        return (pagination.currentPage !== -1 && pagination.itemsPerPage !== -1 && (!srcState || !srcState.paginated));
    }
    getSortedData(data, predicate, asc) {
        let resultArr = [];
        if (!Util.isArray(data)) {
            return resultArr;
        }
        // 无序状态
        if (!predicate || asc === null) {
            return data;
        }
        const compareArr = data.map((value, index) => {
            const predicateValue = TiTableComponent.getPredicateValue(value, predicate);
            return {
                value,
                index,
                predicateValueObj: TiTableComponent.getPredicateValueObj(predicateValue, index)
            };
        });
        compareArr.sort(this.compareTo);
        resultArr = compareArr.map((item) => {
            return item.value;
        });
        if (!asc) {
            resultArr.reverse();
        }
        return resultArr;
    }
    updateSafeCopy() {
        this.data = TiTableComponent.safeCopy(this.srcData && this.srcData.data ?
            this.srcData.data : []);
    }
    getSrcState() {
        return this.srcData && this.srcData.state ? this.srcData.state : undefined;
    }
    /**
     * @ignore
     */
    closeOtherDetailsFn(currentRow) {
        this.displayedData.forEach((row) => {
            if (row !== currentRow && row['showDetails']) {
                this.promise.then(() => {
                    row['showDetails'] = false;
                });
            }
        });
    }
    initFixedHead() {
        this.theadContainer = this.fixedHeadService.getTheadContainer(this.hostEle);
        if (!this.theadContainer) {
            return;
        }
        this.tbodyContainer = this.fixedHeadService.getTbodyContainer(this.theadContainer);
        this.isFixedHead = !Util.isUndefined(this.theadContainer) && !Util.isUndefined(this.tbodyContainer);
        if (this.isFixedHead) {
            this.renderer.listen(this.tbodyContainer, 'scroll', () => {
                const scrollLeft = this.tbodyContainer.scrollLeft;
                this.renderer.setStyle(this.theadContainer.children[0], 'marginLeft', -scrollLeft + 'px');
                Util.trigger(document, 'tiScroll');
            });
            this.unlistenFixedHeadWindowResize = this.renderer.listen('window', 'resize', () => {
                this.fixedHeadService.processOverflowY(this.theadContainer, this.tbodyContainer, this);
            });
        }
    }
    getTbodyHeight() {
        // 修复SSR报错：ERROR TypeError: this.tbodyContainer.children[0].getBoundingClientRect is not a function
        if (typeof this.tbodyContainer.children[0].getBoundingClientRect !== 'function') {
            return 0;
        }
        return this.fixedHeadService.numRound(this.tbodyContainer.children[0].getBoundingClientRect().height, 0);
    }
    addFixedColumnBehavior() {
        const container = this.tiRenderer.findChildrenByClassName(this.hostEle, 'ti3-table-container')[0];
        if (!container) {
            return;
        }
        this.zone.runOutsideAngular(() => {
            this.renderer.listen(container, 'scroll', () => {
                const scrollLeft = container.scrollLeft;
                const isRightColumnFloat = scrollLeft + container.clientWidth < container.scrollWidth;
                this.containerScrollXChangeSubject.next({
                    scrollLeft,
                    isRightColumnFloat
                });
            });
            this.unlistenFixedColumnWindowResize = this.renderer.listen('window', 'resize', () => {
                const containerWidth = this.fixedColumnInfo.container.clientWidth;
                if (containerWidth !== this.fixedColumnInfo.containerWidth) {
                    this.fixedColumnInfo.containerWidth = containerWidth;
                    this.processFixedColumn();
                }
            });
        });
    }
    /**
     * @ignore
     */
    processFixedColumn() {
        const scrollLeft = this.fixedColumnInfo.container.scrollLeft;
        const isRightColumnFloat = scrollLeft + this.fixedColumnInfo.container.clientWidth < this.fixedColumnInfo.container.scrollWidth;
        this.containerScrollXChangeSubject.next({
            scrollLeft,
            isRightColumnFloat
        });
        this.updateFixedThLeftSubject.next();
        this.updateFixedTdLeftSubject.next();
    }
}
TiTableComponent.DEFAULT_SRC_DATA = {
    data: [],
    state: {
        searched: false,
        sorted: false,
        paginated: false
    }
};
TiTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-table',
                template: "<ng-content></ng-content>",
                encapsulation: ViewEncapsulation.None,
                host: {
                    '[class.ti3-table]': 'true'
                },
                styles: [".ti3-table-soldout{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:ti3Font!important;font-style:normal;font-variant:normal;font-weight:400;speak:none;text-rendering:auto;text-transform:none}.ti3-table-soldout:before{content:\"\\e92c\"}:root{--ti-table-box-model:border-box;--ti-table-cols-toggle-horizontal-padding:var(--ti-common-space-10);--ti-table-cols-toggle-searchbox-bottom-padding:var(--ti-common-space-base);--ti-table-cols-toggle-searchbox-top-padding:var(--ti-common-space-10);--ti-table-cols-toggle-vertical-padding:var(--ti-common-space-base);--ti-table-nodata-lead-icon-padding:var(--ti-common-space-5x);--ti-table-th-horizontal-padding:var(--ti-common-space-10)}.ti3-table{display:block}.table-nodata-a a{color:var(--ti-table-tr-bg-color-nodata-color);text-decoration:none}.table-nodata-a a:hover{color:var(--ti-table-tr-bg-color-nodata-color-hover);cursor:pointer;text-decoration:underline}.ti3-table>.ti3-resize-wrapper>table,.ti3-table>.ti3-table-container>table,.ti3-table>.ti3-table-fixed-head>table,.ti3-table>table{-ms-box-sizing:var(--ti-table-box-model);border-collapse:separate;border-spacing:0;border-width:0;box-sizing:var(--ti-table-box-model);empty-cells:show;margin-bottom:0;table-layout:fixed;width:100%}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th,.ti3-table>.ti3-table-container>table>thead>tr>th,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th,.ti3-table>table>thead>tr>th{-ms-box-sizing:var(--ti-table-box-model);background-color:var(--ti-table-th-bg-color);border-bottom:1px solid var(--ti-table-border-bottom-color);border-left:none;box-sizing:var(--ti-table-box-model);color:var(--ti-table-th-text-color);cursor:default;font-weight:var(--ti-table-th-text-font-weight);height:var(--ti-table-th-height);line-height:calc(var(--ti-table-th-height) - 1px);outline:0;overflow:hidden;padding:0;padding-left:var(--ti-table-th-horizontal-padding);padding-right:var(--ti-table-th-horizontal-padding);position:relative;text-align:left;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th:not(:last-child):after,.ti3-table>.ti3-table-container>table>thead>tr>th:not(:last-child):after,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th:not(:last-child):after,.ti3-table>table>thead>tr>th:not(:last-child):after{background:var(--ti-table-th-spacing-line-color);color:transparent;content:\"\";height:100%;position:absolute;right:0;top:0;width:1px}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[checkbox-column],.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[radio-column],.ti3-table>.ti3-table-container>table>thead>tr>th[checkbox-column],.ti3-table>.ti3-table-container>table>thead>tr>th[radio-column],.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[checkbox-column],.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[radio-column],.ti3-table>table>thead>tr>th[checkbox-column],.ti3-table>table>thead>tr>th[radio-column]{font-size:0;overflow:visible;padding-right:var(--ti-table-column-icon-right-space);width:var(--ti-table-column-select-icon-width)!important}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[checkbox-column]:after,.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[radio-column]:after,.ti3-table>.ti3-table-container>table>thead>tr>th[checkbox-column]:after,.ti3-table>.ti3-table-container>table>thead>tr>th[radio-column]:after,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[checkbox-column]:after,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[radio-column]:after,.ti3-table>table>thead>tr>th[checkbox-column]:after,.ti3-table>table>thead>tr>th[radio-column]:after{width:0}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[checkbox-column],.ti3-table>.ti3-table-container>table>thead>tr>th[checkbox-column],.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[checkbox-column],.ti3-table>table>thead>tr>th[checkbox-column]{cursor:pointer}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th.ti3-disabled-cell,.ti3-table>.ti3-table-container>table>thead>tr>th.ti3-disabled-cell,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th.ti3-disabled-cell,.ti3-table>table>thead>tr>th.ti3-disabled-cell{cursor:not-allowed}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[details-icon-column],.ti3-table>.ti3-table-container>table>thead>tr>th[details-icon-column],.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[details-icon-column],.ti3-table>table>thead>tr>th[details-icon-column]{overflow:visible;padding-right:var(--ti-table-column-icon-right-space);width:var(--ti-table-column-icon-width)!important}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th[details-icon-column]:after,.ti3-table>.ti3-table-container>table>thead>tr>th[details-icon-column]:after,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th[details-icon-column]:after,.ti3-table>table>thead>tr>th[details-icon-column]:after{width:0}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th:first-child[checkbox-column],.ti3-table>.ti3-resize-wrapper>table>thead>tr>th:first-child[radio-column],.ti3-table>.ti3-table-container>table>thead>tr>th:first-child[checkbox-column],.ti3-table>.ti3-table-container>table>thead>tr>th:first-child[radio-column],.ti3-table>.ti3-table-fixed-head>table>thead>tr>th:first-child[checkbox-column],.ti3-table>.ti3-table-fixed-head>table>thead>tr>th:first-child[radio-column],.ti3-table>table>thead>tr>th:first-child[checkbox-column],.ti3-table>table>thead>tr>th:first-child[radio-column]{padding-left:var(--ti-table-column-icon-left-space)!important;width:var(--ti-table-column-icon-width)!important}.ti3-table>.ti3-resize-wrapper>table>tbody>tr,.ti3-table>.ti3-table-container>table>tbody>tr,.ti3-table>.ti3-table-fixed-head>table>tbody>tr,.ti3-table>table>tbody>tr{background-color:var(--ti-table-tr-bg-color);border-spacing:0;transition:background-color .15s var(--ti-timing-function-default)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr:hover .cti-rename-edit,.ti3-table>.ti3-table-container>table>tbody>tr:hover .cti-rename-edit,.ti3-table>.ti3-table-fixed-head>table>tbody>tr:hover .cti-rename-edit,.ti3-table>table>tbody>tr:hover .cti-rename-edit{visibility:visible}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-selected-tr,.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-selected-tr:hover,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-selected-tr,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-selected-tr:hover,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-selected-tr,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-selected-tr:hover,.ti3-table>table>tbody>tr.ti3-selected-tr,.ti3-table>table>tbody>tr.ti3-selected-tr:hover{background-color:var(--ti-table-tr-bg-color-selected)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-disabled-tr,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-disabled-tr,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-disabled-tr,.ti3-table>table>tbody>tr.ti3-disabled-tr{background-color:var(--ti-table-tr-bg-color-disabled)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-disabled-tr>td,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-disabled-tr>td,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-disabled-tr>td,.ti3-table>table>tbody>tr.ti3-disabled-tr>td{color:var(--ti-table-tr-text-color-disabled)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-disabled-tr>td[checkbox-column],.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-disabled-tr>td[radio-column],.ti3-table>.ti3-table-container>table>tbody>tr.ti3-disabled-tr>td[checkbox-column],.ti3-table>.ti3-table-container>table>tbody>tr.ti3-disabled-tr>td[radio-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-disabled-tr>td[checkbox-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-disabled-tr>td[radio-column],.ti3-table>table>tbody>tr.ti3-disabled-tr>td[checkbox-column],.ti3-table>table>tbody>tr.ti3-disabled-tr>td[radio-column]{cursor:not-allowed}.ti3-table>.ti3-resize-wrapper>table>tbody>tr:not(.ti3-details-tr):not(.ti3-disabled-tr):not(.ti3-table-nodata):not(.ti3-table-nodata-simple):not(.ti3-table-loadfail):not(.ti3-table-nodata-guide):not(.ti3-selected-tr):hover,.ti3-table>.ti3-table-container>table>tbody>tr:not(.ti3-details-tr):not(.ti3-disabled-tr):not(.ti3-table-nodata):not(.ti3-table-nodata-simple):not(.ti3-table-loadfail):not(.ti3-table-nodata-guide):not(.ti3-selected-tr):hover,.ti3-table>.ti3-table-fixed-head>table>tbody>tr:not(.ti3-details-tr):not(.ti3-disabled-tr):not(.ti3-table-nodata):not(.ti3-table-nodata-simple):not(.ti3-table-loadfail):not(.ti3-table-nodata-guide):not(.ti3-selected-tr):hover,.ti3-table>table>tbody>tr:not(.ti3-details-tr):not(.ti3-disabled-tr):not(.ti3-table-nodata):not(.ti3-table-nodata-simple):not(.ti3-table-loadfail):not(.ti3-table-nodata-guide):not(.ti3-selected-tr):hover{background-color:var(--ti-table-tr-bg-color-hover);transition:background-color .2s var(--ti-timing-function-default)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td,.ti3-table>.ti3-table-container>table>tbody>tr>td,.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td,.ti3-table>table>tbody>tr>td{-ms-box-sizing:var(--ti-table-box-model);border-bottom:1px solid var(--ti-table-border-bottom-color);border-left:none;border-top:none;box-sizing:var(--ti-table-box-model);color:var(--ti-table-td-text-color);line-height:var(--ti-table-td-line-height);overflow:hidden;padding:var(--ti-table-td-padding);text-align:left;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td[checkbox-column],.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td[radio-column],.ti3-table>.ti3-table-container>table>tbody>tr>td[checkbox-column],.ti3-table>.ti3-table-container>table>tbody>tr>td[radio-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td[checkbox-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td[radio-column],.ti3-table>table>tbody>tr>td[checkbox-column],.ti3-table>table>tbody>tr>td[radio-column]{cursor:pointer;font-size:0;overflow:visible;padding-right:var(--ti-table-column-icon-right-space)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td.ti3-disabled-cell,.ti3-table>.ti3-table-container>table>tbody>tr>td.ti3-disabled-cell,.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td.ti3-disabled-cell,.ti3-table>table>tbody>tr>td.ti3-disabled-cell{cursor:not-allowed}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td[details-icon-column],.ti3-table>.ti3-table-container>table>tbody>tr>td[details-icon-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td[details-icon-column],.ti3-table>table>tbody>tr>td[details-icon-column]{overflow:visible;padding-left:var(--ti-table-column-icon-left-space);padding-right:var(--ti-table-column-icon-right-space)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td:first-child[checkbox-column],.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td:first-child[radio-column],.ti3-table>.ti3-table-container>table>tbody>tr>td:first-child[checkbox-column],.ti3-table>.ti3-table-container>table>tbody>tr>td:first-child[radio-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td:first-child[checkbox-column],.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td:first-child[radio-column],.ti3-table>table>tbody>tr>td:first-child[checkbox-column],.ti3-table>table>tbody>tr>td:first-child[radio-column]{padding-left:var(--ti-table-column-icon-left-space)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata,.ti3-table>table>tbody>tr.ti3-table-nodata{background-color:var(--ti-table-tr-bg-color-nodata)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata>td,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata>td,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata>td,.ti3-table>table>tbody>tr.ti3-table-nodata>td{background:var(--ti-table-nodata-td-bg-img-url) 50% var(--ti-table-nodata-lead-icon-padding) no-repeat;border-bottom:none;color:var(--ti-table-nodata-td-color);font-size:var(--ti-table-nodata-td-font-size);height:var(--ti-table-nodata-height);line-height:20px;overflow:visible!important;padding:calc(var(--ti-table-nodata-lead-icon-height) + var(--ti-table-nodata-lead-icon-padding)*2) 0 0 0;position:relative;text-align:center;vertical-align:top}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail,.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-loadfail,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide,.ti3-table>table>tbody>tr.ti3-table-loadfail,.ti3-table>table>tbody>tr.ti3-table-nodata-guide{background-color:var(--ti-table-tr-bg-color-nodata)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail>td,.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-loadfail>td,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail>td,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table>table>tbody>tr.ti3-table-loadfail>td,.ti3-table>table>tbody>tr.ti3-table-nodata-guide>td{background:none;border-bottom:none;color:var(--ti-table-nodata-td-color);font-size:var(--ti-table-nodata-td-font-size);line-height:20px;overflow:visible!important;padding:var(--ti-common-space-5x) 0;position:relative;text-align:center;vertical-align:top}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table>table>tbody>tr.ti3-table-nodata-guide>td a{color:var(--ti-table-tr-bg-color-nodata-color);text-decoration:none}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table>table>tbody>tr.ti3-table-nodata-guide>td a:hover{color:var(--ti-table-tr-bg-color-nodata-color-hover);cursor:pointer;text-decoration:underline}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-simple,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata-simple,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-simple,.ti3-table>table>tbody>tr.ti3-table-nodata-simple{background-color:var(--ti-table-tr-bg-color-nodata)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-simple>td,.ti3-table>.ti3-table-container>table>tbody>tr.ti3-table-nodata-simple>td,.ti3-table>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-simple>td,.ti3-table>table>tbody>tr.ti3-table-nodata-simple>td{background:none;border-bottom:none;color:var(--ti-table-nodata-td-color);font-size:var(--ti-table-nodata-td-font-size);line-height:20px;overflow:visible!important;padding:var(--ti-common-space-5x) 0;position:relative;text-align:center;vertical-align:top}.ti3-table-small>.ti3-resize-wrapper>table>thead>tr>th,.ti3-table-small>.ti3-table-container>table>thead>tr>th,.ti3-table-small>.ti3-table-fixed-head>table>thead>tr>th,.ti3-table-small>table>thead>tr>th{height:var(--ti-table-small-th-height);line-height:var(--ti-table-small-th-height)}.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr>td,.ti3-table-small>.ti3-table-container>table>tbody>tr>td,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr>td,.ti3-table-small>table>tbody>tr>td{height:var(--ti-table-small-td-height);line-height:calc(var(--ti-table-small-td-height) - var(--ti-table-small-td-vertical-padding)*2);padding:var(--ti-table-small-td-vertical-padding) var(--ti-table-small-td-horizontal-padding)}.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-details-tr>td,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-details-tr>td,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-details-tr>td,.ti3-table-small>table>tbody>tr.ti3-details-tr>td{padding:var(--ti-table-small-details-padding)}.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata>td,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-nodata>td,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata>td,.ti3-table-small>table>tbody>tr.ti3-table-nodata>td{background:var(--ti-table-nodata-td-bg-img-url) 50% var(--ti-table-nodata-lead-icon-padding) no-repeat;height:var(--ti-table-small-nodata-height);padding:calc(var(--ti-table-nodata-lead-icon-height) + var(--ti-table-nodata-lead-icon-padding)*2) 0 0 0;vertical-align:top}.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail>td,.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-loadfail>td,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail>td,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-small>table>tbody>tr.ti3-table-loadfail>td,.ti3-table-small>table>tbody>tr.ti3-table-nodata-guide>td{background:none;vertical-align:top}.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-small>table>tbody>tr.ti3-table-loadfail>td a,.ti3-table-small>table>tbody>tr.ti3-table-nodata-guide>td a{color:var(--ti-table-tr-bg-color-nodata-color);text-decoration:none}.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table-small>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table-small>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table-small>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-small>table>tbody>tr.ti3-table-loadfail>td a:hover,.ti3-table-small>table>tbody>tr.ti3-table-nodata-guide>td a:hover{color:var(--ti-table-tr-bg-color-nodata-color-hover);cursor:pointer;text-decoration:underline}.ti3-table-nest>.ti3-resize-wrapper>table>thead>tr>th,.ti3-table-nest>.ti3-table-container>table>thead>tr>th,.ti3-table-nest>.ti3-table-fixed-head>table>thead>tr>th,.ti3-table-nest>table>thead>tr>th{height:var(--ti-table-nest-th-height);line-height:var(--ti-table-nest-th-height)}.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata>td,.ti3-table-nest>table>tbody>tr.ti3-table-nodata>td{background:var(--ti-table-nodata-td-bg-img-url) 50% var(--ti-table-nodata-lead-icon-padding) no-repeat;height:var(--ti-table-small-nodata-height);padding:calc(var(--ti-table-nodata-lead-icon-height) + var(--ti-table-nodata-lead-icon-padding)*2) 0 0 0;vertical-align:top}.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td{background:none;vertical-align:top}.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a{color:var(--ti-table-tr-bg-color-nodata-color);text-decoration:none}.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-table-nodata-guide>td a:hover,.ti3-table-nest>table>tbody>tr.ti3-table-loadfail .ti3-table-nest>table>tbody>tr.ti3-table-nodata-guide>td a:hover{color:var(--ti-table-tr-bg-color-nodata-color-hover);cursor:pointer;text-decoration:underline}.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr>td,.ti3-table-nest>table>tbody>tr>td{border-bottom:1px solid var(--ti-table-nest-td-border-bottom-color);height:var(--ti-table-nest-td-height);line-height:calc(var(--ti-table-nest-td-height) - var(--ti-table-small-td-vertical-padding)*2);padding:var(--ti-table-small-td-vertical-padding) var(--ti-table-small-td-horizontal-padding)}.ti3-table-nest>.ti3-resize-wrapper>table>tbody>tr.ti3-details-tr>td,.ti3-table-nest>.ti3-table-container>table>tbody>tr.ti3-details-tr>td,.ti3-table-nest>.ti3-table-fixed-head>table>tbody>tr.ti3-details-tr>td,.ti3-table-nest>table>tbody>tr.ti3-details-tr>td{padding:var(--ti-table-small-details-padding)}.ti3-resize-wrapper{min-height:0;overflow-x:auto}.ti3-unselectable{-ms-user-select:none;-webkit-user-select:none;user-select:none}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th.col-resize-active,.ti3-table>.ti3-table-container>table>thead>tr>th.col-resize-active,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th.col-resize-active,.ti3-table>table>thead>tr>th.col-resize-active{cursor:col-resize!important}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th.col-resize-active:after,.ti3-table>.ti3-table-container>table>thead>tr>th.col-resize-active:after,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th.col-resize-active:after,.ti3-table>table>thead>tr>th.col-resize-active:after{background:transparent;border-right:var(--ti-table-col-resize-line);bottom:0;content:\"\";height:100%;position:absolute;right:0;top:0;width:2px}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td.col-resize-active,.ti3-table>.ti3-table-container>table>tbody>tr>td.col-resize-active,.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td.col-resize-active,.ti3-table>table>tbody>tr>td.col-resize-active{position:relative}.ti3-table>.ti3-resize-wrapper>table>tbody>tr:not(.ti3-table-nodata)>td.col-resize-active:after,.ti3-table>.ti3-table-container>table>tbody>tr:not(.ti3-table-nodata)>td.col-resize-active:after,.ti3-table>.ti3-table-fixed-head>table>tbody>tr:not(.ti3-table-nodata)>td.col-resize-active:after,.ti3-table>table>tbody>tr:not(.ti3-table-nodata)>td.col-resize-active:after{border-right:var(--ti-table-col-resize-line);bottom:0;content:\"\";height:100%;position:absolute;right:0;top:0;width:2px}.ti3-cols-toggle-container{display:inline-block}.ti3-cols-toggle-container .ti3-cols-toggle-menu-container{background:var(--ti-button-default-normal-bg-color);border:1px solid var(--ti-table-cols-toggle-menu-border-color);border-radius:var(--ti-common-border-radius-normal);box-sizing:border-box;cursor:pointer;display:inline-block;height:var(--ti-table-cols-toggle-menu-size);line-height:var(--ti-table-cols-toggle-menu-line-height);position:relative;text-align:center;width:var(--ti-table-cols-toggle-menu-size)}.ti3-cols-toggle-container .ti3-cols-toggle-menu-container .ti3-cols-toggle-menu{color:var(--ti-table-cols-toggle-menu-color);font-size:var(--ti-table-cols-toggle-menu-font-size)}.ti3-cols-toggle-container .ti3-cols-toggle-menu-container:focus,.ti3-cols-toggle-container .ti3-cols-toggle-menu-container:hover{background-color:var(--ti-button-default-bg-color-hover)}.ti3-cols-toggle-container .ti3-cols-toggle-menu-container:focus .ti3-cols-toggle-menu,.ti3-cols-toggle-container .ti3-cols-toggle-menu-container:hover .ti3-cols-toggle-menu{color:var(--ti-table-cols-toggle-menu-color-hover)}.ti3-cols-toggle-container .ti3-cols-toggle-menu-container.ti3-cols-toggle-menu-disabled{border-color:var(--ti-table-cols-toggle-menu-border-color-disabled);cursor:not-allowed}.ti3-cols-toggle-container .ti3-cols-toggle-menu-container.ti3-cols-toggle-menu-disabled .ti3-cols-toggle-menu{color:var(--ti-table-cols-toggle-menu-color-disabled)}.ti3-cols-toggle-container[tiFocused] .ti3-cols-toggle-menu-container:not(.ti3-cols-toggle-menu-disabled) .ti3-cols-toggle-menu{color:var(--ti-table-cols-toggle-menu-color-hover)}.ti3-cols-toggle-container .ti3-cols-toggle-drop-container{display:inline-block}.ti3-cols-toggle-drop{border-radius:var(--ti-table-cols-toggle-dropdown-border-radius);box-shadow:var(--ti-table-cols-toggle-dropdown-box-shadow);max-width:300px!important;min-width:200px!important}.ti3-cols-toggle-drop>.ti3-cols-toggle-searchbox-wrap{-ms-box-sizing:border-box;box-sizing:border-box;padding:var(--ti-table-cols-toggle-searchbox-top-padding) var(--ti-table-cols-toggle-horizontal-padding) var(--ti-table-cols-toggle-searchbox-bottom-padding)!important}.ti3-cols-toggle-drop>.ti3-cols-toggle-searchbox-wrap .ti3-cols-toggle-searchbox{width:100%!important}.ti3-cols-toggle-drop .ti3-overflow-padding{padding:0 var(--ti-table-cols-toggle-horizontal-padding)!important}.ti3-cols-toggle-drop .ti3-dropdown-no-data{padding-left:var(--ti-table-cols-toggle-horizontal-padding)!important}.ti3-cols-toggle-drop .ti3-dropdown-option-hover{color:var(--ti-common-color-text-primary)}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container,.ti3-table>table>thead>tr>th>.ti3-sort-container{cursor:pointer;display:inline-block;outline-offset:-1px}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container .ti3-sort,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container .ti3-sort,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container .ti3-sort,.ti3-table>table>thead>tr>th>.ti3-sort-container .ti3-sort{cursor:pointer;display:inline-block;font-size:16px;height:16px;line-height:16px;margin-left:8px;vertical-align:middle;width:16px}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container .ti3-sort:hover,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container .ti3-sort:hover,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container .ti3-sort:hover,.ti3-table>table>thead>tr>th>.ti3-sort-container .ti3-sort:hover{color:var(--ti-table-sort-color-hover)}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container .ti3-sort:before,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container .ti3-sort:before,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container .ti3-sort:before,.ti3-table>table>thead>tr>th>.ti3-sort-container .ti3-sort:before{content:\"\\e917\";display:inline-block;height:16px;line-height:16px;width:16px}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort,.ti3-table>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort{color:var(--ti-table-sort-icon-color-active)}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:hover,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:hover,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:hover,.ti3-table>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:hover{color:var(--ti-table-sort-color-hover)}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:before,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:before,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:before,.ti3-table>table>thead>tr>th>.ti3-sort-container.ti3-sort-ascent .ti3-sort:before{content:\"\\e92e\"}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort,.ti3-table>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort{color:var(--ti-table-sort-icon-color-active)}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:hover,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:hover,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:hover,.ti3-table>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:hover{color:var(--ti-table-sort-color-hover)}.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:before,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:before,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:before,.ti3-table>table>thead>tr>th>.ti3-sort-container.ti3-sort-descent .ti3-sort:before{content:\"\\e92f\"}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>.ti3-table-container>table>tbody>tr>td>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>table>tbody>tr>td>.ti3-cell-text-container>.ti3-cell-text,.ti3-table>table>thead>tr>th>.ti3-cell-text-container>.ti3-cell-text{display:inline-block;vertical-align:top}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td>.ti3-cell-icons-container,.ti3-table>.ti3-resize-wrapper>table>thead>tr>th>.ti3-cell-icons-container,.ti3-table>.ti3-table-container>table>tbody>tr>td>.ti3-cell-icons-container,.ti3-table>.ti3-table-container>table>thead>tr>th>.ti3-cell-icons-container,.ti3-table>.ti3-table-fixed-head>table>tbody>tr>td>.ti3-cell-icons-container,.ti3-table>.ti3-table-fixed-head>table>thead>tr>th>.ti3-cell-icons-container,.ti3-table>table>tbody>tr>td>.ti3-cell-icons-container,.ti3-table>table>thead>tr>th>.ti3-cell-icons-container{display:inline-block}.ti3-table>.ti3-resize-wrapper>table>tbody>.ti3-details-tr,.ti3-table>.ti3-table-container>table>tbody>.ti3-details-tr,.ti3-table>table>tbody>.ti3-details-tr{background:var(--ti-table-details-bg-color)}.ti3-table>.ti3-resize-wrapper>table>tbody>.ti3-details-tr>td,.ti3-table>.ti3-table-container>table>tbody>.ti3-details-tr>td,.ti3-table>table>tbody>.ti3-details-tr>td{border-bottom:1px solid var(--ti-table-border-bottom-color);padding:var(--ti-table-details-padding);white-space:normal}.ti3-table>.ti3-resize-wrapper>table>tbody>.ti3-details-tr>td>.ti3-table-detail-container,.ti3-table>.ti3-table-container>table>tbody>.ti3-details-tr>td>.ti3-table-detail-container,.ti3-table>table>tbody>.ti3-details-tr>td>.ti3-table-detail-container{background-color:var(--ti-common-color-bg-white-normal);padding:var(--ti-common-space-5x)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-toggle-details,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-toggle-details,.ti3-table>table>tbody>tr>td .ti3-toggle-details{color:var(--ti-table-details-icon-color);cursor:pointer}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-toggle-details .ti3-icon,.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-toggle-details .ti3-table-soldout,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-toggle-details .ti3-icon,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-toggle-details .ti3-table-soldout,.ti3-table>table>tbody>tr>td .ti3-toggle-details .ti3-icon,.ti3-table>table>tbody>tr>td .ti3-toggle-details .ti3-table-soldout{font-size:15px;vertical-align:middle}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-toggle-details .ti3-icon:hover,.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-toggle-details .ti3-table-soldout:hover,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-toggle-details .ti3-icon:hover,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-toggle-details .ti3-table-soldout:hover,.ti3-table>table>tbody>tr>td .ti3-toggle-details .ti3-icon:hover,.ti3-table>table>tbody>tr>td .ti3-toggle-details .ti3-table-soldout:hover{color:var(--ti-table-details-icon-color-hover)}.ti3-icon-angle-transform-up-thin{display:inline-block;transform:rotate(-90deg)}.ti3-icon-angle-transform-down-thin{display:inline-block;transform:rotate(90deg)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree,.ti3-table>table>tbody>tr>td .ti3-table-tree{cursor:pointer}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square,.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square{font-size:var(--ti-table-tree-square-icon-font-size);line-height:18px;margin-right:var(--ti-table-tree-square-right-space);vertical-align:bottom}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square{color:var(--ti-table-tree-minus-square-color)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square{color:var(--ti-table-tree-plus-square-color)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square:hover,.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square:hover,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square:hover,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square:hover,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square:hover,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square:hover{color:var(--ti-table-tree-minus-square-color-hover)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square:active,.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square:active,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square:active,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square:active,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-minus-square:active,.ti3-table>table>tbody>tr>td .ti3-table-tree .ti3-icon-plus-square:active{background:var(--ti-table-tree-square-bg);color:var(--ti-table-tree-minus-square-color)}.ti3-table>.ti3-resize-wrapper>table>tbody>tr>td .ti3-table-tree-no-leaf,.ti3-table>.ti3-table-container>table>tbody>tr>td .ti3-table-tree-no-leaf,.ti3-table>table>tbody>tr>td .ti3-table-tree-no-leaf{margin-left:calc(var(--ti-table-tree-square-icon-font-size) + var(--ti-table-tree-square-right-space))}.ti3-table-cell-clone{-ms-box-sizing:var(--ti-table-box-model);box-sizing:var(--ti-table-box-model);overflow:visible!important;position:absolute!important;visibility:hidden!important;width:auto!important}.ti3-table>.ti3-table-fixed-head{overflow:hidden;position:relative}.ti3-table>.ti3-table-fixed-head>table{margin-left:0}.ti3-table>.ti3-table-fixed-head>.ti3-table-fixed-head-filler{background-color:var(--ti-table-th-bg-color);bottom:0;height:100%;position:absolute;right:0;top:0}.ti3-table>.ti3-table-fixed-head+.ti3-table-container{border-bottom:1px solid var(--ti-table-border-bottom-color)}.ti3-table>.ti3-table-fixed-head+.ti3-table-container>table>thead>tr>th{height:0}.ti3-table>.ti3-table-fixed-head+.ti3-table-container>table>tbody>tr:last-child>td{border-bottom:none!important}.ti3-table>.ti3-table-container{overflow:auto}.ti3-table-column-fixed-left{background-color:inherit;left:0;position:sticky!important;z-index:1}.ti3-table-column-fixed-left.ti3-table-floating-fixed-column{box-shadow:5px 0 5px 0 rgba(0,0,0,.1)}.ti3-table-column-fixed-right{background-color:inherit;position:sticky!important;right:0;z-index:1}.ti3-table-column-fixed-right.ti3-table-floating-fixed-column{box-shadow:-5px 0 5px 0 rgba(0,0,0,.1)}.ti3-table-row-disable{color:#999}.ti3-table-soldout{background:#999;color:#fff;display:inline-block;font-size:12px;height:16px;line-height:16px;text-align:center;width:16px}.ti3-table-row-message,.ti3-table-row-message-new,.ti3-table-row-message-recommended,.ti3-table-row-message-soldout{color:#fff;display:inline-block;font-size:12px;height:16px;line-height:16px;margin-left:5px;padding:0 4px;text-align:center}.ti3-table-row-message-soldout{background:#999}.ti3-table-row-message-new{background:#e41f2b}.ti3-table-row-message-recommended{background:#f57f06}@keyframes ti3-table-tr-entrance-keyframes{0%{transform:scaleX(.98);transform-origin:right center}to{transform:scaleX(1);transform-origin:right center}}.ti3-table:not([ti-table-tr-no-animate]) tbody tr:not(.ti3-details-tr).ng-enter{animation:ti3-table-tr-entrance-keyframes .3s cubic-bezier(.4,0,.2,1),ti3-fade-in-keyframes .3s cubic-bezier(.4,0,.2,1)}.ti3-table:not([ti-table-tr-no-animate]) tbody tr.ng-enter-stagger{animation-delay:.01s}@keyframes ti3-details-tr-open-keyframes{0%{transform:scaleY(0);transform-origin:top center}to{transform:scaleY(1);transform-origin:top center}}.ti3-details-tr.ng-enter{animation:ti3-details-tr-open-keyframes .15s cubic-bezier(.4,0,.2,1) forwards,ti3-fade-in-keyframes .15s cubic-bezier(.4,0,.2,1) forwards}"]
            },] }
];
TiTableComponent.ctorParameters = () => [
    { type: IterableDiffers },
    { type: ElementRef },
    { type: TiTableFixedHeadService },
    { type: Renderer2 },
    { type: NgZone },
    { type: TiRenderer }
];
TiTableComponent.propDecorators = {
    srcData: [{ type: Input }],
    displayedData: [{ type: Input }],
    storageId: [{ type: Input }],
    storageConfig: [{ type: Input }],
    displayedDataChange: [{ type: Output }],
    columns: [{ type: Input }],
    searchWords: [{ type: Input }],
    searchKeys: [{ type: Input }],
    closeOtherDetails: [{ type: Input }],
    stateUpdate: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlUYWJsZUNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL0BjbG91ZC90aW55My9jb21wb25lbnRzL3RhYmxlL1RpVGFibGVDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUdILFNBQVMsRUFDVCxVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFHTCxlQUFlLEVBQ2YsTUFBTSxFQUdOLE1BQU0sRUFDTixTQUFTLEVBQ1QsaUJBQWlCLEVBQ3BCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNoRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDeEMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNwRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUE4SXZEOzs7Ozs7Ozs7R0FTRztBQVdILE1BQU0sT0FBTyxnQkFBaUIsU0FBUSxlQUFlO0lBME5qRCxZQUFvQixlQUFnQyxFQUN4QyxVQUFzQixFQUNkLGdCQUF5QyxFQUNqRCxRQUFtQixFQUNYLElBQVksRUFDWixVQUFzQjtRQUNsQyxLQUFLLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBTmhCLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUVoQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQXlCO1FBRXpDLFNBQUksR0FBSixJQUFJLENBQVE7UUFDWixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBdE4xQzs7Ozs7Ozs7O1dBU0c7UUFDTSxZQUFPLEdBQW1CLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDO1FBZ0JyRTs7O1dBR0c7UUFDTSxrQkFBYSxHQUF5QjtZQUMzQyxJQUFJLEVBQUUsSUFBSTtZQUNWLFVB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QUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFDekksSUFBSSxDQUFDLDZCQUE2QixDQUFDLElBQUksQ0FBQztZQUNwQyxVQUFVO1lBQ1Ysa0JBQWtCO1NBQ3JCLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekMsQ0FBQzs7QUE3MUJjLGlDQUFnQixHQUFtQjtJQUM5QyxJQUFJLEVBQUUsRUFBRTtJQUNSLEtBQUssRUFBRTtRQUNILFFBQVEsRUFBRSxLQUFLO1FBQ2YsTUFBTSxFQUFFLEtBQUs7UUFDYixTQUFTLEVBQUUsS0FBSztLQUNuQjtDQUNKLENBQUM7O1lBbEJMLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsVUFBVTtnQkFDcEIscUNBQTJCO2dCQUUzQixhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtnQkFDckMsSUFBSSxFQUFFO29CQUNGLG1CQUFtQixFQUFFLE1BQU07aUJBQzlCOzthQUNKOzs7WUE1S0csZUFBZTtZQUxmLFVBQVU7WUFnQkwsdUJBQXVCO1lBTjVCLFNBQVM7WUFKVCxNQUFNO1lBT0QsVUFBVTs7O3NCQXlMZCxLQUFLOzRCQVVMLEtBQUs7d0JBS0wsS0FBSzs0QkFLTCxLQUFLO2tDQVFMLE1BQU07c0JBcUJOLEtBQUs7MEJBZ0JMLEtBQUs7eUJBTUwsS0FBSztnQ0FNTCxLQUFLOzBCQWVMLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQWZ0ZXJWaWV3Q2hlY2tlZCxcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgSW5wdXQsXHJcbiAgICBJdGVyYWJsZUNoYW5nZXMsXHJcbiAgICBJdGVyYWJsZURpZmZlcixcclxuICAgIEl0ZXJhYmxlRGlmZmVycyxcclxuICAgIE5nWm9uZSxcclxuICAgIE9uRGVzdHJveSxcclxuICAgIE9uSW5pdCxcclxuICAgIE91dHB1dCxcclxuICAgIFJlbmRlcmVyMixcclxuICAgIFZpZXdFbmNhcHN1bGF0aW9uXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpUmVuZGVyZXIgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9yZW5kZXJlci9UaVJlbmRlcmVyJztcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gJy4uLy4uL3V0aWxzL1V0aWwnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFRpVGFibGVGaXhlZEhlYWRTZXJ2aWNlIH0gZnJvbSAnLi9UaVRhYmxlRml4ZWRIZWFkU2VydmljZSc7XHJcbmltcG9ydCB7IFRpQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvVGlCYXNlTW9kdWxlJztcclxuXHJcbi8qKlxyXG4gKiBUaVRhYmxlIOe7hOS7tuS4iiBzcmNEYXRhIOi+k+WFpeaOpeWPo+S4rSBzdGF0ZSDlsZ7mgKflgLznmoTnsbvlnovmjqXlj6NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGlUYWJsZVNyY1N0YXRlIHtcclxuICAgIC8qKlxyXG4gICAgICog5Lyg57uZ57uE5Lu255qE6KGo5qC85rqQ5pWw5o2u5piv5ZCm5bey57uP6L+H5pCc57Si5aSE55CGXHJcbiAgICAgKi9cclxuICAgIHNlYXJjaGVkOiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkvKDnu5nnu4Tku7bnmoTooajmoLzmupDmlbDmja7mmK/lkKblt7Lnu4/ov4fmjpLluo/lpITnkIZcclxuICAgICAqL1xyXG4gICAgc29ydGVkOiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkvKDnu5nnu4Tku7bnmoTooajmoLzmupDmlbDmja7mmK/lkKblt7Lnu4/ov4fliIbpobXlpITnkIZcclxuICAgICAqL1xyXG4gICAgcGFnaW5hdGVkOiBib29sZWFuO1xyXG59XHJcbi8qKlxyXG4gKiDooajmoLzlvZPliY3mlbDmja7nmoTmkJzntKLjgIHmjpLluo/jgIHliIbpobXnirbmgIHlgLzmjqXlj6NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGlUYWJsZURhdGFTdGF0ZSB7XHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0oueKtuaAge+8jOWFtuWMheWQq+S4pOS4quWxnuaAp++8mlxyXG4gICAgICpcclxuICAgICAqIHNlYXJjaFdvcmRz77ya57G75Z6L5Li6QXJyYXk8c3RyaW5nPu+8jOaQnOe0ouWtl+espuS4sumbhuWQiFxyXG4gICAgICpcclxuICAgICAqIHNlYXJjaEtleXPvvJrnsbvlnovkuLpBcnJhee+8jOaQnOe0ouaMh+WumueahOWtl+auteiMg+WbtFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc2VhcmNoOiB7IHNlYXJjaFdvcmRzOiBBcnJheTxzdHJpbmc+LCBzZWFyY2hLZXlzPzogQXJyYXk8c3RyaW5nPiB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDmjpLluo/nirbmgIHvvIzlhbbljIXlkKvkuKTkuKrlsZ7mgKfvvJpcclxuICAgICAqXHJcbiAgICAgKiBzb3J0S2V577ya57G75Z6L5Li6IFN0cmluZ++8jOi/m+ihjOaOkuW6j+eahOaVsOaNruWxnuaAp1xyXG4gICAgICpcclxuICAgICAqIGFzY++8muexu+Wei+S4uiBCb29sZWFu77yM5piv5ZCm5Li65Y2H5bqPXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzb3J0OiB7IHNvcnRLZXk6IHN0cmluZywgYXNjOiBib29sZWFuIH07XHJcbiAgICAvKipcclxuICAgICAqIOWIhumhteeKtuaAge+8jOWFtuWMheWQq+S4pOS4quWxnuaAp++8mlxyXG4gICAgICpcclxuICAgICAqIGN1cnJlbnRQYWdl77ya57G75Z6LTnVtYmVy77yM6KGo56S65b2T5YmN6aG1XHJcbiAgICAgKlxyXG4gICAgICogaXRlbXNQZXJQYWdl77ya57G75Z6L5Li6TnVtYmVy77yM5q+P6aG15pi+56S65p2h5pWwXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwYWdpbmF0aW9uOiB7IGN1cnJlbnRQYWdlOiBudW1iZXIsIGl0ZW1zUGVyUGFnZTogbnVtYmVyfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOihqOagvOihjOaVsOaNruexu+Wei+aOpeWPo1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUaVRhYmxlUm93RGF0YSB7XHJcbiAgICAvKipcclxuICAgICAqIOaOp+WItuW9k+WJjeivpuaDheihjOaYr+WQpuWxleW8gFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc2hvd0RldGFpbHM/OiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiDlhYHorrjmnInlpJrkvZnnmoTlsZ7mgKflrZfmrrVcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xyXG59XHJcbi8qKlxyXG4gKiBUaVRhYmxlIOe7hOS7tuS4iiBzcmNEYXRhIOi+k+WFpeaOpeWPo+eahOaVsOaNruexu+Wei+aOpeWPo1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUaVRhYmxlU3JjRGF0YSB7XHJcbiAgICBzdGF0ZTogVGlUYWJsZVNyY1N0YXRlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDooajmoLzmupDmlbDmja5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGRhdGE6IEFycmF5PFRpVGFibGVSb3dEYXRhPjtcclxufVxyXG5cclxuLyoqXHJcbiAqIOihqOagvOeahOWQhOWIl+S/oeaBr1xyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUaVRhYmxlQ29sdW1ucyB7XHJcbiAgICAvKipcclxuICAgICAqIOihqOWktOWIl+aWh+acrOWGheWuueOAguW9k+afkOS4gOWIl+eahHRpdGxl5Li656m65a2X56ym5Liy5pe277yM5b2T5YmN5YiX5LiA55u05Zyo6KGo5qC85Lit5pi+56S677yM5L2G5piv5LiN5Ye6546w5Zyo5o6n5Yi25YiX5Yqo5oCBXHJcbiAgICAgKiDpmpDol48v5pi+56S6IOiuvue9rumdouadv+S4re+8jOS+i+WmguWNlemAieWIl+OAgeWkmumAieWIl+OAgeivpuaDheWxleW8gOWbvuagh+WIlztcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHRpdGxlPzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7liJflrr3vvIzmlK/mjIHnmb7liIbmr5TlkoxweOWAvDtcclxuICAgICAqL1xyXG4gICAgd2lkdGg/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOatpOWxnuaAp+WPquacieWcqOihqOagvOWFt+acieWIl+WKqOaAgSDmmL7npLov6ZqQ6JePIOWKn+iDveaXtuaJjemcgOimgeiuvue9ru+8jHNob3flj6/ku6XliIbliKvorr7nva7lpoLkuIvlgLzvvJpcclxuICAgICAqXHJcbiAgICAgKiAgdHJ1Ze+8miDooajnpLror6XliJfpu5jorqTmmL7npLrvvIznlKjmiLflj6/ku6XpgJrov4fpnaLmnb/mk43kvZzliIfmjaLlhbYg5pi+56S6L+makOiXjyDnirbmgIHjgIJcclxuICAgICAqXHJcbiAgICAgKiAgZmFsc2UgOiDooajnpLror6XliJfpu5jorqTpmpDol4/vvIznlKjmiLflj6/ku6XpgJrov4fpnaLmnb/mk43kvZzliIfmjaLlhbYg5pi+56S6L+makOiXjyDnirbmgIHjgIJcclxuICAgICAqXHJcbiAgICAgKiAgdW5kZWZpbmVkIDog6KGo56S66K+l5YiX5LiN5YW35aSH5Yqo5oCBIOaYvuekui/pmpDol48g5Yqf6IO977yM5Zu65a6a5pi+56S644CCXHJcbiAgICAgKlxyXG4gICAgICog5rOo5oSP77ya6K6+572uc2hvd+WxnuaAp+WAvOaXtu+8jHRpdGxl5Li656m65a2X56ym5Liy5pe277yM6K+l5YiX5Zu65a6a5pi+56S677yM5L2G5LiN5Ye6546w5Zyo5YiX5pON5L2c6Z2i5p2/5Lit44CCXHJcbiAgICAgKi9cclxuICAgIHNob3c/OiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiDlhYHorrjmnInlpJrkvZnnmoTlsZ7mgKflrZfmrrVcclxuICAgICAqL1xyXG4gICAgW3Byb3BOYW1lOiBzdHJpbmddOiBhbnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDooajmoLzlvZPliY3pobXjgIHmr4/pobXkuKrmlbDorrDlv4blvIDlhbNcclxuICogMTAuMS4y54mI5pys5paw5aKeXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRpUGFnaW5hdGlvblN0b3JhZ2VDb25maWcge1xyXG4gICAgY3VycmVudFBhZ2U/OiBib29sZWFuO1xyXG4gICAgaXRlbXNQZXJQYWdlPzogYm9vbGVhbjtcclxufVxyXG4vKipcclxuICog6KGo5qC86K6w5b+G5ZCE6aG55byA5YWzXHJcbiAqIDEwLjAuNCDmlrDlop5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGlUYWJsZVN0b3JhZ2VDb25maWcge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmjpLluo9cclxuICAgICAqL1xyXG4gICAgc29ydDogYm9vbGVhbjtcclxuICAgIC8qKlxyXG4gICAgICog5YiG6aG1XHJcbiAgICAgKi9cclxuICAgIHBhZ2luYXRpb246IGJvb2xlYW4gfCBUaVBhZ2luYXRpb25TdG9yYWdlQ29uZmlnO1xyXG4gICAgLyoqXHJcbiAgICAgKiDliJflrr1cclxuICAgICAqL1xyXG4gICAgY29sc1dpZHRoOiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiDlhYHorrjmnInlpJrkvZnnmoTlsZ7mgKflrZfmrrVcclxuICAgICAqL1xyXG4gICAgW3Byb3BOYW1lOiBzdHJpbmddOiBhbnk7XHJcbn1cclxuLyoqXHJcbiAqIFRpVGFibGUg6KGo5qC857uE5Lu2XHJcbiAqXHJcbiAqIOaUr+aMgeS7peihqOagvOeahOW9ouW8j+WxleekuuWkmuadoeaVsOaNrlxyXG4gKlxyXG4gKiDmlK/mjIHliY3lkI7lj7DliIbpobXjgIHmkJzntKLjgIHmjpLluo/jgIHor6bmg4XlsZXlvIDjgIHliJfmi5bliqjvvIjosIPmlbTliJflrr3vvInjgIHmjqfliLbliJfliqjmgIHpmpDol48v5pi+56S644CB6KGM5aSN6YCJ44CB6KGM5Y2V6YCJ44CBXHJcbiAqIOihqOagvOWNleWFg+agvCh0aCwgdGQp5pm66IO9dGlw44CB5qCR6KGo44CB5YiX5paH5pys5a+56b2Q5pa55byP44CB6KGo5aS05Zu65a6a562J5Yqf6IO9XHJcbiAqXHJcbiAqIDxleGFtcGxlLXVybD4uLi90aW55M2RlbW8vIy90YWJsZS90YWJsZS1hbGw8L2V4YW1wbGUtdXJsPlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3RpLXRhYmxlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi90YWJsZS5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3RhYmxlLmxlc3MnXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBob3N0OiB7XHJcbiAgICAgICAgJ1tjbGFzcy50aTMtdGFibGVdJzogJ3RydWUnXHJcbiAgICB9XHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVGlUYWJsZUNvbXBvbmVudCBleHRlbmRzIFRpQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICAgIHByaXZhdGUgc3RhdGljIERFRkFVTFRfU1JDX0RBVEE6IFRpVGFibGVTcmNEYXRhID0ge1xyXG4gICAgICAgIGRhdGE6IFtdLFxyXG4gICAgICAgIHN0YXRlOiB7XHJcbiAgICAgICAgICAgIHNlYXJjaGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgc29ydGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgcGFnaW5hdGVkOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruihqOagvOa6kOaVsOaNruWPiuWFtuWkhOeQhuaVsOaNrueKtuaAgVxyXG4gICAgICpcclxuICAgICAqIGRhdGE6IOihqOagvOa6kOaVsOaNruOAguS4gOiIrOaDheWGteS4i++8jOWJjeWPsOWIhumhteaXtuS8oOWFpeihqOagvOWFqOmDqOaVsOaNru+8jOWQjuWPsOWIhumhteaXtuS8oOWFpeW9k+WJjemhteaVsOaNruOAglxyXG4gICAgICpcclxuICAgICAqIHN0YXRlOiDnlKjmnaXmoIfor4bkvKDlhaXnmoTooajmoLzmupDmlbDmja7mmK/lkKblt7Lnu4/nu4/ov4fmjpLluo8oc29ydGVkKeOAgei/h+a7pChzZWFyY2hlZCnjgIHliIbpobUocGFnaW5hdGVkKeetieWkhOeQhuOAglxyXG4gICAgICpcclxuICAgICAqIOW6lOeUqOS4vuS+i++8muWQjuWPsOWIhumhteWcuuaZr+S4i++8jOS8oOWFpeeahGRhdGHkuLrlvZPliY3pobXmlbDmja7vvIjljbPlt7Lnu4/ov5vooYzkuobliIbpobXvvInvvIzlm6DmraTlupTlsIZwYWdpbmF0ZWTorr7nva7kuLp0cnVl77ybXHJcbiAgICAgKiAgICAgICAgICDlpoLmnpzkvKDlhaXnmoTmlbDmja7lt7Lnu4/ov5vooYzkuobmjpLluo/vvIjlpoLlkI7lj7DmjpLluo/lnLrmma/vvInvvIzliJnlupTlsIZzb3J0ZWTorr7nva7kuLp0cnVl44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNyY0RhdGE6IFRpVGFibGVTcmNEYXRhID0gVGlUYWJsZUNvbXBvbmVudC5ERUZBVUxUX1NSQ19EQVRBO1xyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7ooajmoLzlrp7ml7blkYjnjrDnmoTmlbDmja7jgILooajmoLzmupDmlbDmja7nu4/ov4fmjpLluo/jgIHmkJzntKLjgIHliIbpobXlpITnkIbkuYvlkI7ljbPkuLpkaXNwbGF5ZWREYXRhXHJcbiAgICAgKlxyXG4gICAgICog5rOo5oSP77yaXHJcbiAgICAgKlxyXG4gICAgICogMS4g5Lqn5ZOB5Zyo5byA5Y+R5Lit77yM5Y+q6ZyA5Zyo5Yid5aeL5YyW5pe25bCG5YW26K6+572u5Li6IFsgXSDljbPlj6/vvIznu4Tku7blhoXpg6jlsIboh6rliqjlrozmiJDlr7nlhbbotYvlgLzlkozmm7TmlrA7XHJcbiAgICAgKlxyXG4gICAgICogMi4g5byA5Y+R6ICF5bqU6K+l5ZyoIHRib2R5PnRyIOS4reWujOaIkOWvuSBkaXNwbGF5ZWREYXRhIOeahOmBjeWOhuWSjOaYvuekuu+8iOWmgumAmui/h25nRm9y77yJ44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXllZERhdGE6IEFycmF5PFRpVGFibGVSb3dEYXRhPjsgLy8g6KGo5qC85Lit5a6e5pe25bGV56S655qE5pWw5o2u6ZuGXHJcbiAgICAvKipcclxuICAgICAqIOihqOagvOiusOW/hu+8jOaXouaYr+W8gOWFs++8jOWPiOaYr+WtmOWCqGlkLCDmiYDku6Xmr4/kuIDkuKrooajmoLzpnIDopoHorr7nva7llK/kuIDlgLzjgIJcclxuICAgICAqIDEwLjAuNCDmlrDlop5cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc3RvcmFnZUlkOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOihqOagvOiusOW/huWQhOmhueW8gOWFs+mFjee9rlxyXG4gICAgICogMTAuMC40IOaWsOWinlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzdG9yYWdlQ29uZmlnOiBUaVRhYmxlU3RvcmFnZUNvbmZpZyA9IHtcclxuICAgICAgICBzb3J0OiB0cnVlLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHRydWUsXHJcbiAgICAgICAgY29sc1dpZHRoOiB0cnVlLFxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog6KGo5qC85a6e5pe25ZGI546w55qE5pWw5o2u5pS55Y+Y5pe25ZCR5aSW6YCa55+lXHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSByZWFkb25seSBkaXNwbGF5ZWREYXRhQ2hhbmdlOiBFdmVudEVtaXR0ZXI8QXJyYXk8VGlUYWJsZVJvd0RhdGE+PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKlxyXG4gICAgICog6K6+572u6KGo5qC855qE5ZCE5YiX5L+h5oGv44CC5byA5Y+R6ICF5Y+v5Lul5L2/55So6K+l5o6l5Y+j55qE5YC85ZyoIHRoZWFkPnRyPnRoIOS4reWujOaIkOWvueihqOWktOWGheWuueeahOiuvue9ru+8m1xyXG4gICAgICpcclxuICAgICAqIOaOp+S7tuWGhemDqOagueaNrmNvbHVtbnPorr7nva7lrozmiJDlv4XopoHnmoTpgLvovpHlpITnkIbjgIIg5bu66K6u5a+5Y29sdW1uc+aVsOe7hOS4reeahOWvueixoeiuvue9ruWmguS4i+WxnuaAp++8mlxyXG4gICAgICpcclxuICAgICAqIHRpdGxlOiDooajlpLTliJfmlofmnKzlhoXlrrnjgILlvZPmn5DkuIDliJfnmoR0aXRsZeS4uuepuuWtl+espuS4suaXtu+8jOW9k+WJjeWIl+S4gOebtOWcqOihqOagvOS4reaYvuekuu+8jOS9huaYr+S4jeWHuueOsOWcqOaOp+WItuWIl+WKqOaAgVxyXG4gICAgICogICAgICAgICDpmpDol48v5pi+56S6IOiuvue9rumdouadv+S4re+8jOS+i+WmguWNlemAieWIl+OAgeWkmumAieWIl+OAgeivpuaDheWxleW8gOWbvuagh+WIlztcclxuICAgICAqXHJcbiAgICAgKiB3aWR0aDog6K6+572u5YiX5a6977yM5pSv5oyB55m+5YiG5q+U5ZKMcHjlgLw7XHJcbiAgICAgKlxyXG4gICAgICogc2hvdzog5q2k5bGe5oCn5Y+q5pyJ5Zyo6KGo5qC85YW35pyJ5YiX5Yqo5oCBIOaYvuekui/pmpDol48g5Yqf6IO95pe25omN6ZyA6KaB6K6+572u77yMc2hvd+WPr+S7peWIhuWIq+iuvue9ruWmguS4i+WAvO+8mlxyXG4gICAgICpcclxuICAgICAqICAgICAgIHRydWXvvJog6KGo56S66K+l5YiX6buY6K6k5pi+56S677yM55So5oi35Y+v5Lul6YCa6L+H6Z2i5p2/5pON5L2c5YiH5o2i5YW2IOaYvuekui/pmpDol48g54q25oCB44CCXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgZmFsc2UgOiDooajnpLror6XliJfpu5jorqTpmpDol4/vvIznlKjmiLflj6/ku6XpgJrov4fpnaLmnb/mk43kvZzliIfmjaLlhbYg5pi+56S6L+makOiXjyDnirbmgIHjgIJcclxuICAgICAqXHJcbiAgICAgKiAgICAgICB1bmRlZmluZWQgOiDooajnpLror6XliJfkuI3lhbflpIfliqjmgIEg5pi+56S6L+makOiXjyDlip/og73vvIzlm7rlrprmmL7npLrjgIJcclxuICAgICAqXHJcbiAgICAgKiAgICAgICDms6jmhI/vvJrorr7nva5zaG935bGe5oCn5YC85pe277yMdGl0bGXkuLrnqbrlrZfnrKbkuLLml7bvvIzor6XliJflm7rlrprmmL7npLrvvIzkvYbkuI3lh7rnjrDlnKjliJfmk43kvZzpnaLmnb/kuK3jgIJcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY29sdW1uczogQXJyYXk8VGlUYWJsZUNvbHVtbnM+ID0gW107XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruihqOagvOaQnOe0ouWKn+iDveeahOmcgOiiq+ajgOe0oueahOWtl+espuS4sueahOmbhuWQiOOAglxyXG4gICAgICpcclxuICAgICAqIOatpOaOpeWPo+mcgOmFjeWQiHNlYXJjaEtleXPkvb/nlKjjgIJcclxuICAgICAqXHJcbiAgICAgKiAgMS4gc2VhcmNoV29yZHPplb/luqbkuLox5pe277yM5Zyoc2VhcmNoS2V5c+aMh+WumueahOWtl+auteS4i+aQnOe0onNlYXJjaFdvcmRzWzBd5oyH5a6a55qE5a2X56ym5LiyLFxyXG4gICAgICogICAgIOWcqOaMh+WumuWtl+auteS4reeahOS7u+S4gOWtl+auteS4reaQnOe0ouWIsOaXtuWNs+a7oei2s+adoeS7tijlubbpm4Yp44CC5aaC77yac2VhcmNoV29yZHM6IFsnYiddLFxyXG4gICAgICogICAgIHNlYXJjaEtleXM6IFsnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJ13vvIzliJnlnKhmaXJzdE5hbWXlrZfmrrXljIXlkKvigJhi4oCZ77yMXHJcbiAgICAgKiAgICAg5oiW5ZyobGFzdE5hbWXlrZfmrrXljIXlkKvigJhi4oCZ5pe25pys6KGM5pWw5o2u5Y2z5ruh6Laz5pCc57Si5p2h5Lu2O1xyXG4gICAgICpcclxuICAgICAqIDIuIHNlYXJjaFdvcmRz6ZW/5bqm5aSn5LqOMeS4lHNlYXJjaEtleXPkuI5zZWFyY2hXb3Jkc+mVv+W6puebuOetieaXtu+8jOWcqHNlYXJjaEtleXPmjIflrprnmoTlrZfmrrXkuIvmkJzntKJzZWFyY2hXb3Jkc+WvueW6lCjmjInpobrluo8p5YWD57Sg5oyH5a6a55qE5a2X56ym5LiyLFxyXG4gICAgICogICAg5Zyo5oyH5a6a5a2X5q615Lit55qE5omA5pyJ5a2X5q615pCc57Si5Yiw5a+55bqU5a2X56ym5Liy5pe25omN5ruh6Laz5p2h5Lu2KOS6pOmbhinjgILlpoLvvJpzZWFyY2hXb3JkczogWydiJywgJzE4J10sXHJcbiAgICAgKiAgICBzZWFyY2hLZXlzOiBbJ2ZpcnN0TmFtZScsICdhZ2UnXe+8jOWImeWcqGZpcnN0TmFtZeWtl+auteWMheWQq+KAmGLigJnkuJRcclxuICAgICAqICAgIOWcqGFnZeWtl+auteWMheWQq+KAmDE44oCZ5pe25pys6KGM5pWw5o2u5omN5ruh6Laz5pCc57Si5p2h5Lu244CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNlYXJjaFdvcmRzOiBBcnJheTxzdHJpbmc+ID0gbnVsbDtcclxuICAgIC8qKlxyXG4gICAgICog5Li66KGo5qC85pCc57Si5Yqf6IO95oyH5a6a5pCc57Si55qE5a2X5q616IyD5Zu044CCXHJcbiAgICAgKlxyXG4gICAgICog5q2k5o6l5Y+j6ZyA6YWN5ZCIc2VhcmNoV29yZHPkvb/nlKjjgIJcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2VhcmNoS2V5czogQXJyYXk8c3RyaW5nPiA9IG51bGw7IC8vIOaYr+WQpuS9v+eUqG51bGxcclxuICAgIC8qKlxyXG4gICAgICog5pyJ6K+m5oOF5Yqf6IO95pe277yM6K6+572u57uE5Lu25piv5ZCm5byA5ZCv5b2T5YmN6aG15Y+q5pi+56S65LiA6KGM6K+m5oOF55qE5Yqf6IO944CCXHJcbiAgICAgKlxyXG4gICAgICog6K6+572u5Li6dHJ1Ze+8jOihqOekuuihqOagvOS4reW9k+WJjemhteWPquWxleekuuS4gOihjOeahOivpuaDhe+8jOS4jeiuvue9ruaIluiuvuS4umZhbHNl5pe277yM5Y+v5bGV5byA5aSa6KGM55qE6K+m5oOF44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNsb3NlT3RoZXJEZXRhaWxzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOW9k+ihqOagvOaVsOaNrueKtuaAgeWPmOWMluaXtuWQkeWklumAmuefpVxyXG4gICAgICpcclxuICAgICAqIDEu5Yqf6IO95o+P6L+w77yaXHJcbiAgICAgKlxyXG4gICAgICog54q25oCB5Y+Y5YyW5oyH55qE5piv6KGo5qC855qE5o6S5bqP44CB5pCc57Si44CB5YiG6aG15Y+C5pWw5Y+R55Sf5LqG5Y+Y5YyW77yM6Kem5Y+R5Y+Y5YyW55qE5Y6f5Zug5Y+v6IO95piv55So5oi35pON5L2c77yM5Lmf5Y+v6IO95piv5byA5Y+R6ICF6K6+572u44CCXHJcbiAgICAgKiDor6Xlm57osIPkuLrlkI7lj7DliIbpobXjgIHlkI7lj7DmjpLluo/lkozlkI7lj7Dov4fmu6Tmj5DkvpvkuoblpITnkIbml7bmnLrvvIzkvovlpoLvvIznlKjmiLfngrnlh7vnrKwy6aG15pe277yM55Sx5LqO6aG156CB55qE5Y+Y5YyW77yM5b+F5a6a5Lya6Kem5Y+R5pys5Zue6LCD5Ye95pWw77yMXHJcbiAgICAgKiDov5vogIzlvIDlj5HogIXlj6/ku6XlnKjor6Xlm57osIPkuK3lkJHlkI7lj7Dlj5Hor7fmsYLojrflj5bnrKwy6aG155qE5pWw5o2u77yM5bm26LWL57uZ6KGo5qC844CCXHJcbiAgICAgKlxyXG4gICAgICog5rOo5oSP5LqL6aG577ya5Yid5aeL5YyW5pe25LiN5Lya6Kem5Y+R6K+l5Zue6LCD77yM5Y+q5pyJ6KGo5qC854q25oCB5Yqo5oCB5pS55Y+Y5pe25omN5Lya6Kem5Y+R6K+l5Zue6LCD77yM5omA5Lul6ZyA6KaB55So5oi36Ieq5bex5Zyo5Yid5aeL5pe25ZCR5ZCO56uv5Y+R6YCB6K+35rGC6I635Y+W6KGo5qC85Yid5aeL5YyW5pWw5o2u44CCXHJcbiAgICAgKlxyXG4gICAgICogMi7lh73mlbDlhaXlj4LvvJpUaVRhYmxlQ29tcG9uZW50IOe7hOS7tuWunuS+i1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IHN0YXRlVXBkYXRlOiBFdmVudEVtaXR0ZXI8VGlUYWJsZUNvbXBvbmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhvc3RFbGU6IEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNyY0RhdGFEaWZmZXI6IEl0ZXJhYmxlRGlmZmVyPG9iamVjdD47XHJcbiAgICBwcml2YXRlIGRhdGE6IEFycmF5PFRpVGFibGVSb3dEYXRhPjtcclxuICAgIHByaXZhdGUgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlIOWIpOaWreaYr+WQpuS9v+eUqOS6hnRpLWhlYWQtc29ydOe7hOS7tlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW5hYmxlU29ydDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwYWdpbmF0aW9uU3ViamVjdDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB2aWV3SW5pdFN1YmplY3Q6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnRhaW5lclNjcm9sbFhDaGFuZ2VTdWJqZWN0OiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRoUmVzaXplU3ViamVjdDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVGaXhlZFRoTGVmdFN1YmplY3Q6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlRml4ZWRUZExlZnRTdWJqZWN0OiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZUNvbHVtbnNTdWJqZWN0OiBTdWJqZWN0PEFycmF5PFRpVGFibGVDb2x1bW5zPj4gPSBuZXcgU3ViamVjdDxBcnJheTxUaVRhYmxlQ29sdW1ucz4+KCk7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWFtuS4reWMheWQq+S6hnNvcnTjgIFzZWFyY2jjgIFwYWdpbmF0aW9u5LiJ5Liq5bGe5oCn77yM5q+P5Liq5bGe5oCn6YO95o+P6L+w5LqG5b2T5YmN6KGo5qC85pWw5o2u55qE5Y+C5pWw54q25oCBOlxyXG4gICAgICpcclxuICAgICAqIHNvcnTvvJpvYmplY3TnsbvlnovvvIzljIXlkKvkuoZzb3J0S2V577yI57G75Z6L5Li6c3RyaW5n77yM6L+b6KGM5o6S5bqP55qE5pWw5o2u5bGe5oCn77yJ44CBYXNj77yI57G75Z6L5Li6Qm9vbGVhbu+8jOaYr+WQpuS4uuWNh+W6j++8ieWxnuaAp++8m1xyXG4gICAgICpcclxuICAgICAqIHNlYXJjaDogb2JqZWN057G75Z6L77yM5YyF5ZCr5LqGc2VhcmNoV29yZHPvvIjnsbvlnovkuLphcnJheTxzdHJpbmc+77yM5pCc57Si5a2X56ym5Liy6ZuG5ZCI77yJ44CBc2VhcmNoS2V5c++8iOexu+Wei+S4ukFycmF577yM5pCc57Si5oyH5a6a55qE5a2X5q616IyD5Zu077yJ5bGe5oCn77ybXHJcbiAgICAgKlxyXG4gICAgICogcGFnaW5hdGlvbjogb2JqZWN057G75Z6L77yM5YyF5ZCr5LqGY3VycmVudFBhZ2XvvIjnsbvlnotudW1iZXLvvIzooajnpLrlvZPliY3pobXvvInjgIFpdGVtc1BlclBhZ2XvvIjnsbvlnovkuLpOdW1iZXLvvIzmr4/pobXmmL7npLrmnaHmlbDvvInlsZ7mgKfjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRhdGFTdGF0ZTogVGlUYWJsZURhdGFTdGF0ZSA9IHtcclxuICAgICAgICBzZWFyY2g6IHsgc2VhcmNoV29yZHM6IG51bGwsIHNlYXJjaEtleXM6IG51bGwgfSxcclxuICAgICAgICBzb3J0OiB7IHNvcnRLZXk6ICcnLCBhc2M6IG51bGwgfSxcclxuICAgICAgICBwYWdpbmF0aW9uOiB7IGN1cnJlbnRQYWdlOiAtMSwgaXRlbXNQZXJQYWdlOiAtMSB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlIOWtkOWFg+e0oOmcgOimgeiuv+mXru+8jOaJgOS7pXB1YmxpY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbG9jYWxTdG9yYWdlU3RhdGU6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBhbnkgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZSDlrZDlhYPntKDpnIDopoHorr/pl67vvIzmiYDku6VwdWJsaWNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNlc3Npb25TdG9yYWdlU3RhdGU6IHsgW3Byb3BOYW1lOiBzdHJpbmddOiBhbnkgfTtcclxuICAgIHByaXZhdGUgaXNEYXRhU3RhdGVDaGFuZ2U6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgb2xkU2VhcmNoV29yZHM6IEFycmF5PHN0cmluZz4gPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBvbGRTZWFyY2hLZXlzOiBBcnJheTxzdHJpbmc+ID0gbnVsbDtcclxuICAgIHByaXZhdGUgb2xkUGFnaW5hdGlvbjoge2N1cnJlbnRQYWdlOiBudW1iZXIsIGl0ZW1zUGVyUGFnZTogbnVtYmVyfSA9IHsgY3VycmVudFBhZ2U6IC0xLCBpdGVtc1BlclBhZ2U6IC0xIH07XHJcbiAgICBwcml2YXRlIG9sZFNvcnQ6IHtzb3J0S2V5OiBzdHJpbmcsIGFzYzogYm9vbGVhbn0gPSB7c29ydEtleTogJycsIGFzYzogbnVsbH07XHJcbiAgICAvKipcclxuICAgICAqIOinpuWPkSBzdGF0ZVVwZGF0ZSDnmoTkuovku7Yo5Y2z5byV6LW36KGo5qC85pWw5o2u54q25oCB5pS55Y+Y55qE6LW35Zug5LqL5Lu2Ke+8jOWFtuaciVwic2VhcmNoXCIsIFwic29ydFwiLCBcInBhZ2luYXRpb25cIui/meS4ieS4quWAvFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRyaWdnZXJFdmVudDogJ3NlYXJjaCcgfCAnc29ydCcgfCAncGFnaW5hdGlvbic7XHJcbiAgICBwcml2YXRlIHNlYXJjaGVkUmVzdWx0OiBBcnJheTxUaVRhYmxlUm93RGF0YT4gPSBbXTtcclxuICAgIHByaXZhdGUgY3VzdG9tQ29tcGFyZUZuOiAoYTogVGlUYWJsZVJvd0RhdGEsIGI6IFRpVGFibGVSb3dEYXRhLCBzb3J0S2V5Pzogc3RyaW5nKSA9PiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOihqOagvOaYr+WQpuS4uuihqOWktOmUgeWumlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNGaXhlZEhlYWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGhlYWRDb250YWluZXI6IEVsZW1lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRib2R5Q29udGFpbmVyOiBFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBvbGRUYm9keUhlaWdodDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgdW5saXN0ZW5GaXhlZEhlYWRXaW5kb3dSZXNpemU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHVubGlzdGVuRml4ZWRDb2x1bW5XaW5kb3dSZXNpemU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIHVubGlzdGVuV2luZG93QmVmb3JldW5sb2FkOiAoKSA9PiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwcm9jZXNzWVNjcm9sbFN0YXRlQ2hhbmdlV2l0aENvbHNSZXNpemFibGU6ICgpID0+IHZvaWQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpeGVkQ29sdW1uSW5mbzoge1xyXG4gICAgICAgIGhhc0ZpeGVkQ29sdW1uPzogYm9vbGVhbixcclxuICAgICAgICBjb250YWluZXI/OiBhbnksXHJcbiAgICAgICAgdGhGaXhlZFJpZ2h0PzogYW55LFxyXG4gICAgICAgIGNvbnRhaW5lcldpZHRoPzogbnVtYmVyLFxyXG4gICAgICAgIGZpeGVkQ29sdW1uTGVmdFZhbHVlcz86IEFycmF5PG51bWJlcj4sXHJcbiAgICAgICAgY29sdW1uRml4ZWRMZWZ0TGFzdEluZGV4PzogbnVtYmVyXHJcbiAgICB9ID0ge307XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBpdGVyYWJsZURpZmZlcnM6IEl0ZXJhYmxlRGlmZmVycyxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgICAgICAgICBwcml2YXRlIGZpeGVkSGVhZFNlcnZpY2U6IFRpVGFibGVGaXhlZEhlYWRTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgICAgICAgICAgICAgIHByaXZhdGUgem9uZTogTmdab25lLFxyXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0aVJlbmRlcmVyOiBUaVJlbmRlcmVyKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKGVsZW1lbnRSZWYsIHJlbmRlcmVyKTtcclxuICAgICAgICAgICAgdGhpcy5ob3N0RWxlID0gZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rWL6K+V5p+Q5LiA5a2X5LiyKHRlc3RTdHIp5Lit5piv5ZCm5a2Y5Zyo5a2Q5LiyKGtleSlcclxuICAgICAqIEBwYXJhbSB0ZXN0U3RyIOW+heajgOe0oueahOWtl+espuS4suaIluaVsOWAvFxyXG4gICAgICogQHBhcmFtIGtleSDmo4DntKLnmoTlrZDkuLJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNNYXRjaGVkKHRlc3RTdHI6IGFueSwga2V5d29yZHM6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoVXRpbC5pc1N0cmluZyh0ZXN0U3RyKSB8fCBVdGlsLmlzTnVtYmVyKHRlc3RTdHIpKSA/XHJcbiAgICAgICAgICAgIChTdHJpbmcodGVzdFN0cikpLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgLmluZGV4T2Yoa2V5d29yZHMudG9Mb3dlckNhc2UoKSkgPj0gMCA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHNlYXJjaEJ5T25lV29yZChzcmM6IEFycmF5PFRpVGFibGVSb3dEYXRhPiwgc2VhcmNoV29yZHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoS2V5czogQXJyYXk8c3RyaW5nPik6IEFycmF5PFRpVGFibGVSb3dEYXRhPiB7XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0OiBBcnJheTxUaVRhYmxlUm93RGF0YT4gPSBbXTtcclxuICAgICAgICBzcmMuZm9yRWFjaCgoaXRlbTogVGlUYWJsZVJvd0RhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaEtleXMgJiYgc2VhcmNoS2V5cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzZWFyY2hLZXlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRpVGFibGVDb21wb25lbnQuaXNNYXRjaGVkKGl0ZW1ba2V5XSwgc2VhcmNoV29yZHNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRpVGFibGVDb21wb25lbnQuaXNNYXRjaGVkKGl0ZW1ba2V5XSwgc2VhcmNoV29yZHNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzZWFyY2hCeU1vcmVUaGFuT25lV29yZChzcmM6IEFycmF5PFRpVGFibGVSb3dEYXRhPiwgc2VhcmNoV29yZHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hLZXlzOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8VGlUYWJsZVJvd0RhdGE+IHtcclxuICAgICAgICBjb25zdCBvdXRwdXQ6IEFycmF5PFRpVGFibGVSb3dEYXRhPiA9IFtdO1xyXG4gICAgICAgIHNyYy5mb3JFYWNoKChpdGVtOiBUaVRhYmxlUm93RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaXNNYXRjaGVkOiBib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHNlYXJjaEtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICghVGlUYWJsZUNvbXBvbmVudC5pc01hdGNoZWQoaXRlbVtzZWFyY2hLZXlzW2ldXSwgc2VhcmNoV29yZHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzTWF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRTZWFyY2hlZERhdGEoaW5wdXREYXRhOiBBcnJheTxUaVRhYmxlUm93RGF0YT4sIHNlYXJjaFdvcmRzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEtleXM6IEFycmF5PHN0cmluZz4pOiBBcnJheTxUaVRhYmxlUm93RGF0YT4ge1xyXG4gICAgICAgIGxldCBvdXREYXRhOiBBcnJheTxUaVRhYmxlUm93RGF0YT4gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHNlYXJjaFdvcmRzICYmIHNlYXJjaFdvcmRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBvdXREYXRhID0gVGlUYWJsZUNvbXBvbmVudC5zZWFyY2hCeU9uZVdvcmQoaW5wdXREYXRhLCBzZWFyY2hXb3Jkcywgc2VhcmNoS2V5cyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hXb3JkcyAmJiBzZWFyY2hXb3Jkcy5sZW5ndGggPiAxICYmIHNlYXJjaEtleXMgJiZcclxuICAgICAgICAgICAgc2VhcmNoS2V5cy5sZW5ndGggPT09IHNlYXJjaFdvcmRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBvdXREYXRhID0gVGlUYWJsZUNvbXBvbmVudC5zZWFyY2hCeU1vcmVUaGFuT25lV29yZChpbnB1dERhdGEsIHNlYXJjaFdvcmRzLCBzZWFyY2hLZXlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvdXREYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGRvQ29tcGFyZShhOiBhbnksIGI6IGFueSk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogbnVtYmVyID0gMDtcclxuICAgICAgICBpZiAoYS50eXBlID09PSBiLnR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKGEudmFsdWUgIT09IGIudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGEudmFsdWUgPCBiLnZhbHVlID8gLTEgOiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gYS50eXBlIDwgYi50eXBlID8gLTEgOiAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRQcmVkaWNhdGVWYWx1ZSh2YWx1ZTogVGlUYWJsZVJvd0RhdGEsIHByZWRpY2F0ZTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICBpZiAoIVV0aWwuaXNFbXB0eVN0cmluZyhwcmVkaWNhdGUpICYmIHZhbHVlLmhhc093blByb3BlcnR5KHByZWRpY2F0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlW3ByZWRpY2F0ZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0UHJlZGljYXRlVmFsdWVPYmoodmFsdWU6IGFueSwgaW5kZXg6IG51bWJlcik6IHt2YWx1ZTogYW55LCB0eXBlOiBzdHJpbmd9IHtcclxuICAgICAgICBsZXQgcmVzdWx0VmFsOiBhbnkgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmVzdWx0VmFsID0gJ251bGwnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoVXRpbC5pc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0VmFsID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFV0aWwuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0VmFsID0gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgcmVzdWx0VmFsID0gaW5kZXg7XHJcbiAgICAgICAgfSBlbHNlIGlmIChVdGlsLmlzRnVuY3Rpb24odmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFZhbHVlOiBhbnkgPSB2YWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFRpVGFibGVDb21wb25lbnQuZ2V0UHJlZGljYXRlVmFsdWVPYmoocmVzdWx0VmFsdWUsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHlwZTogc3RyaW5nID0gdHlwZW9mIHJlc3VsdFZhbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHJlc3VsdFZhbCwgdHlwZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHNhZmVDb3B5KGRhdGE6IEFycmF5PGFueT4pOiBBcnJheTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gZGF0YSA/IFtdLmNvbmNhdChkYXRhKSA6IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGlzVmFsdWVFcXVhbChuOiBhbnksIG86IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghKG4gaW5zdGFuY2VvZiBPYmplY3QpIHx8ICEobyBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG4gPT09IG87XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoVXRpbC5pc0FycmF5KG4pICYmIFV0aWwuaXNBcnJheShvKSkge1xyXG4gICAgICAgICAgICBpZiAobi5sZW5ndGggIT09IG8ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuW2ldICE9PSBvW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG4pLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMobykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW8uaGFzT3duUHJvcGVydHkoa2V5KSB8fCBuW2tleV0gIT09IG9ba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICBpZiAoIXRoaXMuc3JjRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnNyY0RhdGEgPSBUaVRhYmxlQ29tcG9uZW50LkRFRkFVTFRfU1JDX0RBVEE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5zcmNEYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zcmNEYXRhLmRhdGEgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zcmNEYXRhRGlmZmVyID0gdGhpcy5pdGVyYWJsZURpZmZlcnMuZmluZCh0aGlzLnNyY0RhdGEuZGF0YSlcclxuICAgICAgICAgICAgLmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWFyY2hXb3JkcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZFNlYXJjaFdvcmRzID0gVGlUYWJsZUNvbXBvbmVudC5zYWZlQ29weSh0aGlzLnNlYXJjaFdvcmRzKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU3RhdGUuc2VhcmNoLnNlYXJjaFdvcmRzID0gdGhpcy5zZWFyY2hXb3JkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaEtleXMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5vbGRTZWFyY2hLZXlzID0gVGlUYWJsZUNvbXBvbmVudC5zYWZlQ29weSh0aGlzLnNlYXJjaEtleXMpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTdGF0ZS5zZWFyY2guc2VhcmNoS2V5cyA9IHRoaXMuc2VhcmNoS2V5cztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6KGo5qC86K6w5b+GXHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcmFnZUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFN0b3JhZ2VEYXRhU3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5pdEZpeGVkSGVhZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmZpeGVkQ29sdW1uSW5mby5oYXNGaXhlZENvbHVtbikge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEZpeGVkQ29sdW1uQmVoYXZpb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52aWV3SW5pdFN1YmplY3QubmV4dCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnN0b3JhZ2VJZCkge1xyXG4gICAgICAgICAgICAvLyDlnKhuZ09uRGVzdHJveSDml6Dms5Xkv53lrZjvvIzmiYDmnInkvb/nlKhiZWZvcmV1bmxvYWRcclxuICAgICAgICAgICAgLy8g5Li65LuA5LmI5LiN55SodW5sb2FkPyBiZWZvcmV1bmxvYWQg5YW85a655q+UdW5sb2Fk5pWI5p6c5aW9XHJcbiAgICAgICAgICAgIC8vIOWPguiAg++8mmh0dHBzOi8vc2luYWFkLmdpdGh1Yi5pby94ZmUvMjAxNi8wNi8yOS9iZWZvcmV1bmxvZC12cy11bmxvYWQvXHJcbiAgICAgICAgICAgIC8vIOS/ruWkjVNTUuaKpemUme+8mkVSUk9SIFJlZmVyZW5jZUVycm9yOiB3aW5kb3cgaXMgbm90IGRlZmluZWRcclxuICAgICAgICAgICAgaWYodHlwZW9mIHdpbmRvdyA9PT0ndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51bmxpc3RlbldpbmRvd0JlZm9yZXVubG9hZCA9IHRoaXMucmVuZGVyZXIubGlzdGVuKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RvcmFnZURhdGFTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Li65LqG56Gu5L+d6KGo5qC85YaF5bWM57uE5Lu2KOavlOWmgnRpSGVhZFNvcnQsdGlQYWdpbmF0aW9u562JKeeahOaVsOaNruWPmOWMluWcqOihqOagvOe7hOS7tuS4reiDveebkeWQrOWIsO+8jOaOkuW6j+OAgeaQnOe0ouOAgeWIhumhtVxyXG4gICAgLy8g55qE55u45YWz5pWw5o2u55uR5ZCs6ZyA6KaB5pS+5Zyo6KGo5qC857uE5Lu255qEQWZ0ZXJWaWV3Q2hlY2tlZOWRqOacn+S4reOAguWboOS4uuihqOagvOe7hOS7tueahEFmdGVyVmlld0NoZWNrZWTnlJ/lkb3lkajmnJ/mmZrkuo5cclxuICAgIC8vIOWGheW1jOe7hOS7tijmr5TlpoJ0aUhlYWRTb3J0LHRpUGFnaW5hdGlvbuetiSnnmoTlkITkuKpjaGVja2Vk55Sf5ZG95ZGo5pyf44CCXHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y3ljbG9tYXRpYy1jb21wbGV4aXR5XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOebkeWQrHNyY0RhdGEuZGF0YeeahOWPmOWMllxyXG4gICAgICAgIGNvbnN0IGRhdGFBcnI6IEFycmF5PFRpVGFibGVSb3dEYXRhPiAgPSB0aGlzLnNyY0RhdGEgJiYgdGhpcy5zcmNEYXRhLmRhdGEgPyB0aGlzLnNyY0RhdGEuZGF0YSA6IFtdO1xyXG4gICAgICAgIGNvbnN0IHNyY0RhdGFEaWZmZXI6IEl0ZXJhYmxlQ2hhbmdlczxUaVRhYmxlUm93RGF0YT4gPSB0aGlzLnNyY0RhdGFEaWZmZXIuZGlmZihkYXRhQXJyKTtcclxuICAgICAgICBpZiAoc3JjRGF0YURpZmZlcikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNhZmVDb3B5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YTJkaXNwbGF5ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOebkeWQrHNlYXJjaOebuOWFs+aOpeWPo+WAvOWPmOWMllxyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaFdvcmRzICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICFUaVRhYmxlQ29tcG9uZW50LmlzVmFsdWVFcXVhbCh0aGlzLnNlYXJjaFdvcmRzLCB0aGlzLm9sZFNlYXJjaFdvcmRzKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZFNlYXJjaFdvcmRzID0gVGlUYWJsZUNvbXBvbmVudC5zYWZlQ29weSh0aGlzLnNlYXJjaFdvcmRzKTtcclxuICAgICAgICAgICAgdGhpcy5pc0RhdGFTdGF0ZUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50ID0gJ3NlYXJjaCc7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVN0YXRlLnNlYXJjaC5zZWFyY2hXb3JkcyA9IHRoaXMuc2VhcmNoV29yZHM7XHJcbiAgICAgICAgICAgIC8vIOaQnOe0ouaXtu+8jOWmguaenOS9v+eUqOWIhumhteaXtu+8jOaKiueUqOS6juihqOagvOWGhemDqOiuoeeul+WIhumhteeahOW9k+WJjemhteeggee9ruS4ujFcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVN0YXRlLnBhZ2luYXRpb24uaXRlbXNQZXJQYWdlICE9PSAtMSAmJiB0aGlzLmRhdGFTdGF0ZS5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFTdGF0ZS5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlID0gMTtcclxuICAgICAgICAgICAgICAgIC8vIOS9v+eUqFByb21pc2XmmK/kuLrkuobop6PlhrPkvb/nlKhzdGF0ZVVwZGF0ZeaOpeWPo+WBmuWQjuWPsOWIhumhtSvlkI7lj7DmkJzntKLml7bvvIxcclxuICAgICAgICAgICAgICAgIC8vIOWIhumhtee7hOS7tkV4cHJlc3Npb25DaGFuZ2VkQWZ0ZXJJdEhhc0JlZW5DaGVja2VkRXJyb3LmiqXplJnpl67popjjgIJcclxuICAgICAgICAgICAgICAgIC8vIOatpOWkhOS4jeiDveS9v+eUqHNldFRpbWVvdXTmnaXop6PlhrPvvIzkvb/nlKhzZXRUaW1lb3V05Lya5a+86Ie0c3RhdGVVcGRhdGXlpJrmrKHmiafooYzjgIJcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uU3ViamVjdC5uZXh0KHsgY3VycmVudFBhZ2U6IDEgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoS2V5cyAhPT0gbnVsbCAmJiB0aGlzLnNlYXJjaFdvcmRzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgIVRpVGFibGVDb21wb25lbnQuaXNWYWx1ZUVxdWFsKHRoaXMuc2VhcmNoS2V5cywgdGhpcy5vbGRTZWFyY2hLZXlzKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZFNlYXJjaEtleXMgPSBUaVRhYmxlQ29tcG9uZW50LnNhZmVDb3B5KHRoaXMuc2VhcmNoS2V5cyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNEYXRhU3RhdGVDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJFdmVudCA9ICdzZWFyY2gnO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTdGF0ZS5zZWFyY2guc2VhcmNoS2V5cyA9IHRoaXMuc2VhcmNoS2V5cztcclxuICAgICAgICAgICAgLy8g5pCc57Si5pe277yM5aaC5p6c5L2/55So5YiG6aG15pe277yM5oqK55So5LqO6KGo5qC85YaF6YOo6K6h566X5YiG6aG155qE5b2T5YmN6aG156CB572u5Li6MVxyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhU3RhdGUucGFnaW5hdGlvbi5pdGVtc1BlclBhZ2UgIT09IC0xICYmIHRoaXMuZGF0YVN0YXRlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVN0YXRlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25TdWJqZWN0Lm5leHQoeyBjdXJyZW50UGFnZTogMSB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIVRpVGFibGVDb21wb25lbnQuaXNWYWx1ZUVxdWFsKHRoaXMuZGF0YVN0YXRlLnNvcnQsIHRoaXMub2xkU29ydCkpIHtcclxuICAgICAgICAgICAgdGhpcy5vbGRTb3J0ID0gey4uLnRoaXMuZGF0YVN0YXRlLnNvcnR9O1xyXG4gICAgICAgICAgICB0aGlzLmlzRGF0YVN0YXRlQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyRXZlbnQgPSAnc29ydCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhU3RhdGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZSAhPT0gLTEgJiZcclxuICAgICAgICAgICAgdGhpcy5kYXRhU3RhdGUucGFnaW5hdGlvbi5pdGVtc1BlclBhZ2UgIT09IC0xICYmXHJcbiAgICAgICAgICAgICFUaVRhYmxlQ29tcG9uZW50LmlzVmFsdWVFcXVhbCh0aGlzLmRhdGFTdGF0ZS5wYWdpbmF0aW9uLCB0aGlzLm9sZFBhZ2luYXRpb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2xkUGFnaW5hdGlvbiA9IHsuLi50aGlzLmRhdGFTdGF0ZS5wYWdpbmF0aW9ufTtcclxuICAgICAgICAgICAgdGhpcy5pc0RhdGFTdGF0ZUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50ID0gJ3BhZ2luYXRpb24nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEYXRhU3RhdGVDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJsZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmlzRGF0YVN0YXRlQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0ZpeGVkSGVhZCAmJiB0aGlzLmdldFRib2R5SGVpZ2h0KCkgIT09IHRoaXMub2xkVGJvZHlIZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8g5pyJ5Lqb5Zy65pmv5LiLKOS+i+Wmgu+8jOS4pOmhteaYvuekuuaVsOaNruadoeaVsOebuOWQjO+8jOS7juWFtuS4reS4gOmhtei3s+WIsOWPpuS4gOmhteaXtinojrflj5bpq5jluqbkuI3lh4bnoa7vvIxcclxuICAgICAgICAgICAgLy8g5omA5Lul5q2k5aSE5re75Yqgc2V0VGltZW91dFxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhvc3RFbGUuaGFzQXR0cmlidXRlKCd0aUNvbHNSZXNpemFibGUnKSAmJiB0aGlzLnByb2Nlc3NZU2Nyb2xsU3RhdGVDaGFuZ2VXaXRoQ29sc1Jlc2l6YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1lTY3JvbGxTdGF0ZUNoYW5nZVdpdGhDb2xzUmVzaXphYmxlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRIZWFkU2VydmljZS5wcm9jZXNzT3ZlcmZsb3dZKHRoaXMudGhlYWRDb250YWluZXIsIHRoaXMudGJvZHlDb250YWluZXIsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5maXhlZEhlYWRTZXJ2aWNlLnJlbW92ZVRib2R5Q29udGFpbmVyQm9yZGVyQm90dG9tKHRoaXMudGJvZHlDb250YWluZXIsIHRoaXMuZGlzcGxheWVkRGF0YSk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB0aGlzLm9sZFRib2R5SGVpZ2h0ID0gdGhpcy5nZXRUYm9keUhlaWdodCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g6KGo5qC85a655Zmo5a695bqm5pS55Y+Y5pe277yM5YiX5a695ZKM5qiq5ZCR5rua5Yqo5p2h54q25oCB6YO95Y+v6IO95Y+R55Sf5pS55Y+Y77yM6L+Z5pe26ZyA6KaB5aSE55CG6KGo5qC85YiX5Zu65a6aXHJcbiAgICAgICAgaWYgKHRoaXMuZml4ZWRDb2x1bW5JbmZvLmhhc0ZpeGVkQ29sdW1uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoOiBudW1iZXIgPSB0aGlzLmZpeGVkQ29sdW1uSW5mby5jb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXJXaWR0aCAhPT0gdGhpcy5maXhlZENvbHVtbkluZm8uY29udGFpbmVyV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRDb2x1bW5JbmZvLmNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGaXhlZENvbHVtbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRml4ZWRIZWFkICYmIHRoaXMudW5saXN0ZW5GaXhlZEhlYWRXaW5kb3dSZXNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy51bmxpc3RlbkZpeGVkSGVhZFdpbmRvd1Jlc2l6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudW5saXN0ZW5GaXhlZENvbHVtbldpbmRvd1Jlc2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuRml4ZWRDb2x1bW5XaW5kb3dSZXNpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuc3RvcmFnZUlkKSB7XHJcbiAgICAgICAgICAgIC8vIOi3r+eUsei3s+i9rOaXtu+8jOmhtemdouayoeacieWIt+aWsO+8jGJlZm9yZXVubG9hZOebkeWQrOS4jeeUn+aViO+8jOaJgOS7peimgeabtOaWsOS4gOasoeiusOW/huaVsOaNruOAglxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0b3JhZ2VEYXRhU3RhdGUoKTtcclxuICAgICAgICAgICAgLy8g5L+u5aSNU1NS6ZSZ6K+v77yaVHlwZUVycm9yOiB0aGlzLnVubGlzdGVuV2luZG93QmVmb3JldW5sb2FkIGlzIG5vdCBhIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICh0eXBlb2YgdGhpcy51bmxpc3RlbldpbmRvd0JlZm9yZXVubG9hZCA9PT0gJ2Z1bmN0aW9uJykgJiYgdGhpcy51bmxpc3RlbldpbmRvd0JlZm9yZXVubG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWIneWni+WMluihqOagvOiusOW/hlxyXG4gICAgcHJpdmF0ZSBpbml0U3RvcmFnZURhdGFTdGF0ZSgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgLy8g5L+u5aSNU1NS5oql6ZSZ77yaRVJST1IgUmVmZXJlbmNlRXJyb3I6IHdpbmRvdyBpcyBub3QgZGVmaW5lZFxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOe8k+WtmOWcqHNlc3Npb25TdG9yYWdl5Lit55qE5pWw5o2uXHJcbiAgICAgICAgbGV0IHNlc3Npb25TdG9yYWdlU3RhdGUgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VJZCk7XHJcbiAgICAgICAgLy8g57yT5a2Y5ZyobG9jYWxTdG9yYWdlIOS4reeahOaVsOaNrlxyXG4gICAgICAgIGxldCBsb2NhbFN0b3JhZ2VTdGF0ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VJZCk7XHJcblxyXG4gICAgICAgIC8vIOeJiOacrOWPkeW4g+WQju+8jOeUqOaIt+esrOS4gOasoeiuv+mXruaXtu+8jHNlc3Npb25TdG9yYWdlU3RhdGXjgIFsb2NhbFN0b3JhZ2VTdGF0ZeaYr251bGxcclxuICAgICAgICB0aGlzLnNlc3Npb25TdG9yYWdlU3RhdGUgPSBzZXNzaW9uU3RvcmFnZVN0YXRlID8gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZVN0YXRlKSA6IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yYWdlU3RhdGUgPSBsb2NhbFN0b3JhZ2VTdGF0ZSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlU3RhdGUpIDoge307XHJcblxyXG4gICAgfVxyXG4gICAgLy8g5pu05paw5pys5Zyw5a2Y5YKo5Lit55qEXHJcbiAgICBwcml2YXRlIHVwZGF0ZVN0b3JhZ2VEYXRhU3RhdGUoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZVN0YXRlID0geyAuLi50aGlzLmxvY2FsU3RvcmFnZVN0YXRlIH07XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvblN0b3JhZ2VTdGF0ZSA9IHsgLi4udGhpcy5zZXNzaW9uU3RvcmFnZVN0YXRlIH07XHJcblxyXG4gICAgICAgIC8vIOaOkuW6j1xyXG4gICAgICAgIGlmICh0aGlzLnN0b3JhZ2VDb25maWcuc29ydCAmJiB0aGlzLmRhdGFTdGF0ZS5zb3J0LnNvcnRLZXkpIHtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VTdGF0ZVsnc29ydCddID0gdGhpcy5kYXRhU3RhdGUuc29ydDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOihqOagvOWIhumhtVxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbWF4LWxpbmUtbGVuZ3RoXHJcbiAgICAgICAgaWYgKCh0aGlzLnN0b3JhZ2VDb25maWcucGFnaW5hdGlvbiA9PT0gdHJ1ZSB8fCAodGhpcy5zdG9yYWdlQ29uZmlnLnBhZ2luYXRpb24gJiYgdGhpcy5zdG9yYWdlQ29uZmlnLnBhZ2luYXRpb25bJ2l0ZW1zUGVyUGFnZSddID09PSB0cnVlKSkgJiZcclxuICAgICAgICAgICAgdGhpcy5kYXRhU3RhdGUucGFnaW5hdGlvbi5pdGVtc1BlclBhZ2UgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIOavj+mhteadoeaVsFxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTdGF0ZVsnaXRlbXNQZXJQYWdlJ10gPSB0aGlzLmRhdGFTdGF0ZS5wYWdpbmF0aW9uLml0ZW1zUGVyUGFnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6KGo5qC85YiG6aG1XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBtYXgtbGluZS1sZW5ndGhcclxuICAgICAgICBpZiAoKHRoaXMuc3RvcmFnZUNvbmZpZy5wYWdpbmF0aW9uID09PSB0cnVlIHx8ICh0aGlzLnN0b3JhZ2VDb25maWcucGFnaW5hdGlvbiAmJiB0aGlzLnN0b3JhZ2VDb25maWcucGFnaW5hdGlvblsnY3VycmVudFBhZ2UnXSA9PT0gdHJ1ZSkpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVN0YXRlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIOW9k+WJjemhtVxyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZVN0YXRlWydjdXJyZW50UGFnZSddID0gdGhpcy5kYXRhU3RhdGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZGF0YVN0YXRlLnNlYXJjaC5zZWFyY2hLZXlzKXtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlU3RhdGVbJ3NlYXJjaEtleXMnXSA9IHRoaXMuZGF0YVN0YXRlLnNlYXJjaC5zZWFyY2hLZXlzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuZGF0YVN0YXRlLnNlYXJjaC5zZWFyY2hXb3Jkcykge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VTdGF0ZVsnc2VhcmNoV29yZHMnXSA9IHRoaXMuZGF0YVN0YXRlLnNlYXJjaC5zZWFyY2hXb3JkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhzZXNzaW9uU3RvcmFnZVN0YXRlKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIOS/ruWkje+8mlNTUuaKpemUme+8mlJlZmVyZW5jZUVycm9yOiB3aW5kb3cgaXMgbm90IGRlZmluZWRcclxuICAgICAgICAgICAgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSAmJiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZUlkLFxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvblN0b3JhZ2VTdGF0ZSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZVN0YXRlKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlSWQsXHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShsb2NhbFN0b3JhZ2VTdGF0ZSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVQYWdpbmF0aW9uKGN1cnJlbnRQYWdlOiBudW1iZXIsIGl0ZW1zUGVyUGFnZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMub2xkUGFnaW5hdGlvbi5jdXJyZW50UGFnZSA9PT0gLTEgJiZcclxuICAgICAgICAgICAgdGhpcy5vbGRQYWdpbmF0aW9uLml0ZW1zUGVyUGFnZSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5vbGRQYWdpbmF0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2UsXHJcbiAgICAgICAgICAgICAgICBpdGVtc1BlclBhZ2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhU3RhdGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlO1xyXG4gICAgICAgIHRoaXMuZGF0YVN0YXRlLnBhZ2luYXRpb24uaXRlbXNQZXJQYWdlID0gaXRlbXNQZXJQYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5o6S5bqP54q25oCB5pu05paw5Y+K5aSE55CGXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNvcnRLZXkgLSDov5vooYzmjpLluo/nmoTmlbDmja7lsZ7mgKfvvIjlpoLlr7nmlbDmja7nmoRuYW1l5bGe5oCn5YC86L+b6KGM5o6S5bqP77yM5YiZ5Lyg5YWlXCJuYW1lXCLvvIlcclxuICAgICAqIEBwYXJhbSByZXZlcnNlIC0g5piv5ZCm5Li66ZmN5bqP77yMdHJ1ZeihqOekuumZjeW6j++8jGZhbHNl6KGo56S65Y2H5bqP77yMbnVsbOihqOekuuaXoOW6j1xyXG4gICAgICogQHBhcmFtIGlzRGVmYXVsdFNvcnQgLSDmmK/lkKbkuLrpu5jorqTmjpLluo9cclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZVNvcnQoc29ydEtleTogc3RyaW5nLCByZXZlcnNlOiBib29sZWFuLCBpc0RlZmF1bHRTb3J0OiBib29sZWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY29tcGFyZUZuOiAoYTogVGlUYWJsZVJvd0RhdGEsIGI6IFRpVGFibGVSb3dEYXRhLCBzb3J0S2V5Pzogc3RyaW5nKSA9PiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoaXNEZWZhdWx0U29ydCkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZFNvcnQgPSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0S2V5LFxyXG4gICAgICAgICAgICAgICAgYXNjOiAhcmV2ZXJzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFTdGF0ZS5zb3J0LnNvcnRLZXkgPSBzb3J0S2V5O1xyXG4gICAgICAgIHRoaXMuZGF0YVN0YXRlLnNvcnQuYXNjID0gVXRpbC5pc051bGwocmV2ZXJzZSkgPyByZXZlcnNlIDogIXJldmVyc2U7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Db21wYXJlRm4gPSBjb21wYXJlRm47XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluihqOagvOW9k+WJjeeahOaVsOaNrueKtuaAgShzb3J044CBc2VhcmNo44CBcGFnaW5hdGlvbilcclxuICAgICAqIEByZXR1cm4gVGlUYWJsZURhdGFTdGF0ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RGF0YVN0YXRlKCk6IFRpVGFibGVEYXRhU3RhdGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluW9k+WJjeinpuWPkSBzdGF0ZVVwZGF0ZSDnmoTkuovku7Yo5Y2z5byV6LW36KGo5qC85pWw5o2u54q25oCB5pS55Y+Y55qE6LW35Zug5LqL5Lu2KVxyXG4gICAgICogQHJldHVybiDmnIlcInNlYXJjaFwiLCBcInNvcnRcIiwgXCJwYWdpbmF0aW9uXCLov5nkuInkuKrlgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRyaWdnZXJFdmVudCgpOiBzdHJpbmcge1xyXG4gICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlckV2ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5aaC5p6c5L2/55So5Yiw5LqG6KGo5qC857uE5Lu25pCc57Si5Yqf6IO977yM5Y+v6YCa6L+H5q2k5pa55rOV6I635Y+W5Yiw5pCc57Si55qE5pWw5o2u57uT5p6c44CCXHJcbiAgICAgKiBAcmV0dXJuIOaQnOe0ouWIsOeahOaVsOaNrumbhuWQiFxyXG4gICAgICpcclxuICAgICAqIDMuMC455paw5aKeXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTZWFyY2hlZFJlc3VsdCgpOiBBcnJheTxUaVRhYmxlUm93RGF0YT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlYXJjaGVkUmVzdWx0O1xyXG4gICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRnJvbnRQYWdpbmF0aW9uKCkgfHwgdGhpcy5pc0Zyb250U29ydCgpIHx8IHRoaXMuaXNGcm9udFNlYXJjaCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YTJkaXNwbGF5ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5bu25pe255qE55uu55qE5piv6Ziy5q2ic3RhdGVVcGRhdGUg5Zue6LCD5Lit5ZCM5q2l5L+u5pS55pWw5o2u5pe25oql6ZSZ44CCXHJcbiAgICAgICAgdGhpcy5wcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlVXBkYXRlLmVtaXQodGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7mlbDmja7nirbmgIEoc2VhcmNoLHNvcnQscGFnaW5hdGlvbinlpITnkIbmlbDmja5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBkYXRhUHJvY2Vzc29yKGRhdGE6IEFycmF5PGFueT4pOiBBcnJheTxhbnk+IHtcclxuICAgICAgICBsZXQgb3V0cHV0ID0gZGF0YTtcclxuICAgICAgICAvLyDlpoLmnpzlrZjlnKjov4fmu6TmnaHku7bkuJTlvIDlj5HogIXkvKDpgJLnmoTmupDmlbDmja7lsJrmnKrov5vooYzov4fmu6TlpITnkIbvvIzliJnov5vooYzliY3lj7Dov4fmu6TlpITnkIZcclxuICAgICAgICBpZiAodGhpcy5pc0Zyb250U2VhcmNoKCkpIHtcclxuICAgICAgICAgICAgb3V0cHV0ID0gVGlUYWJsZUNvbXBvbmVudC5nZXRTZWFyY2hlZERhdGEob3V0cHV0LCB0aGlzLnNlYXJjaFdvcmRzLCB0aGlzLnNlYXJjaEtleXMpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaGVkUmVzdWx0ID0gW10uY29uY2F0KG91dHB1dCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsTnVtYmVyOiBudW1iZXIgPSBvdXRwdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjliIbpobXkuJTlvIDlj5HogIXkvKDpgJLnmoTmupDmlbDmja7lsJrmnKrov5vooYzliIbpobXlpITnkIbvvIzljbPov5vooYzliY3lj7DliIbpobUsXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRnJvbnRQYWdpbmF0aW9uKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25TdWJqZWN0Lm5leHQoeyB0b3RhbE51bWJlciB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWmguaenOWtmOWcqOaOkuW6j+S4lOW8gOWPkeiAheS8oOmAkueahOa6kOaVsOaNruWwmuacqui/m+ihjOaOkuW6j+WkhOeQhu+8jOWImei/m+ihjOWJjeWPsOaOkuW6j+WkhOeQhu+8iOWtl+WFuOaOkuW6j++8iVxyXG4gICAgICAgIGlmICh0aGlzLmlzRnJvbnRTb3J0KCkpIHtcclxuICAgICAgICAgICAgb3V0cHV0ID0gdGhpcy5nZXRTb3J0ZWREYXRhKG91dHB1dCwgdGhpcy5kYXRhU3RhdGUuc29ydC5zb3J0S2V5LCB0aGlzLmRhdGFTdGF0ZS5zb3J0LmFzYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlrZjlnKjliIbpobXkuJTlvIDlj5HogIXkvKDpgJLnmoTmupDmlbDmja7lsJrmnKrov5vooYzliIbpobXlpITnkIbvvIzliJnov5vooYzliY3lj7DliIbpobVcclxuICAgICAgICBpZiAodGhpcy5pc0Zyb250UGFnaW5hdGlvbigpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZ2luYXRpb246IHsgY3VycmVudFBhZ2U6IG51bWJlciwgaXRlbXNQZXJQYWdlOiBudW1iZXIgfSA9IHRoaXMuZGF0YVN0YXRlLnBhZ2luYXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0OiBudW1iZXIgPSAocGFnaW5hdGlvbi5jdXJyZW50UGFnZSAtIDEpICogcGFnaW5hdGlvbi5pdGVtc1BlclBhZ2U7XHJcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5zbGljZShzdGFydCwgc3RhcnQgKyBwYXJzZUludChwYWdpbmF0aW9uLml0ZW1zUGVyUGFnZS50b1N0cmluZygpLCAxMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZGF0YSA9PiBkaXNwbGF5ZWREYXRh77yM5aSE55CG5YiGM+atpe+8mlxyXG4gICAgICogMS4g5aSN5Yi2ZGF0YeaVsOaNrlxyXG4gICAgICogMi4g5qC55o2uIOWIhumhteOAgei/h+a7pOOAgeaOkuW6jyDlpITnkIbmlbDmja5cclxuICAgICAqIDMuIOmAmui/h2Rpc3BsYXllZERhdGFDaGFuZ2Ug5LqL5Lu25pu05paw5YiwZGlzcGxheWVkRGF0YVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGRhdGEyZGlzcGxheWVkKCkge1xyXG4gICAgICAgIC8vIOWkjeWItua6kOaVsOaNrlxyXG4gICAgICAgIGxldCBvdXRwdXQ6IEFycmF5PGFueT4gPSBUaVRhYmxlQ29tcG9uZW50LnNhZmVDb3B5KHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIOWkhOeQhuaVsOaNrlxyXG4gICAgICAgIG91dHB1dCA9IHRoaXMuZGF0YVByb2Nlc3NvcihvdXRwdXQpO1xyXG5cclxuICAgICAgICAvLyDmm7TmlrDliLBkaXNwbGF5ZWREYXRhXHJcbiAgICAgICAgdGhpcy5wcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDlkIzmraXkv67mlLnlhoXpg6jmlbDmja5cclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWREYXRhID0gb3V0cHV0O1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXllZERhdGFDaGFuZ2UuZW1pdChvdXRwdXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBpc0Zyb250U2VhcmNoKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHNyY1N0YXRlOiBUaVRhYmxlU3JjU3RhdGUgPSB0aGlzLmdldFNyY1N0YXRlKCk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNlYXJjaFdvcmRzICYmIHRoaXMuc2VhcmNoV29yZHMubGVuZ3RoID4gMCkgJiYgKCFzcmNTdGF0ZSB8fCAhc3JjU3RhdGUuc2VhcmNoZWQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBpc0Zyb250U29ydCgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBzcmNTdGF0ZTogVGlUYWJsZVNyY1N0YXRlID0gdGhpcy5nZXRTcmNTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZVNvcnQgJiYgKCFzcmNTdGF0ZSB8fCAhc3JjU3RhdGUuc29ydGVkKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgaXNGcm9udFBhZ2luYXRpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qgc3JjU3RhdGU6IFRpVGFibGVTcmNTdGF0ZSA9IHRoaXMuZ2V0U3JjU3RhdGUoKTtcclxuICAgICAgICBjb25zdCBwYWdpbmF0aW9uOiB7IGN1cnJlbnRQYWdlOiBudW1iZXIsIGl0ZW1zUGVyUGFnZTogbnVtYmVyIH0gPSB0aGlzLmRhdGFTdGF0ZS5wYWdpbmF0aW9uO1xyXG4gICAgICAgIHJldHVybiAocGFnaW5hdGlvbi5jdXJyZW50UGFnZSAhPT0gLTEgJiYgcGFnaW5hdGlvbi5pdGVtc1BlclBhZ2UgIT09IC0xICYmICghc3JjU3RhdGUgfHwgIXNyY1N0YXRlLnBhZ2luYXRlZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U29ydGVkRGF0YShkYXRhOiBBcnJheTxUaVRhYmxlUm93RGF0YT4sIHByZWRpY2F0ZTogc3RyaW5nLCBhc2M6IGJvb2xlYW4pOiBBcnJheTxUaVRhYmxlUm93RGF0YT4ge1xyXG4gICAgICAgIGxldCByZXN1bHRBcnI6IEFycmF5PFRpVGFibGVSb3dEYXRhPiA9IFtdO1xyXG4gICAgICAgIGlmICghVXRpbC5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRBcnI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDml6Dluo/nirbmgIFcclxuICAgICAgICBpZiAoIXByZWRpY2F0ZSB8fCBhc2MgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb21wYXJlQXJyOiBBcnJheTx7dmFsdWU6IFRpVGFibGVSb3dEYXRhLCBpbmRleDogbnVtYmVyLCBwcmVkaWNhdGVWYWx1ZU9iajoge3ZhbHVlOiBhbnksIHR5cGU6IHN0cmluZ319PiA9XHJcbiAgICAgICAgICAgIGRhdGEubWFwKCh2YWx1ZTogVGlUYWJsZVJvd0RhdGEsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJlZGljYXRlVmFsdWU6IGFueSA9IFRpVGFibGVDb21wb25lbnQuZ2V0UHJlZGljYXRlVmFsdWUodmFsdWUsIHByZWRpY2F0ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICBpbmRleCxcclxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZVZhbHVlT2JqOiBUaVRhYmxlQ29tcG9uZW50LmdldFByZWRpY2F0ZVZhbHVlT2JqKHByZWRpY2F0ZVZhbHVlLCBpbmRleClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb21wYXJlQXJyLnNvcnQodGhpcy5jb21wYXJlVG8pO1xyXG4gICAgICAgIHJlc3VsdEFyciA9IGNvbXBhcmVBcnIubWFwKChpdGVtOiB7dmFsdWU6IFRpVGFibGVSb3dEYXRhLCBpbmRleDogbnVtYmVyLCBwcmVkaWNhdGVWYWx1ZU9iajoge3ZhbHVlOiBhbnksIHR5cGU6IHN0cmluZ319KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghYXNjKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdEFyci5yZXZlcnNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0QXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29tcGFyZVRvID0gKHYxOiB7dmFsdWU6IFRpVGFibGVSb3dEYXRhLCBpbmRleDogbnVtYmVyLCBwcmVkaWNhdGVWYWx1ZU9iajoge3ZhbHVlOiBhbnksIHR5cGU6IHN0cmluZ319LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdjI6IHt2YWx1ZTogVGlUYWJsZVJvd0RhdGEsIGluZGV4OiBudW1iZXIsIHByZWRpY2F0ZVZhbHVlT2JqOiB7dmFsdWU6IGFueSwgdHlwZTogc3RyaW5nfX0pOiBudW1iZXIgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgaWYgKFV0aWwuaXNGdW5jdGlvbih0aGlzLmN1c3RvbUNvbXBhcmVGbikpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jdXN0b21Db21wYXJlRm4odjEudmFsdWUsIHYyLnZhbHVlLCB0aGlzLmRhdGFTdGF0ZS5zb3J0LnNvcnRLZXkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFRpVGFibGVDb21wb25lbnQuZG9Db21wYXJlKHYxLnByZWRpY2F0ZVZhbHVlT2JqLCB2Mi5wcmVkaWNhdGVWYWx1ZU9iaik7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHYxLmluZGV4IC0gdjIuaW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVTYWZlQ29weSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBUaVRhYmxlQ29tcG9uZW50LnNhZmVDb3B5KHRoaXMuc3JjRGF0YSAmJiAgdGhpcy5zcmNEYXRhLmRhdGEgP1xyXG4gICAgICAgICAgICB0aGlzLnNyY0RhdGEuZGF0YSA6IFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNyY1N0YXRlKCk6IFRpVGFibGVTcmNTdGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3JjRGF0YSAmJiB0aGlzLnNyY0RhdGEuc3RhdGUgPyB0aGlzLnNyY0RhdGEuc3RhdGUgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbG9zZU90aGVyRGV0YWlsc0ZuKGN1cnJlbnRSb3c6IFRpVGFibGVSb3dEYXRhKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ZWREYXRhLmZvckVhY2goKHJvdzogVGlUYWJsZVJvd0RhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJvdyAhPT0gY3VycmVudFJvdyAmJiByb3dbJ3Nob3dEZXRhaWxzJ10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByb3dbJ3Nob3dEZXRhaWxzJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0Rml4ZWRIZWFkKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudGhlYWRDb250YWluZXIgPSB0aGlzLmZpeGVkSGVhZFNlcnZpY2UuZ2V0VGhlYWRDb250YWluZXIodGhpcy5ob3N0RWxlKTtcclxuICAgICAgICBpZiAoIXRoaXMudGhlYWRDb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRib2R5Q29udGFpbmVyID0gdGhpcy5maXhlZEhlYWRTZXJ2aWNlLmdldFRib2R5Q29udGFpbmVyKHRoaXMudGhlYWRDb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuaXNGaXhlZEhlYWQgPSAhVXRpbC5pc1VuZGVmaW5lZCh0aGlzLnRoZWFkQ29udGFpbmVyKSAmJiAhVXRpbC5pc1VuZGVmaW5lZCh0aGlzLnRib2R5Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNGaXhlZEhlYWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy50Ym9keUNvbnRhaW5lciwgJ3Njcm9sbCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbExlZnQ6IG51bWJlciA9IHRoaXMudGJvZHlDb250YWluZXIuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50aGVhZENvbnRhaW5lci5jaGlsZHJlblswXSwgJ21hcmdpbkxlZnQnLCAtc2Nyb2xsTGVmdCArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgVXRpbC50cmlnZ2VyKGRvY3VtZW50LCAndGlTY3JvbGwnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuRml4ZWRIZWFkV2luZG93UmVzaXplID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oJ3dpbmRvdycsICdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpeGVkSGVhZFNlcnZpY2UucHJvY2Vzc092ZXJmbG93WSh0aGlzLnRoZWFkQ29udGFpbmVyLCB0aGlzLnRib2R5Q29udGFpbmVyLCB0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VGJvZHlIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICAvLyDkv67lpI1TU1LmiqXplJnvvJpFUlJPUiBUeXBlRXJyb3I6IHRoaXMudGJvZHlDb250YWluZXIuY2hpbGRyZW5bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIG5vdCBhIGZ1bmN0aW9uXHJcbiAgICAgICAgaWYodHlwZW9mIHRoaXMudGJvZHlDb250YWluZXIuY2hpbGRyZW5bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSAnZnVuY3Rpb24nKXtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpeGVkSGVhZFNlcnZpY2UubnVtUm91bmQodGhpcy50Ym9keUNvbnRhaW5lci5jaGlsZHJlblswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkRml4ZWRDb2x1bW5CZWhhdmlvcigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXI6IGFueSA9IHRoaXMudGlSZW5kZXJlci5maW5kQ2hpbGRyZW5CeUNsYXNzTmFtZSh0aGlzLmhvc3RFbGUsICd0aTMtdGFibGUtY29udGFpbmVyJylbMF07XHJcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxpc3Rlbihjb250YWluZXIsICdzY3JvbGwnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JvbGxMZWZ0OiBudW1iZXIgPSBjb250YWluZXIuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzUmlnaHRDb2x1bW5GbG9hdDogYm9vbGVhbiA9IHNjcm9sbExlZnQgKyBjb250YWluZXIuY2xpZW50V2lkdGggPCBjb250YWluZXIuc2Nyb2xsV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lclNjcm9sbFhDaGFuZ2VTdWJqZWN0Lm5leHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNSaWdodENvbHVtbkZsb2F0XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuRml4ZWRDb2x1bW5XaW5kb3dSZXNpemUgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbignd2luZG93JywgJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoOiBudW1iZXIgPSB0aGlzLmZpeGVkQ29sdW1uSW5mby5jb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggIT09IHRoaXMuZml4ZWRDb2x1bW5JbmZvLmNvbnRhaW5lcldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXhlZENvbHVtbkluZm8uY29udGFpbmVyV2lkdGggPSBjb250YWluZXJXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGaXhlZENvbHVtbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHByb2Nlc3NGaXhlZENvbHVtbigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzY3JvbGxMZWZ0OiBudW1iZXIgPSB0aGlzLmZpeGVkQ29sdW1uSW5mby5jb250YWluZXIuc2Nyb2xsTGVmdDtcclxuICAgICAgICBjb25zdCBpc1JpZ2h0Q29sdW1uRmxvYXQ6IGJvb2xlYW4gPSBzY3JvbGxMZWZ0ICsgdGhpcy5maXhlZENvbHVtbkluZm8uY29udGFpbmVyLmNsaWVudFdpZHRoIDwgdGhpcy5maXhlZENvbHVtbkluZm8uY29udGFpbmVyLnNjcm9sbFdpZHRoO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyU2Nyb2xsWENoYW5nZVN1YmplY3QubmV4dCh7XHJcbiAgICAgICAgICAgIHNjcm9sbExlZnQsXHJcbiAgICAgICAgICAgIGlzUmlnaHRDb2x1bW5GbG9hdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRml4ZWRUaExlZnRTdWJqZWN0Lm5leHQoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZpeGVkVGRMZWZ0U3ViamVjdC5uZXh0KCk7XHJcbiAgICB9XHJcbn1cclxuIl19