import { Component } from '@angular/core';
import { TiDateUtil, TiKeymap, Util } from '../../utils/Util';
import { TiLocaleFormat, TiLocale } from '../../locale/TiLocaleModule';
import { TiFormComponent } from '../base/TiBaseModule';
import { TiDateBaseComponent } from '../datebase/TiDateBaseModule';
/**
 * DatetimeRange日期时间范围组件
 *
 * Datetime组件提供了一种方便的显示和设置日期时间范围的方式。
 *
 * <example-url>../tiny3demo/#/datetimerange/datetimerange-all</example-url>
 */
export class TiDatetimeRangeComponent extends TiDateBaseComponent {
    constructor() {
        super(...arguments);
        /**
         * @ignore
         * 保存model值
         */
        this.oldModel = {
            begin: null,
            end: null,
        };
        /**
         * @ignore
         * 对应Time组件的接口属性
         */
        this.beginTime = {};
        /**
         * @ignore
         * 对应Time组件的接口属性
         */
        this.endTime = {};
        /**
         * @ignore
         * 标记date/datetime的类型
         */
        this.isDatetime = true;
        /**
         * @ignore
         * 用于标记是不是range
         */
        this.isRange = true;
        /**
         * @ignore
         */
        this.oldBegintimeValue = '';
        /**
         * @ignore
         */
        this.oldEndtimeValue = '';
        /**
         * @ignore
         * placeholder提示文本
         */
        this.placeholder = `${TiLocale.getLocaleWords().tiDate.rangeBeginLabel} ─ ${TiLocale.getLocaleWords().tiDate.rangeEndLabel}`;
    }
    ngOnInit() {
        super.ngOnInit();
        // 将日期与时间的format拼接为一个字符串
        this.dominatorFormat = `${this.format.date} ${this.format.time}`;
        this.oldFormat = this.format;
        // model有值时，需要记录初始时间值
        if (Util.isUndefined(this.model)) {
            return;
        }
        if (this.model !== null) {
            setTimeout(() => {
                this.oldBegintimeValue = TiDateUtil.getTimeStr(this.model.begin);
                this.oldEndtimeValue = TiDateUtil.getTimeStr(this.model.end);
            }, 0);
        }
    }
    ngOnChanges(changes) {
        // 验证最大值最小值，为了处理最大值和最小值从合法日期变为undefined 的情景
        if ((changes['max'] && !changes['max'].firstChange) || (changes['min'] && !changes['min'].firstChange)) {
            this.validateMinAndMax(this.config, this.isDatetime);
        }
    }
    ngDoCheck() {
        if (!Util.isUndefined(this.model)) {
            // 监听model值的变化
            this.setModel(this.isDatetime);
            // 监听format变化
            this.setFormat();
        }
    }
    /**
     * @ignore
     * 确认按钮事件处理
     */
    onOkClick() {
        if (this.inValidValue) {
            return;
        }
        const beginDateStr = TiDateUtil.getDateStr(this.datePanel['value']['begin']);
        // 中间空格误删
        const beginValue = new Date(`${beginDateStr} ${TiDateUtil.addColon(this.beginTime['value'])}`);
        const endDateStr = TiDateUtil.getDateStr(this.datePanel['value']['end']);
        // 中间空格误删
        const endValue = new Date(`${endDateStr} ${TiDateUtil.addColon(this.endTime['value'])}`);
        const newModel = {
            begin: beginValue,
            end: endValue
        };
        // 新旧值不同更新model值
        if (!this.rangeValueIsEqual(this.model, newModel, this.isDatetime)) {
            this.model = newModel;
        }
        this.hideDrop();
        this.okClick.emit(this.model);
    }
    /**
     * @ignore
     * model值的合法性判断
     */
    isValidValue(value) {
        if (value === null) {
            return true;
        }
        if (TiDateUtil.isDate(value['begin']) && TiDateUtil.isDate(value['end']) &&
            value['begin'].getTime() <= value['end'].getTime() &&
            TiDateUtil.isBetweenMaxAndmin(value['begin'], this.min, this.max) &&
            TiDateUtil.isBetweenMaxAndmin(value['end'], this.min, this.max)) {
            return true;
        }
        return false;
    }
    /**
     * @ignore
     * 将value转换成format接口格式的字符串
     */
    formatValue() {
        if (this.model === null || (this.model.begin === null && this.model.end === null)) {
            this.inputValue = '';
        }
        else {
            // 空格误删
            const format = `${this.format.date} ${TiDateUtil.addAmPm(this.format.time)}`;
            const begin = TiLocaleFormat.formatDateTime(this.model.begin, format);
            const end = TiLocaleFormat.formatDateTime(this.model.end, format);
            // 注意：中划线用的是制表符中的中划线，与正常的中线区分开2017-2-12 - 2018-3-20
            this.inputValue = `${begin} ─ ${end}`;
        }
    }
    /**
     * @ignore
     * 配置时间日期面板接口
     */
    setPickerDate() {
        // 设置datepanel指令接口
        this.setDatePanelOptions();
        // 设置time指令接口
        this.setTimeOptions();
        // 设置OK按钮状态
        this.setOkBtnState();
        this.beginTimeDisabled = this.model === null ? true : false;
        this.endTimeDisabled = this.model === null ? true : false;
        this.timeEditDisabled = this.beginTimeDisabled && this.endTimeDisabled;
    }
    // 设置datepanel指令接口
    setDatePanelOptions() {
        let value;
        if (this.model === null) {
            value = {
                begin: null,
                end: null
            };
        }
        else {
            value = {
                begin: this.model.begin,
                end: this.model.end
            };
        }
        this.datePanel = {
            value,
            max: this.max,
            min: this.min,
            format: this.format,
            picker: 'day',
            select: () => {
                const obj = {
                    value: this.datePanel.value[this.focusedPosition],
                    focusedPosition: this.focusedPosition
                };
                this.dayClick.emit(obj);
                // 选择开始日期
                if (this.focusedPosition === 'begin') {
                    if (this.beginTimeDisabled) {
                        this.beginTime['value'] = TiDateUtil.getTimeStr(new Date());
                    }
                    this.beginTimeDisabled = false;
                    this.timeEditDisabled = false;
                    this.dateEditComs.last.focus();
                    this.focusedPosition = 'end';
                }
                else {
                    if (this.endTimeDisabled) {
                        this.endTime['value'] = TiDateUtil.getTimeStr(new Date());
                    }
                    this.endTimeDisabled = false;
                    if (this.focusedPosition === 'end' && this.datePanel.value.begin === null) {
                        this.focusedPosition = 'begin';
                        this.dateEditComs.first.focus();
                    }
                }
                this.validTime();
                this.setOkBtnState();
            },
            selectTimeFn: (obj) => {
                this.setTimeFn(obj, this.beginTime, this.endTime);
                this.setOkBtnState();
                // 选择结束时分秒 焦点移动到结束时间框
                if (obj.timeOption.includes('end')) {
                    this.textComs.last.nativeElement.focus();
                }
                else {
                    // 选择开始时分秒 焦点移动到开始时间框
                    this.textComs.first.nativeElement.focus();
                }
            }
        };
    }
    validTime() {
        const beginDateStr = this.datePanel.value.begin ? TiDateUtil.getDateStr(this.datePanel.value.begin) : '';
        const beginDateTime = new Date(` ${beginDateStr} ${this.beginTime.value}`);
        const endDateStr = this.datePanel.value.end ? TiDateUtil.getDateStr(this.datePanel.value.end) : '';
        const endDateTime = new Date(` ${endDateStr} ${this.endTime.value}`);
        if (TiDateUtil.isSmaller(beginDateTime, this.min)) {
            this.beginTime.value = TiDateUtil.getTimeStr(this.min);
        }
        if (TiDateUtil.isBigger(beginDateTime, this.max)) {
            this.beginTime.value = TiDateUtil.getTimeStr(this.max);
        }
        if (TiDateUtil.isBigger(endDateTime, this.max)) {
            this.endTime.value = TiDateUtil.getTimeStr(this.max);
        }
        this.oldBegintimeValue = this.beginTime['value'];
        this.oldEndtimeValue = this.endTime['value'];
    }
    /**
     * @ignore
     *  时间框失焦事件
     */
    timeBlur(pos, val) {
        let timeVal = val;
        // 区分中英文冒号
        const reg = new RegExp('[\\:\\：]');
        this.beginTime = JSON.parse(JSON.stringify(this.beginTime));
        this.endTime = JSON.parse(JSON.stringify(this.endTime));
        // 输入区间是否存在小数点，非整数
        let isNotInteger = false;
        const timeArr = val.split(reg);
        timeArr.forEach((item, index) => {
            if (item.length === 1) {
                timeArr[index] = '0' + item;
            }
            if (parseInt(item, 10) !== Number(item)) {
                isNotInteger = true;
            }
        });
        timeVal = timeArr.join(':');
        const dateStr = '2020/10/30';
        if (pos === 'begin') {
            this.beginTime.value = timeVal;
            const beginDateVal = new Date(`${TiDateUtil.getDateStr(this.datePanel.value.begin)} ${this.beginTime.value}`);
            const isSmallerThanMin = TiDateUtil.isSmaller(beginDateVal, this.min);
            const beginDate = new Date(`${dateStr} ${TiDateUtil.addColon(this.beginTime['value'])}`);
            const dateVal = new Date(2020, 10, 30, parseInt(timeArr[0], 10), parseInt(timeArr[1], 10), parseInt(timeArr[2], 10));
            if (String(beginDate) === 'Invalid Date' || String(dateVal) === 'Invalid Date' || timeArr.length > 3 || isNotInteger || !this.isBeginSmallerThanEnd() || isSmallerThanMin) {
                this.beginTime.value = this.oldBegintimeValue;
            }
            else {
                this.oldBegintimeValue = this.beginTime.value;
            }
        }
        else {
            this.endTime.value = timeVal;
            const endDateVal = new Date(`${TiDateUtil.getDateStr(this.datePanel.value.end)} ${this.endTime.value}`);
            const isBiggerThanMax = TiDateUtil.isBigger(endDateVal, this.max);
            const endDate = new Date(`${dateStr} ${TiDateUtil.addColon(this.endTime['value'])}`);
            const dateVal = new Date(2020, 10, 30, parseInt(timeArr[0], 10), parseInt(timeArr[1], 10), parseInt(timeArr[2], 10));
            if (String(endDate) === 'Invalid Date' || String(dateVal) === 'Invalid Date' || timeArr.length > 3 || isNotInteger || !this.isBeginSmallerThanEnd() || isBiggerThanMax) {
                this.endTime.value = this.oldEndtimeValue;
            }
            else {
                this.oldEndtimeValue = this.endTime.value;
            }
        }
        this.setOkBtnState();
    }
    /**
     * @ignore
     * 时间框enter事件
     */
    timeKeydown(pos, val, event) {
        if (event.keyCode === TiKeymap.KEY_ENTER || event.keyCode === TiKeymap.KEY_NUMPAD_ENTER) {
            this.timeBlur(pos, val);
        }
    }
    /**
     * @ignore
     */
    dateEditBlur(val, pos) {
        if (val === null) {
            return;
        }
        if (TiDateUtil.isBetweenMaxAndmin(val, this.min, this.max)) {
            if (pos === 'begin') {
                const inputValue = this.dateEditComs.first.nativeElement.firstChild.value;
                if (inputValue === '') {
                    return;
                }
                const beginDateVal = new Date(`${inputValue} ${this.beginTime['value']}`);
                if (TiDateUtil.isDate(this.datePanel.value.end)) {
                    const endDateVal = new Date(`${TiDateUtil.getDateStr(this.datePanel.value.end)} ${this.endTime['value']}`);
                    if (TiDateUtil.isBigger(beginDateVal, endDateVal)) {
                        this.datePanel.value.begin = this.oldBeginValue || this.oldModel && this.oldModel.begin;
                        return;
                    }
                }
                if (this.beginTimeDisabled) {
                    this.beginTime['value'] = TiDateUtil.getTimeStr(new Date());
                }
                this.oldBeginValue = this.datePanel.value.begin;
                this.beginTimeDisabled = false;
            }
            else {
                if (this.endTimeDisabled) {
                    this.endTime['value'] = TiDateUtil.getTimeStr(new Date());
                }
                const inputValue = this.dateEditComs.last.nativeElement.firstChild.value;
                if (inputValue === '') {
                    return;
                }
                const endDateVal = new Date(`${inputValue} ${this.endTime['value']}`);
                if (TiDateUtil.isDate(this.datePanel.value.begin)) {
                    const beginDateVal = new Date(`${TiDateUtil.getDateStr(this.datePanel.value.begin)} ${this.beginTime['value']}`);
                    if (TiDateUtil.isBigger(beginDateVal, endDateVal)) {
                        this.datePanel.value.end = this.oldEndValue || this.oldModel && this.oldModel.end;
                        return;
                    }
                }
                this.oldEndValue = this.datePanel.value.end;
                this.endTimeDisabled = false;
            }
            this.validTime();
            this.setOkBtnState();
            this.timeEditDisabled = this.beginTimeDisabled && this.endTimeDisabled;
        }
    }
    /**
     * @ignore
     */
    onKeydownFn(event, val, pos) {
        if (event.keyCode === TiKeymap.KEY_ENTER || event.keyCode === TiKeymap.KEY_NUMPAD_ENTER) {
            this.dateEditBlur(val, pos);
        }
    }
    // 设置time指令接口
    setTimeOptions() {
        // 设置开始time指令接口
        this.setBeginTimeOptions();
        // 设置结束time指令接口
        this.setEndTimeOptions();
    }
    // 设置开始面板time指令接口
    setBeginTimeOptions() {
        // value接口设置
        this.setBeginTimeValue();
        // max接口设置
        this.setBeginTimeMaxValue();
        // min接口设置
        this.setBeginTimeMinValue();
    }
    // time指令的起始面板的value接口设置 点击删除按钮：如果设置nowDateTime并且值为合法时间日期，时间设置为nowDateTime的时间
    setBeginTimeValue() {
        if (this.model === null || this.model['begin'] === null && this.model['end'] === null) {
            this.beginTime['value'] = '';
            return;
        }
        this.beginTime['value'] = TiDateUtil.getTimeStr(this.model.begin);
    }
    /**
     * @ignore
     * time指令的起始面板的max接口设置
     */
    setBeginTimeMaxValue() {
        // 起始日期是最大日期时，时间组件最大值是max接口中的时间；其他情况最大值是"23:59:59"
        const value = this.datePanel['value'];
        this.beginTime['max'] = ((value instanceof Object) && TiDateUtil.isDateEqual(this.max, value['begin'])) ?
            TiDateUtil.getTimeStr(this.max) : '23:59:59';
    }
    /**
     * @ignore
     * time指令的起始面板的min接口设置
     */
    setBeginTimeMinValue() {
        // 起始日期是最小日期时，时间组件最小值是min接口中的时间；其他情况最大值是"00:00:00"
        const value = this.datePanel['value'];
        this.beginTime['min'] = ((value instanceof Object) && TiDateUtil.isDateEqual(this.min, value['begin'])) ?
            TiDateUtil.getTimeStr(this.min) : '00:00:00';
    }
    // 设置结束面板time指令接口
    setEndTimeOptions() {
        // value接口设置
        this.setEndTimeValue();
        // max接口设置
        this.setEndTimeMaxValue();
        // min接口设置
        this.setEndTimeMinValue();
    }
    // time指令的结束面板的value接口设置
    setEndTimeValue() {
        if (this.model === null || this.model['begin'] === null && this.model['end'] === null) {
            this.endTime['value'] = '';
            return;
        }
        this.endTime['value'] = TiDateUtil.getTimeStr(this.model.end);
    }
    /**
     * @ignore
     * time指令的结束面板的max接口设置
     */
    setEndTimeMaxValue() {
        // 结束日期是最大日期时，时间组件最大值是max接口中的时间; 否则，时间组件最大值是"23:59:59"
        const value = this.datePanel['value'];
        this.endTime['max'] = ((value instanceof Object) && TiDateUtil.isDateEqual(this.max, value['end'])) ?
            TiDateUtil.getTimeStr(this.max) : '23:59:59';
    }
    /**
     * @ignore
     * time指令的结束面板的min接口设置
     */
    setEndTimeMinValue() {
        // 起始日期是最小日期时，时间组件最小值是min接口中的时间；其他情况最大值是"00:00:00"
        const value = this.datePanel['value'];
        this.endTime['min'] = ((value instanceof Object) && TiDateUtil.isDateEqual(this.min, value['end'])) ?
            TiDateUtil.getTimeStr(this.min) : '00:00:00';
    }
    /**
     * @ignore
     * 设置确认按钮的状态
     */
    setOkBtnState() {
        // 输入中文冒号之后，及时转换为英文冒号
        const inputvalue = this.beginTime.value;
        const inputvalue1 = this.endTime.value;
        this.beginTime.value = inputvalue.replace('：', ':');
        this.endTime.value = inputvalue1.replace('：', ':');
        // 判断下拉面板中时间区间是否合法
        this.inValidValue = !this.isValidRange();
        if (this.buttonComs) {
            this.setAttr(this.buttonComs.last.nativeElement, 'disabled', this.inValidValue);
            this.setInputStyle(this.inValidValue);
        }
    }
    // 判断下拉面板中时间区间是否合法
    isValidRange() {
        const date = this.datePanel.value;
        return (date instanceof Object) && (TiDateUtil.isDate(date.begin)) &&
            (TiDateUtil.isDate(date.end)) && this.isBeginSmallerThanEnd();
    }
    // 判断起始值和结束值都在最小值最大值之间
    isBeginSmallerThanEnd() {
        if (!TiDateUtil.isDate(this.datePanel.value.begin) || !TiDateUtil.isDate(this.datePanel.value.end)) {
            return false;
        }
        // 组装起始日期时间 空格误删
        const begin = new Date(`${TiDateUtil.getDateStr(this.datePanel.value.begin)} ${TiDateUtil.addColon(this.beginTime['value'])}`);
        const end = new Date(`${TiDateUtil.getDateStr(this.datePanel.value.end)} ${TiDateUtil.addColon(this.endTime['value'])}`);
        return begin.getTime() <= end.getTime();
    }
}
TiDatetimeRangeComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-datetime-range',
                template: "<ti-date-dominator  #dominator\r\n                    [id]=\"appendId('dominator')\"\r\n                    type = \"range\"\r\n                    [format] = \"dominatorFormat\"\r\n                    [disabled]=\"disabled\"\r\n                    [clearable]=\"clearIcon\"\r\n                    [(ngModel)]=\"inputValue\"\r\n                    (clear)=\"onIconClearClick($event)\"\r\n                    (click)=\"onShowClick()\">{{placeholder}}</ti-date-dominator><!-- \u5206\u5272\u7EBF\u662F\u7279\u6B8A\u5B57\u7B26\u5236\u8868\u7B26\uFF0C\u4E0D\u662F\u666E\u901A\u4E2D\u7EBF -->\r\n<ti-drop #drop\r\n        [id]=\"appendId('drop')\"\r\n        class=\"ti3-date-range-picker\"\r\n        [ngClass]=\"{'ti3-date-time-range-customize': hasCustomizeTime}\"\r\n        [dominatorElem]=\"dominatorCom.nativeElement\"\r\n        fixMaxHeight=\"true\"\r\n        [panelWidth]=\"daterangePanelWidth\"\r\n        [panelAlign]=\"panelAlign\"\r\n        [browserSpace]=\"browserSpace\"\r\n        [dominatorSpace]='dominatorSpace'\r\n        [determinPositionFn]=\"determinPositionFn\"\r\n        theme='noborder'>\r\n\r\n        <section class='ti3-date-clear'>\r\n            <section *ngIf='hasCustomizeTime' class='ti3-date-time-range-customize-container'>\r\n                <ng-container *ngTemplateOutlet=\"customizeTemplate; context:  {$implicit: customizeOptions}\"></ng-container>\r\n        </section>\r\n\r\n        <section [ngClass]=\"{'ti3-datetime-range-panel-container': hasCustomizeTime}\">\r\n            <ti-date-edit class='ti3-date-time-range-dateedit'\r\n                [ngClass]=\"{'ti3-date-time-range-begin-edit': focusedPosition === 'begin'}\"\r\n                [(ngModel)] = \"datePanel.value.begin\"\r\n                [min] = \"datePanel.min\"\r\n                [max] = \"datePanel.max\"\r\n                (click)=\"dateEditClick('begin')\"\r\n                (focus)=\"dateEditFocus('begin')\"\r\n                (blur)=\"dateEditBlur(datePanel.value.begin, 'begin')\"\r\n                (keydown)=\"onKeydownFn($event, datePanel.value.begin, 'begin')\"\r\n                [format]=\"datePanel.format\"\r\n                [id]=\"appendId('begin_edit')\"></ti-date-edit>\r\n            <input class='ti3-date-time-range-timeedit'\r\n                [ngClass]=\"{'ti3-date-time-range-begintime-edit': focusedPosition === 'beginTime'}\"\r\n                type=\"text\"\r\n                maxlength='8'\r\n                [(ngModel)]=\"beginTime.value\"\r\n                (focus)=\"timeFocus('begin')\"\r\n                [disabled]=\"beginTimeDisabled\"\r\n                [placeholder]='timeplaceholder'\r\n                (blur)=\"timeBlur('begin',beginTime.value)\"\r\n                (keydown)=\"timeKeydown('begin', beginTime.value, $event)\"\r\n                [id]=\"appendId('begin_input')\"\r\n                tiText/>\r\n            <span class='ti3-date-range-splitline'> \u2500 </span>\r\n            <ti-date-edit class='ti3-date-time-range-dateedit'\r\n                [ngClass]=\"{'ti3-date-time-range-end-edit': focusedPosition === 'end'}\"\r\n                [(ngModel)] = \"datePanel.value.end\"\r\n                [min] = \"datePanel.min\"\r\n                [max] = \"datePanel.max\"\r\n                (click)=\"dateEditClick('end')\"\r\n                (focus)=\"dateEditFocus('end')\"\r\n                (blur)=\"dateEditBlur(datePanel.value.end, 'end')\"\r\n                (keydown)=\"onKeydownFn($event, datePanel.value.end, 'end')\"\r\n                [format]=\"datePanel.format\"\r\n                [id]=\"appendId('end_edit')\"></ti-date-edit>\r\n                <!-- \u786E\u8BA4\u6309\u94AE\u7981\u7528\u573A\u666F\u4E0B\uFF0C\u7ED3\u675F\u6846\u8F93\u5165\u4E4B\u540E\u65E0\u6CD5\u76F4\u63A5tab\u5207\u6362\u7126\u70B9\u81F3\u786E\u8BA4\u6309\u94AE\uFF0C\u6545\u6DFB\u52A0\u6B64\u8FC7\u5EA6input -->\r\n                <input #input type=\"text\" class=\"ti3-tab-input\"/>\r\n            <input type=\"text\" class='ti3-date-time-range-timeedit'\r\n                [ngClass]=\"{'ti3-date-time-range-endtime-edit': focusedPosition === 'endTime'}\"\r\n                [(ngModel)]=\"endTime.value\"\r\n                [disabled]=\"endTimeDisabled\"\r\n                [placeholder]='timeplaceholder'\r\n                maxlength='8'\r\n                tiText\r\n                (focus)=\"timeFocus('end')\"\r\n                (keydown)=\"timeKeydown('end',endTime.value, $event)\"\r\n                (blur)=\"timeBlur('end',endTime.value)\"\r\n                [id]=\"appendId('end_input')\"/>\r\n            <ti-date-panel\r\n                [id]=\"appendId('begin-panel')\"\r\n                [(value)]=\"datePanel.value\"\r\n                [focusedPosition]='focusedPosition'\r\n                [selectTime]='selectTime'\r\n                [beginTime]='beginTime'\r\n                [endTime]='endTime'\r\n                [endTimeDisabled]='endTimeDisabled'\r\n                [beginTimeDisabled]='beginTimeDisabled'\r\n                [isRange]='true'\r\n                [(picker)]=\"datePanel.picker\"\r\n                (select)='datePanel.select()'\r\n                (selectTimeFn)='datePanel.selectTimeFn($event)'\r\n                [min]=\"datePanel.min\"\r\n                [max]=\"datePanel.max\"\r\n                [format]=\"format.date\"\r\n                [nowDateTime]=\"nowDateTime\"></ti-date-panel>\r\n        </section>\r\n        </section>\r\n        <section class=\"ti3-date-range-picker-footer\" [ngClass]=\"{'ti3-date-range-select-time': selectTime}\">\r\n            <section class=\"ti3-date-picker-footer-right\">\r\n                <button class=\"ti3-date-picker-footer-btn\"\r\n                        [ngClass]=\"{'ti3-date-picker-footer-noborder': selectTime}\"\r\n                        [id]=\"appendId('okBtn')\"\r\n                        type=\"button\"\r\n                        size=\"small\"\r\n                        (click)=\"onOkClick()\"\r\n                        tiButton>{{ 'tiCommon.okBtn' | tiTranslate }}</button>\r\n                <section (click)='selectTimeFn()' [id]=\"appendId('select_time')\" *ngIf='!selectTime'  class='ti3-datetime-select-btn' [ngClass]=\"{'ti3-datetime-select-btn-disabled': timeEditDisabled}\">{{'tiDate.selectTime' | tiTranslate}}</section>\r\n                <section (click)='selectDateFn()' [id]=\"appendId('select_date')\" *ngIf='selectTime' class='ti3-datetime-select-btn'>{{'tiDate.selectDate' | tiTranslate}}</section>\r\n            </section>\r\n        </section>\r\n</ti-drop>\r\n<ng-template #customizeTemplate let-options>\r\n    <ul [id]=\"appendId('list')\">\r\n        <li *ngFor='let option of options; index as i;' class='ti3-customize-time-label' (click)='customizeTimeClickFn(option.value)' [id]=\"appendId('label_' + i)\">{{option.label}}</li>\r\n    </ul>\r\n</ng-template>\r\n",
                host: {
                    '[class.ti3-datetime-range-input-container]': 'true',
                    '(blur)': 'hidePanel()'
                },
                providers: [TiFormComponent.getValueAccessor(TiDatetimeRangeComponent)],
                styles: [".ti3-compnent-container-border,:host.ti3-datetime-range-input-container{-ms-box-sizing:border-box;border:1px solid;border-radius:var(--ti-input-border-radius);box-sizing:border-box;display:inline-block}.ti3-compnent-container-border:not([disabled]),:host.ti3-datetime-range-input-container:not([disabled]){background-color:var(--ti-input-bg-color);border-color:var(--ti-input-border-color)}.ti3-compnent-container-border:not([disabled]):hover,:host.ti3-datetime-range-input-container:not([disabled]):hover{border-color:var(--ti-input-border-color-hover)}.ti3-compnent-container-border:not([disabled])[tiFocused],:host.ti3-datetime-range-input-container:not([disabled])[tiFocused]{border-color:var(--ti-input-border-color-focus)}.ti3-compnent-container-border[disabled],:host.ti3-datetime-range-input-container[disabled]{background-color:var(--ti-input-bg-color-disabled);border-color:var(--ti-input-border-color-disabled);cursor:not-allowed!important}.ti3-customize-time-label{color:var(--ti-common-color-text-primary);cursor:pointer;font-size:var(--ti-common-font-size-base);line-height:var(--ti-common-line-height-number);margin-bottom:10px}.ti3-customize-time-label:hover{color:var(--ti-common-color-line-active)}.ti3-date-clear{display:flex;*zoom:1}.ti3-date-clear:after{clear:both}.ti3-date-clear:after,.ti3-date-clear:before{content:\"\";display:table}.ti3-datetime-select-btn{color:var(--ti-common-color-text-highlight);cursor:pointer;float:right;line-height:24px;padding-right:var(--ti-common-space-2x)}.ti3-datetime-select-btn-disabled{color:var(--ti-common-color-text-disabled);cursor:not-allowed}.ti3-date-range-splitline{padding:0 6px}.ti3-tab-input{height:0;left:-9999px;position:absolute;top:-9999px;width:0}::ng-deep :root{--ti-date-picker-middle-margin:20px;--ti-date-picker-padding-bottom:12px;--ti-date-picker-padding-horizon:16px}:host.ti3-datetime-range-input-container{width:320px}.ti3-dropdown-container.ti3-date-range-picker{font-size:var(--ti-datetime-input-font-size);padding:var(--ti-date-picker-padding-bottom) var(--ti-date-picker-padding-horizon);width:calc(var(--ti-datetime-day-width)*7 + var(--ti-date-picker-padding-horizon) + var(--ti-date-picker-middle-margin) + 2px);z-index:var(--ti-datetime-z-index)}.ti3-dropdown-container.ti3-date-range-picker:focus{outline:0}.ti3-date-range-begin-end-text{color:var(--ti-datetime-picker-color);height:var(--ti-datetime-input-font-size);line-height:var(--ti-datetime-input-font-size);margin-top:var(--ti-common-space-10);padding-left:var(--ti-common-space-10)}.ti3-datetime-range-time{height:var(--ti-input-height)}.ti3-date-range-end-container{float:right;width:calc(var(--ti-datetime-day-width)*7)}.ti3-date-range-end-container ti-date-edit>input{text-align:center}.ti3-date-range-picker-footer{-ms-box-sizing:border-box;-ms-user-select:none;-webkit-user-select:none;border-top:1px solid var(--ti-common-color-line-dividing);box-sizing:border-box;clear:both;margin-top:var(--ti-common-space-3x);padding-top:var(--ti-common-space-10);user-select:none;width:100%;*zoom:1}.ti3-date-range-picker-footer:after{clear:both;content:\"\";display:table}.ti3-date-range-picker-footer:before{content:\"\";display:table}.ti3-date-range-picker-footer .ti3-date-picker-footer-btn{float:right}.ti3-date-range-picker-footer .ti3-date-picker-footer-btn:last-child{margin-right:var(--ti-common-space-10)}.ti3-date-range-picker-footer.ti3-date-range-select-time{border-top:none;margin-top:0}.ti3-date-picker-footer-right{float:right}.ti3-date-time-range-customize{width:677px!important}.ti3-date-time-range-customize-container{border-right:1px solid var(--ti-common-color-line-dividing);float:left;height:292px;padding-right:var(--ti-common-space-4x);width:80px}.ti3-date-time-range-dateedit{display:inline-block;margin-right:var(--ti-common-space-2x);width:120px}::ng-deep .ti3-date-time-range-begin-edit input[tiText],::ng-deep .ti3-date-time-range-begintime-edit,::ng-deep .ti3-date-time-range-end-edit input[tiText],::ng-deep .ti3-date-time-range-endtime-edit{border-color:var(--ti-input-border-color-focus)!important}.ti3-date-time-range-timeedit{display:inline-block;width:120px}.ti3-datetime-range-panel-container{float:right;padding-left:var(--ti-common-space-4x)}"]
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlEYXRldGltZVJhbmdlQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL2NvbXBvbmVudHMvZGF0ZXRpbWVyYW5nZS9UaURhdGV0aW1lUmFuZ2VDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILFNBQVMsRUFNWixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsbUJBQW1CLEVBQXNFLE1BQU0sOEJBQThCLENBQUM7QUFDdkk7Ozs7OztHQU1HO0FBWUgsTUFBTSxPQUFPLHdCQUF5QixTQUFRLG1CQUFtQjtJQVhqRTs7UUFhSTs7O1dBR0c7UUFDSSxhQUFRLEdBQWdCO1lBQzNCLEtBQUssRUFBRSxJQUFJO1lBQ1gsR0FBRyxFQUFFLElBQUk7U0FDWixDQUFDO1FBQ0Y7OztXQUdHO1FBQ0ksY0FBUyxHQUFnQixFQUFFLENBQUM7UUFDbkM7OztXQUdHO1FBQ0ksWUFBTyxHQUFnQixFQUFFLENBQUM7UUFtQmpDOzs7V0FHRztRQUNJLGVBQVUsR0FBWSxJQUFJLENBQUM7UUFDbEM7OztXQUdHO1FBQ0ksWUFBTyxHQUFZLElBQUksQ0FBQztRQUMvQjs7V0FFRztRQUNJLHNCQUFpQixHQUFRLEVBQUUsQ0FBQztRQUNuQzs7V0FFRztRQUNJLG9CQUFlLEdBQVEsRUFBRSxDQUFDO1FBQ2pDOzs7V0FHRztRQUNJLGdCQUFXLEdBQVcsR0FBRyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUMsTUFBTSxDQUFDLGVBQWUsTUFBTSxRQUFRLENBQUMsY0FBYyxFQUFFLENB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Q0FDdEIsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUV4RyxPQUFPLEtBQUssQ0FBQyxPQUFPLEVBQUUsSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUMsQ0FBQzs7O1lBaGhCSixTQUFTLFNBQUM7Z0JBQ1IsUUFBUSxFQUFFLG1CQUFtQjtnQkFDN0Isd3NOQUFtQztnQkFFbkMsSUFBSSxFQUFFO29CQUNMLDRDQUE0QyxFQUFFLE1BQU07b0JBQ3BELFFBQVEsRUFBRSxhQUFhO2lCQUMxQjtnQkFDRSxTQUFTLEVBQUUsQ0FBRSxlQUFlLENBQUMsZ0JBQWdCLENBQUMsd0JBQXdCLENBQUMsQ0FBRTs7YUFDM0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgRWxlbWVudFJlZixcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIE5nWm9uZSxcclxuICAgIFJlbmRlcmVyMixcclxuICAgIFNpbXBsZUNoYW5nZXNcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVGlEYXRlVXRpbCwgVGlLZXltYXAsIFV0aWwgfSBmcm9tICcuLi8uLi91dGlscy9VdGlsJztcclxuaW1wb3J0IHsgVGlMb2NhbGVGb3JtYXQsIFRpTG9jYWxlIH0gZnJvbSAnLi4vLi4vbG9jYWxlL1RpTG9jYWxlTW9kdWxlJztcclxuaW1wb3J0IHsgVGlGb3JtQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9UaUJhc2VNb2R1bGUnO1xyXG5pbXBvcnQgeyBUaURhdGVCYXNlQ29tcG9uZW50LCBUaURhdGVDdXN0b21pemVPcHRpb25zLCBUaURhdGV0aW1lRm9ybWF0LCBUaURhdGVWYWx1ZSwgVGltZU9wdGlvbnMgfSBmcm9tICcuLi9kYXRlYmFzZS9UaURhdGVCYXNlTW9kdWxlJztcclxuLyoqXHJcbiAqIERhdGV0aW1lUmFuZ2Xml6XmnJ/ml7bpl7TojIPlm7Tnu4Tku7ZcclxuICpcclxuICogRGF0ZXRpbWXnu4Tku7bmj5DkvpvkuobkuIDnp43mlrnkvr/nmoTmmL7npLrlkozorr7nva7ml6XmnJ/ml7bpl7TojIPlm7TnmoTmlrnlvI/jgIJcclxuICpcclxuICogPGV4YW1wbGUtdXJsPi4uL3RpbnkzZGVtby8jL2RhdGV0aW1lcmFuZ2UvZGF0ZXRpbWVyYW5nZS1hbGw8L2V4YW1wbGUtdXJsPlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgIHNlbGVjdG9yOiAndGktZGF0ZXRpbWUtcmFuZ2UnLFxyXG4gICB0ZW1wbGF0ZVVybDogJy4vZGF0ZXRpbWVyYW5nZS5odG1sJyxcclxuICAgc3R5bGVVcmxzOiBbJy4vZGF0ZXRpbWVyYW5nZS5sZXNzJ10sXHJcbiAgIGhvc3Q6IHtcclxuICAgICdbY2xhc3MudGkzLWRhdGV0aW1lLXJhbmdlLWlucHV0LWNvbnRhaW5lcl0nOiAndHJ1ZScsXHJcbiAgICAnKGJsdXIpJzogJ2hpZGVQYW5lbCgpJ1xyXG59LFxyXG4gICBwcm92aWRlcnM6IFsgVGlGb3JtQ29tcG9uZW50LmdldFZhbHVlQWNjZXNzb3IoVGlEYXRldGltZVJhbmdlQ29tcG9uZW50KSBdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVGlEYXRldGltZVJhbmdlQ29tcG9uZW50IGV4dGVuZHMgVGlEYXRlQmFzZUNvbXBvbmVudCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDkv53lrZhtb2RlbOWAvFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb2xkTW9kZWw6IFRpRGF0ZVZhbHVlID0ge1xyXG4gICAgICAgIGJlZ2luOiBudWxsLFxyXG4gICAgICAgIGVuZDogbnVsbCxcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWvueW6lFRpbWXnu4Tku7bnmoTmjqXlj6PlsZ7mgKdcclxuICAgICAqL1xyXG4gICAgcHVibGljIGJlZ2luVGltZTogVGltZU9wdGlvbnMgPSB7fTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5a+55bqUVGltZee7hOS7tueahOaOpeWPo+WxnuaAp1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW5kVGltZTogVGltZU9wdGlvbnMgPSB7fTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYmVnaW5UaW1lRGlzYWJsZWQ6IGJvb2xlYW47XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGVuZFRpbWVEaXNhYmxlZDogYm9vbGVhbjtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5pe26Ze05pel5pyf55qEZm9ybWF0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkb21pbmF0b3JGb3JtYXQ6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5pel5pyf5pi+56S65qC85byPOiBEYXRldGltZee7hOS7tueahGZvcm1hdOS4ukRhdGV0aW1lRm9ybWF057G75Z6LXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmb3JtYXQ6IFRpRGF0ZXRpbWVGb3JtYXQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOagh+iusGRhdGUvZGF0ZXRpbWXnmoTnsbvlnotcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzRGF0ZXRpbWU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDnlKjkuo7moIforrDmmK/kuI3mmK9yYW5nZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNSYW5nZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9sZEJlZ2ludGltZVZhbHVlOiBhbnkgPSAnJztcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb2xkRW5kdGltZVZhbHVlOiBhbnkgPSAnJztcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogcGxhY2Vob2xkZXLmj5DnpLrmlofmnKxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRpRGF0ZS5yYW5nZUJlZ2luTGFiZWx9IOKUgCAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudGlEYXRlLnJhbmdlRW5kTGFiZWx9YDtcclxuXHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICAvLyDlsIbml6XmnJ/kuI7ml7bpl7TnmoRmb3JtYXTmi7zmjqXkuLrkuIDkuKrlrZfnrKbkuLJcclxuICAgICAgICB0aGlzLmRvbWluYXRvckZvcm1hdCA9IGAke3RoaXMuZm9ybWF0LmRhdGV9ICR7dGhpcy5mb3JtYXQudGltZX1gO1xyXG4gICAgICAgIHRoaXMub2xkRm9ybWF0ID0gdGhpcy5mb3JtYXQ7XHJcbiAgICAgICAgLy8gbW9kZWzmnInlgLzml7bvvIzpnIDopoHorrDlvZXliJ3lp4vml7bpl7TlgLxcclxuICAgICAgICBpZiAoVXRpbC5pc1VuZGVmaW5lZCh0aGlzLm1vZGVsKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbGRCZWdpbnRpbWVWYWx1ZSA9IFRpRGF0ZVV0aWwuZ2V0VGltZVN0cih0aGlzLm1vZGVsLmJlZ2luKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2xkRW5kdGltZVZhbHVlID0gVGlEYXRlVXRpbC5nZXRUaW1lU3RyKHRoaXMubW9kZWwuZW5kKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIC8vIOmqjOivgeacgOWkp+WAvOacgOWwj+WAvO+8jOS4uuS6huWkhOeQhuacgOWkp+WAvOWSjOacgOWwj+WAvOS7juWQiOazleaXpeacn+WPmOS4unVuZGVmaW5lZCDnmoTmg4Xmma9cclxuICAgICAgICBpZiAoKGNoYW5nZXNbJ21heCddICYmICFjaGFuZ2VzWydtYXgnXS5maXJzdENoYW5nZSkgfHwgKGNoYW5nZXNbJ21pbiddICYmICFjaGFuZ2VzWydtaW4nXS5maXJzdENoYW5nZSkpIHtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU1pbkFuZE1heCh0aGlzLmNvbmZpZywgdGhpcy5pc0RhdGV0aW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdEb0NoZWNrKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghVXRpbC5pc1VuZGVmaW5lZCh0aGlzLm1vZGVsKSkge1xyXG4gICAgICAgICAgICAvLyDnm5HlkKxtb2RlbOWAvOeahOWPmOWMllxyXG4gICAgICAgICAgICB0aGlzLnNldE1vZGVsKHRoaXMuaXNEYXRldGltZSk7XHJcblxyXG4gICAgICAgICAgICAvLyDnm5HlkKxmb3JtYXTlj5jljJZcclxuICAgICAgICAgICAgdGhpcy5zZXRGb3JtYXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDnoa7orqTmjInpkq7kuovku7blpITnkIZcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uT2tDbGljaygpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pblZhbGlkVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmVnaW5EYXRlU3RyOiBzdHJpbmcgPSBUaURhdGVVdGlsLmdldERhdGVTdHIodGhpcy5kYXRlUGFuZWxbJ3ZhbHVlJ11bJ2JlZ2luJ10pO1xyXG4gICAgICAgIC8vIOS4remXtOepuuagvOivr+WIoFxyXG4gICAgICAgIGNvbnN0IGJlZ2luVmFsdWU6IERhdGUgPSBuZXcgRGF0ZShgJHtiZWdpbkRhdGVTdHJ9ICR7VGlEYXRlVXRpbC5hZGRDb2xvbih0aGlzLmJlZ2luVGltZVsndmFsdWUnXSl9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVuZERhdGVTdHI6IHN0cmluZyA9IFRpRGF0ZVV0aWwuZ2V0RGF0ZVN0cih0aGlzLmRhdGVQYW5lbFsndmFsdWUnXVsnZW5kJ10pO1xyXG4gICAgICAgIC8vIOS4remXtOepuuagvOivr+WIoFxyXG4gICAgICAgIGNvbnN0IGVuZFZhbHVlOiBEYXRlID0gbmV3IERhdGUoYCR7ZW5kRGF0ZVN0cn0gJHtUaURhdGVVdGlsLmFkZENvbG9uKHRoaXMuZW5kVGltZVsndmFsdWUnXSl9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld01vZGVsOiBUaURhdGVWYWx1ZSA9IHtcclxuICAgICAgICAgICAgYmVnaW46IGJlZ2luVmFsdWUsXHJcbiAgICAgICAgICAgIGVuZDogZW5kVmFsdWVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyDmlrDml6flgLzkuI3lkIzmm7TmlrBtb2RlbOWAvFxyXG4gICAgICAgIGlmICghdGhpcy5yYW5nZVZhbHVlSXNFcXVhbCh0aGlzLm1vZGVsLCBuZXdNb2RlbCwgdGhpcy5pc0RhdGV0aW1lKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gbmV3TW9kZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhpZGVEcm9wKCk7XHJcblxyXG4gICAgICAgIHRoaXMub2tDbGljay5lbWl0KHRoaXMubW9kZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogbW9kZWzlgLznmoTlkIjms5XmgKfliKTmlq1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzVmFsaWRWYWx1ZSh2YWx1ZTogVGlEYXRlVmFsdWUpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoVGlEYXRlVXRpbC5pc0RhdGUodmFsdWVbJ2JlZ2luJ10pICYmIFRpRGF0ZVV0aWwuaXNEYXRlKHZhbHVlWydlbmQnXSkgJiZcclxuICAgICAgICAgICAgdmFsdWVbJ2JlZ2luJ10uZ2V0VGltZSgpIDw9IHZhbHVlWydlbmQnXS5nZXRUaW1lKCkgJiZcclxuICAgICAgICAgICAgVGlEYXRlVXRpbC5pc0JldHdlZW5NYXhBbmRtaW4odmFsdWVbJ2JlZ2luJ10sIHRoaXMubWluLCB0aGlzLm1heCkgJiZcclxuICAgICAgICAgICAgVGlEYXRlVXRpbC5pc0JldHdlZW5NYXhBbmRtaW4odmFsdWVbJ2VuZCddLCB0aGlzLm1pbiwgdGhpcy5tYXgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5bCGdmFsdWXovazmjaLmiJBmb3JtYXTmjqXlj6PmoLzlvI/nmoTlrZfnrKbkuLJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZvcm1hdFZhbHVlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsID09PSBudWxsIHx8ICh0aGlzLm1vZGVsLmJlZ2luID09PSBudWxsICYmIHRoaXMubW9kZWwuZW5kID09PSBudWxsKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0VmFsdWUgPSAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDnqbrmoLzor6/liKBcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0OiBzdHJpbmcgPSBgJHt0aGlzLmZvcm1hdC5kYXRlfSAke1RpRGF0ZVV0aWwuYWRkQW1QbSh0aGlzLmZvcm1hdC50aW1lKX1gO1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpbjogc3RyaW5nID0gVGlMb2NhbGVGb3JtYXQuZm9ybWF0RGF0ZVRpbWUodGhpcy5tb2RlbC5iZWdpbiwgZm9ybWF0KTtcclxuICAgICAgICAgICAgY29uc3QgZW5kOiBzdHJpbmcgPSBUaUxvY2FsZUZvcm1hdC5mb3JtYXREYXRlVGltZSh0aGlzLm1vZGVsLmVuZCwgZm9ybWF0KTtcclxuICAgICAgICAgICAgLy8g5rOo5oSP77ya5Lit5YiS57q/55So55qE5piv5Yi26KGo56ym5Lit55qE5Lit5YiS57q/77yM5LiO5q2j5bi455qE5Lit57q/5Yy65YiG5byAMjAxNy0yLTEyIC0gMjAxOC0zLTIwXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IGAke2JlZ2lufSDilIAgJHtlbmR9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDphY3nva7ml7bpl7Tml6XmnJ/pnaLmnb/mjqXlj6NcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBpY2tlckRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g6K6+572uZGF0ZXBhbmVs5oyH5Luk5o6l5Y+jXHJcbiAgICAgICAgdGhpcy5zZXREYXRlUGFuZWxPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIC8vIOiuvue9rnRpbWXmjIfku6TmjqXlj6NcclxuICAgICAgICB0aGlzLnNldFRpbWVPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIC8vIOiuvue9rk9L5oyJ6ZKu54q25oCBXHJcbiAgICAgICAgdGhpcy5zZXRPa0J0blN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5iZWdpblRpbWVEaXNhYmxlZCA9IHRoaXMubW9kZWwgPT09IG51bGwgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lRGlzYWJsZWQgPSB0aGlzLm1vZGVsID09PSBudWxsID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGltZUVkaXREaXNhYmxlZCA9IHRoaXMuYmVnaW5UaW1lRGlzYWJsZWQgJiYgdGhpcy5lbmRUaW1lRGlzYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6K6+572uZGF0ZXBhbmVs5oyH5Luk5o6l5Y+jXHJcbiAgICBwcml2YXRlIHNldERhdGVQYW5lbE9wdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHZhbHVlOiBUaURhdGVWYWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgdmFsdWUgPSB7XHJcbiAgICAgICAgICAgICAgICBiZWdpbjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGVuZDogbnVsbFxyXG4gICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHtcclxuICAgICAgICAgICAgICAgIGJlZ2luOiB0aGlzLm1vZGVsLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgZW5kOiB0aGlzLm1vZGVsLmVuZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXRlUGFuZWwgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICBtYXg6IHRoaXMubWF4LFxyXG4gICAgICAgICAgICBtaW46IHRoaXMubWluLFxyXG4gICAgICAgICAgICBmb3JtYXQgOiB0aGlzLmZvcm1hdCxcclxuICAgICAgICAgICAgcGlja2VyOiAnZGF5JyxcclxuICAgICAgICAgICAgc2VsZWN0OiAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmo6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5kYXRlUGFuZWwudmFsdWVbdGhpcy5mb2N1c2VkUG9zaXRpb25dLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzZWRQb3NpdGlvbjogdGhpcy5mb2N1c2VkUG9zaXRpb25cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRheUNsaWNrLmVtaXQob2JqKTtcclxuICAgICAgICAgICAgICAgIC8vIOmAieaLqeW8gOWni+aXpeacn1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFBvc2l0aW9uID09PSAnYmVnaW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVnaW5UaW1lRGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpblRpbWVbJ3ZhbHVlJ10gPSBUaURhdGVVdGlsLmdldFRpbWVTdHIobmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5UaW1lRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVFZGl0RGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVFZGl0Q29tcy5sYXN0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkUG9zaXRpb24gPSAnZW5kJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5kVGltZURpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZVsndmFsdWUnXSA9IFRpRGF0ZVV0aWwuZ2V0VGltZVN0cihuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkUG9zaXRpb24gPT09ICdlbmQnICYmIHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmJlZ2luID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFBvc2l0aW9uID0gJ2JlZ2luJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlRWRpdENvbXMuZmlyc3QuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkVGltZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPa0J0blN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdFRpbWVGbjogKG9iajogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRpbWVGbihvYmosIHRoaXMuYmVnaW5UaW1lLCB0aGlzLmVuZFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPa0J0blN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyDpgInmi6nnu5PmnZ/ml7bliIbnp5Ig54Sm54K556e75Yqo5Yiw57uT5p2f5pe26Ze05qGGXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnRpbWVPcHRpb24uaW5jbHVkZXMoJ2VuZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29tcy5sYXN0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDpgInmi6nlvIDlp4vml7bliIbnp5Ig54Sm54K556e75Yqo5Yiw5byA5aeL5pe26Ze05qGGXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29tcy5maXJzdC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkVGltZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBiZWdpbkRhdGVTdHI6IHN0cmluZyA9IHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmJlZ2luID8gVGlEYXRlVXRpbC5nZXREYXRlU3RyKHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmJlZ2luKSA6ICcnO1xyXG4gICAgICAgIGNvbnN0IGJlZ2luRGF0ZVRpbWU6IERhdGUgPSBuZXcgRGF0ZShgICR7YmVnaW5EYXRlU3RyfSAke3RoaXMuYmVnaW5UaW1lLnZhbHVlfWApO1xyXG4gICAgICAgIGNvbnN0IGVuZERhdGVTdHI6IHN0cmluZyA9IHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmVuZCA/IFRpRGF0ZVV0aWwuZ2V0RGF0ZVN0cih0aGlzLmRhdGVQYW5lbC52YWx1ZS5lbmQpIDogJyc7XHJcbiAgICAgICAgY29uc3QgZW5kRGF0ZVRpbWU6IERhdGUgPSBuZXcgRGF0ZShgICR7ZW5kRGF0ZVN0cn0gJHt0aGlzLmVuZFRpbWUudmFsdWV9YCk7XHJcbiAgICAgICAgaWYgKFRpRGF0ZVV0aWwuaXNTbWFsbGVyKGJlZ2luRGF0ZVRpbWUsIHRoaXMubWluKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVGltZS52YWx1ZSA9IFRpRGF0ZVV0aWwuZ2V0VGltZVN0cih0aGlzLm1pbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChUaURhdGVVdGlsLmlzQmlnZ2VyKGJlZ2luRGF0ZVRpbWUsIHRoaXMubWF4KSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVGltZS52YWx1ZSA9IFRpRGF0ZVV0aWwuZ2V0VGltZVN0cih0aGlzLm1heCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChUaURhdGVVdGlsLmlzQmlnZ2VyKGVuZERhdGVUaW1lLCB0aGlzLm1heCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRUaW1lLnZhbHVlID0gVGlEYXRlVXRpbC5nZXRUaW1lU3RyKHRoaXMubWF4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbGRCZWdpbnRpbWVWYWx1ZSA9IHRoaXMuYmVnaW5UaW1lWyd2YWx1ZSddO1xyXG4gICAgICAgIHRoaXMub2xkRW5kdGltZVZhbHVlID0gdGhpcy5lbmRUaW1lWyd2YWx1ZSddO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogIOaXtumXtOahhuWkseeEpuS6i+S7tlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGltZUJsdXIocG9zOiBzdHJpbmcsIHZhbDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHRpbWVWYWw6IHN0cmluZyA9IHZhbDtcclxuICAgICAgICAvLyDljLrliIbkuK3oi7HmloflhpLlj7dcclxuICAgICAgICBjb25zdCByZWc6IFJlZ0V4cCA9IG5ldyBSZWdFeHAoJ1tcXFxcOlxcXFzvvJpdJyk7XHJcbiAgICAgICAgdGhpcy5iZWdpblRpbWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuYmVnaW5UaW1lKSk7XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmVuZFRpbWUpKTtcclxuICAgICAgICAvLyDovpPlhaXljLrpl7TmmK/lkKblrZjlnKjlsI/mlbDngrnvvIzpnZ7mlbTmlbBcclxuICAgICAgICBsZXQgaXNOb3RJbnRlZ2VyOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgdGltZUFycjogQXJyYXk8c3RyaW5nPiA9IHZhbC5zcGxpdChyZWcpO1xyXG4gICAgICAgIHRpbWVBcnIuZm9yRWFjaCgoaXRlbTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGltZUFycltpbmRleF0gPSAnMCcgKyBpdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJzZUludChpdGVtLCAxMCkgIT09IE51bWJlcihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgaXNOb3RJbnRlZ2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRpbWVWYWwgPSB0aW1lQXJyLmpvaW4oJzonKTtcclxuICAgICAgICBjb25zdCBkYXRlU3RyOiBzdHJpbmcgPSAnMjAyMC8xMC8zMCc7XHJcbiAgICAgICAgaWYgKHBvcyA9PT0gJ2JlZ2luJykge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVGltZS52YWx1ZSA9IHRpbWVWYWw7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luRGF0ZVZhbDogRGF0ZSA9IG5ldyBEYXRlKGAke1RpRGF0ZVV0aWwuZ2V0RGF0ZVN0cih0aGlzLmRhdGVQYW5lbC52YWx1ZS5iZWdpbil9ICR7dGhpcy5iZWdpblRpbWUudmFsdWV9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzU21hbGxlclRoYW5NaW46IGJvb2xlYW4gPSBUaURhdGVVdGlsLmlzU21hbGxlcihiZWdpbkRhdGVWYWwsIHRoaXMubWluKTtcclxuICAgICAgICAgICAgY29uc3QgYmVnaW5EYXRlOiBEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn0gJHtUaURhdGVVdGlsLmFkZENvbG9uKHRoaXMuYmVnaW5UaW1lWyd2YWx1ZSddKX1gKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbDogRGF0ZSA9IG5ldyBEYXRlKDIwMjAsIDEwLCAzMCwgcGFyc2VJbnQodGltZUFyclswXSwgMTApLCBwYXJzZUludCh0aW1lQXJyWzFdLCAxMCksIHBhcnNlSW50KHRpbWVBcnJbMl0sIDEwKSk7XHJcbiAgICAgICAgICAgIGlmIChTdHJpbmcoYmVnaW5EYXRlKSA9PT0gJ0ludmFsaWQgRGF0ZScgfHwgU3RyaW5nKGRhdGVWYWwpID09PSAnSW52YWxpZCBEYXRlJyB8fCB0aW1lQXJyLmxlbmd0aCA+IDMgfHwgaXNOb3RJbnRlZ2VyIHx8ICF0aGlzLmlzQmVnaW5TbWFsbGVyVGhhbkVuZCgpIHx8IGlzU21hbGxlclRoYW5NaW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5UaW1lLnZhbHVlID0gdGhpcy5vbGRCZWdpbnRpbWVWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2xkQmVnaW50aW1lVmFsdWUgPSB0aGlzLmJlZ2luVGltZS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kVGltZS52YWx1ZSA9IHRpbWVWYWw7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZERhdGVWYWw6IERhdGUgPSBuZXcgRGF0ZShgJHtUaURhdGVVdGlsLmdldERhdGVTdHIodGhpcy5kYXRlUGFuZWwudmFsdWUuZW5kKX0gJHt0aGlzLmVuZFRpbWUudmFsdWV9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmlnZ2VyVGhhbk1heDogYm9vbGVhbiA9IFRpRGF0ZVV0aWwuaXNCaWdnZXIoZW5kRGF0ZVZhbCwgdGhpcy5tYXgpO1xyXG4gICAgICAgICAgICBjb25zdCBlbmREYXRlOiBEYXRlID0gbmV3IERhdGUoYCR7ZGF0ZVN0cn0gJHtUaURhdGVVdGlsLmFkZENvbG9uKHRoaXMuZW5kVGltZVsndmFsdWUnXSl9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWw6IERhdGUgPSBuZXcgRGF0ZSgyMDIwLCAxMCwgMzAsIHBhcnNlSW50KHRpbWVBcnJbMF0sIDEwKSwgcGFyc2VJbnQodGltZUFyclsxXSwgMTApLCBwYXJzZUludCh0aW1lQXJyWzJdLCAxMCkpO1xyXG4gICAgICAgICAgICBpZiAoU3RyaW5nKGVuZERhdGUpID09PSAnSW52YWxpZCBEYXRlJyB8fCBTdHJpbmcoZGF0ZVZhbCkgPT09ICdJbnZhbGlkIERhdGUnIHx8IHRpbWVBcnIubGVuZ3RoID4gMyB8fCBpc05vdEludGVnZXIgfHwgIXRoaXMuaXNCZWdpblNtYWxsZXJUaGFuRW5kKCkgfHwgaXNCaWdnZXJUaGFuTWF4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUudmFsdWUgPSB0aGlzLm9sZEVuZHRpbWVWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2xkRW5kdGltZVZhbHVlID0gdGhpcy5lbmRUaW1lLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0T2tCdG5TdGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDml7bpl7TmoYZlbnRlcuS6i+S7tlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGltZUtleWRvd24ocG9zOiBzdHJpbmcsIHZhbDogc3RyaW5nLCBldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBUaUtleW1hcC5LRVlfRU5URVIgIHx8IGV2ZW50LmtleUNvZGUgPT09IFRpS2V5bWFwLktFWV9OVU1QQURfRU5URVIpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lQmx1cihwb3MsIHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkYXRlRWRpdEJsdXIodmFsOiBhbnksIHBvczogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChUaURhdGVVdGlsLmlzQmV0d2Vlbk1heEFuZG1pbih2YWwsIHRoaXMubWluLCB0aGlzLm1heCkpIHtcclxuICAgICAgICAgICAgaWYgKHBvcyA9PT0gJ2JlZ2luJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRWYWx1ZTogc3RyaW5nID0gdGhpcy5kYXRlRWRpdENvbXMuZmlyc3QubmF0aXZlRWxlbWVudC5maXJzdENoaWxkLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5EYXRlVmFsOiBEYXRlID0gbmV3IERhdGUoYCR7aW5wdXRWYWx1ZX0gJHt0aGlzLmJlZ2luVGltZVsndmFsdWUnXX1gKTtcclxuICAgICAgICAgICAgICAgIGlmIChUaURhdGVVdGlsLmlzRGF0ZSh0aGlzLmRhdGVQYW5lbC52YWx1ZS5lbmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZVZhbDogRGF0ZSA9IG5ldyBEYXRlKGAke1RpRGF0ZVV0aWwuZ2V0RGF0ZVN0cih0aGlzLmRhdGVQYW5lbC52YWx1ZS5lbmQpfSAke3RoaXMuZW5kVGltZVsndmFsdWUnXX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoVGlEYXRlVXRpbC5pc0JpZ2dlcihiZWdpbkRhdGVWYWwsIGVuZERhdGVWYWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmJlZ2luID0gdGhpcy5vbGRCZWdpblZhbHVlIHx8IHRoaXMub2xkTW9kZWwgJiYgdGhpcy5vbGRNb2RlbC5iZWdpbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJlZ2luVGltZURpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpblRpbWVbJ3ZhbHVlJ10gPSBUaURhdGVVdGlsLmdldFRpbWVTdHIobmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9sZEJlZ2luVmFsdWUgPSB0aGlzLmRhdGVQYW5lbC52YWx1ZS5iZWdpbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5UaW1lRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuZFRpbWVEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZVsndmFsdWUnXSA9IFRpRGF0ZVV0aWwuZ2V0VGltZVN0cihuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0VmFsdWU6IHN0cmluZyA9IHRoaXMuZGF0ZUVkaXRDb21zLmxhc3QubmF0aXZlRWxlbWVudC5maXJzdENoaWxkLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZVZhbDogRGF0ZSA9IG5ldyBEYXRlKGAke2lucHV0VmFsdWV9ICR7dGhpcy5lbmRUaW1lWyd2YWx1ZSddfWApO1xyXG4gICAgICAgICAgICAgICAgaWYgKFRpRGF0ZVV0aWwuaXNEYXRlKHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmJlZ2luKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlZ2luRGF0ZVZhbDogRGF0ZSA9IG5ldyBEYXRlKGAke1RpRGF0ZVV0aWwuZ2V0RGF0ZVN0cih0aGlzLmRhdGVQYW5lbC52YWx1ZS5iZWdpbil9ICR7dGhpcy5iZWdpblRpbWVbJ3ZhbHVlJ119YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRpRGF0ZVV0aWwuaXNCaWdnZXIoYmVnaW5EYXRlVmFsLCBlbmREYXRlVmFsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVQYW5lbC52YWx1ZS5lbmQgPSB0aGlzLm9sZEVuZFZhbHVlIHx8IHRoaXMub2xkTW9kZWwgJiYgdGhpcy5vbGRNb2RlbC5lbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9sZEVuZFZhbHVlID0gdGhpcy5kYXRlUGFuZWwudmFsdWUuZW5kO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnZhbGlkVGltZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldE9rQnRuU3RhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lRWRpdERpc2FibGVkID0gdGhpcy5iZWdpblRpbWVEaXNhYmxlZCAmJiB0aGlzLmVuZFRpbWVEaXNhYmxlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbktleWRvd25GbihldmVudDogS2V5Ym9hcmRFdmVudCwgdmFsOiBhbnksIHBvczogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IFRpS2V5bWFwLktFWV9FTlRFUiAgfHwgZXZlbnQua2V5Q29kZSA9PT0gVGlLZXltYXAuS0VZX05VTVBBRF9FTlRFUikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVFZGl0Qmx1cih2YWwsIHBvcyk7XHJcbiAgICAgICAgfVxyXG4gICAgIH1cclxuXHJcbiAgICAvLyDorr7nva50aW1l5oyH5Luk5o6l5Y+jXHJcbiAgICBwcml2YXRlIHNldFRpbWVPcHRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOiuvue9ruW8gOWni3RpbWXmjIfku6TmjqXlj6NcclxuICAgICAgICB0aGlzLnNldEJlZ2luVGltZU9wdGlvbnMoKTtcclxuXHJcbiAgICAgICAgLy8g6K6+572u57uT5p2fdGltZeaMh+S7pOaOpeWPo1xyXG4gICAgICAgIHRoaXMuc2V0RW5kVGltZU9wdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDorr7nva7lvIDlp4vpnaLmnb90aW1l5oyH5Luk5o6l5Y+jXHJcbiAgICBwcml2YXRlIHNldEJlZ2luVGltZU9wdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gdmFsdWXmjqXlj6Porr7nva5cclxuICAgICAgICB0aGlzLnNldEJlZ2luVGltZVZhbHVlKCk7XHJcblxyXG4gICAgICAgIC8vIG1heOaOpeWPo+iuvue9rlxyXG4gICAgICAgIHRoaXMuc2V0QmVnaW5UaW1lTWF4VmFsdWUoKTtcclxuXHJcbiAgICAgICAgLy8gbWlu5o6l5Y+j6K6+572uXHJcbiAgICAgICAgdGhpcy5zZXRCZWdpblRpbWVNaW5WYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRpbWXmjIfku6TnmoTotbflp4vpnaLmnb/nmoR2YWx1ZeaOpeWPo+iuvue9riDngrnlh7vliKDpmaTmjInpkq7vvJrlpoLmnpzorr7nva5ub3dEYXRlVGltZeW5tuS4lOWAvOS4uuWQiOazleaXtumXtOaXpeacn++8jOaXtumXtOiuvue9ruS4um5vd0RhdGVUaW1l55qE5pe26Ze0XHJcbiAgICBwcml2YXRlIHNldEJlZ2luVGltZVZhbHVlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsID09PSBudWxsIHx8IHRoaXMubW9kZWxbJ2JlZ2luJ10gPT09IG51bGwgJiYgdGhpcy5tb2RlbFsnZW5kJ10gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblRpbWVbJ3ZhbHVlJ10gPSAnJztcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYmVnaW5UaW1lWyd2YWx1ZSddID0gVGlEYXRlVXRpbC5nZXRUaW1lU3RyKHRoaXMubW9kZWwuYmVnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogdGltZeaMh+S7pOeahOi1t+Wni+mdouadv+eahG1heOaOpeWPo+iuvue9rlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0QmVnaW5UaW1lTWF4VmFsdWUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g6LW35aeL5pel5pyf5piv5pyA5aSn5pel5pyf5pe277yM5pe26Ze057uE5Lu25pyA5aSn5YC85pivbWF45o6l5Y+j5Lit55qE5pe26Ze077yb5YW25LuW5oOF5Ya15pyA5aSn5YC85pivXCIyMzo1OTo1OVwiXHJcbiAgICAgICAgY29uc3QgdmFsdWU6IFRpRGF0ZVZhbHVlID0gdGhpcy5kYXRlUGFuZWxbJ3ZhbHVlJ107XHJcbiAgICAgICAgdGhpcy5iZWdpblRpbWVbJ21heCddID0gKCh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkgJiYgVGlEYXRlVXRpbC5pc0RhdGVFcXVhbCh0aGlzLm1heCwgdmFsdWVbJ2JlZ2luJ10pKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGlEYXRlVXRpbC5nZXRUaW1lU3RyKHRoaXMubWF4KSA6ICcyMzo1OTo1OSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiB0aW1l5oyH5Luk55qE6LW35aeL6Z2i5p2/55qEbWlu5o6l5Y+j6K6+572uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRCZWdpblRpbWVNaW5WYWx1ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyDotbflp4vml6XmnJ/mmK/mnIDlsI/ml6XmnJ/ml7bvvIzml7bpl7Tnu4Tku7bmnIDlsI/lgLzmmK9taW7mjqXlj6PkuK3nmoTml7bpl7TvvJvlhbbku5bmg4XlhrXmnIDlpKflgLzmmK9cIjAwOjAwOjAwXCJcclxuICAgICAgICBjb25zdCB2YWx1ZTogVGlEYXRlVmFsdWUgPSB0aGlzLmRhdGVQYW5lbFsndmFsdWUnXTtcclxuICAgICAgICB0aGlzLmJlZ2luVGltZVsnbWluJ10gPSAoKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSAmJiBUaURhdGVVdGlsLmlzRGF0ZUVxdWFsKHRoaXMubWluLCB2YWx1ZVsnYmVnaW4nXSkpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaURhdGVVdGlsLmdldFRpbWVTdHIodGhpcy5taW4pIDogJzAwOjAwOjAwJztcclxuICAgIH1cclxuXHJcbiAgICAvLyDorr7nva7nu5PmnZ/pnaLmnb90aW1l5oyH5Luk5o6l5Y+jXHJcbiAgICBwcml2YXRlIHNldEVuZFRpbWVPcHRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIHZhbHVl5o6l5Y+j6K6+572uXHJcbiAgICAgICAgdGhpcy5zZXRFbmRUaW1lVmFsdWUoKTtcclxuXHJcbiAgICAgICAgLy8gbWF45o6l5Y+j6K6+572uXHJcbiAgICAgICAgdGhpcy5zZXRFbmRUaW1lTWF4VmFsdWUoKTtcclxuXHJcbiAgICAgICAgLy8gbWlu5o6l5Y+j6K6+572uXHJcbiAgICAgICAgdGhpcy5zZXRFbmRUaW1lTWluVmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB0aW1l5oyH5Luk55qE57uT5p2f6Z2i5p2/55qEdmFsdWXmjqXlj6Porr7nva5cclxuICAgIHByaXZhdGUgc2V0RW5kVGltZVZhbHVlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsID09PSBudWxsIHx8IHRoaXMubW9kZWxbJ2JlZ2luJ10gPT09IG51bGwgJiYgdGhpcy5tb2RlbFsnZW5kJ10gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRUaW1lWyd2YWx1ZSddID0gJyc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmVuZFRpbWVbJ3ZhbHVlJ10gPSBUaURhdGVVdGlsLmdldFRpbWVTdHIodGhpcy5tb2RlbC5lbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogdGltZeaMh+S7pOeahOe7k+adn+mdouadv+eahG1heOaOpeWPo+iuvue9rlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0RW5kVGltZU1heFZhbHVlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOe7k+adn+aXpeacn+aYr+acgOWkp+aXpeacn+aXtu+8jOaXtumXtOe7hOS7tuacgOWkp+WAvOaYr21heOaOpeWPo+S4reeahOaXtumXtDsg5ZCm5YiZ77yM5pe26Ze057uE5Lu25pyA5aSn5YC85pivXCIyMzo1OTo1OVwiXHJcbiAgICAgICAgY29uc3QgdmFsdWU6IFRpRGF0ZVZhbHVlID0gdGhpcy5kYXRlUGFuZWxbJ3ZhbHVlJ107XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lWydtYXgnXSA9ICgodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpICYmIFRpRGF0ZVV0aWwuaXNEYXRlRXF1YWwodGhpcy5tYXgsIHZhbHVlWydlbmQnXSkpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaURhdGVVdGlsLmdldFRpbWVTdHIodGhpcy5tYXgpIDogJzIzOjU5OjU5JztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIHRpbWXmjIfku6TnmoTnu5PmnZ/pnaLmnb/nmoRtaW7mjqXlj6Porr7nva5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEVuZFRpbWVNaW5WYWx1ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyDotbflp4vml6XmnJ/mmK/mnIDlsI/ml6XmnJ/ml7bvvIzml7bpl7Tnu4Tku7bmnIDlsI/lgLzmmK9taW7mjqXlj6PkuK3nmoTml7bpl7TvvJvlhbbku5bmg4XlhrXmnIDlpKflgLzmmK9cIjAwOjAwOjAwXCJcclxuICAgICAgICBjb25zdCB2YWx1ZTogVGlEYXRlVmFsdWUgPSB0aGlzLmRhdGVQYW5lbFsndmFsdWUnXTtcclxuICAgICAgICB0aGlzLmVuZFRpbWVbJ21pbiddID0gKCh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkgJiYgVGlEYXRlVXRpbC5pc0RhdGVFcXVhbCh0aGlzLm1pbiwgdmFsdWVbJ2VuZCddKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpRGF0ZVV0aWwuZ2V0VGltZVN0cih0aGlzLm1pbikgOiAnMDA6MDA6MDAnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6K6+572u56Gu6K6k5oyJ6ZKu55qE54q25oCBXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRPa0J0blN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOi+k+WFpeS4reaWh+WGkuWPt+S5i+WQju+8jOWPiuaXtui9rOaNouS4uuiLseaWh+WGkuWPt1xyXG4gICAgICAgIGNvbnN0IGlucHV0dmFsdWU6IHN0cmluZyA9IHRoaXMuYmVnaW5UaW1lLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGlucHV0dmFsdWUxOiBzdHJpbmcgPSB0aGlzLmVuZFRpbWUudmFsdWU7XHJcbiAgICAgICAgdGhpcy5iZWdpblRpbWUudmFsdWUgPSBpbnB1dHZhbHVlLnJlcGxhY2UoJ++8micsICc6Jyk7XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lLnZhbHVlID0gaW5wdXR2YWx1ZTEucmVwbGFjZSgn77yaJywgJzonKTtcclxuICAgICAgICAvLyDliKTmlq3kuIvmi4npnaLmnb/kuK3ml7bpl7TljLrpl7TmmK/lkKblkIjms5VcclxuICAgICAgICB0aGlzLmluVmFsaWRWYWx1ZSA9ICF0aGlzLmlzVmFsaWRSYW5nZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmJ1dHRvbkNvbXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyKHRoaXMuYnV0dG9uQ29tcy5sYXN0Lm5hdGl2ZUVsZW1lbnQsICdkaXNhYmxlZCcsIHRoaXMuaW5WYWxpZFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFN0eWxlKHRoaXMuaW5WYWxpZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Yik5pat5LiL5ouJ6Z2i5p2/5Lit5pe26Ze05Yy66Ze05piv5ZCm5ZCI5rOVXHJcbiAgICBwcml2YXRlIGlzVmFsaWRSYW5nZSgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBkYXRlOiBUaURhdGVWYWx1ZSA9IHRoaXMuZGF0ZVBhbmVsLnZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gKGRhdGUgaW5zdGFuY2VvZiBPYmplY3QpICYmIChUaURhdGVVdGlsLmlzRGF0ZShkYXRlLmJlZ2luKSkgJiZcclxuICAgICAgICAgICAgICAgIChUaURhdGVVdGlsLmlzRGF0ZShkYXRlLmVuZCkpICYmIHRoaXMuaXNCZWdpblNtYWxsZXJUaGFuRW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Yik5pat6LW35aeL5YC85ZKM57uT5p2f5YC86YO95Zyo5pyA5bCP5YC85pyA5aSn5YC85LmL6Ze0XHJcbiAgICBwcml2YXRlIGlzQmVnaW5TbWFsbGVyVGhhbkVuZCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIVRpRGF0ZVV0aWwuaXNEYXRlKHRoaXMuZGF0ZVBhbmVsLnZhbHVlLmJlZ2luKSB8fCAhVGlEYXRlVXRpbC5pc0RhdGUodGhpcy5kYXRlUGFuZWwudmFsdWUuZW5kKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOe7hOijhei1t+Wni+aXpeacn+aXtumXtCDnqbrmoLzor6/liKBcclxuICAgICAgICBjb25zdCBiZWdpbjogRGF0ZSA9IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICBgJHtUaURhdGVVdGlsLmdldERhdGVTdHIodGhpcy5kYXRlUGFuZWwudmFsdWUuYmVnaW4pfSAke1RpRGF0ZVV0aWwuYWRkQ29sb24odGhpcy5iZWdpblRpbWVbJ3ZhbHVlJ10pfWApO1xyXG4gICAgICAgIGNvbnN0IGVuZDogRGF0ZSA9IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICBgJHtUaURhdGVVdGlsLmdldERhdGVTdHIodGhpcy5kYXRlUGFuZWwudmFsdWUuZW5kKX0gJHtUaURhdGVVdGlsLmFkZENvbG9uKHRoaXMuZW5kVGltZVsndmFsdWUnXSl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiBiZWdpbi5nZXRUaW1lKCkgPD0gZW5kLmdldFRpbWUoKTtcclxuICAgIH1cclxufVxyXG4iXX0=