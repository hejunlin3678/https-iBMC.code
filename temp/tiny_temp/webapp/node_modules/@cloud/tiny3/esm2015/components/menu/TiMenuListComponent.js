import { Component, Input } from '@angular/core';
import { TiListComponent } from '../list/TiListModule';
import { TiFormComponent } from '../base/TiBaseModule';
/**
 * @ignore
 */
export class TiMenuListComponent extends TiListComponent {
    constructor() {
        super(...arguments);
        this.panelAlign = 'right'; // 设置下拉菜单面板与按钮对齐方式。这里是为了决定了面板上箭头方向。
    }
    isSelectable(item) {
        return !this.isDisabledFn(item);
    }
    getListOptions() {
        return this.options;
    }
    hasBorder(item, items) {
        const index = items.indexOf(item);
        const indexPre = (index === 0) ? 0 : index - 1;
        return item.groupId !== items[indexPre].groupId;
    }
    onMouseenterItem(event, option) {
        // 不是在选中项置Top时鼠标经过。
        // tslint:disable-next-line:prefer-conditional-expression
        if (new Date().getTime() - this.optionScrollTopLastTime > TiListComponent.SCROLL_TOP_TIME) {
            this.hoverOption = option; // 更新hover
        }
    }
    // 防止继承list的ngOnChanges,初始化hoverOption变更触发hover事件，导致menu组件中的onhover事件报错
    // tslint:disable-next-line: use-life-cycle-interface
    ngOnChanges() {
    }
}
TiMenuListComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-menulist',
                template: "<ul #ulRef *ngIf=\"options&&options.length > 0 else nodatatemplate\" [id]=\"appendId('list')\">\r\n        <ng-container *ngFor=\"let option of options; let i = index\">\r\n                <ng-container *ngTemplateOutlet=\"optionTemplate; context:  {$implicit: option, items:options, index: i, liid: i}\">\r\n                </ng-container>\r\n                <!-- <ng-container *ngFor=\"let child of option.children; let j = index;\">\r\n                        <ng-container *ngTemplateOutlet=\"optionTemplate; context:  {$implicit: child, index: j, liid: i+'_'+j}\">\r\n                        </ng-container>\r\n                </ng-container> -->\r\n        </ng-container>\r\n</ul>\r\n        <!-- no data\u6A21\u677F -->\r\n<ng-template #nodatatemplate>\r\n        <div class=\"ti3-dropdown-no-data\" [innerHtml]=\"noDataText\"></div>\r\n</ng-template>\r\n        <!-- \u5206\u7EC4\u548C\u9009\u9879\u7684\u6A21\u677F -->\r\n<ng-template #optionTemplate let-item let-items=items let-i=index let-lid=liid><!--\u4E24\u5C42\u6A21\u677F\u5D4C\u5957\uFF0C\u6709\u70B9\u96BE\u7406\u89E3-->\r\n        <!--\u76F8\u5BF9\u4E8Elist\uFF0C\u6837\u5F0F\u6709\u8C03\u6574-->\r\n        <li #liRefs class=\"ti3-menu-panel-list\"\r\n                [ngClass]=\"{'ti3-menu-panel-list-disabled':isDisabledFn(item),\r\n                'ti3-menu-groupId' : hasBorder(item,items),\r\n                'ti3-menu-panel-list-hover': item === hoverOption}\"\r\n                (mousedown)=\"onMousedownItem($event, liRefs)\"\r\n                (mouseup)=\"onMouseupItem($event, liRefs)\"\r\n                (click)=\"onClickItem($event, item)\"\r\n                (mouseenter)=\"onMouseenterItem($event, item)\"\r\n                (mouseleave)=\"onMouseleaveItem($event, liRefs)\"\r\n                [id]=\"appendId(lid)\">\r\n                <section style=\"display:inline\" *ngIf=\"isGroup(item)\"\r\n                         [ngClass]=\"{'ti3-menu-list-left-icon' : panelAlign === 'right',\r\n                          'ti3-menu-list-right-icon' : panelAlign === 'left'}\">\r\n                </section>\r\n                <ng-container *ngIf=\"itemTemplate else labelTemplate\">\r\n                        <ng-container *ngTemplateOutlet=\"itemTemplate; context: {$implicit: item, index: i}\">\r\n                        </ng-container>\r\n                </ng-container>\r\n                <ng-template #labelTemplate>{{item[labelKey]}}</ng-template>\r\n        </li>\r\n</ng-template>",
                providers: [TiFormComponent.getValueAccessor(TiMenuListComponent)],
                styles: ["::ng-deep :root{--ti-multiselect-text-min-height:30px}:host{box-sizing:border-box;display:inline-block;overflow-x:hidden;overflow-y:auto;padding:var(--ti-common-space-base) 0;position:relative}:host:focus{outline:none}.ti3-dropdown-group>.ti3-dropdown-option{padding-left:var(--ti-common-space-3x)}.ti3-overflow-padding{overflow:hidden;padding:0 10px;text-overflow:ellipsis;white-space:nowrap}.ti3-dropdown-option{background-color:var(--ti-common-color-bg-white-normal);color:inherit;cursor:pointer;line-height:var(--ti-common-line-height-number);list-style:none;padding:var(--ti-common-space-6) 0;text-align:left}.ti3-dropdown-option [tiTextweaken]{color:var(--ti-common-color-text-weaken)}.ti3-dropdown-option:first-child{margin-top:0}.ti3-dropdown-group-list{box-sizing:border-box;color:var(--ti-select-group-color);font-weight:700;height:var(--ti-multiselect-text-min-height);line-height:var(--ti-multiselect-text-min-height);text-align:left}.ti3-dropdown-group-list-cascader{padding-right:var(--ti-common-space-4x);position:relative}.ti3-dropdown-group-list-cascader:after{border-bottom:5px solid var(--ti-common-color-icon-normal);border-left:4px solid transparent;border-right:4px solid transparent;content:\"\";display:block;height:0;position:absolute;right:calc(var(--ti-common-space-3x) - 2px);top:50%;transform:translateY(-50%) rotate(90deg);width:0}.ti3-dropdown-option-selected.ti3-dropdown-group-list-cascader:after{border-bottom-color:var(--ti-common-color-icon-white)}.ti3-dropdown-option-disabled.ti3-dropdown-group-list-cascader:after{border-bottom-color:var(--ti-common-color-icon-disabled)}.ti3-dropdown-no-data,.ti3-dropdown-option.ti3-dropdown-option-disabled,.ti3-dropdown-option.ti3-dropdown-option-disabled:hover,.ti3-dropdown-option.ti3-dropdown-option-disabled [tiTextweaken],.ti3-dropdown-option.ti3-dropdown-option-disabled [tiTextweaken]:hover{color:var(--ti-common-color-text-disabled);cursor:not-allowed}.ti3-dropdown-no-data{line-height:var(--ti-common-line-height-number);padding:var(--ti-common-space-6) var(--ti-input-padding-horizontal)}.ti3-dropdown-option-hover,.ti3-dropdown-option-hover [tiTextweaken]{background-color:var(--ti-select-item-bg-color-hover);color:var(--ti-select-item-text-color-hover)}.ti3-dropdown-option-selected,.ti3-dropdown-option-selected [tiTextweaken]{background-color:var(--ti-select-item-selected-bg-color);color:var(--ti-select-item-selected-text-color)}.ti3-drop-list-ul{overflow-x:hidden;overflow-y:auto}.ti3-menu-groupId{border-top:1px solid #ccc}.ti3-menu-panel-list{-ms-box-sizing:border-box;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;box-sizing:border-box;clear:both;cursor:pointer;display:block;font-weight:400;line-height:18px;padding:6px 20px;position:relative;text-decoration:none;user-select:none;white-space:inherit}.ti3-menu-panel-list.ti3-menu-panel-list-active,.ti3-menu-panel-list.ti3-menu-panel-list.ti3-menu-panel-list-selected-item{background:var(--ti-menu-panel-item-bg-active);color:var(--ti-menu-panel-item-color-active)}.ti3-menu-panel-list.ti3-menu-panel-list-active>.ti3-menu-list-left-icon,.ti3-menu-panel-list.ti3-menu-panel-list.ti3-menu-panel-list-selected-item>.ti3-menu-list-left-icon{border-right-color:var(--ti-menu-panel-item-color-active)}.ti3-menu-panel-list.ti3-menu-panel-list-active>.ti3-menu-list-right-icon,.ti3-menu-panel-list.ti3-menu-panel-list.ti3-menu-panel-list-selected-item>.ti3-menu-list-right-icon{border-left-color:var(--ti-menu-panel-item-color-active)}.ti3-menu-panel-list.ti3-menu-panel-list-disabled{background-color:#fff;cursor:not-allowed}.ti3-menu-panel-list.ti3-menu-panel-list-disabled ::ng-deep *{color:var(--ti-menu-item-color-disabled)!important}.ti3-menu-panel-list.ti3-menu-panel-list-disabled>.ti3-menu-list-left-icon{border-right-color:var(--ti-menu-item-color-disabled)}.ti3-menu-panel-list.ti3-menu-panel-list-disabled>.ti3-menu-list-right-icon{border-left-color:var(--ti-menu-item-color-disabled)}.ti3-menu-panel-list-hover{background:var(--ti-menu-item-bg-hover);color:var(--ti-menu-panel-item-color-hover)}.ti3-menu-panel-list-hover>.ti3-menu-list-left-icon{border-right-color:var(--ti-menu-panel-item-color-hover)}.ti3-menu-panel-list-hover>.ti3-menu-list-right-icon{border-left-color:var(--ti-menu-panel-item-color-hover)}.ti3-menu-list-left-icon{border-right:5px solid #333;left:5px;top:11px}.ti3-menu-list-left-icon,.ti3-menu-list-right-icon{border-bottom:4px solid transparent;border-top:4px solid transparent;content:\"\";display:inline-block;height:0;margin-left:3px;position:absolute;vertical-align:middle;width:0}.ti3-menu-list-right-icon{border-left:5px solid #333;right:5px;top:43%}.ti3-menu-panel-list-tooltip{display:inline-block;height:100%;left:0;position:absolute;top:0;width:100%}"]
            },] }
];
TiMenuListComponent.propDecorators = {
    panelAlign: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlNZW51TGlzdENvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL0BjbG91ZC90aW55My9jb21wb25lbnRzL21lbnUvVGlNZW51TGlzdENvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXZEOztHQUVHO0FBT0gsTUFBTSxPQUFPLG1CQUFvQixTQUFRLGVBQWU7SUFOeEQ7O1FBT2EsZUFBVSxHQUFxQixPQUFPLENBQUMsQ0FBQyxtQ0FBbUM7SUF3QnhGLENBQUM7SUF2QmEsWUFBWSxDQUFDLElBQWdCO1FBQ25DLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFDUyxjQUFjO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN4QixDQUFDO0lBQ00sU0FBUyxDQUFDLElBQWdCLEVBQUUsS0FBd0I7UUFDdkQsTUFBTSxLQUFLLEdBQVcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMxQyxNQUFNLFFBQVEsR0FBVyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRXZELE9BQU8sSUFBSSxDQUFDLE9BQU8sS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3BELENBQUM7SUFDTSxnQkFBZ0IsQ0FBQyxLQUFpQixFQUFFLE1BQVc7UUFDbEQsbUJBQW1CO1FBQ25CLHlEQUF5RDtRQUN6RCxJQUFJLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixHQUFHLGVBQWUsQ0FBQyxlQUFlLEVBQUU7WUFDdkYsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsQ0FBRSxVQUFVO1NBQ3pDO0lBQ0wsQ0FBQztJQUNELHVFQUF1RTtJQUN2RSxxREFBcUQ7SUFDckQsV0FBVztJQUNYLENBQUM7OztZQTlCSixTQUFTLFNBQUM7Z0JBQ0wsUUFBUSxFQUFFLGFBQWE7Z0JBQ3ZCLG83RUFBOEI7Z0JBRTlCLFNBQVMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOzthQUN2RTs7O3lCQUVJLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpTGlzdENvbXBvbmVudCB9IGZyb20gJy4uL2xpc3QvVGlMaXN0TW9kdWxlJztcclxuaW1wb3J0IHsgVGlGb3JtQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9UaUJhc2VNb2R1bGUnO1xyXG5pbXBvcnQgeyBUaU1lbnVJdGVtIH0gZnJvbSAnLi9UaU1lbnVDb21wb25lbnQnO1xyXG4vKipcclxuICogQGlnbm9yZVxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICAgIHNlbGVjdG9yOiAndGktbWVudWxpc3QnLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogJy4vbWVudWxpc3QuaHRtbCcsXHJcbiAgICAgIHN0eWxlVXJsczogWycuL21lbnVsaXN0Lmxlc3MnLyogLCAnLi9tZW51Lmxlc3MnICovXSxcclxuICAgICAgcHJvdmlkZXJzOiBbVGlGb3JtQ29tcG9uZW50LmdldFZhbHVlQWNjZXNzb3IoVGlNZW51TGlzdENvbXBvbmVudCldXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUaU1lbnVMaXN0Q29tcG9uZW50IGV4dGVuZHMgVGlMaXN0Q29tcG9uZW50IHtcclxuICAgIEBJbnB1dCgpIHBhbmVsQWxpZ246ICdsZWZ0JyB8ICdyaWdodCcgPSAncmlnaHQnOyAvLyDorr7nva7kuIvmi4noj5zljZXpnaLmnb/kuI7mjInpkq7lr7npvZDmlrnlvI/jgILov5nph4zmmK/kuLrkuoblhrPlrprkuobpnaLmnb/kuIrnrq3lpLTmlrnlkJHjgIJcclxuICAgIHByb3RlY3RlZCBpc1NlbGVjdGFibGUoaXRlbTogVGlNZW51SXRlbSk6IGJvb2xlYW4gey8vIOS4juaZrumAmmxpc3TljLrliKvvvJpncm91cOS5n+aYr+WPr+S7pemAieS4reeahFxyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc0Rpc2FibGVkRm4oaXRlbSk7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgZ2V0TGlzdE9wdGlvbnMoKTogQXJyYXk8VGlNZW51SXRlbT4gey8vIOS4juaZrumAmmxpc3TljLrliKvvvJrmrKHnuqfoioLngrnkuI3kvJrmlL7lhaXmnKznuqfliKvjgIJcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGhhc0JvcmRlcihpdGVtOiBUaU1lbnVJdGVtLCBpdGVtczogQXJyYXk8VGlNZW51SXRlbT4pOiBib29sZWFuIHsgLy8g5YiG57uE5bim57q/XHJcbiAgICAgICAgY29uc3QgaW5kZXg6IG51bWJlciA9IGl0ZW1zLmluZGV4T2YoaXRlbSk7XHJcbiAgICAgICAgY29uc3QgaW5kZXhQcmU6IG51bWJlciA9IChpbmRleCA9PT0gMCkgPyAwIDogaW5kZXggLSAxO1xyXG5cclxuICAgICAgICByZXR1cm4gaXRlbS5ncm91cElkICE9PSBpdGVtc1tpbmRleFByZV0uZ3JvdXBJZDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbk1vdXNlZW50ZXJJdGVtKGV2ZW50OiBNb3VzZUV2ZW50LCBvcHRpb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIOS4jeaYr+WcqOmAieS4remhuee9rlRvcOaXtum8oOagh+e7j+i/h+OAglxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItY29uZGl0aW9uYWwtZXhwcmVzc2lvblxyXG4gICAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMub3B0aW9uU2Nyb2xsVG9wTGFzdFRpbWUgPiBUaUxpc3RDb21wb25lbnQuU0NST0xMX1RPUF9USU1FKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXJPcHRpb24gPSBvcHRpb247ICAvLyDmm7TmlrBob3ZlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOmYsuatoue7p+aJv2xpc3TnmoRuZ09uQ2hhbmdlcyzliJ3lp4vljJZob3Zlck9wdGlvbuWPmOabtOinpuWPkWhvdmVy5LqL5Lu277yM5a+86Ie0bWVudee7hOS7tuS4reeahG9uaG92ZXLkuovku7bmiqXplJlcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogdXNlLWxpZmUtY3ljbGUtaW50ZXJmYWNlXHJcbiAgICBuZ09uQ2hhbmdlcygpOiB2b2lkIHtcclxuICAgIH1cclxufSJdfQ==