import { Component, ElementRef, EventEmitter, Inject, Input, Output, Renderer2 } from '@angular/core';
import { TiAccordionComponent } from './TiAccordionComponent';
import { TiBaseComponent } from '../base/TiBaseModule';
/**
 * 定义手风琴组件单个折叠面板，该组件包含在ti-accordion标签中
 * <example-url>../tiny3demo/#/accordion/acc-all</example-url>
 */
export class TiAccordionItemComponent extends TiBaseComponent {
    /**
     * @ignore
     * 依赖注入tiAccordion（后续使用其方法）
     */
    constructor(accordion, hostRef, renderer) {
        super(hostRef, renderer);
        this.accordion = accordion;
        /**
         * 单个折叠面板项是否灰化
         */
        this.disabled = false;
        /**
         * 设置用户点击某一折叠面板的head时是否自动实现内容体展示状态切换
         *
         * 头部局部点击可切换场景，需要通过设置该变量实现
         */
        this.clickToggle = true;
        /**
         * 某一折叠面板的头部点击回调
         */
        this.headClick = new EventEmitter();
        /**
         * @ignore
         * 头部class,需要显示声明，否则ngClass会报错
         */
        this.headClass = '';
        /**
         * @ignore
         * body class,需要显示声明，否则ngClass会报错
         */
        this.bodyClass = '';
        // 面板展开状态获取/设置：此处处理涉及到内部和外部修改，因此此处通过set/get进行处理
        this.isOpen = false;
    }
    /**
     * 单个折叠面板是否处于展开状态，用于初始化设置，默认值为false
     *
     */
    get open() {
        return this.isOpen;
    }
    /**
     * @ignore
     */
    set open(value) {
        if (value !== this.open) {
            if (value) { // open属性更新且open值为true时，处理其它item的关闭状态
                this.accordion.closeOtherItems(this);
            }
            this.isOpen = value;
        }
    }
    // 初始化处理：添加当前item到列表中,设置该item的id值
    ngOnInit() {
        super.ngOnInit();
        this.accordion.addItem(this);
        this.headClass = this.accordion.headClass;
        this.bodyClass = this.accordion.bodyClass;
    }
    // item销毁处理：移除item列表中的该项数据
    ngOnDestroy() {
        super.ngOnDestroy();
        this.accordion.removeItem(this);
    }
    /**
     * @ignore
     * item头部点击事件逻辑处理
     */
    toggleOpen($event) {
        if (this.disabled) {
            return;
        }
        if (this.clickToggle) {
            this.open = !this.open;
        }
        this.headClick.emit($event);
    }
}
TiAccordionItemComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-accordion-item',
                template: "<div [ngClass]=\"[headClass, disabled ? 'disabled': '', 'ti3-accordion-panel-heading']\"\r\n[tabindex]=\"disabled ? -1 : 0\" tiOutline (keydown.enter)=\"toggleOpen($event)\"\r\n     (click)=\"toggleOpen($event)\" [id]=\"appendId('head')\">\r\n    <div class=\"ti3-accordion-panel-title\">\r\n        <div class=\"ti3-icon ti3-icon-angle-right ti3-accordion-panel-title-icon\"\r\n             [ngClass]=\"{'ti3-icon-angle-transform-down': !open,'ti3-icon-angle-transform-up': open,\r\n             'ti3-accordion-panel-title-icon-disabled': disabled}\"></div>\r\n        <span class=\"ti3-accordion-panel-title-content\">\r\n            <span [ngClass]=\"{'ti3-accordion-panel-title-content-disabled': disabled}\">\r\n                <ng-content select=\"ti-accordion-head\"></ng-content>\r\n            </span>\r\n        </span>\r\n    </div>\r\n</div>\r\n<div class=\"ti3-accordion-panel-collapse\" [tiCollapse]=\"!open\">\r\n    <div class=\"ti3-accordion-panel-body\" [ngClass]=\"[bodyClass]\">\r\n        <ng-content></ng-content>\r\n    </div>\r\n</div>",
                host: {
                    '[class.ti3-accordion-panel]': 'true'
                },
                styles: [":host.ti3-accordion-group{display:block}:host.ti3-accordion-panel{background-color:var(--ti-accordion-panel-bg-color);border:var(--ti-accordion-panel-border);border-radius:var(--ti-accordion-panel-border-radius);display:block;margin-bottom:0}.ti3-accordion-panel-heading{-ms-user-select:none;-webkit-user-select:none;background-color:var(--ti-accordion-panel-head-bg-color);color:var(--ti-common-color-text-primary);cursor:pointer;height:var(--ti-accordion-panel-height);line-height:var(--ti-accordion-panel-lineheight);padding:var(--ti-accordion-panel-head-padding);user-select:none}.ti3-accordion-panel-heading.disabled{background-color:var(--ti-accordion-panel-head-bg-color-disabled);cursor:not-allowed;outline:none}.ti3-accordion-panel-title-icon{color:var(--ti-accordion-panel-icon-color);display:inline-block;font-size:var(--ti-accordion-panel-icon-fs);line-height:var(--ti-accordion-panel-icon-fs);vertical-align:middle}.ti3-accordion-panel-title-icon-disabled{color:var(--ti-accordion-panel-icon-color-disabled)}.ti3-icon-angle-transform-down{transform:rotate(90deg)}.ti3-icon-angle-transform-up{transform:rotate(-90deg)}.ti3-accordion-panel-title{align-items:center;color:var(--ti-accordion-panel-title-color);display:flex;font-size:var(--ti-accordion-panel-fs);margin-bottom:0;margin-top:0}.ti3-accordion-panel-title-content{margin-left:var(--ti-accordion-panel-title-margin-left)}.ti3-accordion-panel-title-content-disabled{color:var(--ti-accordion-panel-title-color-disabled)}:host.ti3-accordion-group ::ng-deep .ti3-accordion-panel+.ti3-accordion-panel{margin-top:var(--ti-accordion-panel-space-between)}.ti3-accordion-panel-collapse{border-top:var(--ti-accordion-panel-collapse-border-top)}.ti3-accordion-panel-body{background-color:var(--ti-accordion-panel-body-bg);box-shadow:var(--ti-accordion-panel-body-shadow);padding:var(--ti-accordion-panel-body-padding)}"]
            },] }
];
TiAccordionItemComponent.ctorParameters = () => [
    { type: TiAccordionComponent, decorators: [{ type: Inject, args: [TiAccordionComponent,] }] },
    { type: ElementRef },
    { type: Renderer2 }
];
TiAccordionItemComponent.propDecorators = {
    disabled: [{ type: Input }],
    clickToggle: [{ type: Input }],
    headClick: [{ type: Output }],
    open: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlBY2NvcmRpb25JdGVtQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL2NvbXBvbmVudHMvYWNjb3JkaW9uL1RpQWNjb3JkaW9uSXRlbUNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUN6SCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFdkQ7OztHQUdHO0FBU0gsTUFBTSxPQUFPLHdCQUF5QixTQUFRLGVBQWU7SUEwQnpEOzs7T0FHRztJQUNILFlBQWtELFNBQStCLEVBQ3JFLE9BQW1CLEVBQUUsUUFBbUI7UUFDaEQsS0FBSyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUZxQixjQUFTLEdBQVQsU0FBUyxDQUFzQjtRQTdCakY7O1dBRUc7UUFDTSxhQUFRLEdBQVksS0FBSyxDQUFDO1FBQ25DOzs7O1dBSUc7UUFDTSxnQkFBVyxHQUFZLElBQUksQ0FBQztRQUNyQzs7V0FFRztRQUNnQixjQUFTLEdBQXdCLElBQUksWUFBWSxFQUFFLENBQUM7UUFFdkU7OztXQUdHO1FBQ0ksY0FBUyxHQUFXLEVBQUUsQ0FBQztRQUM5Qjs7O1dBR0c7UUFDSSxjQUFTLEdBQVcsRUFBRSxDQUFDO1FBVTlCLCtDQUErQztRQUN2QyxXQUFNLEdBQVksS0FBSyxDQUFDO0lBSGhDLENBQUM7SUFJRDs7O09BR0c7SUFDSCxJQUlJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBSSxJQUFJLENBQUMsS0FBYztRQUNuQixJQUFJLEtBQUssS0FBSyxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ3JCLElBQUksS0FBSyxFQUFFLEVBQUMscUNBQXFDO2dCQUM3QyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUN4QztZQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1NBQ3ZCO0lBQ0wsQ0FBQztJQUVELGlDQUFpQztJQUNqQyxRQUFRO1FBQ0osS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7UUFDMUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsMEJBQTBCO0lBQzFCLFdBQVc7UUFDUCxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILFVBQVUsQ0FBQyxNQUFhO1FBQ3BCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNmLE9BQU87U0FDVjtRQUNELElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNsQixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztTQUMxQjtRQUNELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7OztZQTlGSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLG1CQUFtQjtnQkFDN0IsK2lDQUFvQztnQkFFcEMsSUFBSSxFQUFFO29CQUNGLDZCQUE2QixFQUFFLE1BQU07aUJBQ3hDOzthQUNKOzs7WUFkUSxvQkFBb0IsdUJBNkNaLE1BQU0sU0FBQyxvQkFBb0I7WUE5Q3hCLFVBQVU7WUFBdUMsU0FBUzs7O3VCQW9CekUsS0FBSzswQkFNTCxLQUFLO3dCQUlMLE1BQU07bUJBMkJOLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbnB1dCwgT3V0cHV0LCBSZW5kZXJlcjIsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpQWNjb3JkaW9uQ29tcG9uZW50IH0gZnJvbSAnLi9UaUFjY29yZGlvbkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFRpQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvVGlCYXNlTW9kdWxlJztcclxuXHJcbi8qKlxyXG4gKiDlrprkuYnmiYvpo47nkLTnu4Tku7bljZXkuKrmipjlj6DpnaLmnb/vvIzor6Xnu4Tku7bljIXlkKvlnKh0aS1hY2NvcmRpb27moIfnrb7kuK1cclxuICogPGV4YW1wbGUtdXJsPi4uL3RpbnkzZGVtby8jL2FjY29yZGlvbi9hY2MtYWxsPC9leGFtcGxlLXVybD5cclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0aS1hY2NvcmRpb24taXRlbScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vYWNjb3JkaW9uLWl0ZW0uaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9hY2NvcmRpb24ubGVzcyddLFxyXG4gICAgaG9zdDoge1xyXG4gICAgICAgICdbY2xhc3MudGkzLWFjY29yZGlvbi1wYW5lbF0nOiAndHJ1ZSdcclxuICAgIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRpQWNjb3JkaW9uSXRlbUNvbXBvbmVudCBleHRlbmRzIFRpQmFzZUNvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqIOWNleS4quaKmOWPoOmdouadv+mhueaYr+WQpueBsOWMllxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7nlKjmiLfngrnlh7vmn5DkuIDmipjlj6DpnaLmnb/nmoRoZWFk5pe25piv5ZCm6Ieq5Yqo5a6e546w5YaF5a655L2T5bGV56S654q25oCB5YiH5o2iXHJcbiAgICAgKlxyXG4gICAgICog5aS06YOo5bGA6YOo54K55Ye75Y+v5YiH5o2i5Zy65pmv77yM6ZyA6KaB6YCa6L+H6K6+572u6K+l5Y+Y6YeP5a6e546wXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNsaWNrVG9nZ2xlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICog5p+Q5LiA5oqY5Y+g6Z2i5p2/55qE5aS06YOo54K55Ye75Zue6LCDXHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSByZWFkb25seSBoZWFkQ2xpY2s6IEV2ZW50RW1pdHRlcjxFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlpLTpg6hjbGFzcyzpnIDopoHmmL7npLrlo7DmmI7vvIzlkKbliJluZ0NsYXNz5Lya5oql6ZSZXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoZWFkQ2xhc3M6IHN0cmluZyA9ICcnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiBib2R5IGNsYXNzLOmcgOimgeaYvuekuuWjsOaYju+8jOWQpuWImW5nQ2xhc3PkvJrmiqXplJlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGJvZHlDbGFzczogc3RyaW5nID0gJyc7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOS+nei1luazqOWFpXRpQWNjb3JkaW9u77yI5ZCO57ut5L2/55So5YW25pa55rOV77yJXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoVGlBY2NvcmRpb25Db21wb25lbnQpIHByaXZhdGUgYWNjb3JkaW9uOiBUaUFjY29yZGlvbkNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgIGhvc3RSZWY6IEVsZW1lbnRSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcclxuICAgICAgICBzdXBlcihob3N0UmVmLCByZW5kZXJlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6Z2i5p2/5bGV5byA54q25oCB6I635Y+WL+iuvue9ru+8muatpOWkhOWkhOeQhua2ieWPiuWIsOWGhemDqOWSjOWklumDqOS/ruaUue+8jOWboOatpOatpOWkhOmAmui/h3NldC9nZXTov5vooYzlpITnkIZcclxuICAgIHByaXZhdGUgaXNPcGVuOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOWNleS4quaKmOWPoOmdouadv+aYr+WQpuWkhOS6juWxleW8gOeKtuaAge+8jOeUqOS6juWIneWni+WMluiuvue9ru+8jOm7mOiupOWAvOS4umZhbHNlXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIGdldCBvcGVuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzT3BlbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBzZXQgb3Blbih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5vcGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgey8vIG9wZW7lsZ7mgKfmm7TmlrDkuJRvcGVu5YC85Li6dHJ1ZeaXtu+8jOWkhOeQhuWFtuWug2l0ZW3nmoTlhbPpl63nirbmgIFcclxuICAgICAgICAgICAgICAgIHRoaXMuYWNjb3JkaW9uLmNsb3NlT3RoZXJJdGVtcyh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDliJ3lp4vljJblpITnkIbvvJrmt7vliqDlvZPliY1pdGVt5Yiw5YiX6KGo5LitLOiuvue9ruivpWl0ZW3nmoRpZOWAvFxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICB0aGlzLmFjY29yZGlvbi5hZGRJdGVtKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGVhZENsYXNzID0gdGhpcy5hY2NvcmRpb24uaGVhZENsYXNzO1xyXG4gICAgICAgIHRoaXMuYm9keUNsYXNzID0gdGhpcy5hY2NvcmRpb24uYm9keUNsYXNzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGl0ZW3plIDmr4HlpITnkIbvvJrnp7vpmaRpdGVt5YiX6KGo5Lit55qE6K+l6aG55pWw5o2uXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuYWNjb3JkaW9uLnJlbW92ZUl0ZW0odGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiBpdGVt5aS06YOo54K55Ye75LqL5Lu26YC76L6R5aSE55CGXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZU9wZW4oJGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tUb2dnbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oZWFkQ2xpY2suZW1pdCgkZXZlbnQpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==