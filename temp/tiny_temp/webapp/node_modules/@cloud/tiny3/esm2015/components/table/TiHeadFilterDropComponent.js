import { Component } from '@angular/core';
import { TiDropsearchComponent } from '../dropsearch/TiDropsearchModule';
import { TiFormComponent } from '../base/TiBaseModule';
import { TiBrowser } from '../../utils/Util';
/**
 * @ignore
 * TiHeadFilterDrop 表头过滤漏斗组件的下拉框选择组件
 */
export class TiHeadFilterDropComponent extends TiDropsearchComponent {
    constructor() {
        super(...arguments);
        this.dominatorSpace = TiHeadFilterDropComponent.DOMINATOR_SPACE + 'px';
        this.heightExcludeContent = 10; // 上下边框为2，上下padding为8
        this.buttonHeight = 45; // 确定、取消按钮高度
    }
    ngOnChanges(changes) {
        super.ngOnChanges(changes);
        // 重新设置headfilterdrop的heightExcludeList
        if (changes['searchable']) {
            if (changes['searchable'].currentValue) {
                this.heightExcludeList = this.multiple ? this.heightExcludeContent + this.buttonHeight + TiDropsearchComponent.SEARCHBOX_EXCLUDE_HEIGHT
                    : this.heightExcludeContent + TiDropsearchComponent.SEARCHBOX_EXCLUDE_HEIGHT;
            }
            else {
                this.heightExcludeList = this.multiple ? this.heightExcludeContent + this.buttonHeight : this.heightExcludeContent;
            }
        }
    }
    writeValue(model) {
        super.writeValue(model);
        // 初始化selected选中项
        if (this.multiple) {
            this.selected = [...model ? model : []];
        }
        else {
            this.selected = model ? model : '';
        }
    }
    onSelect(option) {
        // 多选时不处理onSelect事件（在点击确定按钮时触发）
        if (this.multiple) {
            return;
        }
        super.onSelect(option);
        this.model = option;
    }
    hide() {
        // 处理问题：IE 下有搜索框时，在下拉中选择完收起后漏斗图标由于聚焦而有了虚线框
        if (TiBrowser.isIE() && this.searchable) {
            this.render.setStyle(this.dominatorElem, 'outlineStyle', 'none');
            super.hide();
        }
        else {
            super.hide();
        }
        // 还原selected选中项
        if (this.multiple) {
            this.selected = [...this.model ? this.model : []];
        }
    }
    hideWithoutFocus() {
        super.hideWithoutFocus();
        // 还原selected选中项
        if (this.multiple) {
            this.selected = [...this.model ? this.model : []];
        }
    }
    // 按钮面板鼠标按下事件（解决因点击按钮面板导致整个下拉面板隐藏的问题）
    btnContainerMousedown(event) {
        event.preventDefault();
    }
    // 确定按钮
    okClick() {
        // 选中值发生改变时对model值做处理
        if (JSON.stringify(this.selected) !== JSON.stringify(this.model ? this.model : [])) {
            this.model = [...this.selected];
        }
        // 触发onSelect事件
        this.select.emit(this.model);
        this.hide();
    }
    // 取消按钮
    cancelClick() {
        // 还原selected选中项
        this.selected = [...this.model ? this.model : []];
        this.hide();
    }
}
TiHeadFilterDropComponent.DOMINATOR_SPACE = 6;
TiHeadFilterDropComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-head-filter-drop',
                template: "<ti-drop  class=\"ti3-head-filter-drop\"\r\n          [dominatorElem]=\"dominatorElem\"\r\n          [panelWidth]='panelWidth'\r\n          [panelAlign]='panelAlign'\r\n          [dominatorSpace]=\"dominatorSpace\">\r\n    <div *ngIf=\"searchable\">\r\n        <ti-searchbox-notsearch #searchboxCom noBorder\r\n            [placeholder]=\"placeholder\"\r\n            [(ngModel)]=\"searchWord\"\r\n            (ngModelChange)=\"searchWordChange($event)\"\r\n            [id]=\"appendId('searchbox')\">\r\n        </ti-searchbox-notsearch>\r\n    </div>\r\n    <ti-list [multiple]=\"multiple\"\r\n        [selectAll]=\"selectAll\"\r\n        [options]=\"((type !== 'suggestion' && searchable) || type === 'suggestion')?searchResult:options\"\r\n        [(ngModel)]=\"selected\"\r\n        [labelKey]=\"labelKey\"\r\n        [noDataText]=\"noDataText\"\r\n        style=\"display:block;\"\r\n        (select)=\"onSelect($event)\"\r\n        [id]=\"appendId('list')\">\r\n    </ti-list>\r\n    <section *ngIf=\"multiple\" (mousedown)=\"btnContainerMousedown($event)\">\r\n        <section class=\"ti3-head-filter-drop-button-container\">\r\n            <button type=\"button\"\r\n                tiButton\r\n                size=\"small\"\r\n                class=\"ti3-head-filter-drop-button-ok\"\r\n                (click)=\"okClick()\"\r\n                [id]=\"appendId('ok')\">{{ 'tiCommon.okBtn' | tiTranslate }}</button>\r\n            <button type=\"button\"\r\n                tiButton\r\n                size=\"small\"\r\n                (click)=\"cancelClick()\"\r\n                [id]=\"appendId('cancel')\">{{ 'tiCommon.cancelBtn' | tiTranslate }}</button>\r\n        </section>\r\n    </section>\r\n</ti-drop>",
                providers: [TiFormComponent.getValueAccessor(TiHeadFilterDropComponent)],
                styles: [".ti3-head-filter-drop ti-searchbox-notsearch{width:100%}.ti3-head-filter-drop-button-container{border-top:1px solid var(--ti-common-color-line-dividing);margin:0 var(--ti-common-space-10);padding:var(--ti-common-space-10) 0}.ti3-head-filter-drop-button-ok{margin-right:var(--ti-common-space-2x)}"]
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlIZWFkRmlsdGVyRHJvcENvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL0BjbG91ZC90aW55My9jb21wb25lbnRzL3RhYmxlL1RpSGVhZEZpbHRlckRyb3BDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILFNBQVMsRUFDWixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN6RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRTdDOzs7R0FHRztBQU9ILE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxxQkFBcUI7SUFOcEU7O1FBUVcsbUJBQWMsR0FBVyx5QkFBeUIsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBR3ZFLHlCQUFvQixHQUFXLEVBQUUsQ0FBQyxDQUFDLHFCQUFxQjtRQUN4RCxpQkFBWSxHQUFXLEVBQUUsQ0FBQyxDQUFDLFlBQVk7SUFnRnJELENBQUM7SUE5RUcsV0FBVyxDQUFDLE9BQXNCO1FBQzlCLEtBQUssQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFM0IsdUNBQXVDO1FBQ3ZDLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQ3ZCLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFlBQVksRUFBRTtnQkFDcEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLHFCQUFxQixDQUFDLHdCQUF3QjtvQkFDbkksQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxxQkFBcUIsQ0FBQyx3QkFBd0IsQ0FBQzthQUNwRjtpQkFBTTtnQkFD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QUFFLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDaEIsQ0FBQzs7QUFwRnNCLHlDQUFlLEdBQVcsQ0FBQyxDQUFDOztZQVB0RCxTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLHFCQUFxQjtnQkFDL0Isc3NEQUFzQztnQkFFdEMsU0FBUyxFQUFFLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLHlCQUF5QixDQUFDLENBQUM7O2FBQzNFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBTaW1wbGVDaGFuZ2VzXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpRHJvcHNlYXJjaENvbXBvbmVudCB9IGZyb20gJy4uL2Ryb3BzZWFyY2gvVGlEcm9wc2VhcmNoTW9kdWxlJztcclxuaW1wb3J0IHsgVGlGb3JtQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9UaUJhc2VNb2R1bGUnO1xyXG5pbXBvcnQgeyBUaUJyb3dzZXIgfSBmcm9tICcuLi8uLi91dGlscy9VdGlsJztcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqIFRpSGVhZEZpbHRlckRyb3Ag6KGo5aS06L+H5ruk5ryP5paX57uE5Lu255qE5LiL5ouJ5qGG6YCJ5oup57uE5Lu2XHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndGktaGVhZC1maWx0ZXItZHJvcCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vaGVhZC1maWx0ZXItZHJvcC5odG1sJyxcclxuICAgIHN0eWxlVXJsczpbJy4vaGVhZC1maWx0ZXItZHJvcC5sZXNzJ10sXHJcbiAgICBwcm92aWRlcnM6IFtUaUZvcm1Db21wb25lbnQuZ2V0VmFsdWVBY2Nlc3NvcihUaUhlYWRGaWx0ZXJEcm9wQ29tcG9uZW50KV1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRpSGVhZEZpbHRlckRyb3BDb21wb25lbnQgZXh0ZW5kcyBUaURyb3BzZWFyY2hDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBET01JTkFUT1JfU1BBQ0U6IG51bWJlciA9IDY7XHJcbiAgICBwdWJsaWMgZG9taW5hdG9yU3BhY2U6IHN0cmluZyA9IFRpSGVhZEZpbHRlckRyb3BDb21wb25lbnQuRE9NSU5BVE9SX1NQQUNFICsgJ3B4JztcclxuICAgIC8vIOmAieS4remhuVxyXG4gICAgcHVibGljIHNlbGVjdGVkOiBBcnJheTxhbnk+O1xyXG4gICAgcHJvdGVjdGVkIGhlaWdodEV4Y2x1ZGVDb250ZW50OiBudW1iZXIgPSAxMDsgLy8g5LiK5LiL6L655qGG5Li6Mu+8jOS4iuS4i3BhZGRpbmfkuLo4XHJcbiAgICBwcm90ZWN0ZWQgYnV0dG9uSGVpZ2h0OiBudW1iZXIgPSA0NTsgLy8g56Gu5a6a44CB5Y+W5raI5oyJ6ZKu6auY5bqmXHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nT25DaGFuZ2VzKGNoYW5nZXMpO1xyXG5cclxuICAgICAgICAvLyDph43mlrDorr7nva5oZWFkZmlsdGVyZHJvcOeahGhlaWdodEV4Y2x1ZGVMaXN0XHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ3NlYXJjaGFibGUnXSkge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlc1snc2VhcmNoYWJsZSddLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRFeGNsdWRlTGlzdCA9IHRoaXMubXVsdGlwbGUgPyB0aGlzLmhlaWdodEV4Y2x1ZGVDb250ZW50ICsgdGhpcy5idXR0b25IZWlnaHQgKyBUaURyb3BzZWFyY2hDb21wb25lbnQuU0VBUkNIQk9YX0VYQ0xVREVfSEVJR0hUXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmhlaWdodEV4Y2x1ZGVDb250ZW50ICsgVGlEcm9wc2VhcmNoQ29tcG9uZW50LlNFQVJDSEJPWF9FWENMVURFX0hFSUdIVDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0RXhjbHVkZUxpc3QgPSB0aGlzLm11bHRpcGxlID8gdGhpcy5oZWlnaHRFeGNsdWRlQ29udGVudCArIHRoaXMuYnV0dG9uSGVpZ2h0IDogdGhpcy5oZWlnaHRFeGNsdWRlQ29udGVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3cml0ZVZhbHVlKG1vZGVsOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci53cml0ZVZhbHVlKG1vZGVsKTtcclxuICAgICAgICAvLyDliJ3lp4vljJZzZWxlY3RlZOmAieS4remhuVxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbLi4ubW9kZWwgPyBtb2RlbCA6IFtdXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gbW9kZWwgPyBtb2RlbCA6ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNlbGVjdChvcHRpb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIOWkmumAieaXtuS4jeWkhOeQhm9uU2VsZWN05LqL5Lu277yI5Zyo54K55Ye756Gu5a6a5oyJ6ZKu5pe26Kem5Y+R77yJXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5vblNlbGVjdChvcHRpb24pO1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBvcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g5aSE55CG6Zeu6aKY77yaSUUg5LiL5pyJ5pCc57Si5qGG5pe277yM5Zyo5LiL5ouJ5Lit6YCJ5oup5a6M5pS26LW35ZCO5ryP5paX5Zu+5qCH55Sx5LqO6IGa54Sm6ICM5pyJ5LqG6Jma57q/5qGGXHJcbiAgICAgICAgaWYgKFRpQnJvd3Nlci5pc0lFKCkgJiYgdGhpcy5zZWFyY2hhYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZG9taW5hdG9yRWxlbSwgJ291dGxpbmVTdHlsZScsICdub25lJyk7XHJcbiAgICAgICAgICAgIHN1cGVyLmhpZGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdXBlci5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDov5jljp9zZWxlY3RlZOmAieS4remhuVxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbLi4udGhpcy5tb2RlbCA/IHRoaXMubW9kZWwgOiBbXV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGVXaXRob3V0Rm9jdXMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuaGlkZVdpdGhvdXRGb2N1cygpO1xyXG4gICAgICAgIC8vIOi/mOWOn3NlbGVjdGVk6YCJ5Lit6aG5XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IFsuLi50aGlzLm1vZGVsID8gdGhpcy5tb2RlbCA6IFtdXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5oyJ6ZKu6Z2i5p2/6byg5qCH5oyJ5LiL5LqL5Lu277yI6Kej5Yaz5Zug54K55Ye75oyJ6ZKu6Z2i5p2/5a+86Ie05pW05Liq5LiL5ouJ6Z2i5p2/6ZqQ6JeP55qE6Zeu6aKY77yJXHJcbiAgICBidG5Db250YWluZXJNb3VzZWRvd24oZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g56Gu5a6a5oyJ6ZKuXHJcbiAgICBva0NsaWNrKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOmAieS4reWAvOWPkeeUn+aUueWPmOaXtuWvuW1vZGVs5YC85YGa5aSE55CGXHJcbiAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWQpICE9PSBKU09OLnN0cmluZ2lmeSh0aGlzLm1vZGVsID8gdGhpcy5tb2RlbCA6IFtdKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gWy4uLnRoaXMuc2VsZWN0ZWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDop6blj5FvblNlbGVjdOS6i+S7tlxyXG4gICAgICAgIHRoaXMuc2VsZWN0LmVtaXQodGhpcy5tb2RlbCk7XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Y+W5raI5oyJ6ZKuXHJcbiAgICBjYW5jZWxDbGljaygpOiB2b2lkIHtcclxuICAgICAgICAvLyDov5jljp9zZWxlY3RlZOmAieS4remhuVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbLi4udGhpcy5tb2RlbCA/IHRoaXMubW9kZWwgOiBbXV07XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuIl19