import { Component, ElementRef, EventEmitter, Input, Optional, Output, Renderer2, TemplateRef, ViewChild } from '@angular/core';
import { Util } from '../../utils/Util';
import { TiLocale, TiLocaleFormat } from '../../locale/TiLocaleModule'; // 获取词条
import { TiFormComponent } from '../base/TiBaseModule';
import { TiTableComponent } from '../table/TiTableModule';
import { TiSelectComponent } from '../select/TiSelectModule';
/**
 * Pagination分页组件
 *
 * 分页组件一般情况下与表格组件配合使用，实现对表格数据的分页显示。
 *
 * <example-url>../tiny3demo/#/pagination/pagination-all</example-url>
 */
export class TiPaginationComponent extends TiFormComponent {
    constructor(render, hostRef, table, select) {
        super(hostRef, render);
        this.render = render;
        this.hostRef = hostRef;
        this.table = table;
        this.select = select;
        /**
         * 设置组件的类型：三种类型default(默认)、simple、mini
         */
        this.type = 'default';
        /**
         * 组件内部改变总条数时会触发该事件，向外通知当前总条数。
         */
        this.totalNumberChange = new EventEmitter();
        /**
         * 设置当前页码
         */
        this.currentPage = 1;
        /**
         * 组件内部改变当前页码时会触发该事件，向外通知当前页码数。
         */
        this.currentPageChange = new EventEmitter();
        /**
         * 设置是否总条数的显示与隐藏
         */
        this.showTotalNumber = true;
        /**
         * 设置是否显示页码跳转按钮（默认不显示)
         */
        this.showGotoLink = false;
        /**
         * 组件是否开启自动隐藏功能。开启后，当总条数totalNumber小于每页显示条数选项列表中的最小值时，隐藏分页
         */
        this.autoHide = false;
        /**
         * 组件是否禁用状态
         */
        this.disabled = false;
        /**
         * 设置最后一页的显示与隐藏（一般数据量比较大的场景隐藏最后一页）：默认显示
         */
        this.showLastPage = true;
        /**
         * 当操作选择框改变每页显示条数时会触发该事件，向外通知当前页码、每页显示条数和总条数。
         */
        this.pageNumChange = new EventEmitter();
        /**
         * 当操作选择框改变每页显示条数或操作页码改变当前页码时会触发该事件，向外通知当前页码、每页显示条数和总条数。
         */
        this.pageUpdate = new EventEmitter();
        /**
         * @ignore
         */
        this.mini = undefined;
        /**
         * @ignore
         * 用户输入即将跳转的页码
         */
        this.gotoPage = {};
        this.hidePage = false;
        this.defaultPageSize = {
            options: [10, 20, 50],
            size: 10,
            width: '60px',
            hide: false // 设置是否在页面上隐藏每页显示条数选项：下拉列表
        };
    }
    /**
     * @description 创建每一个页码对应的数据
     * @params key 页码显示，为数字或者是"···"
     * @params isActive 是否为当前激活页
     */
    static makePage(key, isActive) {
        return {
            key,
            active: isActive
        };
    }
    ngOnInit() {
        super.ngOnInit();
        // 组件对外各个接口的初始化处理
        this.initData();
        this.renderPage();
        if (this.isWithTable()) {
            this.subscription = this.table.paginationSubject.subscribe((value) => {
                if (!Util.isUndefined(value.totalNumber) && value.totalNumber !== this.totalNumber) {
                    this.totalNumber = value.totalNumber;
                    this.verifyCurrentPage(this.itemsPerPage.selected, true);
                    this.totalNumberChange.emit(this.totalNumber);
                }
                if (!Util.isUndefined(value.currentPage) && value.currentPage !== this.currentPage) {
                    this.currentPage = value.currentPage;
                    this.currentPageChange.emit(this.currentPage);
                }
            });
            // 表格记忆
            this.updateFromStorage();
        }
        // select下拉面板（dropsearch）中使用分页
        if (this.select) {
            this.select.pagination = this;
            this.select.dropsearchCom.pagination = this;
        }
    }
    ngOnChanges(changes) {
        const currentPageObj = changes['currentPage'];
        const totalNumberObj = changes['totalNumber'];
        if ((currentPageObj && !currentPageObj.firstChange) || (totalNumberObj && !totalNumberObj.firstChange)) {
            this.verifyCurrentPage(this.itemsPerPage.selected, true);
        }
    }
    ngDoCheck() {
        // 监听开发者设置的pageSize.size的改变
        if (!Util.isUndefined(this.pageSize) && this.pageSize.size !== this.oldSize) {
            const index = this.itemsPerPage.options.indexOf(this.pageSize.size);
            if (index !== -1) {
                this.itemsPerPage.selected = this.itemsPerPage.options[index];
                this.verifyCurrentPage(this.itemsPerPage.selected, true);
                this.oldSize = this.pageSize.size;
            }
        }
        if (this.oldTotalNumber !== this.totalNumber || this.itemsPerPage.selected !== this.oldSelected ||
            this.oldCurrentPage !== this.currentPage) {
            this.renderPage();
            this.oldTotalNumber = this.totalNumber;
            this.oldSelected = this.itemsPerPage.selected;
            this.oldCurrentPage = this.currentPage;
            this.updateFocusableElems = true; // select使用过这个变量后，会重置为false
        }
    }
    ngAfterViewChecked() {
        // select中使用的分页为default类型且不带左边select，所以此处限定type === 'default'
        if (this.type === 'default' && this.updateFocusableElems) {
            // 修复SSR报错：ERROR TypeError: this.nativeElement.querySelectorAll(...) is not a function or its return value is not iterable
            // this.setFocusableElems([...(this.nativeElement as HTMLElement).querySelectorAll('a')]);
            this.setFocusableElems(Array.prototype.slice.call(this.nativeElement.querySelectorAll('a')));
        }
    }
    ngOnDestroy() {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
    }
    // 数据初始化
    initData() {
        // 总条数数字国际化处理，拼接成 ---> 总条数: 条数
        this.setTotalNumberFormat();
        // 初始化获取itemsPerPage：select组件所需的属性
        this.itemsPerPage = this.getFormatedSize();
        this.verifyCurrentPage(this.itemsPerPage.selected, true);
        this.oldCurrentPage = this.currentPage;
        this.oldTotalNumber = this.totalNumber;
        this.oldSize = this.itemsPerPage.selected;
        this.oldSelected = this.itemsPerPage.selected;
    }
    // 是否有表格当前页记忆
    isStorageCurrentPage() {
        // tslint:disable-next-line: max-line-length
        return this.table.storageId && (this.table.storageConfig.pagination === true || (this.table.storageConfig.pagination && this.table.storageConfig.pagination['currentPage'] === true));
    }
    // 是否有表格每页个数记忆
    isStorageItemsPerPage() {
        // tslint:disable-next-line: max-line-length
        return this.table.storageId && (this.table.storageConfig.pagination === true || (this.table.storageConfig.pagination && this.table.storageConfig.pagination['itemsPerPage'] === true));
    }
    // 处理表格记忆
    updateFromStorage() {
        // 修复SSR报错：ERROR TypeError: Cannot read property 'currentPage' of undefined
        // 当前页
        if (this.isStorageCurrentPage()) {
            const currentPage = this.table.sessionStorageState && this.table.sessionStorageState.currentPage;
            if (currentPage > 0) {
                Promise.resolve(currentPage).then(() => {
                    this.currentPage = currentPage;
                    this.currentPageChange.emit(currentPage);
                });
            }
        }
        // 修复SSR错误：ERROR TypeError: Cannot read property 'itemsPerPage' of undefined
        // 每页条数
        if (this.isStorageItemsPerPage()) {
            const itemsPerPage = this.table.localStorageState && this.table.localStorageState.itemsPerPage;
            if (itemsPerPage > 0) {
                Promise.resolve(itemsPerPage).then(() => {
                    this.pageSize.size = itemsPerPage;
                    const pagination = {
                        currentPage: this.currentPage,
                        size: itemsPerPage,
                        totalNumber: this.totalNumber
                    };
                    this.pageNumChange.emit(pagination);
                });
            }
        }
    }
    /**
     * 根据接口配置来渲染页面
     */
    renderPage() {
        if (this.type === 'mini') {
            this.configMini();
        }
        else {
            // goto页码与当前页码保持一致
            this.gotoPage = {
                page: this.currentPage
            };
            // 页码列表
            this.pages = this.getPages();
        }
        // 用户开启自动隐藏功能且无需显示分页(若总条数 =< 最小的每页显示条数)时，则不需要显示分页时，隐藏分页
        // 初始化totalNumber undefined
        this.hidePage = this.autoHide &&
            (Util.isUndefined(this.totalNumber) || Math.min.apply(null, this.itemsPerPage.options) >= this.totalNumber);
        if (this.hidePage) {
            this.render.setStyle(this.hostRef.nativeElement, 'display', 'none');
        }
        else {
            this.render.setStyle(this.hostRef.nativeElement, 'display', 'inline-block');
        }
        // 若分页与ti-table配合使用，则当分页更新时，触发ti-table的updatePagination
        // 进而触发表格更新回调
        if (this.isWithTable()) {
            this.table.updatePagination(this.currentPage, this.itemsPerPage.selected);
        }
    }
    /**
     * @ignore
     * 对总页数进行数字国际化处理
     */
    setTotalNumberFormat() {
        // 数字国际化格式：整数位保留最小位数.小数位保留最小位数-小数位最大保留位置
        const formatTotalNumber = Util.isUndefined(this.totalNumber) ? '0' : TiLocaleFormat.formatNumber(this.totalNumber, '1.0-0');
        return TiLocale.getLocaleWords().tiPagination['totalLabel'] + formatTotalNumber;
    }
    getFormatedSize() {
        const sizeConfig = Object.assign(Object.assign({}, this.defaultPageSize), this.pageSize);
        let index = sizeConfig.options.indexOf(sizeConfig.size);
        if (index === -1) {
            index = 0;
            this.syncPageSize(sizeConfig.options[index]);
        }
        return {
            selected: sizeConfig.options[index],
            options: sizeConfig.options,
            hide: sizeConfig.hide,
            style: {
                width: sizeConfig.width // 宽度设置
            }
        };
    }
    /**
     * 同步变化开发者的pageSize数据
     */
    syncPageSize(pageSizeNum) {
        if (this.pageSize instanceof Object) {
            this.pageSize.size = pageSizeNum;
        }
    }
    /**
     * @ignore
     * 当前页码是否为最小页码
     */
    noPrevious() {
        return this.currentPage === TiPaginationComponent.MIN_PAGE;
    }
    /**
     * @ignore
     * 当前页码是否为最大页码
     */
    noNext() {
        return this.currentPage === this.totalPageNum;
    }
    /**
     * @ignore
     * 当前页码是否为'···' 不可被聚焦
     */
    isEllipse(page) {
        return page.key === '···';
    }
    /**
     * @ignore
     * 操作pageSize选择框,每页显示条数改变时触发
     */
    onSizeChange(pageSizeNum) {
        this.syncPageSize(pageSizeNum);
        this.verifyCurrentPage(pageSizeNum, false);
        const pagination = {
            currentPage: this.currentPage,
            size: pageSizeNum,
            totalNumber: this.totalNumber
        };
        this.pageNumChange.emit(pagination);
        this.pageUpdate.emit(pagination);
    }
    // 通过操作选择某一页
    selectPage(page, evt) {
        // tiny2中此处阻止a标签浏览器默认事件
        if (!Util.isUndefined(evt)) {
            evt.preventDefault();
        }
        if (this.disabled) {
            return;
        }
        const selectedPage = parseInt(page, 10);
        if (selectedPage !== this.currentPage) {
            this.currentPage = selectedPage;
            this.currentPageChange.emit(this.currentPage);
            this.pageUpdate.emit({
                currentPage: this.currentPage,
                size: this.itemsPerPage.selected,
                totalNumber: this.totalNumber
            });
        }
    }
    /**
     * 计算总页数
     */
    calculateTotalPages(pageSizeNum) {
        const totalPages = Math.ceil(this.totalNumber / pageSizeNum);
        return Math.max(totalPages || 0, 1); // 当totalPages是undefined时，取0
    }
    /**
     * 组装mini类型时模板需要的数据
     */
    configMini() {
        const options = [];
        for (let i = 1; i <= this.totalPageNum; i++) {
            options.push({
                id: `${i}`,
                label: `${i}/${this.totalPageNum}`
            });
        }
        this.itemsMini = {
            options,
            selected: options[this.currentPage - 1],
            change: (option) => {
                this.selectPage(option.id);
            }
        };
    }
    /**
     * @description 根据每页显示条数及数据总条数获取页码列表
     */
    getPages() {
        const startAndEndPage = this.getInterval(); // 获得显示的起始和结束页
        const startPagNum = startAndEndPage[0];
        const endPagNum = startAndEndPage[1];
        const pages = [];
        const restPageNum = this.totalPageNum - this.currentPage; // 剩余页数
        // 只有1页的情况
        if (this.totalPageNum === 1) {
            pages.push(TiPaginationComponent.makePage(1, true));
            return pages;
        }
        // 当总页数大于8，并且中间连续按钮的起始位置没有和第1页相连时，创建第1页按钮和省略号
        if (startPagNum > 2 && this.totalPageNum > 8) {
            pages.push(TiPaginationComponent.makePage(1, this.currentPage === 1));
            pages.push(TiPaginationComponent.makePage('···', false));
        }
        // 创建中间页按钮
        for (let i = startPagNum; i <= endPagNum; i++) {
            pages.push(TiPaginationComponent.makePage(i, this.currentPage === i));
        }
        // 当总页数大于8，并且中间连续按钮的结束位置没有和最后一页按钮相连时，创建省略号
        // 当总页数大于8，并且最后一页隐藏且不是后四页时，创建省略号
        if (this.totalPageNum > 8 && (this.showLastPage && endPagNum < (this.totalPageNum - 1) ||
            !this.showLastPage && restPageNum > 3)) {
            pages.push(TiPaginationComponent.makePage('···', false));
        }
        // 最后一页隐藏：如果中间连续按钮的结束位置为总页数的前一页且当前页是后四页时，创建最后一页
        // 最后一页不隐藏：如果中间连续按钮的结束位置，不是最后一页按钮时，创建最后一页按钮
        if ((!this.showLastPage && endPagNum === this.totalPageNum - 1 && restPageNum <= 3) ||
            (this.showLastPage && endPagNum < this.totalPageNum)) {
            pages.push(TiPaginationComponent.makePage(this.totalPageNum, this.currentPage === this.totalPageNum));
        }
        return pages;
    }
    /**
     * @description 根据当前页码和要显示的数目，计算分页链接的起始页
     */
    getInterval() {
        let start;
        let end;
        // 1.根据Agile规范：页数小于等于8，起、始按钮值分别设为1和最大页数：1 - 总数
        if (this.totalPageNum <= 8) {
            start = 1;
            end = this.totalPageNum;
            return [start, end];
        }
        // 2.总页数大于8，当前项为前三页：1 - 5 / 1 - 6
        if (this.currentPage <= 3) {
            start = 1;
            end = 5;
            if (!this.showLastPage) {
                end = 6;
            }
            return [start, end];
        }
        // 3.总页数大于8，当前项是后4页：总数-4 - 总数
        if (this.currentPage > this.totalPageNum - 3) {
            start = this.totalPageNum - 4;
            end = this.totalPageNum;
            return [start, end];
        }
        // 4.总页数大于8，当前项不在前三页，后三页：显示中间4个按钮
        start = this.currentPage - 1;
        end = this.currentPage + 2;
        // 一般数据量比较大的场景隐藏最后一页时，显示中间5个按钮
        if (!this.showLastPage) {
            end = this.currentPage + 3;
        }
        return [start, end];
    }
    /**
     * 设置合法的新页码
     */
    verifyCurrentPage(pageSizeNum, triggerPageUpdate) {
        this.totalPageNum = this.calculateTotalPages(pageSizeNum);
        if (this.currentPage > this.totalPageNum || this.currentPage < TiPaginationComponent.MIN_PAGE) {
            this.currentPage = this.currentPage > this.totalPageNum ? this.totalPageNum : TiPaginationComponent.MIN_PAGE;
            if (triggerPageUpdate) {
                this.pageUpdate.emit({
                    currentPage: this.currentPage,
                    size: pageSizeNum,
                    totalNumber: this.totalNumber
                });
                Promise.resolve(undefined)
                    .then(() => {
                    this.currentPageChange.emit(this.currentPage);
                });
            }
            else {
                this.currentPageChange.emit(this.currentPage);
            }
        }
    }
    /**
     * @ignore
     * 输入跳转页码enter快捷键处理
     */
    enterPageHandler(e) {
        this.gotoPageHandler(e);
    }
    /**
     * @ignore
     * 根据要跳转的页码，同步修改当前页码
     */
    gotoPageHandler(event) {
        // 当输入值为不合法时处理
        if (this.gotoPage.page < TiPaginationComponent.MIN_PAGE || this.gotoPage.page > this.totalPageNum) {
            this.gotoPage.page = this.currentPage;
            return;
        }
        if (this.gotoPage.page !== this.currentPage) {
            this.currentPage = this.gotoPage.page;
            this.currentPageChange.emit(this.currentPage);
            this.pageUpdate.emit({
                currentPage: this.currentPage,
                size: this.itemsPerPage.selected,
                totalNumber: this.totalNumber
            });
        }
    }
    /**
     * @ignore
     * 上一页按钮的点击事件
     */
    onPrevClick(event) {
        return !this.noPrevious() && this.selectPage(this.currentPage - 1, event);
    }
    /**
     * @ignore
     * 页码点击事件
     */
    onPageClick(page, event) {
        return !this.isEllipse(page) && this.selectPage(page.key, event);
    }
    /**
     * @ignore
     * 下一页按钮的点击事件
     */
    onNextClick(event) {
        return !this.noNext() && this.selectPage(this.currentPage + 1, event);
    }
    /**
     * @ignore
     * input输入框modelchange事件
     */
    ngModelChange(value) {
        if (value === '') {
            this.gotoPage.page = '';
            return;
        }
        const newPage = parseInt(value, 10);
        if (isNaN(newPage)) {
            this.render.setProperty(this.inputRef.nativeElement, 'value', this.gotoPage.page);
            return;
        }
        this.gotoPage.page = newPage;
        this.render.setProperty(this.inputRef.nativeElement, 'value', this.gotoPage.page);
    }
    /**
     * @ignore
     */
    trackByFn(index, item) {
        return item.key;
    }
    isWithTable() {
        return this.table && this.render.parentNode(this.nativeElement).tagName === 'TI-TABLE';
    }
}
TiPaginationComponent.MIN_PAGE = 1;
TiPaginationComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-pagination',
                template: "<ng-container *ngIf=\"type !== 'mini' else mini\">\r\n    <!-- 1.select\u4E0B\u62C9\u7EC4\u4EF6 -->\r\n    <ti-select\r\n            class=\"ti3-page-size-option\"\r\n            size=\"small\"\r\n            [id]=\"appendId('select')\"\r\n            [options]='itemsPerPage.options'\r\n            *ngIf=\"itemsPerPage.hide !== true\"\r\n            [disabled]='disabled'\r\n            [ngStyle]='itemsPerPage.style'\r\n            (ngModelChange)=\"onSizeChange($event)\"\r\n            [(ngModel)]=\"itemsPerPage.selected\">\r\n            <ng-template let-item>{{item}}</ng-template>\r\n    </ti-select>\r\n    <!-- 2.\u603B\u6761\u6570 -->\r\n    <label class=\"ti3-pag-total-items\"\r\n            [ngClass]=\"{'ti3-pag-total-disable': disabled}\"\r\n            *ngIf=\"showTotalNumber\"\r\n            [id]=\"appendId('total_items')\">{{setTotalNumberFormat()}}</label>\r\n    <!-- 3.\u9875\u7801-->\r\n    <div class=\"ti3-pag-pages\" [ngClass]=\"{'ti3-pag-pages-disable': disabled}\">\r\n        <a href=\"javascript:void(0);\"\r\n            oncontextmenu=\"return false\"\r\n            class=\"ti3-pag-prev\"\r\n            [id]=\"appendId('prev_page')\"\r\n            [ngClass]=\"{disabled: noPrevious() || disabled}\"\r\n            [attr.title]=\"noPrevious() ? '' : 'tiPagination.prevTitle' | tiTranslate\"\r\n            [attr.tabindex]=\"(noPrevious() || disabled) ? -1 : ''\"\r\n            (click)=\"onPrevClick($event)\"> <i class=\"ti3-icon ti3-icon-angle-left\"></i> </a>\r\n        <ng-container *ngFor=\"let page of pages; trackBy: trackByFn\">\r\n            <a href=\"javascript:void(0);\"\r\n            oncontextmenu=\"return false\"\r\n            class=\"ti3-pag-page\"\r\n            *ngIf=\"page.active || type !== 'simple'\"\r\n            [id]=\"type !== 'simple' ? appendId('go_') + page.key : 0\"\r\n            [attr.tabindex]=\"(disabled || isEllipse(page) || type === 'simple') ? -1 : ''\"\r\n            tiOutline\r\n            [class.active]=\"page.active && type !== 'simple'\"\r\n            [class.simple]=\"type === 'simple'\"\r\n            [class.ellipse]=\"isEllipse(page)\"\r\n            [class.ti3-page-disable]=\"disabled\"\r\n            (click)=\"onPageClick(page, $event)\">{{page.key}}</a>\r\n        </ng-container>\r\n        <a href=\"javascript:void(0);\"\r\n            oncontextmenu=\"return false\"\r\n            class=\"ti3-pag-next\"\r\n            [id]=\"appendId('next_page')\"\r\n            [ngClass]=\"{disabled: noNext() || disabled}\"\r\n            [attr.title]=\"noNext() ? '' : 'tiPagination.nextTitle' | tiTranslate\"\r\n            [attr.tabindex]=\"(noNext() || disabled) ? -1 : ''\"\r\n            (click)=\"onNextClick($event)\"> <i class=\"ti3-icon ti3-icon-angle-right\"></i> </a>\r\n    </div>\r\n    <!-- 4.\u8DF3\u8F6C\u6309\u94AE -->\r\n    <div class=\"ti3-pag-goto\" *ngIf=\"type === 'default' && showGotoLink === true\"\r\n        [ngClass]=\"{'ti3-pag-goto-disable': disabled}\">\r\n        <span class=\"ti3-pag-goto-text\">{{ 'tiPagination.gotoLabel' | tiTranslate }}</span>\r\n        <input #input\r\n                class=\"ti3-pag-goto-input\"\r\n                tiText\r\n                type=\"text\"\r\n                [ngModel]=\"gotoPage.page\"\r\n                [disabled]=\"disabled\"\r\n                (ngModelChange)=\"ngModelChange($event)\"\r\n                (keydown.enter)=\"enterPageHandler($event)\"\r\n                [id]=\"appendId('input')\">\r\n        <a class=\"ti3-pag-goto-icon-container\"\r\n            (click)=\"gotoPageHandler($event)\"\r\n            [id]=\"appendId('go')\"> <div class=\"ti3-pag-goto-icon\"></div> </a>\r\n    </div>\r\n</ng-container>\r\n<ng-template #mini>\r\n    <div class=\"ti3-pag-mini-pages\">\r\n            <!-- 1.\u603B\u6761\u6570 -->\r\n        <label class=\"ti3-pag-total-items\"\r\n                [ngClass]=\"{'ti3-pag-total-disable': disabled}\"\r\n                *ngIf=\"showTotalNumber\"\r\n                [id]=\"appendId('total_items')\">{{setTotalNumberFormat()}}</label>\r\n        <!-- 2.\u4E0A\u4E00\u9875 -->\r\n        <a href=\"javascript:void(0);\"\r\n            oncontextmenu=\"return false\"\r\n            class=\"ti3-pag-prev\"\r\n            [id]=\"appendId('mini_prev_page')\"\r\n            [ngClass]=\"{disabled: noPrevious() || disabled}\"\r\n            [attr.title]=\"noPrevious() ? '' : 'tiPagination.prevTitle' | tiTranslate\"\r\n            [attr.tabindex]=\"(noPrevious() || disabled) ? -1 : ''\"\r\n            (click)=\"onPrevClick($event)\"> <i class=\"ti3-icon ti3-icon-angle-left\"></i> </a>\r\n        <!-- 3.\u4E0B\u62C9\u6846 -->\r\n        <ti-select\r\n                size=\"small\"\r\n                class=\"ti3-page-mini-option\"\r\n                [options]=\"itemsMini.options\"\r\n                [id]=\"appendId('mini_select')\"\r\n                [(ngModel)]=\"itemsMini.selected\"\r\n                [disabled]='disabled'\r\n                (ngModelChange)=\"itemsMini.change($event)\">\r\n        </ti-select>\r\n        <!-- 4.\u4E0B\u4E00\u9875 -->\r\n        <a href=\"javascript:void(0);\"\r\n            oncontextmenu=\"return false\"\r\n            class=\"ti3-pag-next\"\r\n            [id]=\"appendId('mini_next_page')\"\r\n            [ngClass]=\"{disabled: noNext() || disabled}\"\r\n            [attr.title]=\"noNext() ? '' : 'tiPagination.nextTitle' | tiTranslate\"\r\n            [attr.tabindex]=\"(noNext() || disabled) ? -1 : ''\"\r\n            (click)=\"onNextClick($event)\"> <i class=\"ti3-icon ti3-icon-angle-right\"></i> </a>\r\n    </div>\r\n</ng-template>\r\n",
                host: {
                    '[class.ti3-page-container]': 'true',
                    '[class.ti3-pag-container-disable]': 'this.disabled',
                    '[attr.unselectable]': '"on"'
                },
                styles: ["::ng-deep :root{--ti-pagination-box-model:border-box;--ti-pagination-mini-select-margin:0 var(--ti-common-space-2x);--ti-pagination-page-padding-horizon:6px;--ti-pagination-page-space:var(--ti-common-space-base);--ti-pagination-total-item-pages-space:var(--ti-common-space-4x)}::ng-deep .ti3-table>.ti3-page-container{margin-top:var(--ti-pagination-margin-top-table)}:host.ti3-page-container{display:inline-block}:host.ti3-page-container .ti3-pag-container{-ms-user-select:none;-webkit-user-select:none;display:inline-block;float:left;line-height:normal;user-select:none}:host.ti3-page-container .ti3-pag-total-items{color:var(--ti-pagination-text-color);float:left;font-weight:400;height:var(--ti-pagination-height);line-height:var(--ti-pagination-height);margin:0 var(--ti-pagination-total-item-pages-space);vertical-align:middle}:host.ti3-page-container .ti3-pag-pages{float:left;height:var(--ti-pagination-height)}:host.ti3-page-container .ti3-pag-pages>.ti3-pag-prev{margin-right:var(--ti-pagination-page-space)}:host.ti3-page-container .ti3-pag-next,:host.ti3-page-container .ti3-pag-page,:host.ti3-page-container .ti3-pag-prev{-ms-box-sizing:var(--ti-pagination-box-model);border-radius:var(--ti-pagination-border-radius);box-sizing:var(--ti-pagination-box-model);cursor:pointer;display:inline-block;height:var(--ti-pagination-height);line-height:var(--ti-pagination-height);text-align:center;text-decoration:none;vertical-align:middle}:host.ti3-page-container .ti3-pag-next:hover,:host.ti3-page-container .ti3-pag-page:hover,:host.ti3-page-container .ti3-pag-prev:hover{text-decoration:none}:host.ti3-page-container .ti3-pag-page{color:var(--ti-pagination-text-color);margin-right:var(--ti-pagination-page-space);padding:0 var(--ti-pagination-page-padding-horizon)}:host.ti3-page-container .ti3-pag-page.active{background-color:var(--ti-pagination-bg-color-active);color:var(--ti-pagination-text-color-active)}:host.ti3-page-container .ti3-pag-page.ellipse{background:transparent;border:none;cursor:default;outline:none}:host.ti3-page-container .ti3-pag-page:not(.ellipse):hover{background-color:var(--ti-pagination-bg-color-hover);color:var(--ti-pagination-text-color-hover)}:host.ti3-page-container .ti3-pag-page.active:hover,:host.ti3-page-container .ti3-pag-page.simple:hover{background-color:var(--ti-pagination-bg-color-active-hover);color:var(--ti-pagination-text-color-active-hover)}:host.ti3-page-container .ti3-pag-page:not(.ellipse):active{background-color:var(--ti-pagination-bg-color-press);color:var(--ti-pagination-text-color-active-active)}:host.ti3-page-container .ti3-pag-pages-disable .ti3-page-disable{background-color:var(--ti-pagination-bg-color);color:var(--ti-pagination-text-color-disabled);cursor:not-allowed!important;outline:none}:host.ti3-page-container .ti3-pag-pages-disable .ti3-page-disable:hover{background-color:var(--ti-pagination-bg-color);color:var(--ti-pagination-text-color-disabled)!important}:host.ti3-page-container .ti3-pag-next,:host.ti3-page-container .ti3-pag-prev{color:var(--ti-pagination-prev-next-color);height:var(--ti-pagination-prev-next-width);line-height:var(--ti-pagination-prev-next-width);width:var(--ti-pagination-prev-next-width)}:host.ti3-page-container .ti3-pag-next.disabled,:host.ti3-page-container .ti3-pag-prev.disabled{background-color:var(--ti-pagination-bg-color-disabled);color:var(--ti-pagination-text-color-disabled);cursor:not-allowed;outline:none}:host.ti3-page-container .ti3-pag-next.disabled>.ti3-icon-angle-left,:host.ti3-page-container .ti3-pag-next.disabled>.ti3-icon-angle-right,:host.ti3-page-container .ti3-pag-prev.disabled>.ti3-icon-angle-left,:host.ti3-page-container .ti3-pag-prev.disabled>.ti3-icon-angle-right{color:var(--ti-pagination-icon-color-disabled)}:host.ti3-page-container .ti3-pag-next:not(.disabled):hover,:host.ti3-page-container .ti3-pag-prev:not(.disabled):hover{background-color:var(--ti-pagination-bg-color-hover);color:var(--ti-pagination-text-color-hover)}:host.ti3-page-container .ti3-pag-next:not(.disabled):active,:host.ti3-page-container .ti3-pag-prev:not(.disabled):active{background-color:var(--ti-pagination-button-bg-active);color:var(--ti-pagination-prev-next-color-active)}:host.ti3-page-container .ti3-pag-mini-pages .ti3-pag-next,:host.ti3-page-container .ti3-pag-mini-pages .ti3-pag-prev,:host.ti3-page-container .ti3-page-mini-option,:host.ti3-page-container .ti3-page-size-option{float:left}:host.ti3-page-container .ti3-pag-mini-pages .ti3-page-mini-option{float:left;margin:var(--ti-pagination-mini-select-margin);width:60px}:host.ti3-page-container .ti3-pag-mini-pages .ti3-pag-total-items{margin-left:0}:host.ti3-page-container .ti3-pag-container-disable{cursor:not-allowed}:host.ti3-page-container .ti3-pag-total-disable{color:var(--ti-pagination-total-disable);cursor:not-allowed}:host.ti3-page-container .ti3-pag-goto,:host.ti3-page-container .ti3-pag-goto .ti3-pag-goto-text{display:inline-block;float:left;height:var(--ti-pagination-height)}:host.ti3-page-container .ti3-pag-goto .ti3-pag-goto-text{color:var(--ti-pagination-text-color);line-height:var(--ti-pagination-height);margin:0 15px;vertical-align:middle}:host.ti3-page-container .ti3-pag-goto .ti3-pag-goto-input{-ms-box-sizing:border-box;background-color:var(--ti-input-bg-color);border:1px solid var(--ti-pagination-border-color);border-radius:2px!important;box-sizing:border-box;color:var(--ti-pagination-goto-input-color);float:left;height:var(--ti-pagination-height);outline:none;padding:0 5px;vertical-align:middle;width:var(--ti-pagination-goto-input-width)}:host.ti3-page-container .ti3-pag-goto .ti3-pag-goto-input:focus{border:1px solid var(--ti-input-border-color-focus)}:host.ti3-page-container .ti3-pag-goto .ti3-pag-goto-icon-container{-ms-box-sizing:var(--ti-pagination-box-model);background-color:var(--ti-pagination-bg-color);border:1px solid var(--ti-pagination-border-color);border-radius:3px;box-sizing:var(--ti-pagination-box-model);cursor:pointer;display:inline-block;height:var(--ti-pagination-height);margin-left:15px;text-decoration:none;vertical-align:middle;width:var(--ti-pagination-height)}:host.ti3-page-container .ti3-pag-goto .ti3-pag-goto-icon-container .ti3-pag-goto-icon{border-bottom:6px solid transparent;border-left:6px solid var(--ti-pagination-goto-icon-color);border-top:7px solid transparent;height:0;margin:5px 38%;width:0}:host.ti3-page-container .ti3-pag-goto-disable{color:var(--ti-pagination-total-disable);cursor:not-allowed}:host.ti3-page-container .ti3-pag-goto-disable .ti3-pag-goto-icon{border-left:6px solid #999!important;cursor:not-allowed}", "::ng-deep :root{--ti-text-clear-width:26px;--ti-text-password-width:36px}:host[tiText]{-ms-box-sizing:border-box;background-color:var(--ti-input-bg-color);border:1px solid var(--ti-input-border-color);border-radius:var(--ti-input-border-radius);box-sizing:border-box;color:var(--ti-input-text-color);flood-color:var(--ti-input-clear-color);font-size:var(--ti-input-font-size);height:var(--ti-input-height);lighting-color:var(--ti-input-clear-color-hover);line-height:normal;outline:none;padding:0 var(--ti-input-padding-horizontal);stop-color:var(--ti-input-clear-color-disabled);vertical-align:middle}:host[tiText].ti3-text-input-show-icon{background-repeat:no-repeat;background-size:16px}:host[tiText].ti3-text-input-show-clear{background-position:center right 5px;padding-right:var(--ti-text-clear-width)!important}:host[tiText].ti3-text-input-show-password{background-position:center right 10px;padding-right:var(--ti-text-password-width)!important}:host[tiText].ti3-text-input-noborder{border:0;box-shadow:none;outline:0}:host[tiText]:not([disabled]):not([noborder]).ti3-text-input-show-icon.ti3-text-clear-active:hover{cursor:pointer}:host[tiText]:not([disabled]):not([noborder]):hover{border:1px solid var(--ti-input-border-color-hover)}:host[tiText]:not([disabled]):not([noborder]):focus{border:1px solid var(--ti-input-border-color-focus)}:host[tiText][disabled]:disabled{background-color:var(--ti-input-bg-color-disabled);border:1px solid var(--ti-input-border-color-disabled);color:var(--ti-input-text-color-disabled);cursor:not-allowed!important}:host[tiText][disabled]:disabled.ti3-text-input-noborder{border:0}.ti3-password-hack-input{height:0;left:-9999px;position:absolute;top:-9999px;width:0}:host[tiText]{transition:border-color .15s}:host[tiText].ti3-text-input-show-icon:focus{transition:transform .15s cubic-bezier(.4,0,.2,1),font-size .15s cubic-bezier(.4,0,.2,1)}:host[tiText]:hover:not(:focus){transition:border-color .2s}"]
            },] }
];
TiPaginationComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: TiTableComponent, decorators: [{ type: Optional }] },
    { type: TiSelectComponent, decorators: [{ type: Optional }] }
];
TiPaginationComponent.propDecorators = {
    type: [{ type: Input }],
    totalNumber: [{ type: Input }],
    totalNumberChange: [{ type: Output }],
    currentPage: [{ type: Input }],
    currentPageChange: [{ type: Output }],
    pageSize: [{ type: Input }],
    showTotalNumber: [{ type: Input }],
    showGotoLink: [{ type: Input }],
    autoHide: [{ type: Input }],
    disabled: [{ type: Input }],
    showLastPage: [{ type: Input }],
    pageNumChange: [{ type: Output }],
    pageUpdate: [{ type: Output }],
    mini: [{ type: ViewChild, args: ['mini', { static: true },] }],
    inputRef: [{ type: ViewChild, args: ['input',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlQYWdpbmF0aW9uQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnkzL2NvbXBvbmVudHMvcGFnaW5hdGlvbi9UaVBhZ2luYXRpb25Db21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFDTCxRQUFRLEVBQ1IsTUFBTSxFQUNOLFNBQVMsRUFHVCxXQUFXLEVBQ1gsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsUUFBUSxFQUFFLGNBQWMsRUFBaUIsTUFBTSw2QkFBNkIsQ0FBQyxDQUFDLE9BQU87QUFDOUYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzFELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBNkM3RDs7Ozs7O0dBTUc7QUFZSCxNQUFNLE9BQU8scUJBQXNCLFNBQVEsZUFBZTtJQXdHdEQsWUFBc0IsTUFBaUIsRUFDakIsT0FBbUIsRUFDVCxLQUF1QixFQUN2QixNQUF5QjtRQUN2RCxLQUFLLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBSkgsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUNqQixZQUFPLEdBQVAsT0FBTyxDQUFZO1FBQ1QsVUFBSyxHQUFMLEtBQUssQ0FBa0I7UUFDdkIsV0FBTSxHQUFOLE1BQU0sQ0FBbUI7UUF6R3pEOztXQUVHO1FBQ00sU0FBSSxHQUFrQyxTQUFTLENBQUM7UUFLekQ7O1dBRUc7UUFDZ0Isc0JBQWlCLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDeEY7O1dBRUc7UUFDTSxnQkFBVyxH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QU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBRU8sV0FBVztRQUNqQixPQUFPLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sS0FBSyxVQUFVLENBQUM7SUFDekYsQ0FBQzs7QUF4bUJ1Qiw4QkFBUSxHQUFXLENBQUMsQ0FBQzs7WUFaaEQsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxlQUFlO2dCQUN6Qiw4K0tBQWdDO2dCQUVoQyxJQUFJLEVBQUU7b0JBQ0osNEJBQTRCLEVBQUUsTUFBTTtvQkFDcEMsbUNBQW1DLEVBQUUsZUFBZTtvQkFDcEQscUJBQXFCLEVBQUUsTUFBTTtpQkFDOUI7O2FBQ0Y7OztZQXZFQyxTQUFTO1lBTFQsVUFBVTtZQWNILGdCQUFnQix1QkEwS1IsUUFBUTtZQXpLaEIsaUJBQWlCLHVCQTBLVCxRQUFROzs7bUJBdEdwQixLQUFLOzBCQUlMLEtBQUs7Z0NBSUwsTUFBTTswQkFJTixLQUFLO2dDQUlMLE1BQU07dUJBWU4sS0FBSzs4QkFJTCxLQUFLOzJCQUlMLEtBQUs7dUJBSUwsS0FBSzt1QkFJTCxLQUFLOzJCQUlMLEtBQUs7NEJBSUwsTUFBTTt5QkFJTixNQUFNO21CQUlOLFNBQVMsU0FBQyxNQUFNLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO3VCQUlsQyxTQUFTLFNBQUMsT0FBTyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE9wdGlvbmFsLFxyXG4gIE91dHB1dCxcclxuICBSZW5kZXJlcjIsXHJcbiAgU2ltcGxlQ2hhbmdlLFxyXG4gIFNpbXBsZUNoYW5nZXMsXHJcbiAgVGVtcGxhdGVSZWYsXHJcbiAgVmlld0NoaWxkXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tICcuLi8uLi91dGlscy9VdGlsJztcclxuaW1wb3J0IHsgVGlMb2NhbGUsIFRpTG9jYWxlRm9ybWF0LCBUaUxvY2FsZVdvcmRzIH0gZnJvbSAnLi4vLi4vbG9jYWxlL1RpTG9jYWxlTW9kdWxlJzsgLy8g6I635Y+W6K+N5p2hXHJcbmltcG9ydCB7IFRpRm9ybUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvVGlCYXNlTW9kdWxlJztcclxuaW1wb3J0IHsgVGlUYWJsZUNvbXBvbmVudCB9IGZyb20gJy4uL3RhYmxlL1RpVGFibGVNb2R1bGUnO1xyXG5pbXBvcnQgeyBUaVNlbGVjdENvbXBvbmVudCB9IGZyb20gJy4uL3NlbGVjdC9UaVNlbGVjdE1vZHVsZSc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5cclxuLyoqXHJcbiAqIOWunueOsOavj+mhteaYvuekuuadoeaVsOeahOebuOWFs+mFjee9rueahOaVsOaNruexu+Wei1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUaVBhZ2VTaXplQ29uZmlnIHtcclxuICAvKipcclxuICAgKiDnu4Tku7bmr4/pobXmmL7npLrmnaHmlbDpgInpobnliJfooajvvJrkuIvmi4nliJfooahcclxuICAgKi9cclxuICBvcHRpb25zPzogQXJyYXk8bnVtYmVyPjtcclxuICAvKipcclxuICAgKiDlvZPliY3mr4/pobXmmL7npLrmnaHmlbDphY3nva7vvIzms6jmhI86IOivpeWAvOW6lOivpeWxnuS6jm9wdGlvbnPmlbDnu4TkuK3nmoTkuIDkuKrlhYPntKBcclxuICAgKi9cclxuICBzaXplPzogbnVtYmVyO1xyXG4gIC8qKlxyXG4gICAqIOiuvue9ruavj+mhteaYvuekuuadoeaVsOmAiemhueWFg+e0oCjpobXpnaLkuIrmmK/kuIDkuKpzZWxlY3Tnu4Tku7Yp55qE5a695bqmXHJcbiAgICovXHJcbiAgd2lkdGg/OiBzdHJpbmc7XHJcbiAgLyoqXHJcbiAgICog6K6+572u5piv5ZCm5Zyo6aG16Z2i5LiK6ZqQ6JeP5q+P6aG15pi+56S65p2h5pWw6YCJ6aG55YWD57Sg44CCXHJcbiAgICovXHJcbiAgaGlkZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlvZPliIbpobXmm7TmlrDml7bop6blj5Hkuovku7bpgJrnn6Xlh7rljrvnmoTlj4LmlbBcclxuICpcclxuICog5pu05paw5Zy65pmv5YyF5ous77yaMS7lvZPliY3pobXnoIHmlLnlj5jvvIwyLuavj+mhteaYvuekuuadoeaVsOaUueWPmO+8jDMu5oC75p2h5pWw5pS55Y+Y44CCXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRpUGFnaW5hdGlvbkV2ZW50IHtcclxuICBjdXJyZW50UGFnZTogbnVtYmVyO1xyXG4gIHNpemU6IG51bWJlcjtcclxuICB0b3RhbE51bWJlcjogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogQGlnbm9yZVxyXG4gKiDpobXnoIHnmoTmlbDmja7nsbvlnotcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGlQYWdlSXRlbSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBsYWJlbDogYW55O1xyXG59XHJcblxyXG4vKipcclxuICogUGFnaW5hdGlvbuWIhumhtee7hOS7tlxyXG4gKlxyXG4gKiDliIbpobXnu4Tku7bkuIDoiKzmg4XlhrXkuIvkuI7ooajmoLznu4Tku7bphY3lkIjkvb/nlKjvvIzlrp7njrDlr7nooajmoLzmlbDmja7nmoTliIbpobXmmL7npLrjgIJcclxuICpcclxuICogPGV4YW1wbGUtdXJsPi4uL3RpbnkzZGVtby8jL3BhZ2luYXRpb24vcGFnaW5hdGlvbi1hbGw8L2V4YW1wbGUtdXJsPlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICd0aS1wYWdpbmF0aW9uJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcGFnaW5hdGlvbi5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9wYWdpbmF0aW9uLmxlc3MnLCAnLi4vdGV4dC90ZXh0Lmxlc3MnXSwgLy8g5byV55SodGV4dOeahGxlc3Pmlofku7ZcclxuICBob3N0OiB7XHJcbiAgICAnW2NsYXNzLnRpMy1wYWdlLWNvbnRhaW5lcl0nOiAndHJ1ZScsXHJcbiAgICAnW2NsYXNzLnRpMy1wYWctY29udGFpbmVyLWRpc2FibGVdJzogJ3RoaXMuZGlzYWJsZWQnLFxyXG4gICAgJ1thdHRyLnVuc2VsZWN0YWJsZV0nOiAnXCJvblwiJ1xyXG4gIH1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBUaVBhZ2luYXRpb25Db21wb25lbnQgZXh0ZW5kcyBUaUZvcm1Db21wb25lbnQge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgTUlOX1BBR0U6IG51bWJlciA9IDE7XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9rue7hOS7tueahOexu+Wei++8muS4ieenjeexu+Wei2RlZmF1bHQo6buY6K6kKeOAgXNpbXBsZeOAgW1pbmlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgdHlwZTogJ2RlZmF1bHQnIHwgJ3NpbXBsZScgfCAnbWluaScgPSAnZGVmYXVsdCc7XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruW9k+WJjeaVsOaNruaAu+adoeaVsFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSB0b3RhbE51bWJlcjogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiDnu4Tku7blhoXpg6jmlLnlj5jmgLvmnaHmlbDml7bkvJrop6blj5Hor6Xkuovku7bvvIzlkJHlpJbpgJrnn6XlvZPliY3mgLvmnaHmlbDjgIJcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IHRvdGFsTnVtYmVyQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7lvZPliY3pobXnoIFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY3VycmVudFBhZ2U6IG51bWJlciA9IDE7XHJcbiAgICAvKipcclxuICAgICAqIOe7hOS7tuWGhemDqOaUueWPmOW9k+WJjemhteeggeaXtuS8muinpuWPkeivpeS6i+S7tu+8jOWQkeWklumAmuefpeW9k+WJjemhteeggeaVsOOAglxyXG4gICAgICovXHJcbiAgICBAT3V0cHV0KCkgcmVhZG9ubHkgY3VycmVudFBhZ2VDaGFuZ2U6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcbiAgICAvKipcclxuICAgICAqIOWunueOsOavj+mhteaYvuekuuadoeaVsOeahOebuOWFs+mFjee9ru+8jOWMheaLrOWmguS4i+WxnuaAp1xyXG4gICAgICpcclxuICAgICAqIG9wdGlvbnM657uE5Lu25q+P6aG15pi+56S65p2h5pWw6YCJ6aG55YiX6KGo77yM6buY6K6k6YWN572u77yaWzEwLCAyMCwgNTBdXHJcbiAgICAgKlxyXG4gICAgICogc2l6ZTrmr4/pobXmmL7npLrmnaHmlbDphY3nva7vvIzms6jmhI86IOivpeWAvOW6lOivpeWxnuS6jm9wdGlvbnPmlbDnu4TkuK3nmoTkuIDkuKrlhYPntKDvvIzpu5jorqTvvJoxMFxyXG4gICAgICpcclxuICAgICAqIHdpZHRoOuiuvue9ruavj+mhteaYvuekuuadoeaVsOmAiemhueWFg+e0oCjpobXpnaLkuIrmmK/kuIDkuKpzZWxlY3Tnu4Tku7Yp55qE5a695bqm77yM6buY6K6k77yaJzUwcHgnXHJcbiAgICAgKlxyXG4gICAgICogaGlkZTrorr7nva7mmK/lkKblnKjpobXpnaLkuIrpmpDol4/mr4/pobXmmL7npLrmnaHmlbDpgInpobnlhYPntKDvvIzpu5jorqTvvJpmYWxzZVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZTogVGlQYWdlU2l6ZUNvbmZpZztcclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5piv5ZCm5oC75p2h5pWw55qE5pi+56S65LiO6ZqQ6JePXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNob3dUb3RhbE51bWJlcjogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruaYr+WQpuaYvuekuumhteeggei3s+i9rOaMiemSru+8iOm7mOiupOS4jeaYvuekuilcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0dvdG9MaW5rOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOe7hOS7tuaYr+WQpuW8gOWQr+iHquWKqOmakOiXj+WKn+iDveOAguW8gOWQr+WQju+8jOW9k+aAu+adoeaVsHRvdGFsTnVtYmVy5bCP5LqO5q+P6aG15pi+56S65p2h5pWw6YCJ6aG55YiX6KGo5Lit55qE5pyA5bCP5YC85pe277yM6ZqQ6JeP5YiG6aG1XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGF1dG9IaWRlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOe7hOS7tuaYr+WQpuemgeeUqOeKtuaAgVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7mnIDlkI7kuIDpobXnmoTmmL7npLrkuI7pmpDol4/vvIjkuIDoiKzmlbDmja7ph4/mr5TovoPlpKfnmoTlnLrmma/pmpDol4/mnIDlkI7kuIDpobXvvInvvJrpu5jorqTmmL7npLpcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0xhc3RQYWdlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICog5b2T5pON5L2c6YCJ5oup5qGG5pS55Y+Y5q+P6aG15pi+56S65p2h5pWw5pe25Lya6Kem5Y+R6K+l5LqL5Lu277yM5ZCR5aSW6YCa55+l5b2T5YmN6aG156CB44CB5q+P6aG15pi+56S65p2h5pWw5ZKM5oC75p2h5pWw44CCXHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSByZWFkb25seSBwYWdlTnVtQ2hhbmdlOiBFdmVudEVtaXR0ZXI8VGlQYWdpbmF0aW9uRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxUaVBhZ2luYXRpb25FdmVudD4oKTtcclxuICAgIC8qKlxyXG4gICAgICog5b2T5pON5L2c6YCJ5oup5qGG5pS55Y+Y5q+P6aG15pi+56S65p2h5pWw5oiW5pON5L2c6aG156CB5pS55Y+Y5b2T5YmN6aG156CB5pe25Lya6Kem5Y+R6K+l5LqL5Lu277yM5ZCR5aSW6YCa55+l5b2T5YmN6aG156CB44CB5q+P6aG15pi+56S65p2h5pWw5ZKM5oC75p2h5pWw44CCXHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSByZWFkb25seSBwYWdlVXBkYXRlOiBFdmVudEVtaXR0ZXI8VGlQYWdpbmF0aW9uRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxUaVBhZ2luYXRpb25FdmVudD4oKTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCdtaW5pJywgeyBzdGF0aWM6IHRydWUgfSkgbWluaTogVGVtcGxhdGVSZWY8YW55PiA9IHVuZGVmaW5lZDtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dCcpIGlucHV0UmVmOiBFbGVtZW50UmVmO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDpnZ5taW5p57G75Z6L77yac2VsZWN05LiL5ouJ57uE5Lu2XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpdGVtc1BlclBhZ2U6IGFueTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogbWluaeexu+Wei++8mnNlbGVjdOS4i+aLiee7hOS7tlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXRlbXNNaW5pOiBhbnk7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOeUqOaIt+i+k+WFpeWNs+Wwhui3s+i9rOeahOmhteeggVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ290b1BhZ2U6IHsgcGFnZT86IGFueSB9ID0ge307XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOmhteeggeWIl+ihqFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcGFnZXM6IEFycmF5PHsga2V5OiBhbnksIGFjdGl2ZTogYm9vbGVhbiB9PjtcclxuICAgIHByaXZhdGUgaGlkZVBhZ2U6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdG90YWxQYWdlTnVtOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG9sZEN1cnJlbnRQYWdlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG9sZFRvdGFsTnVtYmVyOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG9sZFNlbGVjdGVkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG9sZFNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBwcml2YXRlIHVwZGF0ZUZvY3VzYWJsZUVsZW1zOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0UGFnZVNpemU6IFRpUGFnZVNpemVDb25maWcgPSB7XHJcbiAgICAgIG9wdGlvbnM6IFsxMCwgMjAsIDUwXSwgLy8g5LiL5ouJ6YCJ6aG55YiX6KGoXHJcbiAgICAgIHNpemU6IDEwLCAvLyDpu5jorqTmr4/pobXmmL7npLoxMOadoVxyXG4gICAgICB3aWR0aDogJzYwcHgnLCAvLyBzZWxlY3Tlrr3luqZcclxuICAgICAgaGlkZTogZmFsc2UgLy8g6K6+572u5piv5ZCm5Zyo6aG16Z2i5LiK6ZqQ6JeP5q+P6aG15pi+56S65p2h5pWw6YCJ6aG577ya5LiL5ouJ5YiX6KGoXHJcbiAgICB9O1xyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHJlbmRlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIGhvc3RSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgICAgICAgICBAT3B0aW9uYWwoKSBwcml2YXRlIHRhYmxlOiBUaVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBzZWxlY3Q6IFRpU2VsZWN0Q29tcG9uZW50KSB7XHJcbiAgICAgIHN1cGVyKGhvc3RSZWYsIHJlbmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5Yib5bu65q+P5LiA5Liq6aG156CB5a+55bqU55qE5pWw5o2uXHJcbiAgICAgKiBAcGFyYW1zIGtleSDpobXnoIHmmL7npLrvvIzkuLrmlbDlrZfmiJbogIXmmK9cIsK3wrfCt1wiXHJcbiAgICAgKiBAcGFyYW1zIGlzQWN0aXZlIOaYr+WQpuS4uuW9k+WJjea/gOa0u+mhtVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBtYWtlUGFnZShrZXk6IGFueSwgaXNBY3RpdmU6IGJvb2xlYW4pOiB7IGtleTogYW55LCBhY3RpdmU6IGJvb2xlYW4gfSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAga2V5LFxyXG4gICAgICAgIGFjdGl2ZTogaXNBY3RpdmVcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgLy8g57uE5Lu25a+55aSW5ZCE5Liq5o6l5Y+j55qE5Yid5aeL5YyW5aSE55CGXHJcbiAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgdGhpcy5yZW5kZXJQYWdlKCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5pc1dpdGhUYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy50YWJsZS5wYWdpbmF0aW9uU3ViamVjdC5zdWJzY3JpYmUoKHZhbHVlOiB7IHRvdGFsTnVtYmVyPzogbnVtYmVyLCBjdXJyZW50UGFnZT86IG51bWJlciB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVV0aWwuaXNVbmRlZmluZWQodmFsdWUudG90YWxOdW1iZXIpICYmIHZhbHVlLnRvdGFsTnVtYmVyICE9PSB0aGlzLnRvdGFsTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbE51bWJlciA9IHZhbHVlLnRvdGFsTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVyaWZ5Q3VycmVudFBhZ2UodGhpcy5pdGVtc1BlclBhZ2Uuc2VsZWN0ZWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxOdW1iZXJDaGFuZ2UuZW1pdCh0aGlzLnRvdGFsTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIVV0aWwuaXNVbmRlZmluZWQodmFsdWUuY3VycmVudFBhZ2UpICYmIHZhbHVlLmN1cnJlbnRQYWdlICE9PSB0aGlzLmN1cnJlbnRQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbHVlLmN1cnJlbnRQYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VDaGFuZ2UuZW1pdCh0aGlzLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOihqOagvOiusOW/hlxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZyb21TdG9yYWdlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZWxlY3TkuIvmi4npnaLmnb/vvIhkcm9wc2VhcmNo77yJ5Lit5L2/55So5YiG6aG1XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0LnBhZ2luYXRpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdC5kcm9wc2VhcmNoQ29tLnBhZ2luYXRpb24gPSB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRQYWdlT2JqOiBTaW1wbGVDaGFuZ2UgPSBjaGFuZ2VzWydjdXJyZW50UGFnZSddO1xyXG4gICAgICBjb25zdCB0b3RhbE51bWJlck9iajogU2ltcGxlQ2hhbmdlID0gY2hhbmdlc1sndG90YWxOdW1iZXInXTtcclxuICAgICAgaWYgKChjdXJyZW50UGFnZU9iaiAmJiAhY3VycmVudFBhZ2VPYmouZmlyc3RDaGFuZ2UpIHx8ICh0b3RhbE51bWJlck9iaiAmJiAhdG90YWxOdW1iZXJPYmouZmlyc3RDaGFuZ2UpKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlDdXJyZW50UGFnZSh0aGlzLml0ZW1zUGVyUGFnZS5zZWxlY3RlZCwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0RvQ2hlY2soKTogdm9pZCB7XHJcbiAgICAgIC8vIOebkeWQrOW8gOWPkeiAheiuvue9rueahHBhZ2VTaXplLnNpemXnmoTmlLnlj5hcclxuICAgICAgaWYgKCFVdGlsLmlzVW5kZWZpbmVkKHRoaXMucGFnZVNpemUpICYmIHRoaXMucGFnZVNpemUuc2l6ZSAhPT0gdGhpcy5vbGRTaXplKSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXg6IG51bWJlciA9IHRoaXMuaXRlbXNQZXJQYWdlLm9wdGlvbnMuaW5kZXhPZih0aGlzLnBhZ2VTaXplLnNpemUpO1xyXG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMuaXRlbXNQZXJQYWdlLnNlbGVjdGVkID0gdGhpcy5pdGVtc1BlclBhZ2Uub3B0aW9uc1tpbmRleF07XHJcbiAgICAgICAgICB0aGlzLnZlcmlmeUN1cnJlbnRQYWdlKHRoaXMuaXRlbXNQZXJQYWdlLnNlbGVjdGVkLCB0cnVlKTtcclxuICAgICAgICAgIHRoaXMub2xkU2l6ZSA9IHRoaXMucGFnZVNpemUuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm9sZFRvdGFsTnVtYmVyICE9PSB0aGlzLnRvdGFsTnVtYmVyIHx8IHRoaXMuaXRlbXNQZXJQYWdlLnNlbGVjdGVkICE9PSB0aGlzLm9sZFNlbGVjdGVkIHx8XHJcbiAgICAgICAgdGhpcy5vbGRDdXJyZW50UGFnZSAhPT0gdGhpcy5jdXJyZW50UGFnZSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyUGFnZSgpO1xyXG4gICAgICAgIHRoaXMub2xkVG90YWxOdW1iZXIgPSB0aGlzLnRvdGFsTnVtYmVyO1xyXG4gICAgICAgIHRoaXMub2xkU2VsZWN0ZWQgPSB0aGlzLml0ZW1zUGVyUGFnZS5zZWxlY3RlZDtcclxuICAgICAgICB0aGlzLm9sZEN1cnJlbnRQYWdlID0gdGhpcy5jdXJyZW50UGFnZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZvY3VzYWJsZUVsZW1zID0gdHJ1ZTsgLy8gc2VsZWN05L2/55So6L+H6L+Z5Liq5Y+Y6YeP5ZCO77yM5Lya6YeN572u5Li6ZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xyXG4gICAgICAvLyBzZWxlY3TkuK3kvb/nlKjnmoTliIbpobXkuLpkZWZhdWx057G75Z6L5LiU5LiN5bim5bem6L65c2VsZWN077yM5omA5Lul5q2k5aSE6ZmQ5a6adHlwZSA9PT0gJ2RlZmF1bHQnXHJcbiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdkZWZhdWx0JyAmJiB0aGlzLnVwZGF0ZUZvY3VzYWJsZUVsZW1zKSB7XHJcbiAgICAgICAgLy8g5L+u5aSNU1NS5oql6ZSZ77yaRVJST1IgVHlwZUVycm9yOiB0aGlzLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCguLi4pIGlzIG5vdCBhIGZ1bmN0aW9uIG9yIGl0cyByZXR1cm4gdmFsdWUgaXMgbm90IGl0ZXJhYmxlXHJcbiAgICAgICAgLy8gdGhpcy5zZXRGb2N1c2FibGVFbGVtcyhbLi4uKHRoaXMubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkucXVlcnlTZWxlY3RvckFsbCgnYScpXSk7XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c2FibGVFbGVtcyhBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYScpKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaVsOaNruWIneWni+WMllxyXG4gICAgcHJpdmF0ZSBpbml0RGF0YSgpOiB2b2lkIHtcclxuICAgICAgLy8g5oC75p2h5pWw5pWw5a2X5Zu96ZmF5YyW5aSE55CG77yM5ou85o6l5oiQIC0tLT4g5oC75p2h5pWwOiDmnaHmlbBcclxuICAgICAgdGhpcy5zZXRUb3RhbE51bWJlckZvcm1hdCgpO1xyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW6I635Y+WaXRlbXNQZXJQYWdl77yac2VsZWN057uE5Lu25omA6ZyA55qE5bGe5oCnXHJcbiAgICAgIHRoaXMuaXRlbXNQZXJQYWdlID0gdGhpcy5nZXRGb3JtYXRlZFNpemUoKTtcclxuXHJcbiAgICAgIHRoaXMudmVyaWZ5Q3VycmVudFBhZ2UodGhpcy5pdGVtc1BlclBhZ2Uuc2VsZWN0ZWQsIHRydWUpO1xyXG5cclxuICAgICAgdGhpcy5vbGRDdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2U7XHJcbiAgICAgIHRoaXMub2xkVG90YWxOdW1iZXIgPSB0aGlzLnRvdGFsTnVtYmVyO1xyXG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLml0ZW1zUGVyUGFnZS5zZWxlY3RlZDtcclxuICAgICAgdGhpcy5vbGRTZWxlY3RlZCA9IHRoaXMuaXRlbXNQZXJQYWdlLnNlbGVjdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaYr+WQpuacieihqOagvOW9k+WJjemhteiusOW/hlxyXG4gICAgcHJpdmF0ZSBpc1N0b3JhZ2VDdXJyZW50UGFnZSgpOiBib29sZWFuIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBtYXgtbGluZS1sZW5ndGhcclxuICAgICAgcmV0dXJuIHRoaXMudGFibGUuc3RvcmFnZUlkICYmICh0aGlzLnRhYmxlLnN0b3JhZ2VDb25maWcucGFnaW5hdGlvbiA9PT0gdHJ1ZSB8fCAodGhpcy50YWJsZS5zdG9yYWdlQ29uZmlnLnBhZ2luYXRpb24gJiYgdGhpcy50YWJsZS5zdG9yYWdlQ29uZmlnLnBhZ2luYXRpb25bJ2N1cnJlbnRQYWdlJ10gPT09IHRydWUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmmK/lkKbmnInooajmoLzmr4/pobXkuKrmlbDorrDlv4ZcclxuICAgIHByaXZhdGUgaXNTdG9yYWdlSXRlbXNQZXJQYWdlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG1heC1saW5lLWxlbmd0aFxyXG4gICAgICByZXR1cm4gdGhpcy50YWJsZS5zdG9yYWdlSWQgJiYgKHRoaXMudGFibGUuc3RvcmFnZUNvbmZpZy5wYWdpbmF0aW9uID09PSB0cnVlIHx8ICh0aGlzLnRhYmxlLnN0b3JhZ2VDb25maWcucGFnaW5hdGlvbiAmJiB0aGlzLnRhYmxlLnN0b3JhZ2VDb25maWcucGFnaW5hdGlvblsnaXRlbXNQZXJQYWdlJ10gPT09IHRydWUpKTtcclxuICAgIH1cclxuICAgIC8vIOWkhOeQhuihqOagvOiusOW/hlxyXG4gICAgcHJpdmF0ZSB1cGRhdGVGcm9tU3RvcmFnZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyDkv67lpI1TU1LmiqXplJnvvJpFUlJPUiBUeXBlRXJyb3I6IENhbm5vdCByZWFkIHByb3BlcnR5ICdjdXJyZW50UGFnZScgb2YgdW5kZWZpbmVkXHJcbiAgICAgICAgLy8g5b2T5YmN6aG1XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9yYWdlQ3VycmVudFBhZ2UoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZTogbnVtYmVyID0gdGhpcy50YWJsZS5zZXNzaW9uU3RvcmFnZVN0YXRlICYmIHRoaXMudGFibGUuc2Vzc2lvblN0b3JhZ2VTdGF0ZS5jdXJyZW50UGFnZTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGN1cnJlbnRQYWdlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUNoYW5nZS5lbWl0KGN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS/ruWkjVNTUumUmeivr++8mkVSUk9SIFR5cGVFcnJvcjogQ2Fubm90IHJlYWQgcHJvcGVydHkgJ2l0ZW1zUGVyUGFnZScgb2YgdW5kZWZpbmVkXHJcbiAgICAgICAgLy8g5q+P6aG15p2h5pWwXHJcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9yYWdlSXRlbXNQZXJQYWdlKCkpIHtcclxuICAgICAgICAgIGNvbnN0IGl0ZW1zUGVyUGFnZTogbnVtYmVyID0gdGhpcy50YWJsZS5sb2NhbFN0b3JhZ2VTdGF0ZSAmJiB0aGlzLnRhYmxlLmxvY2FsU3RvcmFnZVN0YXRlLml0ZW1zUGVyUGFnZTtcclxuICAgICAgICAgIGlmIChpdGVtc1BlclBhZ2UgPiAwKSB7XHJcbiAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGl0ZW1zUGVyUGFnZSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVNpemUuc2l6ZSA9IGl0ZW1zUGVyUGFnZTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgcGFnaW5hdGlvbjogVGlQYWdpbmF0aW9uRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSxcclxuICAgICAgICAgICAgICAgICAgICAgIHNpemU6IGl0ZW1zUGVyUGFnZSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRvdGFsTnVtYmVyOiB0aGlzLnRvdGFsTnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGFnZU51bUNoYW5nZS5lbWl0KHBhZ2luYXRpb24pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7mjqXlj6PphY3nva7mnaXmuLLmn5PpobXpnaJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZW5kZXJQYWdlKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy50eXBlID09PSAnbWluaScpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ01pbmkoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBnb3Rv6aG156CB5LiO5b2T5YmN6aG156CB5L+d5oyB5LiA6Ie0XHJcbiAgICAgICAgdGhpcy5nb3RvUGFnZSA9IHtcclxuICAgICAgICAgIHBhZ2U6IHRoaXMuY3VycmVudFBhZ2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyDpobXnoIHliJfooahcclxuICAgICAgICB0aGlzLnBhZ2VzID0gdGhpcy5nZXRQYWdlcygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDnlKjmiLflvIDlkK/oh6rliqjpmpDol4/lip/og73kuJTml6DpnIDmmL7npLrliIbpobUo6Iul5oC75p2h5pWwID08IOacgOWwj+eahOavj+mhteaYvuekuuadoeaVsCnml7bvvIzliJnkuI3pnIDopoHmmL7npLrliIbpobXml7bvvIzpmpDol4/liIbpobVcclxuICAgICAgLy8g5Yid5aeL5YyWdG90YWxOdW1iZXIgdW5kZWZpbmVkXHJcbiAgICAgIHRoaXMuaGlkZVBhZ2UgPSB0aGlzLmF1dG9IaWRlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChVdGlsLmlzVW5kZWZpbmVkKHRoaXMudG90YWxOdW1iZXIpIHx8IE1hdGgubWluLmFwcGx5KG51bGwsIHRoaXMuaXRlbXNQZXJQYWdlLm9wdGlvbnMpID49IHRoaXMudG90YWxOdW1iZXIpO1xyXG4gICAgICBpZiAodGhpcy5oaWRlUGFnZSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDoi6XliIbpobXkuI50aS10YWJsZemFjeWQiOS9v+eUqO+8jOWImeW9k+WIhumhteabtOaWsOaXtu+8jOinpuWPkXRpLXRhYmxl55qEdXBkYXRlUGFnaW5hdGlvblxyXG4gICAgICAvLyDov5vogIzop6blj5HooajmoLzmm7TmlrDlm57osINcclxuICAgICAgaWYgKHRoaXMuaXNXaXRoVGFibGUoKSkge1xyXG4gICAgICAgIHRoaXMudGFibGUudXBkYXRlUGFnaW5hdGlvbih0aGlzLmN1cnJlbnRQYWdlLCB0aGlzLml0ZW1zUGVyUGFnZS5zZWxlY3RlZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWvueaAu+mhteaVsOi/m+ihjOaVsOWtl+WbvemZheWMluWkhOeQhlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VG90YWxOdW1iZXJGb3JtYXQoKTogc3RyaW5nIHtcclxuICAgICAgLy8g5pWw5a2X5Zu96ZmF5YyW5qC85byP77ya5pW05pWw5L2N5L+d55WZ5pyA5bCP5L2N5pWwLuWwj+aVsOS9jeS/neeVmeacgOWwj+S9jeaVsC3lsI/mlbDkvY3mnIDlpKfkv53nlZnkvY3nva5cclxuICAgICAgY29uc3QgZm9ybWF0VG90YWxOdW1iZXI6IHN0cmluZyA9IFV0aWwuaXNVbmRlZmluZWQodGhpcy50b3RhbE51bWJlcikgPyAnMCcgOiBUaUxvY2FsZUZvcm1hdC5mb3JtYXROdW1iZXIodGhpcy50b3RhbE51bWJlciwgJzEuMC0wJyk7XHJcblxyXG4gICAgICByZXR1cm4gKFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkgYXMgVGlMb2NhbGVXb3JkcykudGlQYWdpbmF0aW9uWyd0b3RhbExhYmVsJ10gKyBmb3JtYXRUb3RhbE51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZvcm1hdGVkU2l6ZSgpOiBhbnkge1xyXG4gICAgICBjb25zdCBzaXplQ29uZmlnOiBUaVBhZ2VTaXplQ29uZmlnID0geyAuLi50aGlzLmRlZmF1bHRQYWdlU2l6ZSwgLi4udGhpcy5wYWdlU2l6ZSB9O1xyXG4gICAgICBsZXQgaW5kZXg6IG51bWJlciA9IHNpemVDb25maWcub3B0aW9ucy5pbmRleE9mKHNpemVDb25maWcuc2l6ZSk7XHJcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5zeW5jUGFnZVNpemUoc2l6ZUNvbmZpZy5vcHRpb25zW2luZGV4XSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc2VsZWN0ZWQ6IHNpemVDb25maWcub3B0aW9uc1tpbmRleF0sIC8vIHNlbGVjdOmAieS4remhuVxyXG4gICAgICAgIG9wdGlvbnM6IHNpemVDb25maWcub3B0aW9ucywgLy8g5q+P6aG15pi+56S65p2h5pWw6YCJ6aG5XHJcbiAgICAgICAgaGlkZTogc2l6ZUNvbmZpZy5oaWRlLCAvLyDmmK/lkKbmmL7npLpcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgd2lkdGg6IHNpemVDb25maWcud2lkdGggLy8g5a695bqm6K6+572uXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZCM5q2l5Y+Y5YyW5byA5Y+R6ICF55qEcGFnZVNpemXmlbDmja5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzeW5jUGFnZVNpemUocGFnZVNpemVOdW06IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5wYWdlU2l6ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMucGFnZVNpemUuc2l6ZSA9IHBhZ2VTaXplTnVtO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlvZPliY3pobXnoIHmmK/lkKbkuLrmnIDlsI/pobXnoIFcclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vUHJldmlvdXMoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQYWdlID09PSBUaVBhZ2luYXRpb25Db21wb25lbnQuTUlOX1BBR0U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlvZPliY3pobXnoIHmmK/lkKbkuLrmnIDlpKfpobXnoIFcclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vTmV4dCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFBhZ2UgPT09IHRoaXMudG90YWxQYWdlTnVtO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5b2T5YmN6aG156CB5piv5ZCm5Li6J8K3wrfCtycg5LiN5Y+v6KKr6IGa54SmXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0VsbGlwc2UocGFnZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiBwYWdlLmtleSA9PT0gJ8K3wrfCtyc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmk43kvZxwYWdlU2l6ZemAieaLqeahhizmr4/pobXmmL7npLrmnaHmlbDmlLnlj5jml7bop6blj5FcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uU2l6ZUNoYW5nZShwYWdlU2l6ZU51bTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc3luY1BhZ2VTaXplKHBhZ2VTaXplTnVtKTtcclxuICAgICAgdGhpcy52ZXJpZnlDdXJyZW50UGFnZShwYWdlU2l6ZU51bSwgZmFsc2UpO1xyXG4gICAgICBjb25zdCBwYWdpbmF0aW9uOiBUaVBhZ2luYXRpb25FdmVudCA9IHtcclxuICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSxcclxuICAgICAgICBzaXplOiBwYWdlU2l6ZU51bSxcclxuICAgICAgICB0b3RhbE51bWJlcjogdGhpcy50b3RhbE51bWJlclxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnBhZ2VOdW1DaGFuZ2UuZW1pdChwYWdpbmF0aW9uKTtcclxuICAgICAgdGhpcy5wYWdlVXBkYXRlLmVtaXQocGFnaW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6YCa6L+H5pON5L2c6YCJ5oup5p+Q5LiA6aG1XHJcbiAgICBwcml2YXRlIHNlbGVjdFBhZ2UocGFnZTogYW55LCBldnQ/OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAvLyB0aW55MuS4reatpOWkhOmYu+atomHmoIfnrb7mtY/op4jlmajpu5jorqTkuovku7ZcclxuICAgICAgaWYgKCFVdGlsLmlzVW5kZWZpbmVkKGV2dCkpIHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkUGFnZTogbnVtYmVyID0gcGFyc2VJbnQocGFnZSwgMTApO1xyXG4gICAgICBpZiAoc2VsZWN0ZWRQYWdlICE9PSB0aGlzLmN1cnJlbnRQYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHNlbGVjdGVkUGFnZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQ2hhbmdlLmVtaXQodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgdGhpcy5wYWdlVXBkYXRlLmVtaXQoe1xyXG4gICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsXHJcbiAgICAgICAgICBzaXplOiB0aGlzLml0ZW1zUGVyUGFnZS5zZWxlY3RlZCxcclxuICAgICAgICAgIHRvdGFsTnVtYmVyOiB0aGlzLnRvdGFsTnVtYmVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+aAu+mhteaVsFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVRvdGFsUGFnZXMocGFnZVNpemVOdW06IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIGNvbnN0IHRvdGFsUGFnZXM6IG51bWJlciA9IE1hdGguY2VpbCh0aGlzLnRvdGFsTnVtYmVyIC8gcGFnZVNpemVOdW0pO1xyXG5cclxuICAgICAgcmV0dXJuIE1hdGgubWF4KHRvdGFsUGFnZXMgfHwgMCwgMSk7IC8vIOW9k3RvdGFsUGFnZXPmmK91bmRlZmluZWTml7bvvIzlj5YwXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu4Too4VtaW5p57G75Z6L5pe25qih5p2/6ZyA6KaB55qE5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uZmlnTWluaSgpOiB2b2lkIHtcclxuICAgICAgY29uc3Qgb3B0aW9uczogQXJyYXk8VGlQYWdlSXRlbT4gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMTsgaSA8PSB0aGlzLnRvdGFsUGFnZU51bTsgaSsrKSB7XHJcbiAgICAgICAgb3B0aW9ucy5wdXNoKHtcclxuICAgICAgICAgIGlkOiBgJHtpfWAsXHJcbiAgICAgICAgICBsYWJlbDogYCR7aX0vJHt0aGlzLnRvdGFsUGFnZU51bX1gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pdGVtc01pbmkgPSB7XHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICBzZWxlY3RlZDogb3B0aW9uc1t0aGlzLmN1cnJlbnRQYWdlIC0gMV0sXHJcbiAgICAgICAgY2hhbmdlOiAob3B0aW9uOiBUaVBhZ2VJdGVtKTogdm9pZCA9PiB7IC8vIOmAiemhueaUueWPmOaXtu+8jOS/ruaUuemAieS4remhtVxyXG4gICAgICAgICAgdGhpcy5zZWxlY3RQYWdlKG9wdGlvbi5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOagueaNruavj+mhteaYvuekuuadoeaVsOWPiuaVsOaNruaAu+adoeaVsOiOt+WPlumhteeggeWIl+ihqFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFBhZ2VzKCk6IEFycmF5PHtrZXk6IGFueSwgYWN0aXZlOiBib29sZWFufT4ge1xyXG4gICAgICBjb25zdCBzdGFydEFuZEVuZFBhZ2U6IEFycmF5PG51bWJlcj4gPSB0aGlzLmdldEludGVydmFsKCk7IC8vIOiOt+W+l+aYvuekuueahOi1t+Wni+WSjOe7k+adn+mhtVxyXG4gICAgICBjb25zdCBzdGFydFBhZ051bTogbnVtYmVyID0gc3RhcnRBbmRFbmRQYWdlWzBdO1xyXG4gICAgICBjb25zdCBlbmRQYWdOdW06IG51bWJlciA9IHN0YXJ0QW5kRW5kUGFnZVsxXTtcclxuICAgICAgY29uc3QgcGFnZXM6IEFycmF5PHtrZXk6IGFueSwgYWN0aXZlOiBib29sZWFufT4gPSBbXTtcclxuICAgICAgY29uc3QgcmVzdFBhZ2VOdW06IG51bWJlciA9IHRoaXMudG90YWxQYWdlTnVtIC0gdGhpcy5jdXJyZW50UGFnZTsgLy8g5Ymp5L2Z6aG15pWwXHJcblxyXG4gICAgICAvLyDlj6rmnIkx6aG155qE5oOF5Ya1XHJcbiAgICAgIGlmICh0aGlzLnRvdGFsUGFnZU51bSA9PT0gMSkge1xyXG4gICAgICAgICAgcGFnZXMucHVzaChUaVBhZ2luYXRpb25Db21wb25lbnQubWFrZVBhZ2UoMSwgdHJ1ZSkpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBwYWdlcztcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5b2T5oC76aG15pWw5aSn5LqOOO+8jOW5tuS4lOS4remXtOi/nue7reaMiemSrueahOi1t+Wni+S9jee9ruayoeacieWSjOesrDHpobXnm7jov57ml7bvvIzliJvlu7rnrKwx6aG15oyJ6ZKu5ZKM55yB55Wl5Y+3XHJcbiAgICAgIGlmIChzdGFydFBhZ051bSA+IDIgJiYgdGhpcy50b3RhbFBhZ2VOdW0gPiA4KSB7XHJcbiAgICAgICAgICBwYWdlcy5wdXNoKFRpUGFnaW5hdGlvbkNvbXBvbmVudC5tYWtlUGFnZSgxLCB0aGlzLmN1cnJlbnRQYWdlID09PSAxKSk7XHJcbiAgICAgICAgICBwYWdlcy5wdXNoKFRpUGFnaW5hdGlvbkNvbXBvbmVudC5tYWtlUGFnZSgnwrfCt8K3JywgZmFsc2UpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5Yib5bu65Lit6Ze06aG15oyJ6ZKuXHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IHN0YXJ0UGFnTnVtOyBpIDw9IGVuZFBhZ051bTsgaSsrKSB7XHJcbiAgICAgICAgICBwYWdlcy5wdXNoKFRpUGFnaW5hdGlvbkNvbXBvbmVudC5tYWtlUGFnZShpLCB0aGlzLmN1cnJlbnRQYWdlID09PSBpKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOW9k+aAu+mhteaVsOWkp+S6jjjvvIzlubbkuJTkuK3pl7Tov57nu63mjInpkq7nmoTnu5PmnZ/kvY3nva7msqHmnInlkozmnIDlkI7kuIDpobXmjInpkq7nm7jov57ml7bvvIzliJvlu7rnnIHnlaXlj7dcclxuICAgICAgLy8g5b2T5oC76aG15pWw5aSn5LqOOO+8jOW5tuS4lOacgOWQjuS4gOmhtemakOiXj+S4lOS4jeaYr+WQjuWbm+mhteaXtu+8jOWIm+W7uuecgeeVpeWPt1xyXG4gICAgICBpZiAodGhpcy50b3RhbFBhZ2VOdW0gPiA4ICYmICh0aGlzLnNob3dMYXN0UGFnZSAmJiBlbmRQYWdOdW0gPCAodGhpcy50b3RhbFBhZ2VOdW0gLSAxKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5zaG93TGFzdFBhZ2UgJiYgcmVzdFBhZ2VOdW0gPiAzKSkge1xyXG4gICAgICAgICAgcGFnZXMucHVzaChUaVBhZ2luYXRpb25Db21wb25lbnQubWFrZVBhZ2UoJ8K3wrfCtycsIGZhbHNlKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOacgOWQjuS4gOmhtemakOiXj++8muWmguaenOS4remXtOi/nue7reaMiemSrueahOe7k+adn+S9jee9ruS4uuaAu+mhteaVsOeahOWJjeS4gOmhteS4lOW9k+WJjemhteaYr+WQjuWbm+mhteaXtu+8jOWIm+W7uuacgOWQjuS4gOmhtVxyXG4gICAgICAvLyDmnIDlkI7kuIDpobXkuI3pmpDol4/vvJrlpoLmnpzkuK3pl7Tov57nu63mjInpkq7nmoTnu5PmnZ/kvY3nva7vvIzkuI3mmK/mnIDlkI7kuIDpobXmjInpkq7ml7bvvIzliJvlu7rmnIDlkI7kuIDpobXmjInpkq5cclxuICAgICAgaWYgKCghdGhpcy5zaG93TGFzdFBhZ2UgJiYgZW5kUGFnTnVtID09PSB0aGlzLnRvdGFsUGFnZU51bSAtIDEgJiYgcmVzdFBhZ2VOdW0gPD0gMykgfHxcclxuICAgICAgICAgICAodGhpcy5zaG93TGFzdFBhZ2UgJiYgZW5kUGFnTnVtIDwgdGhpcy50b3RhbFBhZ2VOdW0pKSB7XHJcbiAgICAgICAgcGFnZXMucHVzaChUaVBhZ2luYXRpb25Db21wb25lbnQubWFrZVBhZ2UodGhpcy50b3RhbFBhZ2VOdW0sIHRoaXMuY3VycmVudFBhZ2UgPT09IHRoaXMudG90YWxQYWdlTnVtKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBwYWdlcztcclxuICAgIH1cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uIOagueaNruW9k+WJjemhteeggeWSjOimgeaYvuekuueahOaVsOebru+8jOiuoeeul+WIhumhtemTvuaOpeeahOi1t+Wni+mhtVxyXG4gICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRJbnRlcnZhbCgpOiBBcnJheTxudW1iZXI+IHtcclxuICAgICAgbGV0IHN0YXJ0OiBudW1iZXI7XHJcbiAgICAgIGxldCBlbmQ6IG51bWJlcjtcclxuICAgICAgLy8gMS7moLnmja5BZ2lsZeinhOiMg++8mumhteaVsOWwj+S6juetieS6jjjvvIzotbfjgIHlp4vmjInpkq7lgLzliIbliKvorr7kuLox5ZKM5pyA5aSn6aG15pWw77yaMSAtIOaAu+aVsFxyXG4gICAgICBpZiAodGhpcy50b3RhbFBhZ2VOdW0gPD0gOCkge1xyXG4gICAgICAgICAgc3RhcnQgPSAxO1xyXG4gICAgICAgICAgZW5kID0gdGhpcy50b3RhbFBhZ2VOdW07XHJcblxyXG4gICAgICAgICAgcmV0dXJuIFtzdGFydCwgZW5kXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gMi7mgLvpobXmlbDlpKfkuo4477yM5b2T5YmN6aG55Li65YmN5LiJ6aG177yaMSAtIDUgLyAxIC0gNlxyXG4gICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8PSAzKSB7XHJcbiAgICAgICAgICBzdGFydCA9IDE7XHJcbiAgICAgICAgICBlbmQgPSA1O1xyXG4gICAgICAgICAgaWYgKCF0aGlzLnNob3dMYXN0UGFnZSkge1xyXG4gICAgICAgICAgICBlbmQgPSA2O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBbc3RhcnQsIGVuZF07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDMu5oC76aG15pWw5aSn5LqOOO+8jOW9k+WJjemhueaYr+WQjjTpobXvvJrmgLvmlbAtNCAtIOaAu+aVsFxyXG4gICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA+IHRoaXMudG90YWxQYWdlTnVtIC0gMykge1xyXG4gICAgICAgICAgc3RhcnQgPSB0aGlzLnRvdGFsUGFnZU51bSAtIDQ7XHJcbiAgICAgICAgICBlbmQgPSB0aGlzLnRvdGFsUGFnZU51bTtcclxuXHJcbiAgICAgICAgICByZXR1cm4gW3N0YXJ0LCBlbmRdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyA0LuaAu+mhteaVsOWkp+S6jjjvvIzlvZPliY3pobnkuI3lnKjliY3kuInpobXvvIzlkI7kuInpobXvvJrmmL7npLrkuK3pl7Q05Liq5oyJ6ZKuXHJcbiAgICAgIHN0YXJ0ID0gdGhpcy5jdXJyZW50UGFnZSAtIDE7XHJcbiAgICAgIGVuZCA9IHRoaXMuY3VycmVudFBhZ2UgKyAyO1xyXG5cclxuICAgICAgLy8g5LiA6Iis5pWw5o2u6YeP5q+U6L6D5aSn55qE5Zy65pmv6ZqQ6JeP5pyA5ZCO5LiA6aG15pe277yM5pi+56S65Lit6Ze0NeS4quaMiemSrlxyXG4gICAgICBpZighdGhpcy5zaG93TGFzdFBhZ2UpIHtcclxuICAgICAgICBlbmQgPSB0aGlzLmN1cnJlbnRQYWdlICsgMztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFtzdGFydCwgZW5kXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWQiOazleeahOaWsOmhteeggVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHZlcmlmeUN1cnJlbnRQYWdlKHBhZ2VTaXplTnVtOiBudW1iZXIsIHRyaWdnZXJQYWdlVXBkYXRlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHRoaXMudG90YWxQYWdlTnVtID0gdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzKHBhZ2VTaXplTnVtKTtcclxuICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPiB0aGlzLnRvdGFsUGFnZU51bSB8fCB0aGlzLmN1cnJlbnRQYWdlIDwgVGlQYWdpbmF0aW9uQ29tcG9uZW50Lk1JTl9QQUdFKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgPiB0aGlzLnRvdGFsUGFnZU51bSA/IHRoaXMudG90YWxQYWdlTnVtIDogVGlQYWdpbmF0aW9uQ29tcG9uZW50Lk1JTl9QQUdFO1xyXG4gICAgICAgIGlmICh0cmlnZ2VyUGFnZVVwZGF0ZSkge1xyXG4gICAgICAgICAgdGhpcy5wYWdlVXBkYXRlLmVtaXQoe1xyXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSxcclxuICAgICAgICAgICAgc2l6ZTogcGFnZVNpemVOdW0sXHJcbiAgICAgICAgICAgIHRvdGFsTnVtYmVyOiB0aGlzLnRvdGFsTnVtYmVyXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQ2hhbmdlLmVtaXQodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUNoYW5nZS5lbWl0KHRoaXMuY3VycmVudFBhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6L6T5YWl6Lez6L2s6aG156CBZW50ZXLlv6vmjbfplK7lpITnkIZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGVudGVyUGFnZUhhbmRsZXIoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmdvdG9QYWdlSGFuZGxlcihlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOagueaNruimgei3s+i9rOeahOmhteegge+8jOWQjOatpeS/ruaUueW9k+WJjemhteeggVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ290b1BhZ2VIYW5kbGVyKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAgIC8vIOW9k+i+k+WFpeWAvOS4uuS4jeWQiOazleaXtuWkhOeQhlxyXG4gICAgICBpZiAodGhpcy5nb3RvUGFnZS5wYWdlIDwgVGlQYWdpbmF0aW9uQ29tcG9uZW50Lk1JTl9QQUdFIHx8IHRoaXMuZ290b1BhZ2UucGFnZSA+IHRoaXMudG90YWxQYWdlTnVtKSB7XHJcbiAgICAgICAgdGhpcy5nb3RvUGFnZS5wYWdlID0gdGhpcy5jdXJyZW50UGFnZTtcclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5nb3RvUGFnZS5wYWdlICE9PSB0aGlzLmN1cnJlbnRQYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHRoaXMuZ290b1BhZ2UucGFnZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQ2hhbmdlLmVtaXQodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgdGhpcy5wYWdlVXBkYXRlLmVtaXQoe1xyXG4gICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsXHJcbiAgICAgICAgICBzaXplOiB0aGlzLml0ZW1zUGVyUGFnZS5zZWxlY3RlZCxcclxuICAgICAgICAgIHRvdGFsTnVtYmVyOiB0aGlzLnRvdGFsTnVtYmVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOS4iuS4gOmhteaMiemSrueahOeCueWHu+S6i+S7tlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25QcmV2Q2xpY2soZXZlbnQ6IEV2ZW50KTogYW55IHtcclxuICAgICAgcmV0dXJuICF0aGlzLm5vUHJldmlvdXMoKSAmJiB0aGlzLnNlbGVjdFBhZ2UodGhpcy5jdXJyZW50UGFnZSAtIDEsIGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOmhteeggeeCueWHu+S6i+S7tlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25QYWdlQ2xpY2socGFnZTogYW55LCBldmVudDogRXZlbnQpOiBhbnkge1xyXG4gICAgICByZXR1cm4gIXRoaXMuaXNFbGxpcHNlKHBhZ2UpICYmIHRoaXMuc2VsZWN0UGFnZShwYWdlLmtleSwgZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5LiL5LiA6aG15oyJ6ZKu55qE54K55Ye75LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbk5leHRDbGljayhldmVudDogRXZlbnQpOiBhbnkge1xyXG4gICAgICByZXR1cm4gIXRoaXMubm9OZXh0KCkgJiYgdGhpcy5zZWxlY3RQYWdlKHRoaXMuY3VycmVudFBhZ2UgKyAxLCBldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiBpbnB1dOi+k+WFpeahhm1vZGVsY2hhbmdl5LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBuZ01vZGVsQ2hhbmdlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xyXG4gICAgICAgIHRoaXMuZ290b1BhZ2UucGFnZSA9ICcnO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5ld1BhZ2U6IG51bWJlciA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcbiAgICAgIGlmIChpc05hTihuZXdQYWdlKSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyLnNldFByb3BlcnR5KHRoaXMuaW5wdXRSZWYubmF0aXZlRWxlbWVudCwgJ3ZhbHVlJywgdGhpcy5nb3RvUGFnZS5wYWdlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmdvdG9QYWdlLnBhZ2UgPSBuZXdQYWdlO1xyXG4gICAgICB0aGlzLnJlbmRlci5zZXRQcm9wZXJ0eSh0aGlzLmlucHV0UmVmLm5hdGl2ZUVsZW1lbnQsICd2YWx1ZScsIHRoaXMuZ290b1BhZ2UucGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFja0J5Rm4oaW5kZXg6IG51bWJlciwgaXRlbTogYW55KTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIGl0ZW0ua2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNXaXRoVGFibGUoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRhYmxlICYmIHRoaXMucmVuZGVyLnBhcmVudE5vZGUodGhpcy5uYXRpdmVFbGVtZW50KS50YWdOYW1lID09PSAnVEktVEFCTEUnO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==