import { ChangeDetectorRef, Component, ContentChild, ElementRef, EventEmitter, HostListener, Input, IterableDiffers, Output, Renderer2, SecurityContext, TemplateRef, ViewChild } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { Util } from '../../utils/Util';
import { TiRenderer } from '../../services/renderer/TiRenderer';
import { TiFormComponent } from '../base/TiBaseModule';
/**
 * Slider滑块组件
 *
 * 滑块组件，通过操作组件选择指示范围
 *
 * <example-url>../tiny3demo/#/slider/slider-all</example-url>
 */
export class TiSliderComponent extends TiFormComponent {
    constructor(tiRenderer, iterableDiffers, hostRef, renderer2, changeDetectorRef, domSanitizer) {
        super(hostRef, renderer2);
        this.tiRenderer = tiRenderer;
        this.iterableDiffers = iterableDiffers;
        this.hostRef = hostRef;
        this.renderer2 = renderer2;
        this.changeDetectorRef = changeDetectorRef;
        this.domSanitizer = domSanitizer;
        /**
         * 最小范围值
         */
        this.min = 0;
        /**
         * 最大范围值
         */
        this.max = 10;
        /**
         * 滑动步长，滑块每次跳变的步长（若要实现只在刻度上跳变的效果，step需严格和刻度间距一致）
         */
        this.step = 1;
        /**
         * 设置滑块的tip显示方式：取值"always"，"auto"（默认值）
         *
         * always：tip一直显示
         *
         * auto：鼠标移到滑块上出tip
         */
        this.tipMode = 'auto';
        /**
         * 滑块停止后值发生改变时触发的事件
         *
         * 3.1.0新增
         */
        this.changeStop = new EventEmitter();
        this.isDouble = false; // 判断是否是双滑块，默认是单滑块 false
        this.isTipAutoShow = true; // 判断tip提示是否是自动显示（鼠标操作才显示）,默认true
        // 实现ControlValueAccessor接口--end
        // 组件交互方法集合--start
        /**
         * @ignore
         * Tiny3中不存在下面的问题，用click和mousedown事件都可以（统一使用mousedown事件）
         * 使用mousedown替代click，用于防止拖拽过程中触发click事件导致的滑块滑动
         * 问题场景：min滑块拖动与max滑块重合后，鼠标继续向右移动，此时鼠标抬起，触发click事件，导致max发生移动
         */
        this.hostMousedownEvent = (event) => {
            // 灰化状态或点击pointer时不做处理
            if (this.disabled || this.tiRenderer.hasClass(event.target, 'ti3-slider-pointer')
                || this.tiRenderer.hasClass(event.target, 'ti3-slider-tip')) {
                return;
            }
            this.stepSliderFromClick(event);
        };
        /**
         * @description: 滑块元素的mouseover事件处理函数
         */
        this.tipMouseoverHandle = (event) => {
            if (this.disabled) {
                return;
            }
            this.show(event.target.querySelector('.ti3-slider-tip'));
        };
        /**
         * @description: 滑块元素的mouseleave事件处理函数
         */
        this.tipMouseleaveHandle = (event) => {
            if (this.disabled) {
                return;
            }
            this.hide(event.target.querySelector('.ti3-slider-tip'));
        };
        /**
         * @description: 宿主元素的mousedown事件处理函数
         */
        this.stepSliderFromClick = (event) => {
            const firstTickX = this.trackELe.getBoundingClientRect().left + this.pointerMaxEleWidth / 2;
            const oldModel = this.model;
            let pointerX = event.clientX - firstTickX;
            pointerX = TiSliderComponent.limitValue(pointerX, 0, this.getBarWidth());
            let value = this.positionToValue(pointerX); // 获取value绝对比例值，用于确定滑块移动位置
            // 确定滑动哪个滑块
            let pointer = this.pointerMaxEle;
            if (this.isDouble) {
                const valueMin = TiSliderComponent.splitValueToArray(this.model).valueMin;
                const valueMax = TiSliderComponent.splitValueToArray(this.model).valueMax;
                // 以value中间值为界，在最小值及中间值之间=》左滑块移动；否则=》右滑块移动
                const midValue = (valueMax + valueMin) / 2;
                if ((value >= this.min) && (value < midValue)) {
                    pointer = this.pointerMinEle;
                    this.isMinPointerActive = true;
                }
                else {
                    this.isMinPointerActive = false;
                }
            }
            value = this.getStepValue(value);
            this.setValue(value); // 向外部通知value值
            this.valueToPosition(value, pointer); // 跳至value对应的坐标位置（与step对应）
            if (this.model !== oldModel) {
                this.changeStop.emit(this.model);
            }
        };
        /**
         * @description 拖拽开始执行的事件
         * @param: ui 拖拽助手 {helper：表示被拖拽的助手（helper）, position: 助手（helper）的当前 CSS 位置}
         */
        this.dragStartHandle = (ui) => {
            this.dragStartModel = this.model;
            if (this.isDouble) {
                this.isMinPointerActive = !this.tiRenderer.hasClass(ui.helper, 'ti3-slider-pointer-max');
            }
        };
        /**
         * @description 根据拖拽位置更新value值并改变位置呈现
         * @param: ui 拖拽助手 {helper：表示被拖拽的助手（helper）, position: 助手（helper）的当前 CSS 位置}
         */
        this.dragHandle = (ui) => {
            // 设置value值
            const value = this.dragCommonHandle(ui);
            this.setValue(value); // 向外部通知value值
            // 设置tip提示
            if (this.isTipAutoShow) { // 拖拽过程中显示tip提示
                this.show(ui.helper.querySelector('.ti3-slider-tip'));
            }
            this.setTip(ui.helper.querySelector('.ti3-slider-tip'), value); // 设置tip提示值及位置
        };
        /**
         * @description: 鼠标弹起之后：根据拖拽位置跳至step对应的值并设置slider
         * @param: ui 拖拽助手 {helper：表示被拖拽的助手（helper）, position: 助手（helper）的当前 CSS 位置}
         */
        this.dragStopHandle = (ui) => {
            // 设置value值
            const value = this.dragCommonHandle(ui);
            if (this.isTipAutoShow) { // 拖拽停止隐藏tip提示
                this.hide(ui.helper.querySelector('.ti3-slider-tip'));
            }
            this.valueToPosition(value, ui.helper); // 跳至value对应的坐标位置
            if (this.model !== this.dragStartModel) {
                this.changeStop.emit(this.model);
            }
        };
    }
    /**
     * @description: 将value值处理成数组
     * @param: value 需要切割的数组
     */
    static splitValueToArray(value) {
        const arr = (`${value}`).split(';'); // value为number时强转为字符串
        return {
            valueMin: parseFloat(arr[0]),
            valueMax: arr[1] && parseFloat(arr[1])
        };
    }
    /**
     * @description: value值是否超限制
     * @param: value: 判断的value值
     * @param: minValue: 最大值
     * @param: maxValue: 最小值
     */
    static isLimitExceed(value, minValue, maxValue) {
        return value < minValue || value > maxValue;
    }
    /**
     * @description: 当this.scales为函数情况下，转换为ticks数组
     * @param: scaleFormat 被转换的函数
     * @param: minValue 刻度限制的最大值
     * @param: maxValue 刻度限制的最小值
     * @param: step 刻度步长
     */
    static translateScales(scaleFormat, minValue, maxValue, step) {
        const valueLen = (maxValue - minValue) / step;
        const tickArray = [];
        for (let i = 0; i <= valueLen; i++) {
            const stepNValue = step * i + minValue;
            const formatRet = scaleFormat(stepNValue, minValue, maxValue);
            if (Util.isUndefined(formatRet) || Util.isNull(formatRet)) {
                // 为undefined或null情况下，不打点不显示label
                /* tslint:disable:no-null-keyword */
                tickArray.push(null);
            }
            else {
                // 包含为""（打点不显示label）和非""情况（打点且显示label）
                tickArray.push(formatRet);
            }
        }
        return tickArray;
    }
    /**
     * @description: 在范围内限制value数值
     * @param: value 校验的value值
     * @param: min 最小值
     * @param: max 最大值
     * @return: 有效value值
     */
    static limitValue(value, min, max) {
        // fossid整改，采用一种不撞车写法，可读性差一点。
        // 小于min取min，大于max取max，其他不变。
        const res = value < min ? min :
            value > max ? max : value;
        return res;
    }
    /**
     * @description: 将样式数值转化为calc形式的css样式（设置为百分比形式，确保缩放的支持）
     * @param: percent calc百分比
     * @param: subValue calc减去值
     */
    static parseToCalcStyle(percent, subValue) {
        if (Number.isNaN(subValue) || Util.isUndefined(subValue)) {
            return `calc(${percent * 100}%)`;
        }
        return `calc(${percent * 100}% - ${subValue}px)`; // calc中运算符合2边一定要空格
    }
    onResize() {
        this.updateValuePosition(this.model);
    }
    // 组件声明周期钩子--start
    ngOnInit() {
        super.ngOnInit();
        this.initDom();
        this.initVars();
    }
    /**
     * @ignore
     */
    initDom() {
        this.trackELe = this.trackRef.nativeElement;
        this.selectionEle = this.selectionRef.nativeElement;
        this.pointerMinEle = this.pointerMinRef.nativeElement;
        this.pointerMaxEle = this.pointerMaxRef.nativeElement;
        this.tipMinEle = this.tipMinRef.nativeElement;
        this.tipMaxEle = this.tipMaxRef.nativeElement;
    }
    /**
     * @ignore
     */
    initVars() {
        this.step = Number.isNaN(parseFloat(`${this.step}`)) ? 1 : parseFloat(`${this.step}`);
        this.setMinMax();
        // ratios中最大的小数位数
        this.decimalDigit = this.getDecimalDigit();
        // 处理用戶未设置scales或者scales為function情況
        if (!this.scales || !Array.isArray(this.scales)) {
            this.setScales();
        }
        this.setTipConfig();
        // 给tip添加事件（tipMode是 'auto'的场景）
        this.addTipEvent();
        this.dragOptions = {
            axis: 'x',
            start: this.dragStartHandle,
            drag: this.dragHandle,
            stop: this.dragStopHandle
        };
    }
    ngOnChanges(changes) {
        if (changes['scales'] && !changes['scales'].firstChange && !Array.isArray(this.scales)) {
            this.setScales();
            this.updateValuePosition(this.model);
        }
        // 监听最大值最小值变化
        if ((changes['min'] && !changes['min'].firstChange) || (changes['max'] && !changes['max'].firstChange)) {
            this.setMinMax();
        }
    }
    ngAfterViewInit() {
        this.pointerMaxEleWidth = this.pointerMaxEle.offsetWidth;
        this.isVisibleInit = this.pointerMaxEleWidth !== 0;
        this.changeDetectorRef.detectChanges();
    }
    ngAfterViewChecked() {
        // 监听滑块的宽度：处理组件从隐藏到显示定位问题
        if (!this.isVisibleInit) {
            const pointerMaxWidth = this.pointerMaxEle.offsetWidth;
            if (pointerMaxWidth !== 0) {
                this.isVisibleInit = true;
                this.pointerMaxEleWidth = pointerMaxWidth;
                this.updateValuePosition(this.model);
                this.changeDetectorRef.detectChanges();
            }
        }
    }
    ngDoCheck() {
        if (!Array.isArray(this.scales)) {
            return;
        }
        if (!this.scalesDiffer) {
            this.scalesDiffer = this.iterableDiffers.find(this.scales)
                .create();
        }
        const scalesDiffer = this.scalesDiffer.diff(this.scales);
        if (scalesDiffer) {
            this.setScales();
            // 初始化的updateValuePosition在writeValue中执行（writeValue迟于docheck执行）
            if (!Util.isUndefined(this.model)) {
                this.updateValuePosition(this.model);
            }
        }
    }
    // 组件声明周期钩子--end
    // 实现ControlValueAccessor接口
    /**
     * @ignore
     */
    writeValue(value) {
        // TODO: 接口设计重新调整
        // ngModel => value: string | number; // 滑块对应的value值 exp： 单滑块: 15 OR '15' 双滑块 '15;34';
        super.writeValue(value);
        if (!Util.isNull(value) && !Util.isUndefined(value)) {
            // 1.判断是否是双滑块
            this.isDouble = !Util.isUndefined(TiSliderComponent.splitValueToArray(value).valueMax); // 根据value形式确定单滑块/双滑块
            if (Util.isUndefined(this.onModelChange)) {
                // 在reactive-form中使用，初始化赋值调用writeValue时，
                // 此时registerOnChange还未被调用，onChangeFn还未被赋值，
                // 所以要使用promise(异步)等onChangeFn被赋值后再调用
                Promise.resolve(undefined)
                    .then(() => {
                    this.writeValueHandle(value);
                });
            }
            else {
                this.writeValueHandle(value);
            }
        }
    }
    writeValueHandle(value) {
        if (this.isDouble) {
            this.show(this.pointerMinEle);
        }
        else {
            this.hide(this.pointerMinEle);
        }
        // 赋值操作 && 更新位置
        this.updateValuePosition(value);
    }
    /**
     * @description: 添加tip的事件监听
     */
    addTipEvent() {
        if (this.isTipAutoShow) {
            this.renderer2.listen(this.pointerMaxEle, 'mouseover', this.tipMouseoverHandle);
            this.renderer2.listen(this.pointerMinEle, 'mouseover', this.tipMouseoverHandle);
            this.renderer2.listen(this.pointerMaxEle, 'mouseleave', this.tipMouseleaveHandle);
            this.renderer2.listen(this.pointerMinEle, 'mouseleave', this.tipMouseleaveHandle);
        }
    }
    // 组件交互方法集合--end
    // 内部公共方法集合--start
    /**
     * @description: 拖拽公共处理
     * @param: ui 拖拽助手 {helper：表示被拖拽的助手（helper）, position: 助手（helper）的当前 CSS 位置}
     */
    dragCommonHandle(ui) {
        const pointerX = this.limitDragPosition(ui); // 限制指针在合理的位置范围内
        const value = this.positionToStepValue(pointerX); // 获取当前位置对应的value值
        return value;
    }
    /**
     * @description: 限制滑块移动位置并设置对应的选择区域宽度
     * @param: pointerX 鼠标点击位置（x方向）
     */
    limitDragPosition(ui) {
        let pointerX = ui.position.left; // 当前滑块中心距离tick第一个坐标位置
        const barWidth = this.getBarWidth();
        let pointerWidthHalf = this.pointerMaxEleWidth / 2;
        let pointerMinLeft;
        let pointerMaxLeft;
        if (this.isDouble) {
            if (!this.isMinPointerActive) { // max对应滑块情况的处理
                pointerMinLeft = parseFloat(getComputedStyle(this.pointerMinEle).left);
                pointerX = TiSliderComponent.limitValue(pointerX, pointerMinLeft, barWidth); // 限制滑块在最小和右边界之间
                pointerMaxLeft = pointerX;
            }
            else {
                pointerMaxLeft = parseFloat(getComputedStyle(this.pointerMaxEle).left);
                pointerX = TiSliderComponent.limitValue(pointerX, 0, pointerMaxLeft); // 限制滑块在左边界和最大之间
                pointerMinLeft = pointerX;
            }
            const styles = {
                width: `${pointerMaxLeft - pointerMinLeft}px`,
                left: `${pointerMinLeft + pointerWidthHalf}px`
            };
            this.tiRenderer.setStyles(this.selectionEle, styles);
        }
        else {
            pointerX = TiSliderComponent.limitValue(pointerX, 0, barWidth);
            this.renderer2.setStyle(this.selectionEle, 'width', `${pointerX + pointerWidthHalf}px`);
        }
        ui.position.left = pointerX; // 限制滑块的位置显示
        return pointerX;
    }
    /**
     * @description: 根据滑块位置获取value值(和step对应) (拖拽公共函数中用)
     * @param: pointerX 鼠标点击位置（x方向）
     */
    positionToStepValue(pointerX) {
        const value = this.positionToValue(pointerX); // 获取指针对应的value绝对比例值(和step无关)
        return this.getStepValue(value); // 转化value为与step对应的值;
    }
    /**
     * @description: 获取位置对应的value值
     * @param: pointerX 鼠标点击位置（x方向）
     */
    positionToValue(pointerX) {
        const barWidth = this.getBarWidth();
        const percent = pointerX / barWidth;
        if (!Util.isUndefined(this.ratios)) {
            return this.unequalPositionToValue(pointerX, barWidth, percent);
        }
        return this.min + percent * (this.max - this.min);
    }
    /**
     * @description: 设置组件的model值，用于向外通知
     * @param: value 当前指针的值
     */
    setValue(value) {
        if (this.isDouble) {
            const valueMin = TiSliderComponent.splitValueToArray(this.model).valueMin;
            const valueMax = TiSliderComponent.splitValueToArray(this.model).valueMax;
            if (!this.isMinPointerActive && value !== valueMax) {
                this.model = `${valueMin};${value}`;
            }
            else if (this.isMinPointerActive && value !== valueMin) {
                this.model = `${value};${valueMax}`;
            }
        }
        else {
            if (value !== this.model) {
                this.model = value;
            }
        }
    }
    /**
     * @description: 获取对应的step值(根据step修正value值)
     * @param: value 当前点击的绝对值
     */
    getStepValue(value) {
        const min = this.min;
        const step = this.step;
        let stepValue;
        const stepN = Math.round((value - min) / step); // value值变化几个步长
        if (step.toString()
            .indexOf('.') !== -1) {
            const n = step.toString()
                .split('.').length;
            stepValue = parseFloat((min + stepN * step).toFixed(n));
        }
        else {
            stepValue = min + stepN * step;
        }
        return TiSliderComponent.limitValue(stepValue, min, this.max);
    }
    /**
     * @description: 在不等分条件下获取位置对应的value值
     * @param: pointerX 鼠标点击位置（x方向）
     * @param: barWidth 指针宽度
     * @param: percent pointerX占滑动轴百分比
     */
    unequalPositionToValue(pointerX, barWidth, percent) {
        let limitWidth = 0; // 每一段的宽度
        let selectLength = 0; // 已被选中区域段的宽度
        let ratiosWidth = 0; // 已被选中区域段长度和占总长的比例
        const c = this.decimalDigit;
        const ticksLen = this.ticksArr.length;
        for (let i = 0; i < ticksLen - 1; i++) {
            limitWidth = barWidth * this.ratios[i];
            if (i === 0) {
                selectLength = 0;
                ratiosWidth = 0;
            }
            else {
                ratiosWidth = Number((ratiosWidth + this.ratios[i - 1]).toFixed(c));
                selectLength = barWidth * ratiosWidth;
            }
            const pointerWidth = pointerX - selectLength;
            if (percent <= Number((ratiosWidth + this.ratios[i]).toFixed(c))
                && percent >= ratiosWidth) {
                return this.ticksArr[i] + (pointerWidth / limitWidth) * (this.ticksArr[i + 1] - this.ticksArr[i]);
            }
        }
    }
    /**
     * @description: 当前组件写入新值 || min || max || scales发生变化 时更新value对应的位置
     * @param: newValue 需要处理的value的值
     */
    updateValuePosition(newValue) {
        let valueTmp;
        if (this.isDouble) {
            valueTmp = this.restrictDoubleValue(newValue);
            const valueMax = TiSliderComponent.splitValueToArray(valueTmp).valueMax;
            const valueMin = TiSliderComponent.splitValueToArray(valueTmp).valueMin;
            // 当设置value均为最大值情况下，设置最小滑块层级，确保滑块可被拖动
            // 最小值的情况左右滑块zIndex相等，但是右滑块DOM在左滑块之后，因此根据zIndex规则，右滑块可以覆盖左滑块
            if ((valueMin === valueMax) && (valueMin === this.max)) {
                this.isMinPointerActive = true;
            }
            // 设置滑块的位置
            this.valueToPosition(valueMin, this.pointerMinEle);
            this.valueToPosition(valueMax, this.pointerMaxEle);
        }
        else {
            valueTmp = this.restrictSingleValue(newValue);
            this.valueToPosition(valueTmp, this.pointerMaxEle);
        }
        if (newValue !== valueTmp) {
            this.model = valueTmp;
        }
    }
    /**
     * @description: 限定双滑块value的值
     * @param: value 需要处理的value的值
     */
    restrictDoubleValue(value) {
        const valueMin = TiSliderComponent.splitValueToArray(value).valueMin; // 双滑块的小值
        const valueMax = TiSliderComponent.splitValueToArray(value).valueMax; // 双滑块的大值
        // 非法情况：非数字，超过限制，value大小顺序不正确情况
        const isInvalidValueMin = isNaN(valueMin) ||
            TiSliderComponent.isLimitExceed(valueMin, this.min, this.max) || valueMin > valueMax;
        // 非法情况：非数字，超过限制，value大小顺序不正确情况
        const isInvalidValueMax = isNaN(valueMax) ||
            TiSliderComponent.isLimitExceed(valueMax, this.min, this.max) || valueMin > valueMax;
        return `${isInvalidValueMin ? this.min : valueMin};${isInvalidValueMax ? this.max : valueMax}`;
    }
    /**
     * @description: 限定单滑块value的值
     * @param: value 需要处理的value的值
     */
    restrictSingleValue(value) {
        if (isNaN(parseFloat(value)) || value < this.min) {
            // value不是数字或者小于最小值point定位到最小值
            return this.min;
        }
        if (value > this.max) {
            // value大于最大值point定位到最大值
            return this.max;
        }
        return value;
    }
    /**
     * @description: 处理tip
     */
    setTipConfig() {
        const defaultTipShow = 'auto';
        const defaultTipFormatter = (value) => {
            return value;
        };
        this.tipMode = Util.isUndefined(this.tipMode) ? defaultTipShow : this.tipMode;
        this.tipFormatterFn = Util.isUndefined(this.tipFormatterFn) ? defaultTipFormatter : this.tipFormatterFn;
        this.isTipAutoShow = (this.tipMode !== 'always');
        if (this.isTipAutoShow) {
            this.hide(this.tipMaxEle);
            this.hide(this.tipMinEle);
        }
        else {
            this.show(this.tipMaxEle);
            this.show(this.tipMinEle);
        }
    }
    /**
     * @description: 处理限制
     */
    setMinMax() {
        const defaultMin = 0;
        const defaultMax = 10;
        const min = parseFloat(`${this.min}`);
        const max = parseFloat(`${this.max}`);
        this.min = (isNaN(min) || min >= max) ? defaultMin : min;
        this.max = (isNaN(max) || min >= max) ? defaultMax : max;
    }
    /**
     * @description: 处理刻度
     */
    setScales() {
        const step = this.step;
        const min = this.min;
        const max = this.max;
        let ticks = [];
        if (typeof this.scales === 'function') {
            this.ticks = TiSliderComponent.translateScales(this.scales, min, max, step);
        }
        else if (Array.isArray(this.scales)) {
            // 为Array情况下，直接使用数值
            this.ticks = this.scales.concat();
        }
        else {
            // 未传scale(包含非法)的情况下，只显示最小和最大值
            const ticksLen = (max - min) / step;
            ticks.push(min);
            for (let i = 0; i < ticksLen - 1; i++) {
                // 除最小最大值外，其余只打点不显示label
                ticks.push('');
            }
            ticks.push(max);
            this.ticks = ticks;
        }
        if (!Util.isUndefined(this.ratios)) {
            let ratiosSum = 0; // 将ratios中每一项与之前的求和
            const sumArray = []; //  由ratiosSum组成的数组
            const ratiosLen = this.ratios.length;
            for (let i = 0; i < ratiosLen; i++) {
                ratiosSum = Number((ratiosSum + Number(this.ratios[i])).toFixed(this.decimalDigit));
                sumArray.push(ratiosSum);
            }
            ticks = this.getTicks(sumArray, this.decimalDigit);
            this.ticks = ticks;
        }
    }
    /**
     * @description: 非均匀情况下确定打点的位置
     * @param: arr 由ratiosSum组成的数组
     * @param: num ratios中最大的小数位数
     */
    getTicks(arr, num) {
        const minScale = Number(Math.pow(0.1, num)
            .toFixed(num)); //  判断是否打点的基数
        let k = 1;
        let p = 0;
        const ticks = [this.ticks[0]];
        const length = parseInt(`${1 / minScale}`, 10);
        for (let i = 0; i < length; i++) {
            p = Number((p + minScale).toFixed(num));
            if (arr.indexOf(p) === -1) {
                // 判断每次相加基数后是否在数组中，不在不打点不显示label
                // tslint:disable-next-line:no-null-keyword
                ticks.push(null);
            }
            else {
                // 否则打点显示label
                ticks.push(this.ticks[k]);
                k++;
            }
        }
        return ticks;
    }
    /**
     * @description: 显示隐藏的元素
     * @param: ele: 要显示的DOM对象
     */
    show(ele) {
        // 注：此处未使用ng-show方式控制滑块显示是因为有延迟，造成后续方法获取pointer宽度为0，显示错乱
        this.renderer2.setStyle(ele, 'display', 'block');
    }
    /**
     * @description: 隐藏显示的元素
     * @param: ele: 要隐藏的DOM对象
     */
    hide(ele) {
        // 注：此处未使用ng-show方式控制滑块显示是因为有延迟，造成后续方法获取pointer宽度为0，显示错乱
        this.renderer2.setStyle(ele, 'display', 'none');
    }
    /**
     * @ignore
     * @description: 获取ticks的最大显示宽度，一行显示不下情况下，换行显示
     * @param: index 刻度下标
     */
    calcTickMaxWidth(index) {
        const ticksLen = this.ticks.length;
        const spacePercent = 1 / (ticksLen - 1); // 两个刻度点间隔宽度百分百（小数）
        if (index === 0 || index === (ticksLen - 1)) {
            // 第一个和最后一个刻度
            return TiSliderComponent.parseToCalcStyle(spacePercent, this.pointerMaxEleWidth / 2);
        }
        return TiSliderComponent.parseToCalcStyle(spacePercent);
    }
    /**
     * @ignore
     * @description: 获取 ticks 的left位置
     * @param: index 刻度下标
     */
    calcTickLeftPosition(index) {
        return `${index / (this.ticks.length - 1) * 100}%`;
    }
    /**
     * @ignore
     * @description: 确定滑动轴打点是否为选中点，根据函数返回值设置选中样式 (是否是selection区域的点)
     * @param: index 刻度下标
     */
    isSelectTick(index) {
        const ticksLen = this.ticks.length;
        // 双滑块情况下,位于最大最小值之间为选中状态
        if (this.isDouble) {
            const value = this.model.split(';');
            const isLargeThanValMin = index / ticksLen >= (parseFloat(value[0]) - this.min) / (this.max - this.min);
            const isSmallThanValMax = index / ticksLen <= (parseFloat(value[1]) - this.min) / (this.max - this.min);
            return isLargeThanValMin && isSmallThanValMax;
        }
        // 单滑块情况下,小于选中值为选中状态
        return index / ticksLen <= (parseFloat(this.model) - this.min);
    }
    /**
     * @description:  获取滑动轴的宽度(涉及到屏幕缩放，所以需要实时获取)
     */
    getBarWidth() {
        return this.trackELe.getBoundingClientRect().width - this.pointerMaxEleWidth;
    }
    /**
     * @description: 获取ratios中最大的小数位数
     */
    getDecimalDigit() {
        const decimalArr = [];
        if (Array.isArray(this.ratios)) {
            this.ratios.forEach((item) => {
                const decimal = item.toString()
                    .split('.')[1];
                if (decimal) {
                    decimalArr.push(decimal.length);
                }
            });
        }
        return Math.max.apply(null, decimalArr);
    }
    /**
     * @description: 获取当前value所在的区域以及当前value对应的长度占总长的百分比(小数)
     * @param: value 指针对应的value值
     * @param: paragraph 当前打点的段数
     */
    getValuePercent(value, paragraph) {
        let ratiosSum = 0; // 当前打点的段数下ratios的总和
        for (let i = 0; i < paragraph; i++) {
            ratiosSum = Number((ratiosSum + this.ratios[i]).toFixed(this.decimalDigit));
        }
        return ratiosSum + (value - this.ticksArr[paragraph]) / (this.ticksArr[paragraph + 1]
            - this.ticksArr[paragraph]) * this.ratios[paragraph];
    }
    /**
     * @description: 设置pointerDOM位置
     * @param: value 指针对应的value值
     * @param: pointer 被设置的DOM对象
     */
    setPointerPos(value, pointer) {
        let valuePercent;
        if (!Util.isUndefined(this.ratios)) {
            if (Util.isUndefined(this.ticks)) {
                return;
            }
            this.ticksArr = [];
            this.ticks.forEach((tick) => {
                if (!Util.isNull(tick)) {
                    this.ticksArr.push(tick);
                }
            });
            const ticksArrLen = this.ticksArr.length;
            for (let i = 0; i < ticksArrLen - 1; i++) {
                if (value >= this.ticksArr[i] && value <= this.ticksArr[i + 1]) {
                    valuePercent = this.getValuePercent(value, i);
                }
            }
        }
        else {
            valuePercent = (value - this.min) / (this.max - this.min);
        }
        // 计算value对应的百分比位置,并以tick中心点居中显示
        const pointerLeft = TiSliderComponent.parseToCalcStyle(valuePercent);
        this.renderer2.setStyle(pointer, 'left', pointerLeft);
    }
    /**
     * @description: 改变某一指针value值对应的指示位置
     * @param: value 指针对应的value值
     * @param: pointer 被设置的DOM对象
     */
    valueToPosition(value, pointer) {
        this.setPointerPos(value, pointer); // 设置pointer位置
        let styles; // 滑动轴有效区域背景 样式对象
        // 修复SSR报错：ERROR { Error: Uncaught (in promise): TypeError: this.pointerMaxEle.getBoundingClientRect is not a function
        if (typeof this.pointerMaxEle.getBoundingClientRect !== 'function') {
            return;
        }
        // 设置滑动轴有效区域背景
        const pointerMaxLeft = this.pointerMaxEle.getBoundingClientRect().left;
        const pointerMinLeft = this.pointerMinEle.getBoundingClientRect().left;
        const barWidth = this.getBarWidth();
        const barLeft = this.trackELe.getBoundingClientRect().left;
        const pointerWidthHalf = this.pointerMaxEleWidth / 2;
        if (this.isDouble) {
            styles = {
                width: `${(pointerMaxLeft - pointerMinLeft) * 100 / barWidth}%`,
                left: `${((pointerMinLeft - barLeft + pointerWidthHalf) * 100 / barWidth)}%`
            };
        }
        else {
            styles = {
                width: `${((pointerMaxLeft - barLeft + pointerWidthHalf) * 100 / barWidth)}%`,
                left: 0
            };
        }
        this.tiRenderer.setStyles(this.selectionEle, styles);
        this.setTip(pointer.querySelector('.ti3-slider-tip'), value);
    }
    /**
     * @description:设置Tip提示内容及位置
     * @param: curTipEle 要设置tip的元素
     * @param: value 设置tip内容对应的value值
     */
    setTip(curTipEle, value) {
        // 设置tip内容
        const tipContent = this.tipFormatterFn(value);
        curTipEle.innerHTML = this.domSanitizer.sanitize(SecurityContext.HTML, tipContent);
        // 设置当前tip位置
        const tipDisplay = getComputedStyle(curTipEle).display;
        this.show(curTipEle); // 先把tip显示出来 才能获取宽度
        const tipContentWidth = curTipEle.getBoundingClientRect().width;
        const styles = {
            left: `${-(tipContentWidth - this.pointerMaxEleWidth) / 2 - 1}px`,
            display: tipDisplay // 设置回原来的display
        };
        this.tiRenderer.setStyles(curTipEle, styles);
        // tip重合情况处理  (双滑块并且tip是一直显示出来那种场景)
        if (this.isDouble && !this.isTipAutoShow) {
            /**
             * @description: 渲染当前的tip样式 （移除一个class并且添加一个class）
             * @param: tipEle 当前tipDOM
             * @param: removeClass 要移除的class名字
             * @param: addClass 要添加的class名字
             */
            const renderTipStyle = (tipEle, removeClass, addClass) => {
                this.renderer2.removeClass(tipEle, removeClass);
                this.renderer2.addClass(tipEle, addClass);
            };
            // 重置tip样式，防止之前样式设置造成的影响  ti3-slider-tip-top
            renderTipStyle(this.tipMaxEle, 'ti3-slider-tip-bottom', 'ti3-slider-tip-top');
            renderTipStyle(this.tipMinEle, 'ti3-slider-tip-bottom', 'ti3-slider-tip-top');
            this.show(this.tipMaxEle);
            this.show(this.tipMinEle);
            // 最大最小值重合情况下，只显示当前tip
            const selectionWidth = this.selectionEle.getBoundingClientRect().width;
            if (selectionWidth === 0) {
                if (this.tiRenderer.hasClass(curTipEle, 'ti3-slider-tip-max')) {
                    // 当前tip是最大值的 隐藏最小值tip
                    this.hide(this.tipMinEle);
                }
                else {
                    // 当前tip是最小值的 隐藏最大值tip
                    this.hide(this.tipMaxEle);
                }
                return;
            }
            // tip重合情况下，当前tip向下显示
            const tipMaxWidth = this.tipMaxEle.getBoundingClientRect().width;
            const tipMinWidth = this.tipMinEle.getBoundingClientRect().width;
            if ((tipMaxWidth + tipMinWidth) / 2 >= selectionWidth) {
                renderTipStyle(curTipEle, 'ti3-slider-tip-top', 'ti3-slider-tip-bottom');
            }
        }
    }
}
TiSliderComponent.decorators = [
    { type: Component, args: [{
                selector: 'ti-slider',
                template: "<div #trackEle class=\"ti3-slider-track-container\">\r\n  <div class=\"ti3-slider-track-content\">\r\n    <div #selection class=\"ti3-slider-bar-selection\"></div>\r\n    <div #pointerMin [id]=\"appendId('min')\" [tiDraggable]=\"dragOptions\"\r\n         [style.zIndex]=\"isMinPointerActive ? 2 : 1\" [tiDragDisabled]=\"disabled\"\r\n         class=\"ti3-slider-pointer ti3-slider-pointer-min ti3-icon ti3-icon-slider-point\">\r\n        <div #tipMin class=\"ti3-slider-tip ti3-slider-tip-top ti3-slider-tip-min\"></div>\r\n    </div>\r\n    <div #pointerMax [id]=\"appendId('max')\" [tiDraggable]=\"dragOptions\"\r\n         [style.zIndex]=\"!isMinPointerActive ? 2 : 1\" [tiDragDisabled]=\"disabled\"\r\n         class=\"ti3-slider-pointer ti3-slider-pointer-max ti3-icon ti3-icon-slider-point\">\r\n        <div #tipMax class=\"ti3-slider-tip ti3-slider-tip-top ti3-slider-tip-max\"></div>\r\n    </div>\r\n  </div>\r\n  <ul class=\"ti3-slider-ticks\" [id]=\"appendId('list')\">\r\n    <li *ngFor=\"let tick of ticks; index as i\" class=\"ti3-slider-tick\"\r\n        [ngStyle]=\"{'left': calcTickLeftPosition(i), 'max-width': calcTickMaxWidth(i)}\">\r\n        <ng-container *ngIf=\"tick !== null\">\r\n          <div class=\"ti3-slider-tick-dot\" [ngClass]=\"{'ti3-slider-selection-tick-dot': isSelectTick(i)}\"></div>\r\n          <section *ngIf=\"labelTemplate else defaultTemplate\" class=\"ti3-slider-tick-value\">\r\n            <ng-container *ngTemplateOutlet=\"labelTemplate; context: {$implicit: tick, index: i}\">\r\n            </ng-container>\r\n          </section>\r\n\r\n          <ng-template #defaultTemplate>\r\n            <span *ngIf=\"tick!== ''\" class=\"ti3-slider-tick-value\" [innerHTML]=\"tick\"></span>\r\n          </ng-template>\r\n        </ng-container>\r\n    </li>\r\n  </ul>\r\n</div>\r\n",
                host: {
                    '[class.ti3-slider-container]': 'true',
                    '[class.ti3-slider-disable]': 'disabled',
                    '(mousedown)': 'hostMousedownEvent($event)'
                },
                providers: [TiFormComponent.getValueAccessor(TiSliderComponent)],
                styles: ["::ng-deep :root{--ti-slider-bar-selection-height:16px;--ti-slider-border-radius:var(--ti-common-border-radius-normal);--ti-slider-pointer-height:28px;--ti-slider-pointer-width:20px;--ti-slider-tick-margin-left:calc(var(--ti-slider-pointer-width)/2);--ti-slider-tick-top:8px;--ti-slider-tip-triangle-height:6px;--ti-slider-tip-triangle-width:10px;--ti-slider-tip-vertical-space:calc(var(--ti-slider-tip-triangle-height) + 5px);--ti-slider-track-height:8px}:host.ti3-slider-container{cursor:pointer;display:block;margin:36px 0;*zoom:1}:host.ti3-slider-container:after{clear:both;content:\"\";display:table}:host.ti3-slider-container:before{content:\"\";display:table}:host.ti3-slider-container .ti3-slider-track-container{background-color:var(--ti-slider-track-bg-color);border-radius:var(--ti-slider-border-radius);height:var(--ti-slider-track-height);position:relative;width:100%}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content{height:var(--ti-slider-track-height);position:relative;width:calc(100% - 20px)}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-bar-selection{background-color:var(--ti-slider-selection-bg-color);border-radius:var(--ti-slider-border-radius) 0 0 var(--ti-slider-border-radius);height:var(--ti-slider-bar-selection-height);position:absolute;top:calc(-1*var(--ti-common-space-base));z-index:1}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min{-ms-box-sizing:border-box;background-color:var(--ti-common-color-bg-white-normal);border-radius:calc(var(--ti-slider-border-radius)*5);box-sizing:border-box;height:var(--ti-slider-pointer-height);line-height:calc(var(--ti-slider-pointer-height) - 2px);position:absolute;top:calc(-1*(var(--ti-slider-pointer-height) - var(--ti-slider-track-height))/2);width:20px;z-index:1}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max.ti3-icon-slider-point:hover,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min.ti3-icon-slider-point:hover{border-color:var(--ti-slider-pointer-color-hover);color:var(--ti-slider-pointer-color-hover)}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max.ti3-icon-slider-point,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min.ti3-icon-slider-point{background:var(--ti-slider-pointer-bg-color);border:1px solid var(--ti-slider-pointer-color);border-radius:calc(var(--ti-slider-border-radius)*5);box-shadow:var(--ti-slider-pointer-bs);color:var(--ti-slider-pointer-color);position:absolute;text-align:center}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max .ti3-slider-tip,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min .ti3-slider-tip{background-color:var(--ti-slider-tip-bg-color);border-radius:var(--ti-common-border-radius-1);box-shadow:var(--ti-slider-tip-bs);color:var(--ti-slider-tip-color);cursor:default;font-family:var(--ti-default-font-family);font-size:12px;line-height:var(--ti-common-line-height-number);padding:12px 16px;position:absolute;white-space:pre;word-wrap:break-word}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max .ti3-slider-tip.ti3-slider-tip-top,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min .ti3-slider-tip.ti3-slider-tip-top{bottom:calc(100% + var(--ti-slider-tip-vertical-space))}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max .ti3-slider-tip.ti3-slider-tip-top:before,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min .ti3-slider-tip.ti3-slider-tip-top:before{border-left:calc(var(--ti-slider-tip-triangle-width)/2) solid transparent;border-right:calc(var(--ti-slider-tip-triangle-width)/2) solid transparent;border-top:var(--ti-slider-tip-triangle-height) solid var(--ti-slider-tip-bg-color);content:\" \";height:0;left:50%;margin-left:calc(-1*var(--ti-slider-tip-triangle-width)/2);pointer-events:none;position:absolute;top:100%;width:0;z-index:3}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max .ti3-slider-tip.ti3-slider-tip-bottom,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min .ti3-slider-tip.ti3-slider-tip-bottom{top:calc(100% + var(--ti-slider-tip-vertical-space))}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-max .ti3-slider-tip.ti3-slider-tip-bottom:before,:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min .ti3-slider-tip.ti3-slider-tip-bottom:before{border-bottom:var(--ti-slider-tip-triangle-height) solid var(--ti-slider-tip-bg-color);border-left:calc(var(--ti-slider-tip-triangle-width)/2) solid transparent;border-right:calc(var(--ti-slider-tip-triangle-width)/2) solid transparent;bottom:100%;content:\" \";height:0;left:50%;margin-left:calc(-1*var(--ti-slider-tip-triangle-width)/2);pointer-events:none;position:absolute;width:0;z-index:3}:host.ti3-slider-container .ti3-slider-track-container .ti3-slider-track-content .ti3-slider-pointer-min{display:none}:host.ti3-slider-container .ti3-slider-ticks{position:relative;width:calc(100% - var(--ti-slider-pointer-width))}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick{height:var(--ti-slider-track-height);margin-left:var(--ti-slider-tick-margin-left);position:absolute;top:calc(-1*var(--ti-slider-tick-top))}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick .ti3-slider-tick-dot{background-color:var(--ti-common-color-bg-white-normal);height:var(--ti-slider-track-height);position:relative;width:2px}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick .ti3-slider-tick-dot.ti3-slider-selection-tick-dot{background-color:var(--ti-slider-tick-selection-color)}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick:first-child .ti3-slider-tick-dot,:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick:last-child .ti3-slider-tick-dot{width:0}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick:first-child .ti3-slider-tick-value{left:calc(-1*var(--ti-slider-tick-margin-left))}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick:last-child .ti3-slider-tick-value{left:calc(-100% + var(--ti-slider-tick-margin-left));white-space:nowrap}:host.ti3-slider-container .ti3-slider-ticks .ti3-slider-tick .ti3-slider-tick-value{color:var(--ti-slider-tick-color);left:-50%;position:relative;top:var(--ti-slider-tick-top)}:host.ti3-slider-container.ti3-slider-disable.ti3-slider-container{cursor:not-allowed}:host.ti3-slider-container.ti3-slider-disable.ti3-slider-container .ti3-slider-track-container{background-color:var(--ti-slider-pointer-bg-disable)}:host.ti3-slider-container.ti3-slider-disable.ti3-slider-container .ti3-slider-track-container .ti3-slider-bar-selection{background-color:var(--ti-slider-color-disabled)}:host.ti3-slider-container.ti3-slider-disable.ti3-slider-container .ti3-slider-track-container .ti3-slider-pointer-max.ti3-icon-slider-point,:host.ti3-slider-container.ti3-slider-disable.ti3-slider-container .ti3-slider-track-container .ti3-slider-pointer-min.ti3-icon-slider-point{background:var(--ti-slider-pointer-bg-disable);border-color:var(--ti-slider-pointer-border-disable);box-shadow:none;color:var(--ti-slider-color-disabled)}"]
            },] }
];
TiSliderComponent.ctorParameters = () => [
    { type: TiRenderer },
    { type: IterableDiffers },
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: DomSanitizer }
];
TiSliderComponent.propDecorators = {
    min: [{ type: Input }],
    max: [{ type: Input }],
    step: [{ type: Input }],
    scales: [{ type: Input }],
    tipMode: [{ type: Input }],
    tipFormatterFn: [{ type: Input }],
    ratios: [{ type: Input }],
    changeStop: [{ type: Output }],
    labelTemplate: [{ type: ContentChild, args: [TemplateRef, { static: true },] }],
    trackRef: [{ type: ViewChild, args: ['trackEle', { static: true },] }],
    selectionRef: [{ type: ViewChild, args: ['selection', { static: true },] }],
    pointerMinRef: [{ type: ViewChild, args: ['pointerMin', { static: true },] }],
    pointerMaxRef: [{ type: ViewChild, args: ['pointerMax', { static: true },] }],
    tipMinRef: [{ type: ViewChild, args: ['tipMin', { static: true },] }],
    tipMaxRef: [{ type: ViewChild, args: ['tipMax', { static: true },] }],
    onResize: [{ type: HostListener, args: ['window:resize',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlTbGlkZXJDb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueTMvY29tcG9uZW50cy9zbGlkZXIvVGlTbGlkZXJDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixZQUFZLEVBQ1osWUFBWSxFQUNaLEtBQUssRUFHTCxlQUFlLEVBQ2YsTUFBTSxFQUNOLFNBQVMsRUFDVCxlQUFlLEVBRWYsV0FBVyxFQUNYLFNBQVMsRUFDWixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDekQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ3hDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNoRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFhdkQ7Ozs7OztHQU1HO0FBYUgsTUFBTSxPQUFPLGlCQUFrQixTQUFRLGVBQWU7SUFtTGxELFlBQ1ksVUFBc0IsRUFDdEIsZUFBZ0MsRUFDOUIsT0FBbUIsRUFDbkIsU0FBb0IsRUFDdEIsaUJBQW9DLEVBQ3BDLFlBQTBCO1FBRWxDLEtBQUssQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFQbEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN0QixvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFDOUIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUNuQixjQUFTLEdBQVQsU0FBUyxDQUFXO1FBQ3RCLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDcEMsaUJBQVksR0FBWixZQUFZLENBQWM7UUF4THRDOztXQUVHO1FBQ00sUUFBRyxHQUFXLENBQUMsQ0FBQztRQUN6Qjs7V0FFRztRQUNNLFFBQUcsR0FBVyxF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SUFBSSxFQUFFO3VCQW1HcEMsWUFBWSxTQUFDLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBDb250ZW50Q2hpbGQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgSG9zdExpc3RlbmVyLFxyXG4gICAgSW5wdXQsXHJcbiAgICBJdGVyYWJsZUNoYW5nZXMsXHJcbiAgICBJdGVyYWJsZURpZmZlcixcclxuICAgIEl0ZXJhYmxlRGlmZmVycyxcclxuICAgIE91dHB1dCxcclxuICAgIFJlbmRlcmVyMixcclxuICAgIFNlY3VyaXR5Q29udGV4dCxcclxuICAgIFNpbXBsZUNoYW5nZXMsXHJcbiAgICBUZW1wbGF0ZVJlZixcclxuICAgIFZpZXdDaGlsZFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gJy4uLy4uL3V0aWxzL1V0aWwnO1xyXG5pbXBvcnQgeyBUaVJlbmRlcmVyIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcmVuZGVyZXIvVGlSZW5kZXJlcic7XHJcbmltcG9ydCB7IFRpRm9ybUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvVGlCYXNlTW9kdWxlJztcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRpRHJhZ0NvbmZpZyB7XHJcbiAgICBoZWxwZXI6IGFueTtcclxuICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgbGVmdDogbnVtYmVyLFxyXG4gICAgICAgIHRvcDogbnVtYmVyXHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogU2xpZGVy5ruR5Z2X57uE5Lu2XHJcbiAqXHJcbiAqIOa7keWdl+e7hOS7tu+8jOmAmui/h+aTjeS9nOe7hOS7tumAieaLqeaMh+ekuuiMg+WbtFxyXG4gKlxyXG4gKiA8ZXhhbXBsZS11cmw+Li4vdGlueTNkZW1vLyMvc2xpZGVyL3NsaWRlci1hbGw8L2V4YW1wbGUtdXJsPlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3RpLXNsaWRlcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2xpZGVyLmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vc2xpZGVyLmxlc3MnXSxcclxuICAgIGhvc3Q6IHtcclxuICAgICAgICAnW2NsYXNzLnRpMy1zbGlkZXItY29udGFpbmVyXSc6ICd0cnVlJyxcclxuICAgICAgICAnW2NsYXNzLnRpMy1zbGlkZXItZGlzYWJsZV0nOiAnZGlzYWJsZWQnLFxyXG4gICAgICAgICcobW91c2Vkb3duKSc6ICdob3N0TW91c2Vkb3duRXZlbnQoJGV2ZW50KSdcclxuICAgIH0sXHJcbiAgICBwcm92aWRlcnM6IFtUaUZvcm1Db21wb25lbnQuZ2V0VmFsdWVBY2Nlc3NvcihUaVNsaWRlckNvbXBvbmVudCldXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVGlTbGlkZXJDb21wb25lbnQgZXh0ZW5kcyBUaUZvcm1Db21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmnIDlsI/ojIPlm7TlgLxcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbWluOiBudW1iZXIgPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmnIDlpKfojIPlm7TlgLxcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbWF4OiBudW1iZXIgPSAxMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOa7keWKqOatpemVv++8jOa7keWdl+avj+asoei3s+WPmOeahOatpemVv++8iOiLpeimgeWunueOsOWPquWcqOWIu+W6puS4iui3s+WPmOeahOaViOaenO+8jHN0ZXDpnIDkuKXmoLzlkozliLvluqbpl7Tot53kuIDoh7TvvIlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc3RlcDogbnVtYmVyID0gMTtcclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5Yi75bqmXHJcbiAgICAgKiAxLuS4jeWQjOexu+Wei+eahOS9v+eUqO+8mlxyXG4gICAgICpcclxuICAgICAqIDEuMSBBcnJheeaDheWGteS4i++8muaVsOe7hOS4reWQhOWFg+e0oOS+neasoeWvueW6lOWQhOWIu+W6puaYvuekuuWAvO+8m1xyXG4gICAgICpcclxuICAgICAqIDEuMiBGdW5jdGlvbuaDheWGteS4i++8mui/lOWbnuWAvOS4uuWIu+W6puaYvuekuuWAvO+8jOagueaNrui/lOWbnuWAvOiuvue9ruWQhHN0ZXDlr7nlupTnmoTliLvluqbmmL7npLrlgLzvvIxcclxuICAgICAqIOWHveaVsOeahOWPguaVsOS+neasoeS4uu+8mnZhbHVlKHN0ZXDlr7nlupTnmoTlgLwpLG1heCjmnIDlpKflgLwpLG1pbijmnIDlsI/lgLwp44CCXHJcbiAgICAgKlxyXG4gICAgICogMi7kuI3lkIzlvaLlvI/nmoTliLvluqbmmL7npLrlgLzlr7nlupTlkIToh6rnmoTmmL7npLrmlrnlvI/vvJpcclxuICAgICAqXHJcbiAgICAgKiAyLjEg56m65a2X56ym5LiyIC0tLSDlj6rmiZPngrnkuI3mmL7npLpsYWJlbO+8m1xyXG4gICAgICpcclxuICAgICAqIDIuMiB1bmRlZmluZWQvbnVsbCAtLS3kuI3miZPngrnkuI3mmL7npLpsYWJlbO+8m1xyXG4gICAgICpcclxuICAgICAqIDIuMyDlhbblroPmg4XlhrUgLS0tIOaJk+eCueS4lOaYvuekuuWAvOS4uumFjee9ruWAvOOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzY2FsZXM6IEFycmF5PGFueT4gfCBGdW5jdGlvbjtcclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5ruR5Z2X55qEdGlw5pi+56S65pa55byP77ya5Y+W5YC8XCJhbHdheXNcIu+8jFwiYXV0b1wi77yI6buY6K6k5YC877yJXHJcbiAgICAgKlxyXG4gICAgICogYWx3YXlz77yadGlw5LiA55u05pi+56S6XHJcbiAgICAgKlxyXG4gICAgICogYXV0b++8mum8oOagh+enu+WIsOa7keWdl+S4iuWHunRpcFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSB0aXBNb2RlOiAnYXV0bycgfCAnYWx3YXlzJyA9ICdhdXRvJztcclxuICAgIC8qKlxyXG4gICAgICogdGlw5o+Q56S65YaF5a655qC85byP5Ye95pWw77ya6L+U5Zue5YC85pivc3RyaW5n57G75Z6L77yM5Li6dGlw5Lit5pi+56S655qE5paH5pys44CCXHJcbiAgICAgKlxyXG4gICAgICog6L+U5Zue5YC85ZyoIHYxMC4xLjMg5Y+K5LmL5YmN55qE54mI5pys5a2Y5ZyoWFNT5pS75Ye7KGh0bWznsbvlnosp6aOO6ZmpLCB2MTAuMS40IOeJiOacrOWBmuS6huWuieWFqOWkhOeQhu+8jOW3suS4jeWtmOWcqFhTU+aUu+WHu+mjjumZqeOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSB0aXBGb3JtYXR0ZXJGbjogKHZhbHVlOiBhbnkpID0+IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICog6Lefc2NhbGVz5o6l5Y+j5pCt6YWN5L2/55So77yM5L6d5qyh6K6+572uc2NhbGVz5Lit5Lik5Liq55u46YK75Yi75bqm5q+P5LmL6Ze06ZW/5bqm5Y2g5oC76ZW/55qE5q+U5L6L77yMXHJcbiAgICAgKiDmlbDnu4TmiYDmnInpobnmgLvlkozkuLox77yM5pWw57uE6ZW/5bqm5q+Uc2NhbGVz6ZW/5bqm5bCPMeOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSByYXRpb3M6IEFycmF5PG51bWJlcj47XHJcbiAgICAvKipcclxuICAgICAqIOa7keWdl+WBnOatouWQjuWAvOWPkeeUn+aUueWPmOaXtuinpuWPkeeahOS6i+S7tlxyXG4gICAgICpcclxuICAgICAqIDMuMS4w5paw5aKeXHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSByZWFkb25seSBjaGFuZ2VTdG9wOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDojrflj5bliLDnlKjmiLfoh6rlrprkuYnnmoTliLvluqZcclxuICAgICAqL1xyXG4gICAgQENvbnRlbnRDaGlsZChUZW1wbGF0ZVJlZiwgeyBzdGF0aWM6IHRydWUgfSkgcHVibGljIGxhYmVsVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWtmOaUvueUqOaIt+S8oOWFpeeahOWIu+W6puWAvFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGlja3M6IEFycmF5PGFueT47XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWvueS6juWPjOa7keWdl++8jOW3pua7keWdl+aYr+WQpuWkhOS6juWPmOWMlueKtuaAgVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNNaW5Qb2ludGVyQWN0aXZlOiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmi5bliqjphY3nva7lj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYWdPcHRpb25zOiBhbnk7XHJcbiAgICBwcml2YXRlIHRpY2tzQXJyOiBBcnJheTxhbnk+OyAvLyDlrZjmlL7lkIjms5XnmoTliLvluqblgLxcclxuICAgIHByaXZhdGUgaXNEb3VibGU6IGJvb2xlYW4gPSBmYWxzZTsgLy8g5Yik5pat5piv5ZCm5piv5Y+M5ruR5Z2X77yM6buY6K6k5piv5Y2V5ruR5Z2XIGZhbHNlXHJcbiAgICBwcml2YXRlIGlzVGlwQXV0b1Nob3c6IGJvb2xlYW4gPSB0cnVlOyAvLyDliKTmlq10aXDmj5DnpLrmmK/lkKbmmK/oh6rliqjmmL7npLrvvIjpvKDmoIfmk43kvZzmiY3mmL7npLrvvIks6buY6K6kdHJ1ZVxyXG4gICAgcHJpdmF0ZSBkZWNpbWFsRGlnaXQ6IG51bWJlcjsgLy8gcmF0aW9z5Lit5pyA5aSn55qE5bCP5pWw5L2N5pWwXHJcbiAgICBwcml2YXRlIHNjYWxlc0RpZmZlcjogSXRlcmFibGVEaWZmZXI8YW55PjsgLy8gc2NhbGVzIOWPmOWMluajgOafpVxyXG4gICAgcHJpdmF0ZSBkcmFnU3RhcnRNb2RlbDogYW55O1xyXG4gICAgcHJpdmF0ZSBwb2ludGVyTWF4RWxlV2lkdGg6IG51bWJlcjsgLy8g5ruR5Z2X55qE5a695bqmXHJcblxyXG4gICAgLy8g6I635Y+W5qih5p2/5LiKRE9N5Y+Y6YePXHJcbiAgICBAVmlld0NoaWxkKCd0cmFja0VsZScsIHsgc3RhdGljOiB0cnVlIH0pIHByaXZhdGUgdHJhY2tSZWY6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdzZWxlY3Rpb24nLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIHNlbGVjdGlvblJlZjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BvaW50ZXJNaW4nLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIHBvaW50ZXJNaW5SZWY6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdwb2ludGVyTWF4JywgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBwb2ludGVyTWF4UmVmOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgndGlwTWluJywgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSB0aXBNaW5SZWY6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCd0aXBNYXgnLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIHRpcE1heFJlZjogRWxlbWVudFJlZjtcclxuICAgIC8vIOWumuS5iURPTeWPmOmHj1xyXG4gICAgcHJpdmF0ZSB0cmFja0VMZTogYW55O1xyXG4gICAgcHJpdmF0ZSBzZWxlY3Rpb25FbGU6IGFueTtcclxuICAgIHByaXZhdGUgcG9pbnRlck1pbkVsZTogYW55O1xyXG4gICAgcHJpdmF0ZSBwb2ludGVyTWF4RWxlOiBhbnk7XHJcbiAgICBwcml2YXRlIHRpcE1pbkVsZTogYW55O1xyXG4gICAgcHJpdmF0ZSB0aXBNYXhFbGU6IGFueTtcclxuICAgIHByaXZhdGUgaXNWaXNpYmxlSW5pdDogYm9vbGVhbjsgLy8g5qCH6K+G5Yid5aeL5YyW5pe257uE5Lu25piv5ZCm5Y+v6KeBXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOWwhnZhbHVl5YC85aSE55CG5oiQ5pWw57uEXHJcbiAgICAgKiBAcGFyYW06IHZhbHVlIOmcgOimgeWIh+WJsueahOaVsOe7hFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcGxpdFZhbHVlVG9BcnJheSh2YWx1ZTogc3RyaW5nKTogeyB2YWx1ZU1pbjogbnVtYmVyLCB2YWx1ZU1heDogbnVtYmVyIH0ge1xyXG4gICAgICAgIGNvbnN0IGFycjogQXJyYXk8c3RyaW5nPiA9IChgJHt2YWx1ZX1gKS5zcGxpdCgnOycpOyAvLyB2YWx1ZeS4um51bWJlcuaXtuW8uui9rOS4uuWtl+espuS4slxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWx1ZU1pbjogcGFyc2VGbG9hdChhcnJbMF0pLFxyXG4gICAgICAgICAgICB2YWx1ZU1heDogYXJyWzFdICYmIHBhcnNlRmxvYXQoYXJyWzFdKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IHZhbHVl5YC85piv5ZCm6LaF6ZmQ5Yi2XHJcbiAgICAgKiBAcGFyYW06IHZhbHVlOiDliKTmlq3nmoR2YWx1ZeWAvFxyXG4gICAgICogQHBhcmFtOiBtaW5WYWx1ZTog5pyA5aSn5YC8XHJcbiAgICAgKiBAcGFyYW06IG1heFZhbHVlOiDmnIDlsI/lgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNMaW1pdEV4Y2VlZCh2YWx1ZTogbnVtYmVyLCBtaW5WYWx1ZTogbnVtYmVyLCBtYXhWYWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluVmFsdWUgfHwgdmFsdWUgPiBtYXhWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5b2TdGhpcy5zY2FsZXPkuLrlh73mlbDmg4XlhrXkuIvvvIzovazmjaLkuLp0aWNrc+aVsOe7hFxyXG4gICAgICogQHBhcmFtOiBzY2FsZUZvcm1hdCDooqvovazmjaLnmoTlh73mlbBcclxuICAgICAqIEBwYXJhbTogbWluVmFsdWUg5Yi75bqm6ZmQ5Yi255qE5pyA5aSn5YC8XHJcbiAgICAgKiBAcGFyYW06IG1heFZhbHVlIOWIu+W6pumZkOWItueahOacgOWwj+WAvFxyXG4gICAgICogQHBhcmFtOiBzdGVwIOWIu+W6puatpemVv1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0cmFuc2xhdGVTY2FsZXMoc2NhbGVGb3JtYXQ6IEZ1bmN0aW9uLCBtaW5WYWx1ZTogbnVtYmVyLCBtYXhWYWx1ZTogbnVtYmVyLCBzdGVwOiBudW1iZXIpOiBBcnJheTxhbnk+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZUxlbjogbnVtYmVyID0gKG1heFZhbHVlIC0gbWluVmFsdWUpIC8gc3RlcDtcclxuICAgICAgICBjb25zdCB0aWNrQXJyYXk6IEFycmF5PGFueT4gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDw9IHZhbHVlTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RlcE5WYWx1ZTogbnVtYmVyID0gc3RlcCAqIGkgKyBtaW5WYWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0UmV0OiBhbnkgPSBzY2FsZUZvcm1hdChzdGVwTlZhbHVlLCBtaW5WYWx1ZSwgbWF4VmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoVXRpbC5pc1VuZGVmaW5lZChmb3JtYXRSZXQpIHx8IFV0aWwuaXNOdWxsKGZvcm1hdFJldCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIOS4unVuZGVmaW5lZOaIlm51bGzmg4XlhrXkuIvvvIzkuI3miZPngrnkuI3mmL7npLpsYWJlbFxyXG4gICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tbnVsbC1rZXl3b3JkICovXHJcbiAgICAgICAgICAgICAgICB0aWNrQXJyYXkucHVzaChudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWMheWQq+S4ulwiXCLvvIjmiZPngrnkuI3mmL7npLpsYWJlbO+8ieWSjOmdnlwiXCLmg4XlhrXvvIjmiZPngrnkuJTmmL7npLpsYWJlbO+8iVxyXG4gICAgICAgICAgICAgICAgdGlja0FycmF5LnB1c2goZm9ybWF0UmV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRpY2tBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5Zyo6IyD5Zu05YaF6ZmQ5Yi2dmFsdWXmlbDlgLxcclxuICAgICAqIEBwYXJhbTogdmFsdWUg5qCh6aqM55qEdmFsdWXlgLxcclxuICAgICAqIEBwYXJhbTogbWluIOacgOWwj+WAvFxyXG4gICAgICogQHBhcmFtOiBtYXgg5pyA5aSn5YC8XHJcbiAgICAgKiBAcmV0dXJuOiDmnInmlYh2YWx1ZeWAvFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBsaW1pdFZhbHVlKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gZm9zc2lk5pW05pS577yM6YeH55So5LiA56eN5LiN5pKe6L2m5YaZ5rOV77yM5Y+v6K+75oCn5beu5LiA54K544CCXHJcbiAgICAgICAgLy8g5bCP5LqObWlu5Y+WbWlu77yM5aSn5LqObWF45Y+WbWF477yM5YW25LuW5LiN5Y+Y44CCXHJcbiAgICAgICAgY29uc3QgcmVzOiBudW1iZXIgPSB2YWx1ZSA8IG1pbiA/IG1pbiA6XHJcbiAgICAgICAgICAgIHZhbHVlID4gbWF4ID8gbWF4IDogdmFsdWU7XHJcblxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOWwhuagt+W8j+aVsOWAvOi9rOWMluS4umNhbGPlvaLlvI/nmoRjc3PmoLflvI/vvIjorr7nva7kuLrnmb7liIbmr5TlvaLlvI/vvIznoa7kv53nvKnmlL7nmoTmlK/mjIHvvIlcclxuICAgICAqIEBwYXJhbTogcGVyY2VudCBjYWxj55m+5YiG5q+UXHJcbiAgICAgKiBAcGFyYW06IHN1YlZhbHVlIGNhbGPlh4/ljrvlgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcGFyc2VUb0NhbGNTdHlsZShwZXJjZW50OiBudW1iZXIsIHN1YlZhbHVlPzogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHN1YlZhbHVlKSB8fCBVdGlsLmlzVW5kZWZpbmVkKHN1YlZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYGNhbGMoJHtwZXJjZW50ICogMTAwfSUpYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBgY2FsYygke3BlcmNlbnQgKiAxMDB9JSAtICR7c3ViVmFsdWV9cHgpYDsgLy8gY2FsY+S4rei/kOeul+espuWQiDLovrnkuIDlrpropoHnqbrmoLxcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHRpUmVuZGVyZXI6IFRpUmVuZGVyZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBpdGVyYWJsZURpZmZlcnM6IEl0ZXJhYmxlRGlmZmVycyxcclxuICAgICAgICBwcm90ZWN0ZWQgaG9zdFJlZjogRWxlbWVudFJlZixcclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyZXIyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBkb21TYW5pdGl6ZXI6IERvbVNhbml0aXplclxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoaG9zdFJlZiwgcmVuZGVyZXIyKTtcclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJykgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZVBvc2l0aW9uKHRoaXMubW9kZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOe7hOS7tuWjsOaYjuWRqOacn+mSqeWtkC0tc3RhcnRcclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nT25Jbml0KCk7XHJcbiAgICAgICAgdGhpcy5pbml0RG9tKCk7XHJcbiAgICAgICAgdGhpcy5pbml0VmFycygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0RG9tKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudHJhY2tFTGUgPSB0aGlzLnRyYWNrUmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25FbGUgPSB0aGlzLnNlbGVjdGlvblJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMucG9pbnRlck1pbkVsZSA9IHRoaXMucG9pbnRlck1pblJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMucG9pbnRlck1heEVsZSA9IHRoaXMucG9pbnRlck1heFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudGlwTWluRWxlID0gdGhpcy50aXBNaW5SZWYubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLnRpcE1heEVsZSA9IHRoaXMudGlwTWF4UmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRWYXJzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RlcCA9IE51bWJlci5pc05hTihwYXJzZUZsb2F0KGAke3RoaXMuc3RlcH1gKSkgPyAxIDogcGFyc2VGbG9hdChgJHt0aGlzLnN0ZXB9YCk7XHJcbiAgICAgICAgdGhpcy5zZXRNaW5NYXgoKTtcclxuICAgICAgICAvLyByYXRpb3PkuK3mnIDlpKfnmoTlsI/mlbDkvY3mlbBcclxuICAgICAgICB0aGlzLmRlY2ltYWxEaWdpdCA9IHRoaXMuZ2V0RGVjaW1hbERpZ2l0KCk7XHJcblxyXG4gICAgICAgIC8vIOWkhOeQhueUqOaItuacquiuvue9rnNjYWxlc+aIluiAhXNjYWxlc+eCumZ1bmN0aW9u5oOF5rOBXHJcbiAgICAgICAgaWYgKCF0aGlzLnNjYWxlcyB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLnNjYWxlcykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTY2FsZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGlwQ29uZmlnKCk7XHJcbiAgICAgICAgLy8g57uZdGlw5re75Yqg5LqL5Lu277yIdGlwTW9kZeaYryAnYXV0byfnmoTlnLrmma/vvIlcclxuICAgICAgICB0aGlzLmFkZFRpcEV2ZW50KCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhZ09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGF4aXM6ICd4JyxcclxuICAgICAgICAgICAgc3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0SGFuZGxlLFxyXG4gICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWdIYW5kbGUsXHJcbiAgICAgICAgICAgIHN0b3A6IHRoaXMuZHJhZ1N0b3BIYW5kbGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzWydzY2FsZXMnXSAmJiAhY2hhbmdlc1snc2NhbGVzJ10uZmlyc3RDaGFuZ2UgJiYgIUFycmF5LmlzQXJyYXkodGhpcy5zY2FsZXMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2NhbGVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWVQb3NpdGlvbih0aGlzLm1vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOebkeWQrOacgOWkp+WAvOacgOWwj+WAvOWPmOWMllxyXG4gICAgICAgIGlmICgoY2hhbmdlc1snbWluJ10gJiYgIWNoYW5nZXNbJ21pbiddLmZpcnN0Q2hhbmdlKSB8fCAoY2hhbmdlc1snbWF4J10gJiYgIWNoYW5nZXNbJ21heCddLmZpcnN0Q2hhbmdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldE1pbk1heCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBvaW50ZXJNYXhFbGVXaWR0aCA9IHRoaXMucG9pbnRlck1heEVsZS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZUluaXQgPSB0aGlzLnBvaW50ZXJNYXhFbGVXaWR0aCAhPT0gMDtcclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g55uR5ZCs5ruR5Z2X55qE5a695bqm77ya5aSE55CG57uE5Lu25LuO6ZqQ6JeP5Yiw5pi+56S65a6a5L2N6Zeu6aKYXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZUluaXQpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9pbnRlck1heFdpZHRoOiBudW1iZXIgPSB0aGlzLnBvaW50ZXJNYXhFbGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIGlmIChwb2ludGVyTWF4V2lkdGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlSW5pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50ZXJNYXhFbGVXaWR0aCA9IHBvaW50ZXJNYXhXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWVQb3NpdGlvbih0aGlzLm1vZGVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdEb0NoZWNrKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnNjYWxlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuc2NhbGVzRGlmZmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGVzRGlmZmVyID0gdGhpcy5pdGVyYWJsZURpZmZlcnMuZmluZCh0aGlzLnNjYWxlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzY2FsZXNEaWZmZXI6IEl0ZXJhYmxlQ2hhbmdlczxhbnk+ID0gdGhpcy5zY2FsZXNEaWZmZXIuZGlmZih0aGlzLnNjYWxlcyk7XHJcbiAgICAgICAgaWYgKHNjYWxlc0RpZmZlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFNjYWxlcygpO1xyXG4gICAgICAgICAgICAvLyDliJ3lp4vljJbnmoR1cGRhdGVWYWx1ZVBvc2l0aW9u5Zyod3JpdGVWYWx1ZeS4reaJp+ihjO+8iHdyaXRlVmFsdWXov5/kuo5kb2NoZWNr5omn6KGM77yJXHJcbiAgICAgICAgICAgIGlmICghVXRpbC5pc1VuZGVmaW5lZCh0aGlzLm1vZGVsKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZVBvc2l0aW9uKHRoaXMubW9kZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g57uE5Lu25aOw5piO5ZGo5pyf6ZKp5a2QLS1lbmRcclxuXHJcbiAgICAvLyDlrp7njrBDb250cm9sVmFsdWVBY2Nlc3NvcuaOpeWPo1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIFRPRE86IOaOpeWPo+iuvuiuoemHjeaWsOiwg+aVtFxyXG4gICAgICAgIC8vIG5nTW9kZWwgPT4gdmFsdWU6IHN0cmluZyB8IG51bWJlcjsgLy8g5ruR5Z2X5a+55bqU55qEdmFsdWXlgLwgZXhw77yaIOWNlea7keWdlzogMTUgT1IgJzE1JyDlj4zmu5HlnZcgJzE1OzM0JztcclxuICAgICAgICBzdXBlci53cml0ZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICBpZiAoIVV0aWwuaXNOdWxsKHZhbHVlKSAmJiAhVXRpbC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgLy8gMS7liKTmlq3mmK/lkKbmmK/lj4zmu5HlnZdcclxuICAgICAgICAgICAgdGhpcy5pc0RvdWJsZSA9ICFVdGlsLmlzVW5kZWZpbmVkKFRpU2xpZGVyQ29tcG9uZW50LnNwbGl0VmFsdWVUb0FycmF5KHZhbHVlKS52YWx1ZU1heCk7IC8vIOagueaNrnZhbHVl5b2i5byP56Gu5a6a5Y2V5ruR5Z2XL+WPjOa7keWdl1xyXG4gICAgICAgICAgICBpZiAoVXRpbC5pc1VuZGVmaW5lZCh0aGlzLm9uTW9kZWxDaGFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlnKhyZWFjdGl2ZS1mb3Jt5Lit5L2/55So77yM5Yid5aeL5YyW6LWL5YC86LCD55Sod3JpdGVWYWx1ZeaXtu+8jFxyXG4gICAgICAgICAgICAgICAgLy8g5q2k5pe2cmVnaXN0ZXJPbkNoYW5nZei/mOacquiiq+iwg+eUqO+8jG9uQ2hhbmdlRm7ov5jmnKrooqvotYvlgLzvvIxcclxuICAgICAgICAgICAgICAgIC8vIOaJgOS7peimgeS9v+eUqHByb21pc2Uo5byC5q2lKeetiW9uQ2hhbmdlRm7ooqvotYvlgLzlkI7lho3osIPnlKhcclxuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVZhbHVlSGFuZGxlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVZhbHVlSGFuZGxlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgd3JpdGVWYWx1ZUhhbmRsZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93KHRoaXMucG9pbnRlck1pbkVsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKHRoaXMucG9pbnRlck1pbkVsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOi1i+WAvOaTjeS9nCAmJiDmm7TmlrDkvY3nva5cclxuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlUG9zaXRpb24odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8g5a6e546wQ29udHJvbFZhbHVlQWNjZXNzb3LmjqXlj6MtLWVuZFxyXG5cclxuICAgIC8vIOe7hOS7tuS6pOS6kuaWueazlembhuWQiC0tc3RhcnRcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogVGlueTPkuK3kuI3lrZjlnKjkuIvpnaLnmoTpl67popjvvIznlKhjbGlja+WSjG1vdXNlZG93buS6i+S7tumDveWPr+S7pe+8iOe7n+S4gOS9v+eUqG1vdXNlZG93buS6i+S7tu+8iVxyXG4gICAgICog5L2/55SobW91c2Vkb3du5pu/5LujY2xpY2vvvIznlKjkuo7pmLLmraLmi5bmi73ov4fnqIvkuK3op6blj5FjbGlja+S6i+S7tuWvvOiHtOeahOa7keWdl+a7keWKqFxyXG4gICAgICog6Zeu6aKY5Zy65pmv77yabWlu5ruR5Z2X5ouW5Yqo5LiObWF45ruR5Z2X6YeN5ZCI5ZCO77yM6byg5qCH57un57ut5ZCR5Y+z56e75Yqo77yM5q2k5pe26byg5qCH5oqs6LW377yM6Kem5Y+RY2xpY2vkuovku7bvvIzlr7zoh7RtYXjlj5HnlJ/np7vliqhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhvc3RNb3VzZWRvd25FdmVudCA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIOeBsOWMlueKtuaAgeaIlueCueWHu3BvaW50ZXLml7bkuI3lgZrlpITnkIZcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnRpUmVuZGVyZXIuaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAndGkzLXNsaWRlci1wb2ludGVyJylcclxuICAgICAgICAgICAgfHwgdGhpcy50aVJlbmRlcmVyLmhhc0NsYXNzKGV2ZW50LnRhcmdldCwgJ3RpMy1zbGlkZXItdGlwJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0ZXBTbGlkZXJGcm9tQ2xpY2soZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDmt7vliqB0aXDnmoTkuovku7bnm5HlkKxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZGRUaXBFdmVudCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1RpcEF1dG9TaG93KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIyLmxpc3Rlbih0aGlzLnBvaW50ZXJNYXhFbGUsICdtb3VzZW92ZXInLCB0aGlzLnRpcE1vdXNlb3ZlckhhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIyLmxpc3Rlbih0aGlzLnBvaW50ZXJNaW5FbGUsICdtb3VzZW92ZXInLCB0aGlzLnRpcE1vdXNlb3ZlckhhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIyLmxpc3Rlbih0aGlzLnBvaW50ZXJNYXhFbGUsICdtb3VzZWxlYXZlJywgdGhpcy50aXBNb3VzZWxlYXZlSGFuZGxlKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcjIubGlzdGVuKHRoaXMucG9pbnRlck1pbkVsZSwgJ21vdXNlbGVhdmUnLCB0aGlzLnRpcE1vdXNlbGVhdmVIYW5kbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5ruR5Z2X5YWD57Sg55qEbW91c2VvdmVy5LqL5Lu25aSE55CG5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdGlwTW91c2VvdmVySGFuZGxlID0gKGV2ZW50OiBhbnkpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvdyhldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLnRpMy1zbGlkZXItdGlwJykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDmu5HlnZflhYPntKDnmoRtb3VzZWxlYXZl5LqL5Lu25aSE55CG5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdGlwTW91c2VsZWF2ZUhhbmRsZSA9IChldmVudDogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhpZGUoZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy50aTMtc2xpZGVyLXRpcCcpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5a6/5Li75YWD57Sg55qEbW91c2Vkb3du5LqL5Lu25aSE55CG5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RlcFNsaWRlckZyb21DbGljayA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpcnN0VGlja1g6IG51bWJlciA9IHRoaXMudHJhY2tFTGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIHRoaXMucG9pbnRlck1heEVsZVdpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBvbGRNb2RlbDogYW55ID0gdGhpcy5tb2RlbDtcclxuICAgICAgICBsZXQgcG9pbnRlclg6IG51bWJlciA9IGV2ZW50LmNsaWVudFggLSBmaXJzdFRpY2tYO1xyXG4gICAgICAgIHBvaW50ZXJYID0gVGlTbGlkZXJDb21wb25lbnQubGltaXRWYWx1ZShwb2ludGVyWCwgMCwgdGhpcy5nZXRCYXJXaWR0aCgpKTtcclxuICAgICAgICBsZXQgdmFsdWU6IG51bWJlciA9IHRoaXMucG9zaXRpb25Ub1ZhbHVlKHBvaW50ZXJYKTsgLy8g6I635Y+WdmFsdWXnu53lr7nmr5TkvovlgLzvvIznlKjkuo7noa7lrprmu5HlnZfnp7vliqjkvY3nva5cclxuICAgICAgICAvLyDnoa7lrprmu5Hliqjlk6rkuKrmu5HlnZdcclxuICAgICAgICBsZXQgcG9pbnRlcjogYW55ID0gdGhpcy5wb2ludGVyTWF4RWxlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlTWluOiBudW1iZXIgPSBUaVNsaWRlckNvbXBvbmVudC5zcGxpdFZhbHVlVG9BcnJheSh0aGlzLm1vZGVsKS52YWx1ZU1pbjtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVNYXg6IG51bWJlciA9IFRpU2xpZGVyQ29tcG9uZW50LnNwbGl0VmFsdWVUb0FycmF5KHRoaXMubW9kZWwpLnZhbHVlTWF4O1xyXG4gICAgICAgICAgICAvLyDku6V2YWx1ZeS4remXtOWAvOS4uueVjO+8jOWcqOacgOWwj+WAvOWPiuS4remXtOWAvOS5i+mXtD3jgIvlt6bmu5HlnZfnp7vliqjvvJvlkKbliJk944CL5Y+z5ruR5Z2X56e75YqoXHJcbiAgICAgICAgICAgIGNvbnN0IG1pZFZhbHVlOiBudW1iZXIgPSAodmFsdWVNYXggKyB2YWx1ZU1pbikgLyAyO1xyXG4gICAgICAgICAgICBpZiAoKHZhbHVlID49IHRoaXMubWluKSAmJiAodmFsdWUgPCBtaWRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXIgPSB0aGlzLnBvaW50ZXJNaW5FbGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWluUG9pbnRlckFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWluUG9pbnRlckFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbHVlID0gdGhpcy5nZXRTdGVwVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWUodmFsdWUpOyAvLyDlkJHlpJbpg6jpgJrnn6V2YWx1ZeWAvFxyXG4gICAgICAgIHRoaXMudmFsdWVUb1Bvc2l0aW9uKHZhbHVlLCBwb2ludGVyKTsgLy8g6Lez6IezdmFsdWXlr7nlupTnmoTlnZDmoIfkvY3nva7vvIjkuI5zdGVw5a+55bqU77yJXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwgIT09IG9sZE1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RvcC5lbWl0KHRoaXMubW9kZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDmi5bmi73lvIDlp4vmiafooYznmoTkuovku7ZcclxuICAgICAqIEBwYXJhbTogdWkg5ouW5ou95Yqp5omLIHtoZWxwZXLvvJrooajnpLrooqvmi5bmi73nmoTliqnmiYvvvIhoZWxwZXLvvIksIHBvc2l0aW9uOiDliqnmiYvvvIhoZWxwZXLvvInnmoTlvZPliY0gQ1NTIOS9jee9rn1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBkcmFnU3RhcnRIYW5kbGUgPSAodWk6IFRpRHJhZ0NvbmZpZyk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuZHJhZ1N0YXJ0TW9kZWwgPSB0aGlzLm1vZGVsO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNNaW5Qb2ludGVyQWN0aXZlID0gIXRoaXMudGlSZW5kZXJlci5oYXNDbGFzcyh1aS5oZWxwZXIsICd0aTMtc2xpZGVyLXBvaW50ZXItbWF4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOagueaNruaLluaLveS9jee9ruabtOaWsHZhbHVl5YC85bm25pS55Y+Y5L2N572u5ZGI546wXHJcbiAgICAgKiBAcGFyYW06IHVpIOaLluaLveWKqeaJiyB7aGVscGVy77ya6KGo56S66KKr5ouW5ou955qE5Yqp5omL77yIaGVscGVy77yJLCBwb3NpdGlvbjog5Yqp5omL77yIaGVscGVy77yJ55qE5b2T5YmNIENTUyDkvY3nva59XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZHJhZ0hhbmRsZSA9ICh1aTogVGlEcmFnQ29uZmlnKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8g6K6+572udmFsdWXlgLxcclxuICAgICAgICBjb25zdCB2YWx1ZTogbnVtYmVyID0gdGhpcy5kcmFnQ29tbW9uSGFuZGxlKHVpKTtcclxuICAgICAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTsgLy8g5ZCR5aSW6YOo6YCa55+ldmFsdWXlgLxcclxuICAgICAgICAvLyDorr7nva50aXDmj5DnpLpcclxuICAgICAgICBpZiAodGhpcy5pc1RpcEF1dG9TaG93KSB7IC8vIOaLluaLvei/h+eoi+S4reaYvuekunRpcOaPkOekulxyXG4gICAgICAgICAgICB0aGlzLnNob3codWkuaGVscGVyLnF1ZXJ5U2VsZWN0b3IoJy50aTMtc2xpZGVyLXRpcCcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRUaXAodWkuaGVscGVyLnF1ZXJ5U2VsZWN0b3IoJy50aTMtc2xpZGVyLXRpcCcpLCB2YWx1ZSk7IC8vIOiuvue9rnRpcOaPkOekuuWAvOWPiuS9jee9rlxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDpvKDmoIflvLnotbfkuYvlkI7vvJrmoLnmja7mi5bmi73kvY3nva7ot7Poh7NzdGVw5a+55bqU55qE5YC85bm26K6+572uc2xpZGVyXHJcbiAgICAgKiBAcGFyYW06IHVpIOaLluaLveWKqeaJiyB7aGVscGVy77ya6KGo56S66KKr5ouW5ou955qE5Yqp5omL77yIaGVscGVy77yJLCBwb3NpdGlvbjog5Yqp5omL77yIaGVscGVy77yJ55qE5b2T5YmNIENTUyDkvY3nva59XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZHJhZ1N0b3BIYW5kbGUgPSAodWk6IFRpRHJhZ0NvbmZpZyk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIOiuvue9rnZhbHVl5YC8XHJcbiAgICAgICAgY29uc3QgdmFsdWU6IG51bWJlciA9IHRoaXMuZHJhZ0NvbW1vbkhhbmRsZSh1aSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVGlwQXV0b1Nob3cpIHsgLy8g5ouW5ou95YGc5q2i6ZqQ6JePdGlw5o+Q56S6XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSh1aS5oZWxwZXIucXVlcnlTZWxlY3RvcignLnRpMy1zbGlkZXItdGlwJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbHVlVG9Qb3NpdGlvbih2YWx1ZSwgdWkuaGVscGVyKTsgLy8g6Lez6IezdmFsdWXlr7nlupTnmoTlnZDmoIfkvY3nva5cclxuICAgICAgICBpZiAodGhpcy5tb2RlbCAhPT0gdGhpcy5kcmFnU3RhcnRNb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0b3AuZW1pdCh0aGlzLm1vZGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g57uE5Lu25Lqk5LqS5pa55rOV6ZuG5ZCILS1lbmRcclxuXHJcbiAgICAvLyDlhoXpg6jlhazlhbHmlrnms5Xpm4blkIgtLXN0YXJ0XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5ouW5ou95YWs5YWx5aSE55CGXHJcbiAgICAgKiBAcGFyYW06IHVpIOaLluaLveWKqeaJiyB7aGVscGVy77ya6KGo56S66KKr5ouW5ou955qE5Yqp5omL77yIaGVscGVy77yJLCBwb3NpdGlvbjog5Yqp5omL77yIaGVscGVy77yJ55qE5b2T5YmNIENTUyDkvY3nva59XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZHJhZ0NvbW1vbkhhbmRsZSh1aTogVGlEcmFnQ29uZmlnKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBwb2ludGVyWDogbnVtYmVyID0gdGhpcy5saW1pdERyYWdQb3NpdGlvbih1aSk7IC8vIOmZkOWItuaMh+mSiOWcqOWQiOeQhueahOS9jee9ruiMg+WbtOWGhVxyXG4gICAgICAgIGNvbnN0IHZhbHVlOiBudW1iZXIgPSB0aGlzLnBvc2l0aW9uVG9TdGVwVmFsdWUocG9pbnRlclgpOyAvLyDojrflj5blvZPliY3kvY3nva7lr7nlupTnmoR2YWx1ZeWAvFxyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOmZkOWItua7keWdl+enu+WKqOS9jee9ruW5tuiuvue9ruWvueW6lOeahOmAieaLqeWMuuWfn+WuveW6plxyXG4gICAgICogQHBhcmFtOiBwb2ludGVyWCDpvKDmoIfngrnlh7vkvY3nva7vvIh45pa55ZCR77yJXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbGltaXREcmFnUG9zaXRpb24odWk6IFRpRHJhZ0NvbmZpZyk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHBvaW50ZXJYOiBudW1iZXIgPSB1aS5wb3NpdGlvbi5sZWZ0OyAvLyDlvZPliY3mu5HlnZfkuK3lv4Pot53nprt0aWNr56ys5LiA5Liq5Z2Q5qCH5L2N572uXHJcbiAgICAgICAgY29uc3QgYmFyV2lkdGg6IG51bWJlciA9IHRoaXMuZ2V0QmFyV2lkdGgoKTtcclxuICAgICAgICBsZXQgcG9pbnRlcldpZHRoSGFsZjogbnVtYmVyID0gdGhpcy5wb2ludGVyTWF4RWxlV2lkdGggLyAyO1xyXG4gICAgICAgIGxldCBwb2ludGVyTWluTGVmdDogbnVtYmVyO1xyXG4gICAgICAgIGxldCBwb2ludGVyTWF4TGVmdDogbnVtYmVyO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc01pblBvaW50ZXJBY3RpdmUpIHsgLy8gbWF45a+55bqU5ruR5Z2X5oOF5Ya155qE5aSE55CGXHJcbiAgICAgICAgICAgICAgICBwb2ludGVyTWluTGVmdCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnBvaW50ZXJNaW5FbGUpLmxlZnQpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlclggPSBUaVNsaWRlckNvbXBvbmVudC5saW1pdFZhbHVlKHBvaW50ZXJYLCBwb2ludGVyTWluTGVmdCwgYmFyV2lkdGgpOyAvLyDpmZDliLbmu5HlnZflnKjmnIDlsI/lkozlj7PovrnnlYzkuYvpl7RcclxuICAgICAgICAgICAgICAgIHBvaW50ZXJNYXhMZWZ0ID0gcG9pbnRlclg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyTWF4TGVmdCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnBvaW50ZXJNYXhFbGUpLmxlZnQpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlclggPSBUaVNsaWRlckNvbXBvbmVudC5saW1pdFZhbHVlKHBvaW50ZXJYLCAwLCBwb2ludGVyTWF4TGVmdCk7IC8vIOmZkOWItua7keWdl+WcqOW3pui+ueeVjOWSjOacgOWkp+S5i+mXtFxyXG4gICAgICAgICAgICAgICAgcG9pbnRlck1pbkxlZnQgPSBwb2ludGVyWDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBzdHlsZXM6IHt3aWR0aDogc3RyaW5nOyBsZWZ0OiBzdHJpbmd9ID0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGAke3BvaW50ZXJNYXhMZWZ0IC0gcG9pbnRlck1pbkxlZnR9cHhgLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogYCR7cG9pbnRlck1pbkxlZnQgKyBwb2ludGVyV2lkdGhIYWxmfXB4YFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRpUmVuZGVyZXIuc2V0U3R5bGVzKHRoaXMuc2VsZWN0aW9uRWxlLCBzdHlsZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBvaW50ZXJYID0gVGlTbGlkZXJDb21wb25lbnQubGltaXRWYWx1ZShwb2ludGVyWCwgMCwgYmFyV2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyMi5zZXRTdHlsZSh0aGlzLnNlbGVjdGlvbkVsZSwgJ3dpZHRoJywgYCR7cG9pbnRlclggKyBwb2ludGVyV2lkdGhIYWxmfXB4YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1aS5wb3NpdGlvbi5sZWZ0ID0gcG9pbnRlclg7IC8vIOmZkOWItua7keWdl+eahOS9jee9ruaYvuekulxyXG5cclxuICAgICAgICByZXR1cm4gcG9pbnRlclg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOagueaNrua7keWdl+S9jee9ruiOt+WPlnZhbHVl5YC8KOWSjHN0ZXDlr7nlupQpICjmi5bmi73lhazlhbHlh73mlbDkuK3nlKgpXHJcbiAgICAgKiBAcGFyYW06IHBvaW50ZXJYIOm8oOagh+eCueWHu+S9jee9ru+8iHjmlrnlkJHvvIlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBwb3NpdGlvblRvU3RlcFZhbHVlKHBvaW50ZXJYOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlOiBudW1iZXIgPSB0aGlzLnBvc2l0aW9uVG9WYWx1ZShwb2ludGVyWCk7IC8vIOiOt+WPluaMh+mSiOWvueW6lOeahHZhbHVl57ud5a+55q+U5L6L5YC8KOWSjHN0ZXDml6DlhbMpXHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFN0ZXBWYWx1ZSh2YWx1ZSk7IC8vIOi9rOWMlnZhbHVl5Li65LiOc3RlcOWvueW6lOeahOWAvDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5L2N572u5a+55bqU55qEdmFsdWXlgLxcclxuICAgICAqIEBwYXJhbTogcG9pbnRlclgg6byg5qCH54K55Ye75L2N572u77yIeOaWueWQke+8iVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHBvc2l0aW9uVG9WYWx1ZShwb2ludGVyWDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBiYXJXaWR0aDogbnVtYmVyID0gdGhpcy5nZXRCYXJXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IHBlcmNlbnQ6IG51bWJlciA9IHBvaW50ZXJYIC8gYmFyV2lkdGg7XHJcbiAgICAgICAgaWYgKCFVdGlsLmlzVW5kZWZpbmVkKHRoaXMucmF0aW9zKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bmVxdWFsUG9zaXRpb25Ub1ZhbHVlKHBvaW50ZXJYLCBiYXJXaWR0aCwgcGVyY2VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5taW4gKyBwZXJjZW50ICogKHRoaXMubWF4IC0gdGhpcy5taW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDorr7nva7nu4Tku7bnmoRtb2RlbOWAvO+8jOeUqOS6juWQkeWklumAmuefpVxyXG4gICAgICogQHBhcmFtOiB2YWx1ZSDlvZPliY3mjIfpkojnmoTlgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRWYWx1ZSh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGUpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVNaW46IG51bWJlciA9IFRpU2xpZGVyQ29tcG9uZW50LnNwbGl0VmFsdWVUb0FycmF5KHRoaXMubW9kZWwpLnZhbHVlTWluO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZU1heDogbnVtYmVyID0gVGlTbGlkZXJDb21wb25lbnQuc3BsaXRWYWx1ZVRvQXJyYXkodGhpcy5tb2RlbCkudmFsdWVNYXg7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc01pblBvaW50ZXJBY3RpdmUgJiYgdmFsdWUgIT09IHZhbHVlTWF4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsID0gYCR7dmFsdWVNaW59OyR7dmFsdWV9YDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTWluUG9pbnRlckFjdGl2ZSAmJiB2YWx1ZSAhPT0gdmFsdWVNaW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwgPSBgJHt2YWx1ZX07JHt2YWx1ZU1heH1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluWvueW6lOeahHN0ZXDlgLwo5qC55o2uc3RlcOS/ruato3ZhbHVl5YC8KVxyXG4gICAgICogQHBhcmFtOiB2YWx1ZSDlvZPliY3ngrnlh7vnmoTnu53lr7nlgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRTdGVwVmFsdWUodmFsdWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgbWluOiBudW1iZXIgPSB0aGlzLm1pbjtcclxuICAgICAgICBjb25zdCBzdGVwOiBudW1iZXIgPSB0aGlzLnN0ZXA7XHJcbiAgICAgICAgbGV0IHN0ZXBWYWx1ZTogbnVtYmVyO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBOOiBudW1iZXIgPSBNYXRoLnJvdW5kKCh2YWx1ZSAtIG1pbikgLyBzdGVwKTsgLy8gdmFsdWXlgLzlj5jljJblh6DkuKrmraXplb9cclxuICAgICAgICBpZiAoc3RlcC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAuaW5kZXhPZignLicpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBuOiBudW1iZXIgPSBzdGVwLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoJy4nKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHN0ZXBWYWx1ZSA9IHBhcnNlRmxvYXQoKG1pbiArIHN0ZXBOICogc3RlcCkudG9GaXhlZChuKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RlcFZhbHVlID0gbWluICsgc3RlcE4gKiBzdGVwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFRpU2xpZGVyQ29tcG9uZW50LmxpbWl0VmFsdWUoc3RlcFZhbHVlLCBtaW4sIHRoaXMubWF4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5Zyo5LiN562J5YiG5p2h5Lu25LiL6I635Y+W5L2N572u5a+55bqU55qEdmFsdWXlgLxcclxuICAgICAqIEBwYXJhbTogcG9pbnRlclgg6byg5qCH54K55Ye75L2N572u77yIeOaWueWQke+8iVxyXG4gICAgICogQHBhcmFtOiBiYXJXaWR0aCDmjIfpkojlrr3luqZcclxuICAgICAqIEBwYXJhbTogcGVyY2VudCBwb2ludGVyWOWNoOa7keWKqOi9tOeZvuWIhuavlFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVuZXF1YWxQb3NpdGlvblRvVmFsdWUocG9pbnRlclg6IG51bWJlciwgYmFyV2lkdGg6IG51bWJlciwgcGVyY2VudDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgbGltaXRXaWR0aDogbnVtYmVyID0gMDsgLy8g5q+P5LiA5q6155qE5a695bqmXHJcbiAgICAgICAgbGV0IHNlbGVjdExlbmd0aDogbnVtYmVyID0gMDsgLy8g5bey6KKr6YCJ5Lit5Yy65Z+f5q6155qE5a695bqmXHJcbiAgICAgICAgbGV0IHJhdGlvc1dpZHRoOiBudW1iZXIgPSAwOyAvLyDlt7LooqvpgInkuK3ljLrln5/mrrXplb/luqblkozljaDmgLvplb/nmoTmr5TkvotcclxuICAgICAgICBjb25zdCBjOiBudW1iZXIgPSB0aGlzLmRlY2ltYWxEaWdpdDtcclxuICAgICAgICBjb25zdCB0aWNrc0xlbjogbnVtYmVyID0gdGhpcy50aWNrc0Fyci5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRpY2tzTGVuIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxpbWl0V2lkdGggPSBiYXJXaWR0aCAqIHRoaXMucmF0aW9zW2ldO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0TGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIHJhdGlvc1dpZHRoID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJhdGlvc1dpZHRoID0gTnVtYmVyKChyYXRpb3NXaWR0aCArIHRoaXMucmF0aW9zW2kgLSAxXSkudG9GaXhlZChjKSk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RMZW5ndGggPSBiYXJXaWR0aCAqIHJhdGlvc1dpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ZXJXaWR0aDogbnVtYmVyID0gcG9pbnRlclggLSBzZWxlY3RMZW5ndGg7XHJcbiAgICAgICAgICAgIGlmIChwZXJjZW50IDw9IE51bWJlcigocmF0aW9zV2lkdGggKyB0aGlzLnJhdGlvc1tpXSkudG9GaXhlZChjKSlcclxuICAgICAgICAgICAgICAgICYmIHBlcmNlbnQgPj0gcmF0aW9zV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRpY2tzQXJyW2ldICsgKHBvaW50ZXJXaWR0aCAvIGxpbWl0V2lkdGgpICogKHRoaXMudGlja3NBcnJbaSArIDFdIC0gdGhpcy50aWNrc0FycltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOW9k+WJjee7hOS7tuWGmeWFpeaWsOWAvCB8fCBtaW4gfHwgbWF4IHx8IHNjYWxlc+WPkeeUn+WPmOWMliDml7bmm7TmlrB2YWx1ZeWvueW6lOeahOS9jee9rlxyXG4gICAgICogQHBhcmFtOiBuZXdWYWx1ZSDpnIDopoHlpITnkIbnmoR2YWx1ZeeahOWAvFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVZhbHVlUG9zaXRpb24obmV3VmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGxldCB2YWx1ZVRtcDogc3RyaW5nO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlVG1wID0gdGhpcy5yZXN0cmljdERvdWJsZVZhbHVlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVNYXg6IG51bWJlciA9IFRpU2xpZGVyQ29tcG9uZW50LnNwbGl0VmFsdWVUb0FycmF5KHZhbHVlVG1wKS52YWx1ZU1heDtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVNaW46IG51bWJlciA9IFRpU2xpZGVyQ29tcG9uZW50LnNwbGl0VmFsdWVUb0FycmF5KHZhbHVlVG1wKS52YWx1ZU1pbjtcclxuICAgICAgICAgICAgLy8g5b2T6K6+572udmFsdWXlnYfkuLrmnIDlpKflgLzmg4XlhrXkuIvvvIzorr7nva7mnIDlsI/mu5HlnZflsYLnuqfvvIznoa7kv53mu5HlnZflj6/ooqvmi5bliqhcclxuICAgICAgICAgICAgLy8g5pyA5bCP5YC855qE5oOF5Ya15bem5Y+z5ruR5Z2XekluZGV455u4562J77yM5L2G5piv5Y+z5ruR5Z2XRE9N5Zyo5bem5ruR5Z2X5LmL5ZCO77yM5Zug5q2k5qC55o2uekluZGV46KeE5YiZ77yM5Y+z5ruR5Z2X5Y+v5Lul6KaG55uW5bem5ruR5Z2XXHJcbiAgICAgICAgICAgIGlmICgodmFsdWVNaW4gPT09IHZhbHVlTWF4KSAmJiAodmFsdWVNaW4gPT09IHRoaXMubWF4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc01pblBvaW50ZXJBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOiuvue9rua7keWdl+eahOS9jee9rlxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlVG9Qb3NpdGlvbih2YWx1ZU1pbiwgdGhpcy5wb2ludGVyTWluRWxlKTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZVRvUG9zaXRpb24odmFsdWVNYXgsIHRoaXMucG9pbnRlck1heEVsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWVUbXAgPSB0aGlzLnJlc3RyaWN0U2luZ2xlVmFsdWUobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlVG9Qb3NpdGlvbih2YWx1ZVRtcCwgdGhpcy5wb2ludGVyTWF4RWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWVUbXApIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHZhbHVlVG1wO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6ZmQ5a6a5Y+M5ruR5Z2XdmFsdWXnmoTlgLxcclxuICAgICAqIEBwYXJhbTogdmFsdWUg6ZyA6KaB5aSE55CG55qEdmFsdWXnmoTlgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZXN0cmljdERvdWJsZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlTWluOiBudW1iZXIgPSBUaVNsaWRlckNvbXBvbmVudC5zcGxpdFZhbHVlVG9BcnJheSh2YWx1ZSkudmFsdWVNaW47IC8vIOWPjOa7keWdl+eahOWwj+WAvFxyXG4gICAgICAgIGNvbnN0IHZhbHVlTWF4OiBudW1iZXIgPSBUaVNsaWRlckNvbXBvbmVudC5zcGxpdFZhbHVlVG9BcnJheSh2YWx1ZSkudmFsdWVNYXg7IC8vIOWPjOa7keWdl+eahOWkp+WAvFxyXG4gICAgICAgIC8vIOmdnuazleaDheWGte+8mumdnuaVsOWtl++8jOi2hei/h+mZkOWItu+8jHZhbHVl5aSn5bCP6aG65bqP5LiN5q2j56Gu5oOF5Ya1XHJcbiAgICAgICAgY29uc3QgaXNJbnZhbGlkVmFsdWVNaW46IGJvb2xlYW4gPSBpc05hTih2YWx1ZU1pbikgfHxcclxuICAgICAgICAgICAgVGlTbGlkZXJDb21wb25lbnQuaXNMaW1pdEV4Y2VlZCh2YWx1ZU1pbiwgdGhpcy5taW4sIHRoaXMubWF4KSB8fCB2YWx1ZU1pbiA+IHZhbHVlTWF4O1xyXG4gICAgICAgIC8vIOmdnuazleaDheWGte+8mumdnuaVsOWtl++8jOi2hei/h+mZkOWItu+8jHZhbHVl5aSn5bCP6aG65bqP5LiN5q2j56Gu5oOF5Ya1XHJcbiAgICAgICAgY29uc3QgaXNJbnZhbGlkVmFsdWVNYXg6IGJvb2xlYW4gPSBpc05hTih2YWx1ZU1heCkgfHxcclxuICAgICAgICAgICAgVGlTbGlkZXJDb21wb25lbnQuaXNMaW1pdEV4Y2VlZCh2YWx1ZU1heCwgdGhpcy5taW4sIHRoaXMubWF4KSB8fCB2YWx1ZU1pbiA+IHZhbHVlTWF4O1xyXG5cclxuICAgICAgICByZXR1cm4gYCR7aXNJbnZhbGlkVmFsdWVNaW4gPyB0aGlzLm1pbiA6IHZhbHVlTWlufTske2lzSW52YWxpZFZhbHVlTWF4ID8gdGhpcy5tYXggOiB2YWx1ZU1heH1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDpmZDlrprljZXmu5HlnZd2YWx1ZeeahOWAvFxyXG4gICAgICogQHBhcmFtOiB2YWx1ZSDpnIDopoHlpITnkIbnmoR2YWx1ZeeahOWAvFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlc3RyaWN0U2luZ2xlVmFsdWUodmFsdWU6IGFueSk6IGFueSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSB8fCB2YWx1ZSA8IHRoaXMubWluKSB7XHJcbiAgICAgICAgICAgIC8vIHZhbHVl5LiN5piv5pWw5a2X5oiW6ICF5bCP5LqO5pyA5bCP5YC8cG9pbnTlrprkvY3liLDmnIDlsI/lgLxcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWluO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgPiB0aGlzLm1heCkge1xyXG4gICAgICAgICAgICAvLyB2YWx1ZeWkp+S6juacgOWkp+WAvHBvaW505a6a5L2N5Yiw5pyA5aSn5YC8XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1heDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog5aSE55CGdGlwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0VGlwQ29uZmlnKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRUaXBTaG93OiAnYXV0bycgfCAnYWx3YXlzJyA9ICdhdXRvJztcclxuICAgICAgICBjb25zdCBkZWZhdWx0VGlwRm9ybWF0dGVyOiAodmFsdWU6IGFueSkgPT4gc3RyaW5nID0gKHZhbHVlOiBhbnkpOiBhbnkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy50aXBNb2RlID0gVXRpbC5pc1VuZGVmaW5lZCh0aGlzLnRpcE1vZGUpID8gZGVmYXVsdFRpcFNob3cgOiB0aGlzLnRpcE1vZGU7XHJcbiAgICAgICAgdGhpcy50aXBGb3JtYXR0ZXJGbiA9IFV0aWwuaXNVbmRlZmluZWQodGhpcy50aXBGb3JtYXR0ZXJGbikgPyBkZWZhdWx0VGlwRm9ybWF0dGVyIDogdGhpcy50aXBGb3JtYXR0ZXJGbjtcclxuICAgICAgICB0aGlzLmlzVGlwQXV0b1Nob3cgPSAodGhpcy50aXBNb2RlICE9PSAnYWx3YXlzJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUaXBBdXRvU2hvdykge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUodGhpcy50aXBNYXhFbGUpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUodGhpcy50aXBNaW5FbGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdyh0aGlzLnRpcE1heEVsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdyh0aGlzLnRpcE1pbkVsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDlpITnkIbpmZDliLZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRNaW5NYXgoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdE1pbjogbnVtYmVyID0gMDtcclxuICAgICAgICBjb25zdCBkZWZhdWx0TWF4OiBudW1iZXIgPSAxMDtcclxuICAgICAgICBjb25zdCBtaW46IG51bWJlciA9IHBhcnNlRmxvYXQoYCR7dGhpcy5taW59YCk7XHJcbiAgICAgICAgY29uc3QgbWF4OiBudW1iZXIgPSBwYXJzZUZsb2F0KGAke3RoaXMubWF4fWApO1xyXG4gICAgICAgIHRoaXMubWluID0gKGlzTmFOKG1pbikgfHwgbWluID49IG1heCkgPyBkZWZhdWx0TWluIDogbWluO1xyXG4gICAgICAgIHRoaXMubWF4ID0gKGlzTmFOKG1heCkgfHwgbWluID49IG1heCkgPyBkZWZhdWx0TWF4IDogbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDlpITnkIbliLvluqZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRTY2FsZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgc3RlcDogbnVtYmVyID0gdGhpcy5zdGVwO1xyXG4gICAgICAgIGNvbnN0IG1pbjogbnVtYmVyID0gdGhpcy5taW47XHJcbiAgICAgICAgY29uc3QgbWF4OiBudW1iZXIgPSB0aGlzLm1heDtcclxuICAgICAgICBsZXQgdGlja3M6IEFycmF5PGFueT4gPSBbXTtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2NhbGVzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGlja3MgPSBUaVNsaWRlckNvbXBvbmVudC50cmFuc2xhdGVTY2FsZXModGhpcy5zY2FsZXMsIG1pbiwgbWF4LCBzdGVwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5zY2FsZXMpKSB7XHJcbiAgICAgICAgICAgIC8vIOS4ukFycmF55oOF5Ya15LiL77yM55u05o6l5L2/55So5pWw5YC8XHJcbiAgICAgICAgICAgIHRoaXMudGlja3MgPSB0aGlzLnNjYWxlcy5jb25jYXQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDmnKrkvKBzY2FsZSjljIXlkKvpnZ7ms5Up55qE5oOF5Ya15LiL77yM5Y+q5pi+56S65pyA5bCP5ZKM5pyA5aSn5YC8XHJcbiAgICAgICAgICAgIGNvbnN0IHRpY2tzTGVuOiBudW1iZXIgPSAobWF4IC0gbWluKSAvIHN0ZXA7XHJcbiAgICAgICAgICAgIHRpY2tzLnB1c2gobWluKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRpY2tzTGVuIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDpmaTmnIDlsI/mnIDlpKflgLzlpJbvvIzlhbbkvZnlj6rmiZPngrnkuI3mmL7npLpsYWJlbFxyXG4gICAgICAgICAgICAgICAgdGlja3MucHVzaCgnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGlja3MucHVzaChtYXgpO1xyXG4gICAgICAgICAgICB0aGlzLnRpY2tzID0gdGlja3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghVXRpbC5pc1VuZGVmaW5lZCh0aGlzLnJhdGlvcykpIHtcclxuICAgICAgICAgICAgbGV0IHJhdGlvc1N1bTogbnVtYmVyID0gMDsgLy8g5bCGcmF0aW9z5Lit5q+P5LiA6aG55LiO5LmL5YmN55qE5rGC5ZKMXHJcbiAgICAgICAgICAgIGNvbnN0IHN1bUFycmF5OiBBcnJheTxudW1iZXI+ID0gW107IC8vICDnlLFyYXRpb3NTdW3nu4TmiJDnmoTmlbDnu4RcclxuICAgICAgICAgICAgY29uc3QgcmF0aW9zTGVuOiBudW1iZXIgPSB0aGlzLnJhdGlvcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCByYXRpb3NMZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcmF0aW9zU3VtID0gTnVtYmVyKChyYXRpb3NTdW0gKyBOdW1iZXIodGhpcy5yYXRpb3NbaV0pKS50b0ZpeGVkKHRoaXMuZGVjaW1hbERpZ2l0KSk7XHJcbiAgICAgICAgICAgICAgICBzdW1BcnJheS5wdXNoKHJhdGlvc1N1bSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGlja3MgPSB0aGlzLmdldFRpY2tzKHN1bUFycmF5LCB0aGlzLmRlY2ltYWxEaWdpdCk7XHJcbiAgICAgICAgICAgIHRoaXMudGlja3MgPSB0aWNrcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOmdnuWdh+WMgOaDheWGteS4i+ehruWumuaJk+eCueeahOS9jee9rlxyXG4gICAgICogQHBhcmFtOiBhcnIg55SxcmF0aW9zU3Vt57uE5oiQ55qE5pWw57uEXHJcbiAgICAgKiBAcGFyYW06IG51bSByYXRpb3PkuK3mnIDlpKfnmoTlsI/mlbDkvY3mlbBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRUaWNrcyhhcnI6IEFycmF5PG51bWJlcj4sIG51bTogbnVtYmVyKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgY29uc3QgbWluU2NhbGU6IG51bWJlciA9IE51bWJlcihNYXRoLnBvdygwLjEsIG51bSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvRml4ZWQobnVtKSk7IC8vICDliKTmlq3mmK/lkKbmiZPngrnnmoTln7rmlbBcclxuICAgICAgICBsZXQgazogbnVtYmVyID0gMTtcclxuICAgICAgICBsZXQgcDogbnVtYmVyID0gMDtcclxuICAgICAgICBjb25zdCB0aWNrczogQXJyYXk8bnVtYmVyPiA9IFt0aGlzLnRpY2tzWzBdXTtcclxuICAgICAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IHBhcnNlSW50KGAkezEgLyBtaW5TY2FsZX1gLCAxMCk7XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHAgPSBOdW1iZXIoKHAgKyBtaW5TY2FsZSkudG9GaXhlZChudW0pKTtcclxuICAgICAgICAgICAgaWYgKGFyci5pbmRleE9mKHApID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8g5Yik5pat5q+P5qyh55u45Yqg5Z+65pWw5ZCO5piv5ZCm5Zyo5pWw57uE5Lit77yM5LiN5Zyo5LiN5omT54K55LiN5pi+56S6bGFiZWxcclxuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1udWxsLWtleXdvcmRcclxuICAgICAgICAgICAgICAgIHRpY2tzLnB1c2gobnVsbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlkKbliJnmiZPngrnmmL7npLpsYWJlbFxyXG4gICAgICAgICAgICAgICAgdGlja3MucHVzaCh0aGlzLnRpY2tzW2tdKTtcclxuICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRpY2tzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiDmmL7npLrpmpDol4/nmoTlhYPntKBcclxuICAgICAqIEBwYXJhbTogZWxlOiDopoHmmL7npLrnmoRET03lr7nosaFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaG93KGVsZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgIC8vIOazqO+8muatpOWkhOacquS9v+eUqG5nLXNob3fmlrnlvI/mjqfliLbmu5HlnZfmmL7npLrmmK/lm6DkuLrmnInlu7bov5/vvIzpgKDmiJDlkI7nu63mlrnms5Xojrflj5Zwb2ludGVy5a695bqm5Li6MO+8jOaYvuekuumUmeS5sVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIyLnNldFN0eWxlKGVsZSwgJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6ZqQ6JeP5pi+56S655qE5YWD57SgXHJcbiAgICAgKiBAcGFyYW06IGVsZTog6KaB6ZqQ6JeP55qERE9N5a+56LGhXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGlkZShlbGU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAvLyDms6jvvJrmraTlpITmnKrkvb/nlKhuZy1zaG935pa55byP5o6n5Yi25ruR5Z2X5pi+56S65piv5Zug5Li65pyJ5bu26L+f77yM6YCg5oiQ5ZCO57ut5pa55rOV6I635Y+WcG9pbnRlcuWuveW6puS4ujDvvIzmmL7npLrplJnkubFcclxuICAgICAgICB0aGlzLnJlbmRlcmVyMi5zZXRTdHlsZShlbGUsICdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6I635Y+WdGlja3PnmoTmnIDlpKfmmL7npLrlrr3luqbvvIzkuIDooYzmmL7npLrkuI3kuIvmg4XlhrXkuIvvvIzmjaLooYzmmL7npLpcclxuICAgICAqIEBwYXJhbTogaW5kZXgg5Yi75bqm5LiL5qCHXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjYWxjVGlja01heFdpZHRoKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHRpY2tzTGVuOiBudW1iZXIgPSB0aGlzLnRpY2tzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBzcGFjZVBlcmNlbnQ6IG51bWJlciA9IDEgLyAodGlja3NMZW4gLSAxKTsgLy8g5Lik5Liq5Yi75bqm54K56Ze06ZqU5a695bqm55m+5YiG55m+77yI5bCP5pWw77yJXHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAwIHx8IGluZGV4ID09PSAodGlja3NMZW4gLSAxKSkge1xyXG4gICAgICAgICAgICAvLyDnrKzkuIDkuKrlkozmnIDlkI7kuIDkuKrliLvluqZcclxuICAgICAgICAgICAgcmV0dXJuIFRpU2xpZGVyQ29tcG9uZW50LnBhcnNlVG9DYWxjU3R5bGUoc3BhY2VQZXJjZW50LCB0aGlzLnBvaW50ZXJNYXhFbGVXaWR0aCAvIDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFRpU2xpZGVyQ29tcG9uZW50LnBhcnNlVG9DYWxjU3R5bGUoc3BhY2VQZXJjZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6I635Y+WIHRpY2tzIOeahGxlZnTkvY3nva5cclxuICAgICAqIEBwYXJhbTogaW5kZXgg5Yi75bqm5LiL5qCHXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjYWxjVGlja0xlZnRQb3NpdGlvbihpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYCR7aW5kZXggLyAodGhpcy50aWNrcy5sZW5ndGggLSAxKSAqIDEwMH0lYDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIEBkZXNjcmlwdGlvbjog56Gu5a6a5ruR5Yqo6L205omT54K55piv5ZCm5Li66YCJ5Lit54K577yM5qC55o2u5Ye95pWw6L+U5Zue5YC86K6+572u6YCJ5Lit5qC35byPICjmmK/lkKbmmK9zZWxlY3Rpb27ljLrln5/nmoTngrkpXHJcbiAgICAgKiBAcGFyYW06IGluZGV4IOWIu+W6puS4i+agh1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNTZWxlY3RUaWNrKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCB0aWNrc0xlbjogbnVtYmVyID0gdGhpcy50aWNrcy5sZW5ndGg7XHJcbiAgICAgICAgLy8g5Y+M5ruR5Z2X5oOF5Ya15LiLLOS9jeS6juacgOWkp+acgOWwj+WAvOS5i+mXtOS4uumAieS4reeKtuaAgVxyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBBcnJheTxzdHJpbmc+ID0gdGhpcy5tb2RlbC5zcGxpdCgnOycpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0xhcmdlVGhhblZhbE1pbjogYm9vbGVhbiA9IGluZGV4IC8gdGlja3NMZW4gPj0gKHBhcnNlRmxvYXQodmFsdWVbMF0pIC0gdGhpcy5taW4pIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xyXG4gICAgICAgICAgICBjb25zdCBpc1NtYWxsVGhhblZhbE1heDogYm9vbGVhbiA9IGluZGV4IC8gdGlja3NMZW4gPD0gKHBhcnNlRmxvYXQodmFsdWVbMV0pIC0gdGhpcy5taW4pIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGlzTGFyZ2VUaGFuVmFsTWluICYmIGlzU21hbGxUaGFuVmFsTWF4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Y2V5ruR5Z2X5oOF5Ya15LiLLOWwj+S6jumAieS4reWAvOS4uumAieS4reeKtuaAgVxyXG4gICAgICAgIHJldHVybiBpbmRleCAvIHRpY2tzTGVuIDw9IChwYXJzZUZsb2F0KHRoaXMubW9kZWwpIC0gdGhpcy5taW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uOiAg6I635Y+W5ruR5Yqo6L2055qE5a695bqmKOa2ieWPiuWIsOWxj+W5lee8qeaUvu+8jOaJgOS7pemcgOimgeWunuaXtuiOt+WPlilcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRCYXJXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrRUxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gdGhpcy5wb2ludGVyTWF4RWxlV2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOiOt+WPlnJhdGlvc+S4reacgOWkp+eahOWwj+aVsOS9jeaVsFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldERlY2ltYWxEaWdpdCgpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGRlY2ltYWxBcnI6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnJhdGlvcykpIHtcclxuICAgICAgICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgoaXRlbTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNpbWFsOiBzdHJpbmcgPSBpdGVtLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLicpWzFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlY2ltYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWNpbWFsQXJyLnB1c2goZGVjaW1hbC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLm1heC5hcHBseShudWxsLCBkZWNpbWFsQXJyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5b2T5YmNdmFsdWXmiYDlnKjnmoTljLrln5/ku6Xlj4rlvZPliY12YWx1ZeWvueW6lOeahOmVv+W6puWNoOaAu+mVv+eahOeZvuWIhuavlCjlsI/mlbApXHJcbiAgICAgKiBAcGFyYW06IHZhbHVlIOaMh+mSiOWvueW6lOeahHZhbHVl5YC8XHJcbiAgICAgKiBAcGFyYW06IHBhcmFncmFwaCDlvZPliY3miZPngrnnmoTmrrXmlbBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRWYWx1ZVBlcmNlbnQodmFsdWU6IG51bWJlciwgcGFyYWdyYXBoOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCByYXRpb3NTdW06IG51bWJlciA9IDA7IC8vIOW9k+WJjeaJk+eCueeahOauteaVsOS4i3JhdGlvc+eahOaAu+WSjFxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBwYXJhZ3JhcGg7IGkrKykge1xyXG4gICAgICAgICAgICByYXRpb3NTdW0gPSBOdW1iZXIoKHJhdGlvc1N1bSArIHRoaXMucmF0aW9zW2ldKS50b0ZpeGVkKHRoaXMuZGVjaW1hbERpZ2l0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmF0aW9zU3VtICsgKHZhbHVlIC0gdGhpcy50aWNrc0FycltwYXJhZ3JhcGhdKSAvICh0aGlzLnRpY2tzQXJyW3BhcmFncmFwaCArIDFdXHJcbiAgICAgICAgICAgIC0gdGhpcy50aWNrc0FycltwYXJhZ3JhcGhdKSAqIHRoaXMucmF0aW9zW3BhcmFncmFwaF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOiuvue9rnBvaW50ZXJET03kvY3nva5cclxuICAgICAqIEBwYXJhbTogdmFsdWUg5oyH6ZKI5a+55bqU55qEdmFsdWXlgLxcclxuICAgICAqIEBwYXJhbTogcG9pbnRlciDooqvorr7nva7nmoRET03lr7nosaFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRQb2ludGVyUG9zKHZhbHVlOiBudW1iZXIsIHBvaW50ZXI6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGxldCB2YWx1ZVBlcmNlbnQ6IG51bWJlcjtcclxuICAgICAgICBpZiAoIVV0aWwuaXNVbmRlZmluZWQodGhpcy5yYXRpb3MpKSB7XHJcbiAgICAgICAgICAgIGlmIChVdGlsLmlzVW5kZWZpbmVkKHRoaXMudGlja3MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50aWNrc0FyciA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnRpY2tzLmZvckVhY2goKHRpY2s6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFVdGlsLmlzTnVsbCh0aWNrKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlja3NBcnIucHVzaCh0aWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpY2tzQXJyTGVuOiBudW1iZXIgPSB0aGlzLnRpY2tzQXJyLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRpY2tzQXJyTGVuIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gdGhpcy50aWNrc0FycltpXSAmJiB2YWx1ZSA8PSB0aGlzLnRpY2tzQXJyW2kgKyAxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlUGVyY2VudCA9IHRoaXMuZ2V0VmFsdWVQZXJjZW50KHZhbHVlLCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbHVlUGVyY2VudCA9ICh2YWx1ZSAtIHRoaXMubWluKSAvICh0aGlzLm1heCAtIHRoaXMubWluKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6K6h566XdmFsdWXlr7nlupTnmoTnmb7liIbmr5TkvY3nva4s5bm25LuldGlja+S4reW/g+eCueWxheS4reaYvuekulxyXG4gICAgICAgIGNvbnN0IHBvaW50ZXJMZWZ0OiBzdHJpbmcgPSBUaVNsaWRlckNvbXBvbmVudC5wYXJzZVRvQ2FsY1N0eWxlKHZhbHVlUGVyY2VudCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlcjIuc2V0U3R5bGUocG9pbnRlciwgJ2xlZnQnLCBwb2ludGVyTGVmdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb246IOaUueWPmOafkOS4gOaMh+mSiHZhbHVl5YC85a+55bqU55qE5oyH56S65L2N572uXHJcbiAgICAgKiBAcGFyYW06IHZhbHVlIOaMh+mSiOWvueW6lOeahHZhbHVl5YC8XHJcbiAgICAgKiBAcGFyYW06IHBvaW50ZXIg6KKr6K6+572u55qERE9N5a+56LGhXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdmFsdWVUb1Bvc2l0aW9uKHZhbHVlOiBhbnksIHBvaW50ZXI6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0UG9pbnRlclBvcyh2YWx1ZSwgcG9pbnRlcik7IC8vIOiuvue9rnBvaW50ZXLkvY3nva5cclxuICAgICAgICBsZXQgc3R5bGVzOiBvYmplY3Q7IC8vIOa7keWKqOi9tOacieaViOWMuuWfn+iDjOaZryDmoLflvI/lr7nosaFcclxuICAgICAgICAvLyDkv67lpI1TU1LmiqXplJnvvJpFUlJPUiB7IEVycm9yOiBVbmNhdWdodCAoaW4gcHJvbWlzZSk6IFR5cGVFcnJvcjogdGhpcy5wb2ludGVyTWF4RWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyBub3QgYSBmdW5jdGlvblxyXG4gICAgICAgIGlmKHR5cGVvZiB0aGlzLnBvaW50ZXJNYXhFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiuvue9rua7keWKqOi9tOacieaViOWMuuWfn+iDjOaZr1xyXG4gICAgICAgIGNvbnN0IHBvaW50ZXJNYXhMZWZ0OiBudW1iZXIgPSB0aGlzLnBvaW50ZXJNYXhFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgICBjb25zdCBwb2ludGVyTWluTGVmdDogbnVtYmVyID0gdGhpcy5wb2ludGVyTWluRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgY29uc3QgYmFyV2lkdGg6IG51bWJlciA9IHRoaXMuZ2V0QmFyV2lkdGgoKTtcclxuICAgICAgICBjb25zdCBiYXJMZWZ0OiBudW1iZXIgPXRoaXMudHJhY2tFTGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgICBjb25zdCBwb2ludGVyV2lkdGhIYWxmOiBudW1iZXIgPSB0aGlzLnBvaW50ZXJNYXhFbGVXaWR0aCAvIDI7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGUpIHtcclxuICAgICAgICAgICAgc3R5bGVzID0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGAkeyhwb2ludGVyTWF4TGVmdCAtIHBvaW50ZXJNaW5MZWZ0KSAqIDEwMCAvIGJhcldpZHRofSVgLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogIGAkeygocG9pbnRlck1pbkxlZnQgLSBiYXJMZWZ0ICsgcG9pbnRlcldpZHRoSGFsZikgKiAxMDAgLyBiYXJXaWR0aCl9JWBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHlsZXMgPSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogYCR7KChwb2ludGVyTWF4TGVmdCAtIGJhckxlZnQgKyBwb2ludGVyV2lkdGhIYWxmKSAqIDEwMCAvIGJhcldpZHRoKX0lYCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aVJlbmRlcmVyLnNldFN0eWxlcyh0aGlzLnNlbGVjdGlvbkVsZSwgc3R5bGVzKTtcclxuICAgICAgICB0aGlzLnNldFRpcChwb2ludGVyLnF1ZXJ5U2VsZWN0b3IoJy50aTMtc2xpZGVyLXRpcCcpLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb2466K6+572uVGlw5o+Q56S65YaF5a655Y+K5L2N572uXHJcbiAgICAgKiBAcGFyYW06IGN1clRpcEVsZSDopoHorr7nva50aXDnmoTlhYPntKBcclxuICAgICAqIEBwYXJhbTogdmFsdWUg6K6+572udGlw5YaF5a655a+55bqU55qEdmFsdWXlgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRUaXAoY3VyVGlwRWxlOiBhbnksIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAvLyDorr7nva50aXDlhoXlrrlcclxuICAgICAgICBjb25zdCB0aXBDb250ZW50OiBzdHJpbmcgPSB0aGlzLnRpcEZvcm1hdHRlckZuKHZhbHVlKTtcclxuICAgICAgICBjdXJUaXBFbGUuaW5uZXJIVE1MID0gdGhpcy5kb21TYW5pdGl6ZXIuc2FuaXRpemUoU2VjdXJpdHlDb250ZXh0LkhUTUwsIHRpcENvbnRlbnQpO1xyXG5cclxuICAgICAgICAvLyDorr7nva7lvZPliY10aXDkvY3nva5cclxuICAgICAgICBjb25zdCB0aXBEaXNwbGF5OiBzdHJpbmcgPSBnZXRDb21wdXRlZFN0eWxlKGN1clRpcEVsZSkuZGlzcGxheTtcclxuICAgICAgICB0aGlzLnNob3coY3VyVGlwRWxlKTsgLy8g5YWI5oqKdGlw5pi+56S65Ye65p2lIOaJjeiDveiOt+WPluWuveW6plxyXG4gICAgICAgIGNvbnN0IHRpcENvbnRlbnRXaWR0aDogbnVtYmVyID0gY3VyVGlwRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlczogeyBsZWZ0OiBzdHJpbmcsIGRpc3BsYXk6IHN0cmluZyB9ID0ge1xyXG4gICAgICAgICAgICBsZWZ0OiBgJHstKHRpcENvbnRlbnRXaWR0aCAtIHRoaXMucG9pbnRlck1heEVsZVdpZHRoKSAvIDIgLSAxfXB4YCwgLy8g5a6a5L2N5Y+XYm9yZGVy55qE5b2x5ZON77yM6ZyA6KaB5YeP5Y67Ym9yZGVy55qE5a695bqmIDFweFxyXG4gICAgICAgICAgICBkaXNwbGF5OiB0aXBEaXNwbGF5IC8vIOiuvue9ruWbnuWOn+adpeeahGRpc3BsYXlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudGlSZW5kZXJlci5zZXRTdHlsZXMoY3VyVGlwRWxlLCBzdHlsZXMpO1xyXG4gICAgICAgIC8vIHRpcOmHjeWQiOaDheWGteWkhOeQhiAgKOWPjOa7keWdl+W5tuS4lHRpcOaYr+S4gOebtOaYvuekuuWHuuadpemCo+enjeWcuuaZrylcclxuICAgICAgICBpZiAodGhpcy5pc0RvdWJsZSAmJiAhdGhpcy5pc1RpcEF1dG9TaG93KSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb246IOa4suafk+W9k+WJjeeahHRpcOagt+W8jyDvvIjnp7vpmaTkuIDkuKpjbGFzc+W5tuS4lOa3u+WKoOS4gOS4qmNsYXNz77yJXHJcbiAgICAgICAgICAgICAqIEBwYXJhbTogdGlwRWxlIOW9k+WJjXRpcERPTVxyXG4gICAgICAgICAgICAgKiBAcGFyYW06IHJlbW92ZUNsYXNzIOimgeenu+mZpOeahGNsYXNz5ZCN5a2XXHJcbiAgICAgICAgICAgICAqIEBwYXJhbTogYWRkQ2xhc3Mg6KaB5re75Yqg55qEY2xhc3PlkI3lrZdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlclRpcFN0eWxlOiAodGlwRWxlOiBhbnksIHJlbW92ZUNsYXNzOiBzdHJpbmcsIGFkZENsYXNzOiBzdHJpbmcpID0+IHZvaWQgPVxyXG4gICAgICAgICAgICAgICAgKHRpcEVsZTogYW55LCByZW1vdmVDbGFzczogc3RyaW5nLCBhZGRDbGFzczogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyMi5yZW1vdmVDbGFzcyh0aXBFbGUsIHJlbW92ZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIyLmFkZENsYXNzKHRpcEVsZSwgYWRkQ2xhc3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyDph43nva50aXDmoLflvI/vvIzpmLLmraLkuYvliY3moLflvI/orr7nva7pgKDmiJDnmoTlvbHlk40gIHRpMy1zbGlkZXItdGlwLXRvcFxyXG4gICAgICAgICAgICByZW5kZXJUaXBTdHlsZSh0aGlzLnRpcE1heEVsZSwgJ3RpMy1zbGlkZXItdGlwLWJvdHRvbScsICd0aTMtc2xpZGVyLXRpcC10b3AnKTtcclxuICAgICAgICAgICAgcmVuZGVyVGlwU3R5bGUodGhpcy50aXBNaW5FbGUsICd0aTMtc2xpZGVyLXRpcC1ib3R0b20nLCAndGkzLXNsaWRlci10aXAtdG9wJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdyh0aGlzLnRpcE1heEVsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdyh0aGlzLnRpcE1pbkVsZSk7XHJcblxyXG4gICAgICAgICAgICAvLyDmnIDlpKfmnIDlsI/lgLzph43lkIjmg4XlhrXkuIvvvIzlj6rmmL7npLrlvZPliY10aXBcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uV2lkdGg6IG51bWJlciA9IHRoaXMuc2VsZWN0aW9uRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uV2lkdGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpUmVuZGVyZXIuaGFzQ2xhc3MoY3VyVGlwRWxlLCAndGkzLXNsaWRlci10aXAtbWF4JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlvZPliY10aXDmmK/mnIDlpKflgLznmoQg6ZqQ6JeP5pyA5bCP5YC8dGlwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKHRoaXMudGlwTWluRWxlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5b2T5YmNdGlw5piv5pyA5bCP5YC855qEIOmakOiXj+acgOWkp+WAvHRpcFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSh0aGlzLnRpcE1heEVsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHRpcOmHjeWQiOaDheWGteS4i++8jOW9k+WJjXRpcOWQkeS4i+aYvuekulxyXG4gICAgICAgICAgICBjb25zdCB0aXBNYXhXaWR0aDogbnVtYmVyID0gdGhpcy50aXBNYXhFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcE1pbldpZHRoOiBudW1iZXIgPSB0aGlzLnRpcE1pbkVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICAgICAgaWYgKCh0aXBNYXhXaWR0aCArIHRpcE1pbldpZHRoKSAvIDIgPj0gc2VsZWN0aW9uV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlclRpcFN0eWxlKGN1clRpcEVsZSwgJ3RpMy1zbGlkZXItdGlwLXRvcCcsICd0aTMtc2xpZGVyLXRpcC1ib3R0b20nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=