{"version":3,"file":"TpSearchboxComponent.d.ts","sources":["TpSearchboxComponent.d.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA","sourcesContent":["import { ChangeDetectorRef, ElementRef, EventEmitter, Renderer2, SimpleChanges, QueryList } from '@angular/core';\r\nimport { TiDateComponent, TiDominatorComponent, TiDropComponent, TiDropsearchComponent, TiFormComponent } from '@cloud/tiny3';\r\nimport { TpIconComponent } from '../icon/TpIconModule';\r\n/**\r\n * tag类型, radio-默认单选， noValue-非正常tag，tag值为空，  checkbox-多选，map-键值tag, numRange-数字范围tag,\r\n * dateRange-日期范围tag。tag 的分类是根据键值的结果划分\r\n */\r\nexport declare type TpSearchboxTagType = 'radio' | 'noValue' | 'checkbox' | 'map' | 'numRange' | 'dateRange';\r\n/**\r\n * 候选tag数据配置项\r\n */\r\nexport interface TpSearchboxItem {\r\n    /**\r\n     * 搜索字段，tag的键\r\n     */\r\n    field: string;\r\n    /**\r\n     * tag 键的显示值，实际结果是field\r\n     */\r\n    label: string;\r\n    /**\r\n     * 配置项可生产的tag类型\r\n     */\r\n    type?: TpSearchboxTagType;\r\n    /**\r\n     * tag 值的选择项数据\r\n     */\r\n    options: Array<TpSearchboxOption>;\r\n    /**\r\n     * 自动识别匹配正则\r\n     * 10.0.2 新增\r\n     */\r\n    regexp?: RegExp;\r\n    /**\r\n     * radio 单选类型可设置, 设置为false时,单选属性可以多次选择\r\n     */\r\n    replace?: boolean;\r\n    /**\r\n     * 单选或多选值的选中项键值\r\n     * 10.0.2 新增\r\n     */\r\n    optionValueKey?: string;\r\n    /**\r\n     * dateRange 类型日期显示和结果格式，dateRange时必选\r\n     */\r\n    format?: string;\r\n    /**\r\n     * numRange 最小值，类型为number\r\n     * dateRange开始日期，类型为Date\r\n     */\r\n    start?: number | Date;\r\n    /**\r\n     * numRange 最大值，类型为number\r\n     * dateRange起始日期，类型为Date\r\n     */\r\n    end?: number | Date;\r\n    /**\r\n     * numRange 可填最小值，用于校验\r\n     * dateRange可选最小值，用于校验\r\n     */\r\n    min?: number | Date;\r\n    /**\r\n     * numRange 可填最大值，用于校验\r\n     * dateRange可选最大值，用于校验\r\n     */\r\n    max?: number | Date;\r\n    /**\r\n     * 每个item对应的提示文本\r\n     */\r\n    placeholder?: string;\r\n    [propName: string]: any;\r\n}\r\nexport interface TpSearchboxOption {\r\n    /**\r\n     * 选项显示值\r\n     */\r\n    label: string;\r\n    /**\r\n     * 搜索目标字段，只有‘label’才需要\r\n     */\r\n    field?: string;\r\n    /**\r\n     * 控制map类型二级选项是否出现内置所有值，map类型需要\r\n     */\r\n    allValues?: boolean;\r\n    /**\r\n     * 控制map类型二级选项是否出现内置空值，map类型需要\r\n     */\r\n    emptyValue?: boolean;\r\n    /**\r\n     * map类型二级选项数据\r\n     */\r\n    options?: Array<any>;\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * 每个选中tag的类型\r\n */\r\nexport interface TpSearchboxTag {\r\n    /**\r\n     * 搜索目标搜字段\r\n     */\r\n    field: string;\r\n    /**\r\n     * tag键，field的显示值\r\n     */\r\n    label: string;\r\n    /**\r\n     * tag值\r\n     */\r\n    value: string;\r\n    /**\r\n     * 类型\r\n     */\r\n    type: TpSearchboxTagType;\r\n    /**\r\n     * 数字范围和日期范围tag 开始值\r\n     */\r\n    start?: number | string;\r\n    /**\r\n     * 数字范围和日期范围tag 结束值\r\n     */\r\n    end?: number | string;\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * search 事件回调参数的数据对象，对象的键对应field，对象的值是字符串数组，单选单个，多选多个\r\n */\r\nexport interface TpSearchboxFilter {\r\n    [propName: string]: Array<String>;\r\n}\r\n/**\r\n * ip正则\r\n * 10.0.2 新增\r\n */\r\nexport declare const TP_REGEXP_IP: RegExp;\r\n/**\r\n * UUID正则\r\n * 10.0.2 新增\r\n */\r\nexport declare const TP_REGEXP_UUID: RegExp;\r\n/**\r\n * 综合搜索组件。\r\n * 用户通过该组件，选择出数据过滤需要的参数\r\n *\r\n * <example-url>../tinyplus3demo/#/searchbox/searchbox-all</example-url>\r\n */\r\nexport declare class TpSearchboxComponent extends TiFormComponent {\r\n    private changeDetectorRef;\r\n    /**\r\n     * @ignore\r\n     * formControl 校验状态，通过了所有有效性检查\r\n     */\r\n    static readonly VALID: string;\r\n    /**\r\n     * @ignore\r\n     * formControl 校验状态，至少有一个有效性检查失败了\r\n     */\r\n    static readonly INVALID: string;\r\n    /**\r\n     * 设置默认的过滤范围字段\r\n     */\r\n    defaultField: string;\r\n    /**\r\n     * 没有生成tag时的占位提示文本\r\n     *\r\n     */\r\n    emptyPlaceholder: string;\r\n    /**\r\n     * 输入框的宽度\r\n     */\r\n    inputWidth: string;\r\n    /**\r\n     * 是否显示帮助图标\r\n     *\r\n     */\r\n    showHelp: boolean;\r\n    /**\r\n     * 是否显示设置defaultField图标\r\n     */\r\n    showSettings: boolean;\r\n    /**\r\n     * 源数据\r\n     */\r\n    items: Array<TpSearchboxItem>;\r\n    /**\r\n     * 设置组件最多显示几行，\r\n     */\r\n    maxLine: number;\r\n    /**\r\n     * 下拉框最大高度，单位为px，\r\n     *\r\n     */\r\n    panelMaxHeight: string;\r\n    /**\r\n     * 设置属性面板宽度\r\n     */\r\n    propPanelWidth: string;\r\n    /**\r\n     * 设置属性值面板宽度\r\n     */\r\n    valuePanelWidth: string;\r\n    /**\r\n     * 设置tag的最大宽度，解决tag太长，属性值\r\n     */\r\n    tagMaxWidth: string;\r\n    /**\r\n     * help 图标提示事件\r\n     */\r\n    readonly help: EventEmitter<any>;\r\n    /**\r\n     * 清除事件\r\n     */\r\n    readonly clear: EventEmitter<any>;\r\n    /**\r\n     * 搜索事件\r\n     */\r\n    readonly search: EventEmitter<TpSearchboxFilter>;\r\n    /**\r\n     * 值面板打开前事件,用于懒加载值选项\r\n     */\r\n    readonly beforeOpen: EventEmitter<TpSearchboxComponent>;\r\n    /**\r\n     * @ignore\r\n     * 选中项后，输入值变化事件\r\n     * 10.0.2 新增\r\n     */\r\n    readonly inputValueChange: EventEmitter<any>;\r\n    /**\r\n     * 默认匹配字段发生改变事件\r\n     * 10.1.2 新增\r\n     */\r\n    readonly defaultFieldChange: EventEmitter<any>;\r\n    /**\r\n     * @ignore\r\n     * 内部标签donimator组件\r\n     */\r\n    dominatorCom: TiDominatorComponent;\r\n    /**\r\n     * @ignore\r\n     * 属性面板\r\n     */\r\n    propDropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     * 值面板\r\n     */\r\n    valueDropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     * 多选值面板\r\n     */\r\n    valueMultiDropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     * 自定义面板 numRange / daterange\r\n     */\r\n    customDropCom: TiDropComponent;\r\n    /**\r\n     * @ignore\r\n     * 设置面板\r\n     */\r\n    settingsDropCom: TiDropComponent;\r\n    /**\r\n     * @ignore\r\n     * 日期范围开始日期\r\n     */\r\n    dateRangeStartCom: TiDateComponent;\r\n    /**\r\n     * @ignore\r\n     * 日期范围结束日期\r\n     */\r\n    dateRangeEndCom: TiDateComponent;\r\n    /**\r\n     * @ignore\r\n     * 搜索输入框\r\n     */\r\n    searchInputRf: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * settings 设置图标 用于drop 设置dominatorElem\r\n     */\r\n    settingsCom: TpIconComponent;\r\n    /**\r\n     * @ignore\r\n     * 右侧图标（help、setting、search）\r\n     */\r\n    rightIconsRef: QueryList<TpIconComponent>;\r\n    /**\r\n     * @ignore\r\n     * 分割符号，默认是中文冒号\r\n     */\r\n    tagSeperator: string;\r\n    /**\r\n     * @ignore\r\n     * 有选中标签后的placeholder\r\n     */\r\n    inputPlaceholder: string;\r\n    /**\r\n     * @ignore\r\n     * 属性选项\r\n     */\r\n    propDropOptions: Array<any>;\r\n    /**\r\n     * @ignore\r\n     * 值选项\r\n     */\r\n    valueDropOptions: Array<any>;\r\n    /**\r\n     * @ignore\r\n     * 输入框的值\r\n     */\r\n    inputValue: string;\r\n    /**\r\n     * @ignore\r\n     * 选中item, 编辑和选择中都会存在\r\n     */\r\n    selectedItem: TpSearchboxItem;\r\n    /**\r\n     * @ignore\r\n     * map类型标签,第一级选中的选项\r\n     */\r\n    selectedOption: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 正在编辑tag\r\n     */\r\n    editingTag: TpSearchboxTag;\r\n    /**\r\n     * @ignore\r\n     * 值面板dominator\r\n     */\r\n    valueDropDominator: HTMLElement;\r\n    /**\r\n     * @ignore\r\n     * 值面板dominator\r\n     */\r\n    settingsDropDominatorElem: HTMLElement;\r\n    /**\r\n     * @ignore\r\n     * 帮助图标提示内容\r\n     */\r\n    helpTipContent: string;\r\n    /**\r\n     * @ignore\r\n     * 清空图标提示内容\r\n     */\r\n    clearTipContent: string;\r\n    /**\r\n     * @ignore\r\n     * 设置默认搜索项图标提示内容\r\n     */\r\n    settingTipContent: string;\r\n    /**\r\n     * @ignore\r\n     * 单选值面板选中项\r\n     */\r\n    propDropSelected: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 单选值面板选中项\r\n     */\r\n    valueDropSelected: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 多选值面板选中项\r\n     */\r\n    valueDropSelecteds: Array<TpSearchboxOption>;\r\n    /**\r\n     * @ignore\r\n     * 设置defaultField面板选中项\r\n     */\r\n    settingsDropSelected: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 设置defaultField面板选项\r\n     */\r\n    settingDropOptions: Array<TpSearchboxOption>;\r\n    /**\r\n     * @ignore\r\n     * drop 面板到触发元素的距离，编辑标签时，距离是6px,所以使用变量\r\n     */\r\n    dominatorSpace: string;\r\n    /**\r\n     * 记录默认选中项旧值，用于判断两次选中是否是同一个值。如果是，则不触发defaultFieldChange事件。\r\n     */\r\n    private oldDefaultField;\r\n    dominatorPlaceholder: string;\r\n    private alwaysFocusableElems;\r\n    private rangeLine;\r\n    private rangeLarge;\r\n    private rangeLess;\r\n    constructor(hostRef: ElementRef, render: Renderer2, changeDetectorRef: ChangeDetectorRef);\r\n    ngOnInit(): void;\r\n    ngOnChanges(changes: SimpleChanges): void;\r\n    ngAfterViewChecked(): void;\r\n    ngAfterViewInit(): void;\r\n    /**\r\n     * @ignore\r\n     * 设置默认field字段面板选中项\r\n     */\r\n    onSettingDropSelect(option: TpSearchboxOption): void;\r\n    /**\r\n     * @ignore\r\n     * tag发生改变（删减、新增）时触发。\r\n     * TODO: 为什么只有在tag删除的时候，才会触发该函数\r\n     */\r\n    onDominatorModelChange(): void;\r\n    private setPlaceholder;\r\n    /**\r\n     * @ignore\r\n     * 输入点击事件\r\n     */\r\n    onClickInput(event: Event): void;\r\n    private propDropSearch;\r\n    /**\r\n     * @ignore\r\n     * 输入框按键按下处理Backspace和Enter键\r\n     */\r\n    onKeydownInput(event: KeyboardEvent): void;\r\n    /**\r\n     * @ignore\r\n     * 输入框值变化处理，\r\n     * 输入值时，如果展开的是属性面板，搜索属性，如果是值面板，单选搜索选项，多选匹配选项\r\n     */\r\n    onInputValueChange(value: string): void;\r\n    /**\r\n     * @ignore\r\n     * 输入框失去焦点\r\n     *\r\n     */\r\n    onBlurInput(): void;\r\n    /**\r\n     * @ignore\r\n     * 输入框聚焦\r\n     */\r\n    onFocusInput(): void;\r\n    /**\r\n     * @ignore\r\n     * 整体失去焦点\r\n     */\r\n    onBlur(): void;\r\n    /**\r\n     * @ignore\r\n     * 删除单个tag\r\n     */\r\n    onDelete(): void;\r\n    /**\r\n     * @ignore\r\n     * 整体点击\r\n     */\r\n    onClick(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 清除所有tag\r\n     */\r\n    onClickClear(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 点击搜索\r\n     */\r\n    onClickSearch(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 点击help图标\r\n     */\r\n    onClickHelp(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 点击设置默认搜索项图标\r\n     */\r\n    onClickSetting(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 是否有label 类型，用于label 类型的特殊处理\r\n     */\r\n    hasLabeltag(): boolean;\r\n    /**\r\n     * @ignore\r\n     * 是否有label 类型，用于label 类型的特殊处理\r\n     */\r\n    onMousedownTagValue(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     */\r\n    onClickTagValue(event: Event, tag: TpSearchboxTag): void;\r\n    /**\r\n     * @ignore\r\n     * tag值聚焦\r\n     */\r\n    onFocusTagValue(event: Event, tag: TpSearchboxTag): void;\r\n    /**\r\n     * @ignore\r\n     * tag值失去焦点\r\n     */\r\n    onBlurTagValue(): void;\r\n    /**\r\n     * @ignore\r\n     * tag 编辑输入框keydown事件，处理编辑状态下 enter 键操作\r\n     */\r\n    onKeydownTagInput(event: KeyboardEvent): void;\r\n    /**\r\n     * @ignore\r\n     * 标签编辑时只有多选需要处理匹配\r\n     */\r\n    onTagInput(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 是否可以编辑\r\n     */\r\n    tagEditable(type: TpSearchboxTagType): boolean;\r\n    /**\r\n     * @ignore\r\n     *  属性面板选中回调\r\n     */\r\n    onPorpDropSelect(option: TpSearchboxOption): void;\r\n    /**\r\n     * 暴露外面的打开值面板接口\r\n     */\r\n    open(options: Array<TpSearchboxOption>): void;\r\n    /**\r\n     * 获取但前选中数据项\r\n     */\r\n    getSelectedItem(): TpSearchboxItem;\r\n    /**\r\n     * @ignore\r\n     * 单选值面板选中，(包括map类型)\r\n     */\r\n    onValueDropSelect(selected: TpSearchboxOption): void;\r\n    /**\r\n     * @ignore\r\n     * 多选底部确定按钮\r\n     */\r\n    onClickValueDropOK(event: Event): void;\r\n    /**\r\n     * @ignore\r\n     * 多选底部取消按钮\r\n     */\r\n    onClickValueDropCancel(): void;\r\n    /**\r\n     * @ignore\r\n     * 数字范围\r\n     */\r\n    onClickCustomDropOK(): void;\r\n    /**\r\n     * @ignore\r\n     * 自定义面板取消按钮回调\r\n     */\r\n    onClickCustomDropCancel(): void;\r\n    /**\r\n     * @ignore\r\n     * numRange 和 dateRange 面板的宽度需要固定值\r\n     */\r\n    customDropWidth(): string;\r\n    private init;\r\n    private initItems;\r\n    private isValidDate;\r\n    private lessMax;\r\n    private moreMin;\r\n    private initPropDropOptions;\r\n    private initSettingDropOptions;\r\n    private matchCheckboxInput;\r\n    private dealRadioItemSearch;\r\n    private setValueDropSearchResult;\r\n    private setCustomValueDropSearchResult;\r\n    private generateTagByInputValue;\r\n    private clearPropDropSelected;\r\n    private responseEnter;\r\n    private responseBackspace;\r\n    private showValueDrop;\r\n    private hideAllDrops;\r\n    private hideValueDrops;\r\n    private hideCustomDrop;\r\n    private searchOptions;\r\n    private mapItemSelect;\r\n    private setValueDropSelecteds;\r\n    private clearState;\r\n    private generateNumRangetag;\r\n    private generateDateRangeTag;\r\n    private afterGenerateTag;\r\n    private setNumRangeDropFocusableElems;\r\n    private setDateRangeDropFocusableElems;\r\n    private getButtons;\r\n    private formatDate2String;\r\n    private generateTagByValuePanel;\r\n    private isTagExist;\r\n    private generateTagByPropDrop;\r\n    private generateTag;\r\n    private addOtherOptionKey;\r\n    private updateModel;\r\n    private emitChange;\r\n    private getValueDropOptions;\r\n    private getFilter;\r\n    private selectHTMLElementText;\r\n}\r\n"]}