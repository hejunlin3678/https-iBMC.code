{"version":3,"file":"cloud-tinyplus3.js","sources":["../../../../@cloud/tinyplus3/components/accessdeclined/TpAccessdeclinedComponent.ts","../../../../@cloud/tinyplus3/components/accessdeclined/TpAccessdeclinedModule.ts","../../../../@cloud/tinyplus3/components/accordionlist/TpAccordionlistComponent.ts","../../../../@cloud/tinyplus3/components/accordionlist/TpAccordionlistModule.ts","../../../../@cloud/tinyplus3/components/anchor/TpAnchorComponent.ts","../../../../@cloud/tinyplus3/components/anchor/TpAnchorModule.ts","../../../../@cloud/tinyplus3/components/beingmaintained/TpBeingmaintainedComponent.ts","../../../../@cloud/tinyplus3/components/supportregionlist/TpSupportregionlistComponent.ts","../../../../@cloud/tinyplus3/components/supportregionlist/TpSupportregionlistModule.ts","../../../../@cloud/tinyplus3/components/beingmaintained/TpBeingmaintainedModule.ts","../../../../@cloud/tinyplus3/components/icon/TpIconComponent.ts","../../../../@cloud/tinyplus3/components/icon/TpIconlocalComponent.ts","../../../../@cloud/tinyplus3/components/icon/TpIconModule.ts","../../../../@cloud/tinyplus3/components/info/TpInfoComponent.ts","../../../../@cloud/tinyplus3/components/info/TpInfoModule.ts","../../../../@cloud/tinyplus3/components/beta/TpBetaComponent.ts","../../../../@cloud/tinyplus3/components/beta/TpBetaModule.ts","../../../../@cloud/tinyplus3/components/pricecalc/TpPricecalcComponent.ts","../../../../@cloud/tinyplus3/components/pricecalc/TpPricecalcModule.ts","../../../../@cloud/tinyplus3/components/buylayer/TpBuylayerComponent.ts","../../../../@cloud/tinyplus3/pipes/locale/TpDatePipe.ts","../../../../@cloud/tinyplus3/pipes/locale/TpNumberPipe.ts","../../../../@cloud/tinyplus3/pipes/locale/TpCurrencyPipe.ts","../../../../@cloud/tinyplus3/pipes/locale/TpLocaleModule.ts","../../../../@cloud/tinyplus3/cfutils/CfUtil.ts","../../../../@cloud/tinyplus3/utils/TpUtil.ts","../../../../@cloud/tinyplus3/components/buylayer/TpBuylayerLeftComponent.ts","../../../../@cloud/tinyplus3/components/buylayer/TpBuylayerRightComponent.ts","../../../../@cloud/tinyplus3/components/discounts/RatePipe.ts","../../../../@cloud/tinyplus3/components/discounts/TpDiscountsComponent.ts","../../../../@cloud/tinyplus3/components/discounts/TpDiscountsModule.ts","../../../../@cloud/tinyplus3/components/buylayer/IsMajorPrice.ts","../../../../@cloud/tinyplus3/components/buylayer/TpBuylayerModule.ts","../../../../@cloud/tinyplus3/components/card/TpCardComponent.ts","../../../../@cloud/tinyplus3/components/card/TpCardAddComponent.ts","../../../../@cloud/tinyplus3/components/card/TpCardHeaderComponent.ts","../../../../@cloud/tinyplus3/components/card/TpCardModule.ts","../../../../@cloud/tinyplus3/components/cascader/TpCascaderComponent.ts","../../../../@cloud/tinyplus3/components/cascader/TpCascaderModule.ts","../../../../@cloud/tinyplus3/components/collapsebox/TpCollapseboxComponent.ts","../../../../@cloud/tinyplus3/components/collapsebox/TpCollapseboxModule.ts","../../../../@cloud/tinyplus3/components/collapsebutton/TpCollapsebuttonComponent.ts","../../../../@cloud/tinyplus3/components/collapsebutton/TpCollapsepanelComponent.ts","../../../../@cloud/tinyplus3/components/collapsebutton/TpCollapsebuttonModule.ts","../../../../@cloud/tinyplus3/components/score/TpScoreComponent.ts","../../../../@cloud/tinyplus3/components/score/TpScoreModule.ts","../../../../@cloud/tinyplus3/components/contactsurvey/TpContactsurveyComponent.ts","../../../../@cloud/tinyplus3/components/contactsurvey/TpContactsurveyModule.ts","../../../../@cloud/tinyplus3/components/copy/TpToastComponent.ts","../../../../@cloud/tinyplus3/components/copy/TpCopyComponent.ts","../../../../@cloud/tinyplus3/components/copy/TpCopyModule.ts","../../../../@cloud/tinyplus3/components/countdown/TpCountdownComponent.ts","../../../../@cloud/tinyplus3/components/countdown/TpCountdownModule.ts","../../../../@cloud/tinyplus3/components/count/TpCountTimeComponent.ts","../../../../@cloud/tinyplus3/components/count/TpCountComponent.ts","../../../../@cloud/tinyplus3/components/count/TpCountStateComponent.ts","../../../../@cloud/tinyplus3/components/count/TpCountPatternComponent.ts","../../../../@cloud/tinyplus3/components/count/TpCountModule.ts","../../../../@cloud/tinyplus3/components/countdownalert/TpCountdownalertComponent.ts","../../../../@cloud/tinyplus3/components/countdownalert/TpCountdownalertModule.ts","../../../../@cloud/tinyplus3/components/crumb/TpCrumbComponent.ts","../../../../@cloud/tinyplus3/components/crumb/TpCrumbModule.ts","../../../../@cloud/tinyplus3/components/descandbuy/TpDescandbuyComponent.ts","../../../../@cloud/tinyplus3/components/helptip/TpHelptipComponent.ts","../../../../@cloud/tinyplus3/components/helptip/TpHelptipModule.ts","../../../../@cloud/tinyplus3/components/descandbuy/TpDescandbuyModule.ts","../../../../@cloud/tinyplus3/components/halfmodal/TpHalfmodalComponent.ts","../../../../@cloud/tinyplus3/components/halfmodal/TpHalfmodalModule.ts","../../../../@cloud/tinyplus3/components/feedback/TpFeedbackContentComponent.ts","../../../../@cloud/tinyplus3/components/feedback/TpFeedbackComponent.ts","../../../../@cloud/tinyplus3/components/feedback/TpFeedbackModule.ts","../../../../@cloud/tinyplus3/components/foldtext/TpFoldtextComponent.ts","../../../../@cloud/tinyplus3/components/foldtext/TpFoldtextModule.ts","../../../../@cloud/tinyplus3/components/frozen/TpFrozenComponent.ts","../../../../@cloud/tinyplus3/components/frozen/TpFrozenModule.ts","../../../../@cloud/tinyplus3/components/frozenpage/TpFrozenpageComponent.ts","../../../../@cloud/tinyplus3/components/frozenpage/TpFrozenpageModule.ts","../../../../@cloud/tinyplus3/components/grid/TpGridComponent.ts","../../../../@cloud/tinyplus3/components/grid/TpGridModule.ts","../../../../@cloud/tinyplus3/components/guides/TpGuidesComponent.ts","../../../../@cloud/tinyplus3/components/guides/TpGuideComponent.ts","../../../../@cloud/tinyplus3/components/guides/TpGuideHeaderComponent.ts","../../../../@cloud/tinyplus3/components/guides/TpGuideContentComponent.ts","../../../../@cloud/tinyplus3/components/guides/TpGuideBodyComponent.ts","../../../../@cloud/tinyplus3/components/guides/TpGuidesModule.ts","../../../../@cloud/tinyplus3/components/guidesteps/TpGuidestepsComponent.ts","../../../../@cloud/tinyplus3/components/guidesteps/TpGuidestepComponent.ts","../../../../@cloud/tinyplus3/components/guidesteps/TpGuidestepHeaderComponent.ts","../../../../@cloud/tinyplus3/components/guidesteps/TpGuidestepContentComponent.ts","../../../../@cloud/tinyplus3/components/guidesteps/TpGuidestepsModule.ts","../../../../@cloud/tinyplus3/components/iconaction/TpIconactionComponent.ts","../../../../@cloud/tinyplus3/components/iconaction/TpIconactionModule.ts","../../../../@cloud/tinyplus3/components/labeleditor/TpLabeleditorComponent.ts","../../../../@cloud/tinyplus3/components/labeleditor/TpLabeleditorModule.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutHeaderComponent.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutContentComponent.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutSectionComponent.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutContentBodyComponent.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutContentHeaderComponent.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutColumnComponent.ts","../../../../@cloud/tinyplus3/components/layout/TpLayoutModule.ts","../../../../@cloud/tinyplus3/components/leftmenu/TpLeftmenuComponent.ts","../../../../@cloud/tinyplus3/components/leftmenu/TpLeftmenuModule.ts","../../../../@cloud/tinyplus3/components/leftmenuthin/TpLeftmenuthinComponent.ts","../../../../@cloud/tinyplus3/components/leftmenuthin/TpLeftmenuthinModule.ts","../../../../@cloud/tinyplus3/components/linkbutton/TpLinkbuttonComponent.ts","../../../../@cloud/tinyplus3/components/linkbutton/TpLinkbuttonModule.ts","../../../../@cloud/tinyplus3/components/linklist/TpLinklistComponent.ts","../../../../@cloud/tinyplus3/components/linklist/TpLinklistModule.ts","../../../../@cloud/tinyplus3/components/modalbody/TpModalBodyComponent.ts","../../../../@cloud/tinyplus3/components/modalbody/TpModalBodyModule.ts","../../../../@cloud/tinyplus3/components/nonsupportregion/TpNonsupportregionComponent.ts","../../../../@cloud/tinyplus3/components/nonsupportregion/TpNonsupportregionModule.ts","../../../../@cloud/tinyplus3/components/priceline/TpPricelineComponent.ts","../../../../@cloud/tinyplus3/components/priceline/TpPricelineModule.ts","../../../../@cloud/tinyplus3/components/productpreview/TpProductpreviewComponent.ts","../../../../@cloud/tinyplus3/components/productpreview/TpProductpreviewModule.ts","../../../../@cloud/tinyplus3/components/progressbar/TpProgressbarComponent.ts","../../../../@cloud/tinyplus3/components/progressbar/TpProgressbarModule.ts","../../../../@cloud/tinyplus3/components/purchaselist/TpPurchaselistComponent.ts","../../../../@cloud/tinyplus3/components/purchaselist/TpPurchaseitemComponent.ts","../../../../@cloud/tinyplus3/components/purchaselist/TpPurchaseNodataComponent.ts","../../../../@cloud/tinyplus3/components/purchaselist/TpPurchaselistModule.ts","../../../../@cloud/tinyplus3/components/recommend/TpRecommendComponent.ts","../../../../@cloud/tinyplus3/components/smartalert/TpSmartalertComponent.ts","../../../../@cloud/tinyplus3/components/smartalert/TpSmartalertModule.ts","../../../../@cloud/tinyplus3/components/recommend/TpRecommendModule.ts","../../../../@cloud/tinyplus3/components/region/TpRegionComponent.ts","../../../../@cloud/tinyplus3/components/region/TpRegionUtil.ts","../../../../@cloud/tinyplus3/components/region/TpRegionModule.ts","../../../../@cloud/tinyplus3/components/regionselect/TpRegionselectComponent.ts","../../../../@cloud/tinyplus3/components/regionselect/TpRegionselectModule.ts","../../../../@cloud/tinyplus3/components/rename/TpRenameModalContainerComponent.ts","../../../../@cloud/tinyplus3/components/rename/TpRenameModalComponent.ts","../../../../@cloud/tinyplus3/components/rename/TpRenameComponent.ts","../../../../@cloud/tinyplus3/components/rename/TpRenameModule.ts","../../../../@cloud/tinyplus3/components/resources/TpResourcesComponent.ts","../../../../@cloud/tinyplus3/components/resources/TpResourceItemComponent.ts","../../../../@cloud/tinyplus3/components/resources/TpResourcesModule.ts","../../../../@cloud/tinyplus3/services/goandback/TpGoandbackComponent.ts","../../../../@cloud/tinyplus3/services/goandback/TpGoandbackModule.ts","../../../../@cloud/tinyplus3/services/goandback/TpGoandbackService.ts","../../../../@cloud/tinyplus3/components/restrict/TpRestrictComponent.ts","../../../../@cloud/tinyplus3/components/restrict/TpRestrictModule.ts","../../../../@cloud/tinyplus3/components/searchbox/TpSearchboxComponent.ts","../../../../@cloud/tinyplus3/components/searchbox/TpSearchboxHelpComponent.ts","../../../../@cloud/tinyplus3/components/searchbox/TpSearchboxModule.ts","../../../../@cloud/tinyplus3/components/selectgroup/TpSelectgroupComponent.ts","../../../../@cloud/tinyplus3/components/selectgroup/TpSelectitemComponent.ts","../../../../@cloud/tinyplus3/components/selectgroup/TpSelectgroupModule.ts","../../../../@cloud/tinyplus3/components/selectsearchbox/TpSelectsearchboxComponent.ts","../../../../@cloud/tinyplus3/components/selectsearchbox/TpSelectsearchboxModule.ts","../../../../@cloud/tinyplus3/components/slidecards/TpSlidecardsComponent.ts","../../../../@cloud/tinyplus3/components/slidecards/TpSlidecardsModule.ts","../../../../@cloud/tinyplus3/components/stepguide/TpStepguideComponent.ts","../../../../@cloud/tinyplus3/components/stepguide/TpStepguideModule.ts","../../../../@cloud/tinyplus3/components/subtitle/TpSubtitleComponent.ts","../../../../@cloud/tinyplus3/components/subtitle/TpSubtitleModule.ts","../../../../@cloud/tinyplus3/components/swiper/TpSwipercardComponent.ts","../../../../@cloud/tinyplus3/components/swiper/TpSwiperComponent.ts","../../../../@cloud/tinyplus3/components/swiper/TpSwiperModule.ts","../../../../@cloud/tinyplus3/services/binding/TpBindingModule.ts","../../../../@cloud/tinyplus3/services/binding/TpBindingService.ts","../../../../@cloud/tinyplus3/services/identification/TpIdentificationModule.ts","../../../../@cloud/tinyplus3/services/identification/TpIdentificationService.ts","../../../../@cloud/tinyplus3/services/identityauth/TpIdentityauthmodalComponent.ts","../../../../@cloud/tinyplus3/services/identityauth/TpIdentityauthModule.ts","../../../../@cloud/tinyplus3/services/identityauth/TpIdentityauthService.ts","../../../../@cloud/tinyplus3/services/recharge/TpRechargeModule.ts","../../../../@cloud/tinyplus3/services/recharge/TpRechargeService.ts","../../../../@cloud/tinyplus3/directives/storage/TpStorageColumnsDirective.ts","../../../../@cloud/tinyplus3/directives/storage/TpStorageColumnsModule.ts","../../../../@cloud/tinyplus3/components/timeline/TpTimelineComponent.ts","../../../../@cloud/tinyplus3/components/timeline/TpTimelineModule.ts","../../../../@cloud/tinyplus3/components/tagsearch/TpTagsearchComponent.ts","../../../../@cloud/tinyplus3/components/tagsearch/TpTagsearchModule.ts","../../../../@cloud/tinyplus3/index.ts","../../../../@cloud/tinyplus3/cloud-tinyplus3.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * 访问受限页面组件\r\n *\r\n * <example-url>../tinyplus3demo/#/accessdeclined/accessdeclined-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-accessdeclined',\r\n    templateUrl: './accessdeclined.html',\r\n    styleUrls: ['./accessdeclined.less']\r\n})\r\n\r\nexport class TpAccessdeclinedComponent extends TiBaseComponent { }\r\n","import { NgModule } from '@angular/core';\r\nimport { TpAccessdeclinedComponent } from './TpAccessdeclinedComponent';\r\nimport { TiLocaleModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n    TiLocaleModule\r\n  ],\r\n  exports: [TpAccessdeclinedComponent],\r\n  declarations: [TpAccessdeclinedComponent]\r\n})\r\n\r\nexport class TpAccessdeclinedModule { }\r\nexport { TpAccessdeclinedComponent } from './TpAccessdeclinedComponent';\r\n","import { Component, ContentChild, Input, QueryList, TemplateRef, ViewChildren } from '@angular/core';\r\nimport { TiAccordionItemComponent, TiActionmenuItem, TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * 折叠面板列表中单个折叠面板的信息接口\r\n */\r\nexport interface TpAccordionlistOption {\r\n    /**\r\n     * 单个折叠面板是否处于展开状态，用于初始化设置，默认不展开\r\n     */\r\n    open?: boolean;\r\n    /**\r\n     * 单个折叠面板是否禁用\r\n     */\r\n    disabled?: boolean;\r\n    /**\r\n     * 单个折叠面板的头部(除过右侧actionmenu操作区)点击回调\r\n     */\r\n    headClick?: ($event: Event) => void;\r\n    /**\r\n     * 单个折叠面板左侧的显示文本\r\n     */\r\n    headlabel?: string;\r\n    /**\r\n     * 单个折叠面板右侧actionmenu操作区配置项\r\n     */\r\n    actionmenu?: TpAccordionlistActionmenuItem;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpAccordionlistActionmenuItem {\r\n    /**\r\n     * 操作项数据集\r\n     */\r\n    items: Array<TiActionmenuItem>;\r\n    /**\r\n     * 数据集中要显示字符串的key\r\n     */\r\n    labelKey?: string;\r\n    /**\r\n     * 下拉面板最大宽度，超过时换行，对所有子菜单都生效\r\n     */\r\n    panelMaxWidth?: string;\r\n    /**\r\n     * 下拉面板最大高度度，超过时出现竖向滚动条，对所有子菜单都生效。\r\n     */\r\n    panelMaxHeight?: string;\r\n    /**\r\n     * 操作项外部容器宽度\r\n     */\r\n    maxWidth?: string;\r\n    /**\r\n     * @ignore\r\n     * 最多显示个数, 包含下拉菜单。UI规范规定最多显示4个, 所以暂不对外开放\r\n     */\r\n    maxShowNum?: number;\r\n    /**\r\n     * 点击选中操作菜单项事件\r\n     */\r\n    select?: (item: TiActionmenuItem, option: TpAccordionlistOption) => void;\r\n\r\n    // moreText?: string; 之后有需求再开放\r\n    // data?: any;\r\n    // dataToItemsFn?: (data: any) => Array<TiActionmenuItem>;\r\n\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n *\r\n *  折叠面板列表组件\r\n *\r\n *  10.1.0版本新增\r\n *\r\n *  10.0.4及之前的版本是以模板的形式提供(只提供了一些样式）；10.1.0版本为了实现样式按需加载和其使用简便性，去掉了之前的模板，封装了该组件。\r\n *\r\n *  <example-url>../tinyplus3demo/#/accordionlist/accordionlist-all</example-url>\r\n *\r\n */\r\n@Component({\r\n    selector: 'tp-accordionlist',\r\n    templateUrl: './accordionlist.html',\r\n    styleUrls: ['./accordionlist.less']\r\n})\r\nexport class TpAccordionlistComponent extends TiBaseComponent {\r\n    /**\r\n     * 展开某一项时，是否关闭其它项\r\n     */\r\n    @Input() closeOthers: boolean = true;\r\n    /**\r\n     * 折叠面板列表数据集合\r\n     */\r\n    @Input() options: Array<TpAccordionlistOption> = [];\r\n    /**\r\n     * @ignore\r\n     * 获取到用户自定义的头部左侧label区模板\r\n     */\r\n    @ContentChild('headLabel', { static: true }) public headLabelTemplate: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     * 获取到用户自定义的展开内容区模板\r\n     */\r\n    @ContentChild('content', { static: true }) public contentTemplate: TemplateRef<any>;\r\n    @ViewChildren(TiAccordionItemComponent) private accordionItemComps: QueryList<TiAccordionItemComponent>;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public headClick($event: Event, option: TpAccordionlistOption, index: number, actionmenuContainer: any): void {\r\n        // 点击非actionmenu区域时展开/收起\r\n        if (!actionmenuContainer.contains($event.target)) {\r\n            const currentAccordionItem: TiAccordionItemComponent = this.accordionItemComps.toArray()[index];\r\n            if (currentAccordionItem) {\r\n                currentAccordionItem.open = !currentAccordionItem.open;\r\n                if (option.headClick) {\r\n                    option.headClick($event);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onActionmenuSelect(item: TiActionmenuItem, option: TpAccordionlistOption): void {\r\n        if (option.actionmenu && option.actionmenu.select) {\r\n            option.actionmenu.select(item, option);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public getActionmenuItems(option: TpAccordionlistOption): Array<TiActionmenuItem> {\r\n        if (!option.actionmenu || !option.actionmenu.items || option.actionmenu.items.length < 1) {\r\n            return [];\r\n        }\r\n\r\n        return option.actionmenu.items.map((item: TiActionmenuItem): TiActionmenuItem => {\r\n            item.disabled = option.disabled || item.disabled;\r\n\r\n            return item;\r\n        });\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiAccordionModule, TiActionmenuModule } from '@cloud/tiny3';\r\n\r\nimport { TpAccordionlistComponent } from './TpAccordionlistComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiAccordionModule,\r\n    TiActionmenuModule\r\n  ],\r\n  exports: [TpAccordionlistComponent],\r\n  declarations: [TpAccordionlistComponent]\r\n})\r\n\r\nexport class TpAccordionlistModule {}\r\nexport { TpAccordionlistComponent, TpAccordionlistOption, TpAccordionlistActionmenuItem } from './TpAccordionlistComponent';\r\n","import { Component, ContentChild, ElementRef, EventEmitter, Input, NgZone, Output, Renderer2, SimpleChange, SimpleChanges, TemplateRef } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\nexport interface TpAnchorItem {\r\n    /* tslint:disable:no-redundant-jsdoc */\r\n    /**\r\n     * 设置id，对应页面中联动的DOM元素id;\r\n     */\r\n    id: string;\r\n    /**\r\n     * 设置文本;\r\n     */\r\n    title?: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * 定位导航组件\r\n *\r\n * <example-url>../tinyplus3demo/#/anchor/anchor-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-anchor',\r\n    templateUrl: './anchor.html',\r\n    styleUrls: ['./anchor.less'],\r\n    host: {\r\n        '[class.tp-anchor-container]': 'true'\r\n    }\r\n})\r\n\r\nexport class TpAnchorComponent extends TiBaseComponent {\r\n    /**\r\n     * 组件数据\r\n     */\r\n    @Input() items: Array<TpAnchorItem>;\r\n    /**\r\n     * 设置要跳转到的目标锚点元素id，对应页面中联动的DOM元素id\r\n     */\r\n    @Input() anchorId: string;\r\n    /**\r\n     * 设置锚点对应Dom元素距窗口顶部距离，点击切换锚点时，页面滑动在到达该值时，切换到对应锚点\r\n     *\r\n     * <b>注：</b>通过滚轮滚动时，当顶部距离小于设置的offsetTop值，切换到对应锚点\r\n     */\r\n    @Input() offsetTop: number = 50;\r\n    /**\r\n     * 设置用户点击锚点时，页面滑动速度，其单位为ms\r\n     */\r\n    @Input() speed: number = 300;\r\n    /**\r\n     * 跳转到该锚点时，触发事件\r\n     */\r\n    @Output() readonly select: EventEmitter<TpAnchorItem> = new EventEmitter<TpAnchorItem>();\r\n    /**\r\n     * 锚点id改变事件，用于实现锚点id双向绑定，也可单独使用\r\n     *\r\n     * 10.0.4/9.0.8新增接口\r\n     */\r\n    @Output() readonly anchorIdChange: EventEmitter<string> = new EventEmitter<string>();\r\n    /**\r\n     * @ignore\r\n     * 获取到用户自定义的模板\r\n     */\r\n    @ContentChild('item', { static: true }) itemTemplete: TemplateRef<any>;\r\n    private unlistenScroll: () => void;\r\n    /**\r\n     * 是否组件内部触发scroll事件\r\n     */\r\n    private isInnerScrolling: boolean;\r\n    /**\r\n     * @ignore\r\n     * 保存组件内部更改后的锚点id\r\n     */\r\n    public currentId: string;\r\n    private hasGoanchor: boolean = false;\r\n    private hasAnimation: boolean = false; // 初始化及数据更新时，无需平滑滚动\r\n    constructor(private element: ElementRef, private renderer2: Renderer2, private zone: NgZone) {\r\n        super(element, renderer2);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        const anchorIdObj: SimpleChange = changes['anchorId'];\r\n        const itemsObj: SimpleChange = changes['items'];\r\n        if (anchorIdObj && anchorIdObj.currentValue && !anchorIdObj.isFirstChange() && this.anchorId !== this.currentId) {\r\n            this.hasGoanchor = false;\r\n            this.hasAnimation = true;\r\n        }\r\n        if (itemsObj && itemsObj.currentValue && !itemsObj.isFirstChange()) {\r\n            this.hasGoanchor = false;\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 监听滚轮事件\r\n        this.zone.runOutsideAngular(() => {\r\n            this.unlistenScroll = this.renderer2.listen(window, 'scroll', () => {\r\n                this.onWindowScroll();\r\n            });\r\n        });\r\n    }\r\n\r\n    ngAfterViewChecked(): void {\r\n        super.ngAfterViewChecked();\r\n        // 数据更新anchorId有值时，需要滚动页面到指定位置，只触发一次\r\n        if (!this.hasGoanchor) {\r\n            this.hasGoanchor = true;\r\n            this.goToAnchor(this.anchorId || this.items && this.items[0] && this.items[0].id);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this.unlistenScroll) {\r\n            this.unlistenScroll();\r\n        }\r\n    }\r\n\r\n    // 页面滚动时，相应锚点高亮\r\n    private onWindowScroll(): void {\r\n        if (this.isInnerScrolling) {\r\n            return;\r\n        }\r\n        const scrollTop: number = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\r\n        const itemLength: number = this.items && this.items.length;\r\n        // 页面滚动时，锚点对应Dom元素距浏览器窗口顶部高度小于等于所配置的顶部偏移量，则应是当前锚点\r\n        for (let i: number = itemLength - 1; i >= 0; i--) {\r\n            const anchorEle: HTMLElement = document.getElementById(this.items[i].id);\r\n            // 判断有无当前激活锚点，使用户点击时，只当前锚点高亮；而滚动时，相对应锚点都高亮\r\n            if (anchorEle && anchorEle.offsetTop) {\r\n                const clientY: number = anchorEle.offsetTop - scrollTop - this.offsetTop;\r\n                const id: string = this.anchorId;\r\n                if (clientY <= this.offsetTop) {\r\n                    this.zone.run(() => {\r\n                        this.anchorId = this.currentId = this.items[i].id;\r\n                        // 锚点改变时，仅向外通知一次\r\n                        if (this.anchorId !== id) {\r\n                            this.select.emit(this.items[i]);\r\n                            this.anchorIdChange.emit(this.items[i].id);\r\n                        }\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(item: TpAnchorItem): void {\r\n        this.hasAnimation = true;\r\n        this.goToAnchor(item.id);\r\n    }\r\n\r\n    /**\r\n     * 页面滚动到目标锚点对应位置\r\n     * @param anchorId 锚点id\r\n     */\r\n    private goToAnchor(anchorId: string): void {\r\n        this.isInnerScrolling = true;\r\n        const targetEle: HTMLElement = document.getElementById(anchorId);\r\n        const scrollTop: number = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\r\n        const scollPosition: number = targetEle && targetEle.offsetTop - this.offsetTop;\r\n\r\n        /**\r\n         * 初始化及数据更新时，页面直接滚动到定位位置；\r\n         * 点击锚点切换及用户动态改变当前锚点id时，滚动条平滑运动。\r\n         */\r\n        if (this.hasAnimation) {\r\n            this.scrollAnimation(scrollTop, scollPosition, anchorId, this.speed);\r\n        } else {\r\n            // 修改了当前高亮锚点，使用setTimeout，消除ExpressionChangedAfterItHasBeenCheckedError报错\r\n            setTimeout(() => {\r\n                this.scrollToView(scollPosition, anchorId);\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    // 滚动条平滑运动\r\n    private scrollAnimation(currentY: number, targetY: number, anchorId: string, speed?: number): void {\r\n        const direction: number = targetY - currentY > 0 ? 1 : -1;\r\n        let distance: number = Math.abs(targetY - currentY);  // 滚动条需要滚动的距离\r\n        const stepTimes: number = speed / (1000 / 60); // 一般浏览器刷新频率是60HZ，时间间隔为1000ms/60，总帧数\r\n        let stepDist: number = distance / stepTimes; // 每帧滚动条滚动距离\r\n\r\n        if (targetY !== currentY) {\r\n            stepDist *= direction;\r\n            // 定时器，1000/60ms时间间隔 执行一次\r\n            let positionY: number = currentY;\r\n            let timer: any = setInterval(() => {\r\n                positionY = positionY + stepDist;\r\n                distance -= Math.abs(stepDist);\r\n                if (distance <= 0) {\r\n                    clearInterval(timer);\r\n                    timer = undefined;\r\n                    this.scrollToView(targetY, anchorId);\r\n                    this.hasAnimation = false; // 更新hasAnimation\r\n                } else {\r\n                    window.scrollTo(0, positionY);\r\n                }\r\n            }, 1000 / 60);\r\n        }\r\n    }\r\n\r\n    // 页面定位到指定位置，无滚动效果\r\n    private scrollToView(target: number, anchorId: string): void {\r\n        window.scrollTo(0, target); // 横向坐标不移动\r\n        this.getCurrentAnchor(anchorId);\r\n        this.isInnerScrolling = false;\r\n    }\r\n\r\n    // 页面滚动到指定位置之后，向外通知当前锚点数据\r\n    private getCurrentAnchor(anchorId: string): void {\r\n        this.anchorId = this.currentId = anchorId;\r\n        for (const item of this.items) {\r\n            if (item.id === anchorId) {\r\n                this.select.emit(item);\r\n                this.anchorIdChange.emit(item.id);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpAnchorComponent } from './TpAnchorComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [TpAnchorComponent],\r\n  declarations: [TpAnchorComponent]\r\n})\r\n\r\nexport class TpAnchorModule {}\r\nexport { TpAnchorComponent, TpAnchorItem } from './TpAnchorComponent';\r\n","import { ChangeDetectorRef, Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\nimport { AccountService } from '@cloud/cfdata';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * 区域服务维护页面组件\r\n *\r\n * 该组件与console框架相关，框架处理数据，组件获取数据显示；\r\n * 使用时只需引入该组件，无需配置属性接口。\r\n *\r\n * <b>注</b>：支持列表中的region区域是服务已配置的可支持的区域。\r\n *\r\n * <example-url>../tinyplus3demo/#/beingmaintained/beingmaintained-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-beingmaintained',\r\n    templateUrl: 'beingmaintained.html',\r\n    styleUrls: ['beingmaintained.less'],\r\n})\r\n\r\nexport class TpBeingmaintainedComponent extends TiBaseComponent {\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('container') containerEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    maintainRegions: Array<any>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    label: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    maintainTime: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    describe: string;\r\n    private regionsDataSub: Subscription;\r\n    private tpBeingmaintained: any = TiLocale.getLocaleWords().tpBeingmaintained;\r\n\r\n    constructor(\r\n        private elementRef: ElementRef,\r\n        private renderer2: Renderer2,\r\n        private changeDetector: ChangeDetectorRef) {\r\n        super(elementRef, renderer2);\r\n    }\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.setRegionsData();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this.regionsDataSub) {\r\n            this.regionsDataSub.unsubscribe();\r\n        }\r\n    }\r\n\r\n    private setRegionsData(): void {\r\n        if (!(window as any).cfRegionSubject) {\r\n            return;\r\n        }\r\n\r\n        this.regionsDataSub = (window as any).cfRegionSubject.subscribe({\r\n            next: (items: { region: any, maintainRegions: Array<any> }): void => {\r\n                if (items.region && items.region.displayName) {\r\n                    const displayName: any = `<span>${items.region.displayName}</span>`;\r\n                    this.label = Util.formatEntry(this.tpBeingmaintained.label, [displayName]);\r\n                    this.getMaintainData().then((maintainData: { time: string, describe: string }) => {\r\n                        if (maintainData) {\r\n                            if (!Util.isEmptyString(maintainData.time)) {\r\n                                this.maintainTime = `${this.tpBeingmaintained.maintainTime}${maintainData.time}`;\r\n                            }\r\n                            this.describe = maintainData.describe;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                this.maintainRegions = items.maintainRegions;\r\n                this.changeDetector.detectChanges();\r\n            }\r\n        });\r\n    }\r\n\r\n    private getMaintainData(): Promise<any> {\r\n        return AccountService.queryCustomMaintenances().then((data: any) => {\r\n            let time: string = '';\r\n            let describe: string = '';\r\n            if (data) {\r\n                time = data.startTime + ' - ' + data.endTime;\r\n                describe = data.describe;\r\n            }\r\n            return { time, describe };\r\n        });\r\n    }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n * 内部使用组件\r\n */\r\n@Component({\r\n    selector: 'tp-supportregionlist',\r\n    templateUrl: './supportregionlist.html',\r\n    styleUrls: ['./supportregionlist.less']\r\n})\r\n\r\nexport class TpSupportregionlistComponent extends TiBaseComponent {\r\n    @Input() regions: Array<any>;\r\n    private selectedRegionEvent: any;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    onClick(item: any): void {\r\n        if (!this.selectedRegionEvent) {\r\n            this.selectedRegionEvent = document.createEvent('HTMLEvents');\r\n            this.selectedRegionEvent.initEvent('cfChangeRegion', true, true);\r\n        }\r\n\r\n        this.selectedRegionEvent.detail = item;\r\n        document.dispatchEvent(this.selectedRegionEvent);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    onClickIcon(event: Event, item: any): void {\r\n        item.showProjectsList = !item.showProjectsList;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiLocaleModule } from '@cloud/tiny3';\r\nimport { TpSupportregionlistComponent } from './TpSupportregionlistComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiLocaleModule\r\n  ],\r\n  exports: [TpSupportregionlistComponent],\r\n  declarations: [TpSupportregionlistComponent]\r\n})\r\n\r\nexport class TpSupportregionlistModule { }\r\nexport { TpSupportregionlistComponent } from './TpSupportregionlistComponent';\r\n","import { NgModule } from '@angular/core';\r\nimport { TiLocaleModule } from '@cloud/tiny3';\r\nimport { TpBeingmaintainedComponent } from './TpBeingmaintainedComponent';\r\nimport { TpSupportregionlistModule } from '../supportregionlist/TpSupportregionlistModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    TiLocaleModule,\r\n    TpSupportregionlistModule\r\n  ],\r\n  exports: [TpBeingmaintainedComponent],\r\n  declarations: [TpBeingmaintainedComponent]\r\n})\r\n\r\nexport class TpBeingmaintainedModule {}\r\nexport { TpBeingmaintainedComponent } from './TpBeingmaintainedComponent';\r\n","import { Component, Input, SimpleChange, SimpleChanges, ElementRef, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent, Util } from '@cloud/tiny3';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { share } from 'rxjs/operators';\r\n\r\n// TODO：如果封装为胶囊样式，DOM内部多一层，比现在优劣？\r\n/**\r\n *  Icon组件，非本地懒加载Icon\r\n *\r\n *  Icon组件可以设置显示Icon。\r\n *\r\n * <example-url>../tinyplus3demo/#/icon/icon-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-icon:not([local])',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./icon.less'],\r\n    host: {\r\n        '[class.tp-cloud-action-state-ing]': \"name === 'cloud-action-state-ing'\"\r\n    },\r\n})\r\nexport class TpIconComponent extends TiBaseComponent {\r\n\r\n    /**\r\n     * Icon基路径\r\n     */\r\n    private static path: string = 'assets/tinyplus3/icons/';\r\n    /**\r\n     * 保存url和观察者，避免并发的重复请求。\r\n     */\r\n    private static urlObservableMap: Map<String, Observable<string>> = new Map<String, Observable<string>>();\r\n    /**\r\n     * icon名称\r\n     */\r\n    @Input() name: string;\r\n\r\n    constructor(protected hostRef: ElementRef, protected renderer: Renderer2, private http: HttpClient) {\r\n        super(hostRef, renderer);\r\n    }\r\n    /**\r\n     * 设置icon下载地址，默认是'assets/tinyplus3/icons/'\r\n     * @param path\r\n     */\r\n    public static setPath(path: string): void {\r\n        TpIconComponent.path = path;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        const nameChange: SimpleChange = changes['name'];\r\n        if (nameChange && !Util.isEmptyString(nameChange.currentValue)) {\r\n            // 拼接URL\r\n            const url: string = `${TpIconComponent.path}${nameChange.currentValue}.svg`;\r\n            // 取出观察者\r\n            let ob: Observable<string> = TpIconComponent.urlObservableMap.get(url);\r\n            if (!ob) {\r\n                // 如果不存在观察者，则发起http请求。share()是为了避免每次订阅都发起http请求。\r\n                ob = this.http.get(url, { responseType: 'text' }).pipe(share());\r\n                // 保存ur和观察者\r\n                TpIconComponent.urlObservableMap.set(url,ob);\r\n            }\r\n            // 订阅http请求结果\r\n            ob.subscribe(\r\n                (svgText: string): void => {\r\n                    // 将<svg>挂在<tp-icon>下\r\n                    this.nativeElement.innerHTML = svgText;\r\n                    // 删除url和观察者\r\n                    TpIconComponent.urlObservableMap.delete(url);\r\n                }\r\n            );\r\n        }\r\n    }\r\n}\r\n","import { Component, Input, SimpleChange, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n// TODO：如果封装为胶囊样式，DOM内部多一层，比现在优劣？\r\n/**\r\n * @ignore Icon组件，本地Icon\r\n *\r\n *  Icon组件可以设置显示Icon。\r\n *\r\n * <example-url>../tinyplus3demo/#/icon/icon-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-icon[local]',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./iconlocal.less'],\r\n    encapsulation: ViewEncapsulation.None // 样式是加在标签上的，不是内部，所以非胶囊\r\n})\r\nexport class TpIconlocalComponent extends TiBaseComponent {\r\n    /**\r\n     * icon名称\r\n     */\r\n    @Input() name: string;\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        const nameChange: SimpleChange = changes['name'];\r\n        if (nameChange) {\r\n            this.renderer.removeClass(this.nativeElement, `tp-icon-${nameChange.previousValue}`);\r\n            this.renderer.addClass(this.nativeElement, `tp-icon-${nameChange.currentValue}`);\r\n        }\r\n    }\r\n}\r\n/* ti-icon组件，为了防止多个组件重复使用字体图标文件，导致最终用户打包文件成倍增大。\r\n因此封装该组件，确保最终打包只引用一份字体图标样式及文件 */\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpIconComponent } from './TpIconComponent';\r\nimport { TpIconlocalComponent } from './TpIconlocalComponent';\r\n\r\n// 此模块不导入HttpClient，是因为懒加载模块中的HttpClientModule，会覆盖全局的。导致http拦截器失效。\r\n// import { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  imports: [CommonModule/* , HttpClientModule */],\r\n  exports: [TpIconComponent, TpIconlocalComponent],\r\n  declarations: [TpIconComponent, TpIconlocalComponent]\r\n})\r\nexport class TpIconModule {}\r\nexport { TpIconComponent } from './TpIconComponent';\r\nexport { TpIconlocalComponent } from './TpIconlocalComponent';\r\n","import { Component, ElementRef, Input, Renderer2, ViewChild } from '@angular/core';\r\n// import { TpUtil } from '../../utils/TpUtil';\r\nimport { TiLocale, TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n * <example-url>../tinyplus3demo/#/info/info-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-info',\r\n    templateUrl: './info.html',\r\n    styleUrls: ['./info.less']\r\n})\r\n\r\nexport class TpInfoComponent extends TiBaseComponent {\r\n    /**\r\n     * 提示信息类型，有两种可选择类型：'restricted'，'unverified'\r\n     */\r\n    @Input() infoType: string = 'unverified';\r\n    private config: object = {\r\n        restricted: {\r\n            cls: 'tp-info-restricted',\r\n            content: TiLocale.getLocaleWords().tpInfo.restricted\r\n        },\r\n        unverified: {\r\n            cls: 'tp-info-unverified',\r\n            content: TiLocale.getLocaleWords().tpInfo.unverified\r\n        }\r\n    };\r\n\r\n    // content元素elementRef\r\n    @ViewChild('contentEle', {static: true}) private contentEle: ElementRef;\r\n\r\n    // 提示内容\r\n    public content: string;\r\n\r\n    constructor(private element: ElementRef, protected renderer: Renderer2) {\r\n        super(element, renderer);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        const typeConfig: any = this.config[this.infoType];\r\n        this.renderer.addClass(this.element.nativeElement, typeConfig.cls);\r\n        this.content = typeConfig.content;\r\n    }\r\n\r\n    // ngAfterViewInit(): void {\r\n    //     TpInfoComponent.setATag(this.contentEle.nativeElement);\r\n    // }\r\n\r\n    // // 设置a标签样式和行为方式\r\n    // private static setATag(element: HTMLElement): any {\r\n    //     const aTags: NodeListOf<HTMLAnchorElement> = element.querySelectorAll('a');\r\n    //     if (!aTags || aTags.length === 0) {\r\n    //         console.log('!aTags');\r\n    //         return;\r\n    //     }\r\n    //     aTags.forEach((atag: HTMLAnchorElement) => {\r\n    //         TpUtil.setAttrs(atag, {\r\n    //             class: 'tp-link-no-decoration',\r\n    //             target: '_blank'\r\n    //         });\r\n    //     });\r\n    // }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TpInfoComponent } from './TpInfoComponent';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@NgModule({\r\n  imports: [TpIconModule],\r\n  exports: [TpInfoComponent],\r\n  declarations: [TpInfoComponent]\r\n})\r\n\r\nexport class TpInfoModule {}\r\nexport { TpInfoComponent } from './TpInfoComponent';\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * 公测组件\r\n *\r\n * <example-url>../tinyplus3demo/#/beta/beta-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-beta',\r\n    templateUrl: './beta.html',\r\n    styleUrls: ['./beta.less']\r\n})\r\nexport class TpBetaComponent extends TiBaseComponent {\r\n    /**\r\n     * 服务图标\r\n     */\r\n    @Input() icon: string;\r\n    /**\r\n     * 了解更多跳转链接\r\n     */\r\n    @Input() moreUrl: string = '';\r\n    /**\r\n     * 服务介绍描述\r\n     */\r\n    @Input() intro: string = '';\r\n    /**\r\n     * 服务消息描述\r\n     */\r\n    @Input() message: string = '';\r\n    /**\r\n     * 是否实名认证，未实名认证情况会有提示，并且申请按钮灰化\r\n     */\r\n    @Input() verified: boolean = true;\r\n    /**\r\n     * 立即申请跳转链接\r\n     */\r\n    @Input() applyUrl: string = '';\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClickFn(event: Event): void {\r\n        if(!this.verified) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TiButtonModule, TiLocaleModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TpInfoModule } from '../info/TpInfoModule';\r\nimport { TpBetaComponent } from './TpBetaComponent';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, TiButtonModule, TiLocaleModule, TpIconModule, TpInfoModule],\r\n  exports: [TpBetaComponent],\r\n  declarations: [TpBetaComponent]\r\n})\r\nexport class TpBetaModule {}\r\nexport { TpBetaComponent } from './TpBetaComponent';\r\n","import { Component, ContentChild, ElementRef, EventEmitter, Input, Output, Renderer2, SecurityContext, TemplateRef, ViewChild } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { TiBaseComponent, TiBrowser, TiLocale, Util } from '@cloud/tiny3';\r\n\r\n// 配置values接口且URL不是默认的帮助中心链接时，组件创建表单，将value数据提交到配置的URL地址；\r\n// 否则，组件不创建表单，点击直接跳转到帮助中心，查看产品详情\r\n\r\nexport interface TpPricecalcParam {\r\n    value: string;\r\n    key: string;\r\n}\r\n\r\n/**\r\n * 价格计算器组件\r\n *\r\n * <example-url>../tinyplus3demo/#/pricecalc/pricecalc-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-pricecalc',\r\n    templateUrl: './pricecalc.html',\r\n    styleUrls: ['./pricecalc.less']\r\n})\r\nexport class TpPricecalcComponent extends TiBaseComponent {\r\n    /**\r\n     * 图标右侧文本\r\n     *\r\n     * 缺省值 : 价格计算器/price Calculator（国际化）\r\n     */\r\n    @Input() label: string = TiLocale.getLocaleWords().tpPricecalc.label;\r\n    /**\r\n     * 查看详情的链接地址\r\n     *\r\n     */\r\n    @Input() detailHref: string;\r\n\r\n    /**\r\n     * 查询的产品信息\r\n     *\r\n     * 类型为对象数组，对象包含两个属性：key和value（url地址参数形式为key1=value1&key2=value2）\r\n     */\r\n    @Input() values: Array<TpPricecalcParam>;\r\n    /**\r\n     * 查看价格的链接地址\r\n     */\r\n    @Input() url: string = 'http://www.helpcenter.com/';\r\n    /**\r\n     * 表单向url地址的提交方式\r\n     */\r\n    @Input() method: string;\r\n    /**\r\n     * 点击链接前的事件接口\r\n     */\r\n    @Output() readonly beforeClick: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('myform', { static: true }) form: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ContentChild('detail', { static: true }) detailTemplate: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public detailHrefBeforeText: string = TiLocale.getLocaleWords().tpPricecalc.detailHrefBeforeText;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public detailHrefText: string = TiLocale.getLocaleWords().tpPricecalc.detailHrefText;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public detailHrefAfterText: string = TiLocale.getLocaleWords().tpPricecalc.detailHrefAfterText;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public isNotDefaultUrl: boolean;\r\n    /**\r\n     * 提交 form 时新打开的页签窗口名\r\n     */\r\n    private blankTab: string;\r\n\r\n    constructor(elementRef: ElementRef, renderer2: Renderer2, private domSanitizer: DomSanitizer) {\r\n        super(elementRef, renderer2);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(): void {\r\n        this.beforeClick.emit();\r\n\r\n        setTimeout(() => {\r\n            // 问题背景：给 form 标签上设置 rel=\"noopener noreferrer\" 实际是不生效的，还是存在被新打开的页面的恶意带代码重定向原页面的安全漏洞的。\r\n            // 解决方案：先用 window.open 打开一个新的页签窗口(this.blankTab)，然后利用 form 的 target 属性将表单提交到这个窗口中, 那么就可以获取到新窗口\r\n            //          的window对象(window.open 的返回值)，将其 opener 属性置为 null，从而消除该安全漏洞。\r\n            // 注意：该解决方案不适用于IE, IE 下暂未找到解决方案\r\n            if (!TiBrowser.isIE()) {\r\n                this.blankTab = Util.getUniqueId('new_tab'); // 确保是新的页签\r\n                const newWindow: any = window.open(this.domSanitizer.sanitize(SecurityContext.URL, this.url), this.blankTab);\r\n                if (newWindow) {\r\n                    newWindow.opener = null;\r\n                }\r\n            }\r\n            this.form.nativeElement.target = TiBrowser.isIE() ? '_blank' : this.blankTab;\r\n            this.form.nativeElement.submit();\r\n        }, 0);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.isNotDefaultUrl = !!this.values && this.url !== 'http://www.helpcenter.com/';\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpPricecalcComponent } from './TpPricecalcComponent';\r\n\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpPricecalcComponent],\r\n  declarations: [TpPricecalcComponent]\r\n})\r\n\r\nexport class TpPricecalcModule {}\r\nexport { TpPricecalcComponent, TpPricecalcParam } from './TpPricecalcComponent';\r\n","import { TpDiscoutsConfig } from '../discounts/TpDiscountsModule';\r\nimport { AfterViewInit, Component, ContentChild, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output,\r\n    Renderer2, TemplateRef, ViewChild } from '@angular/core';\r\nimport { TpButtons } from './TpBuylayerRightComponent';\r\nimport { TpCalculator, TpCosts } from './TpBuylayerLeftComponent';\r\nimport { TiBaseComponent, TiBrowser } from '@cloud/tiny3';\r\n\r\nexport interface TpBuylayerConfig {\r\n    /**\r\n     * 浮层右侧按钮列表\r\n     */\r\n    buttons?: Array<TpButtons>;\r\n    /**\r\n     * 浮层左侧价格详情列表\r\n     */\r\n    costs?: Array<TpCosts>;\r\n    /**\r\n     * 计费详情信息\r\n     */\r\n    costExplain?: string;\r\n    /**\r\n     * 是否显示免费场景详情信息\r\n     */\r\n    showFreechargeDetail?: boolean;\r\n    /**\r\n     * 优惠tip弹窗信息(主要价格)配置接口,接口内容参考discounts组件。\r\n     */\r\n    majorDiscoutsConfig?: TpDiscoutsConfig;\r\n    /**\r\n     * 优惠tip弹窗信息(次要价格)配置接口,接口内容参考discounts组件。\r\n     */\r\n    minorDiscoutsConfig?: TpDiscoutsConfig;\r\n    /**\r\n     * 自定义货币数值精度\r\n     * 自定义保留位数，例如：1.2-4，表示整数部分最少保留1位，小数部分最小保留2位，小数部分最大保留4位。\r\n     * 默认值取自各局点\r\n     */\r\n    numFormat?: string;\r\n    /**\r\n     * 了解计费详情链接\r\n     */\r\n    detailHref?: string;\r\n    /**\r\n     * 计费详情tip最大宽度\r\n     * 10.1.4新增\r\n     */\r\n    detailTipMaxWidth?: string\r\n    /**\r\n     * 需要显示价格计算器时才需要配置，华为云不涉及\r\n     */\r\n    calculator?: TpCalculator;\r\n    /**\r\n     * 是否为退费场景\r\n     */\r\n    isRefund?: boolean;\r\n    /**\r\n     * @ignore\r\n     * 是否以Tip形式显示次级价格计费详情(10.1.0版本已删除，此处添加，为了防止服务报错)\r\n     */\r\n    showMinorTip?: boolean;\r\n    /**\r\n     * @ignore\r\n     * 是否以Tip形式显示主要价格计费详情(10.1.0版本已删除，此处添加，为了防止服务报错)\r\n     */\r\n    showMajorTip?: boolean;\r\n    /**\r\n     * @ignore\r\n     * 是否显示主要价格优惠tip弹窗(10.1.0版本已删除，此处添加，为了防止服务报错)\r\n     */\r\n    showMajorDiscount?: boolean;\r\n    /**\r\n     * @ignore\r\n     * 是否显示次要价格优惠tip弹窗(10.1.0版本已删除，此处添加，为了防止服务报错)\r\n     */\r\n    showMinorDiscount?: boolean;\r\n}\r\n/**\r\n * 购买浮层组件\r\n *\r\n * <example-url>../tinyplus3demo/#/buylayer/buylayer-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-buylayer',\r\n    templateUrl: './buylayer.html',\r\n    styleUrls: ['./buylayer.less'],\r\n    host: {\r\n        '[class.tp-buylayer-container]': 'true'\r\n    }\r\n})\r\n\r\nexport class TpBuylayerComponent extends TiBaseComponent implements AfterViewInit, OnDestroy {\r\n    constructor(private element: ElementRef, private renderer2: Renderer2, private ngZone: NgZone) {\r\n        super(element, renderer2);\r\n    }\r\n    @Input() buylayerConfig: TpBuylayerConfig;\r\n    /**\r\n     * 优惠组件可选优惠项切换选择项时触发\r\n     *\r\n     * 9.0.3 新增接口\r\n     */\r\n    @Output() readonly discountsChange: EventEmitter<any> = new EventEmitter();\r\n    @ContentChild('leftZone') leftZoneEle: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('buylayerContent', {static: false}) buylayerContentEle: ElementRef;\r\n    private unlistenWindowScroll: () => void;\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        // ie下兼容问题，免费使用场景弹性布局垂直居中\r\n        if (TiBrowser.isIE()) {\r\n            const contentContainerHeight: number = this.buylayerContentEle.nativeElement.offsetHeight;\r\n            if (contentContainerHeight <= 70) { // 浮层最小高度70px\r\n                this.renderer2.setStyle(this.buylayerContentEle.nativeElement, 'height', 70 + 'px');\r\n            }\r\n        }\r\n\r\n        this.ngZone.runOutsideAngular((): void => {\r\n            // 在横向滚动条出现时控制fixed定位的购买浮层可以左右移动\r\n            this.unlistenWindowScroll = this.renderer2.listen('window', 'scroll', (): void => {\r\n                this.renderer2.setStyle(this.element.nativeElement, 'left', `-${document.documentElement.scrollLeft || document.body.scrollLeft}px`);\r\n            });\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.unlistenWindowScroll) {\r\n            this.unlistenWindowScroll();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public change($event: Event): void {\r\n        this.discountsChange.emit($event);\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TiLocale } from '@cloud/tiny3';\r\nimport { TpLocaleWords } from '../../locale/i18n';\r\nimport { formatDate } from '@angular/common';\r\n/**\r\n * 日期格式化\r\n *\r\n * 默认按照局点配置格式\r\n *\r\n * <example-url>../tinyplus3demo/#/locale/locale-all</example-url>\r\n */\r\n@Pipe({ name: 'tpDate', pure: false })\r\nexport class TpDatePipe implements PipeTransform {\r\n  /**\r\n   * 日期转换\r\n   * @param value 日期\r\n   * @param format 显示种类\r\n   * @returns 转换结果\r\n   */\r\n  transform(value: string | number | Date, format: 'date'|'time'|'dateTime'|'dateTimeZone' = 'date'): string {\r\n    // format = format ? format : 'date'; // 默认值是'date'\r\n    const res: string = formatDate(value, (TiLocale.getLocaleWords() as TpLocaleWords).tiLocaleDate[format], TiLocale.EN_US);\r\n\r\n    return res;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TiLocale } from '@cloud/tiny3';\r\nimport { TpLocaleWords } from '../../locale/i18n';\r\nimport { formatDate } from '@angular/common';\r\n\r\n/**\r\n * 数字格式化\r\n *\r\n * 默认按照局点配置格式\r\n *\r\n * <example-url>../tinyplus3demo/#/locale/locale-all</example-url>\r\n */\r\n@Pipe({ name: 'tpNumber', pure: false })\r\nexport class TpNumberPipe implements PipeTransform {\r\n\r\n  /**\r\n   * 货币转换\r\n   * @param value 数字\r\n   * @param format 自定义保留位数，例如：1.2-4，表示整数部分最小保留1位，小数部分最小保留2位，小数部分最大保留4位。\r\n   * @returns 转换结果\r\n   */\r\n  transform(value: number, format?: string): string {\r\n    // 最终格式\r\n    let myoptions: any = this.getOptions();\r\n\r\n    // 如果用户传来了自定义配置保留位数\r\n    if (format) {\r\n      myoptions = {\r\n        ...myoptions,\r\n        ...{\r\n          minimumIntegerDigits: format.substring(0, format.indexOf('.')),\r\n          minimumFractionDigits: format.substring(format.indexOf('.') + 1, format.indexOf('-')),\r\n          maximumFractionDigits: format.substring(format.indexOf('-') + 1)\r\n        }\r\n      };\r\n    }\r\n\r\n    const res: string = new Intl.NumberFormat((TiLocale.getLocaleWords() as TpLocaleWords).tiLocaleKey, myoptions)\r\n    .format(value);\r\n\r\n    return res;\r\n  }\r\n  /**\r\n   * 获取局点中的配置\r\n   * @returns options\r\n   */\r\n  protected getOptions(): any {\r\n    return (TiLocale.getLocaleWords() as TpLocaleWords).tpLocaleNumber;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TiLocale } from '@cloud/tiny3';\r\n\r\nimport { formatDate } from '@angular/common';\r\nimport { TpNumberPipe } from './TpNumberPipe';\r\nimport { TpLocaleWords } from '../../locale/i18n';\r\n/**\r\n * 货币格式化\r\n *\r\n * 默认按照局点配置格式\r\n *\r\n * <example-url>../tinyplus3demo/#/locale/locale-all</example-url>\r\n */\r\n@Pipe({ name: 'tpCurrency', pure: false })\r\nexport class TpCurrencyPipe extends TpNumberPipe implements PipeTransform {\r\n/**\r\n * 转换\r\n * @param value 货币数字\r\n * @param format 自定义保留位数，例如：1.2-4，表示整数部分最少保留1位，小数部分最小保留2位，小数部分最大保留4位。\r\n * @param type 'short'表示美元末尾不带USD\r\n * @returns 转换结果\r\n */\r\ntransform(value: number, format?: string, type?: 'short'|undefined): string {\r\n    // 调用父类处理\r\n    let res: string = super.transform(value, format);\r\n    // 结果调整，符合规范\r\n    res = res.replace('CN¥', '¥');\r\n    res = res.replace('US$', '$');\r\n    res = res.replace('$ ', '$');\r\n    if (this.getOptions().currency === 'USD' && type !== 'short') {\r\n      res = res + ' USD';\r\n    }\r\n    if (res.includes('€') && !res.endsWith('€')) {\r\n      res = res.replace('€', '');\r\n      res = res + ' €';\r\n    }\r\n\r\n    return res;\r\n  }\r\n  /**\r\n   * 获取局点中的配置\r\n   * @returns options\r\n   */\r\n  protected getOptions(): any {\r\n    return (TiLocale.getLocaleWords() as TpLocaleWords).tpLocaleCurrency;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpDatePipe } from './TpDatePipe';\r\nimport { TpNumberPipe } from './TpNumberPipe';\r\nimport { TpCurrencyPipe } from './TpCurrencyPipe';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  exports: [TpDatePipe, TpNumberPipe, TpCurrencyPipe],\r\n  declarations: [TpDatePipe, TpNumberPipe, TpCurrencyPipe]\r\n})\r\nexport class TpLocaleModule {}\r\nexport { TpDatePipe } from './TpDatePipe';\r\nexport { TpNumberPipe } from './TpNumberPipe';\r\nexport { TpCurrencyPipe } from './TpCurrencyPipe';\r\n","import { CfEndpoints, CfLinks, CfUser, EndpointsData, HttpService, LinksData, Mask, Message,\r\n    StorageService, UserData } from '@cloud/cfdata';\r\nimport { TpDatePipe } from '../pipes/locale/TpLocaleModule';\r\n//\r\n/**\r\n * @ignore\r\n * 获取console相关的工具类\r\n * 兼容angular.js版本的console\r\n */\r\nexport class CfUtil {\r\n    public static async getUser(): Promise<any> {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('$rootScope');\r\n        }\r\n\r\n        const cfUserData: CfUser = await UserData.getCfUser();\r\n\r\n        return cfUserData;\r\n    }\r\n\r\n    public static async getLinks(): Promise<any> {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('$rootScope');\r\n        }\r\n\r\n        const cfLinksData: CfLinks = await LinksData.getLinks();\r\n\r\n        return cfLinksData;\r\n    }\r\n\r\n    public static async getEndpoints(): Promise<any> {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('$rootScope');\r\n        }\r\n\r\n        const cfEndpointsData: CfEndpoints = await EndpointsData.getCfEndpoints();\r\n\r\n        return cfEndpointsData;\r\n    }\r\n\r\n    public static getHttpService(): any {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('camel');\r\n        }\r\n\r\n        return HttpService;\r\n    }\r\n\r\n    public static getMessage(): any {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('msgService');\r\n        }\r\n\r\n        return Message;\r\n    }\r\n\r\n    public static getMask(): any {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('mask');\r\n        }\r\n\r\n        return Mask;\r\n    }\r\n\r\n    public static getStorageService(): any {\r\n        if (this.isAngularJSConsole()) {\r\n            return this.getFromAngularJSConsole('storage');\r\n        }\r\n\r\n        return StorageService;\r\n    }\r\n\r\n    public static formatLocaleDateTime(datetime: string | number | Date): any {\r\n        if (this.isAngularJSConsole()) {\r\n            const localeService: any = this.getFromAngularJSConsole('localeService');\r\n            if (localeService &&  typeof localeService.formatLocaleDateTime === 'function') {\r\n                return localeService.formatLocaleDateTime(datetime);\r\n            } else {\r\n                return datetime;\r\n            }\r\n        }\r\n\r\n        return new TpDatePipe().transform(datetime, 'dateTimeZone');\r\n    }\r\n\r\n    public static isNonsupportRegion(): (nonsupportRegions: any, regionId: any, supportRegions: any) => boolean {\r\n        if (this.isAngularJSConsole()) {\r\n            const rootScope: any = this.getFromAngularJSConsole('$rootScope');\r\n\r\n            return rootScope && rootScope.isNonsupportRegion;\r\n        }\r\n\r\n        return UserData.isNonsupportRegion;\r\n    }\r\n\r\n    public static getAppWebPath(): string {\r\n        // 兼容appWebPath(旧版)、AppWebPath(新版)\r\n        let appWebPath: string = (window as any).AppWebPath || (window as any).appWebPath;\r\n        // 去掉首尾的/符号\r\n        appWebPath = appWebPath && appWebPath.replace(/^\\//, '')\r\n            .replace(/\\/$/, '');\r\n\r\n        return `/${appWebPath}`;\r\n    }\r\n\r\n    private static isAngularJSConsole(): boolean {\r\n        return !!(window as any).angular;\r\n    }\r\n\r\n    private static getFromAngularJSConsole(inject: string): any {\r\n        const html: any = (window as any).angular.element('html');\r\n        // 使用ng1+ng2 新融合方案时，Angular应用默认所在的根DOM元素为body\r\n        const body: any = (window as any).angular.element('body');\r\n\r\n        if (html && html.injector()) {\r\n            return html.injector().get(inject);\r\n        } else if (body && body.injector()) {\r\n            return body.injector().get(inject);\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n}\r\n","import { Util } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n * 工具类\r\n */\r\nexport class TpUtil {\r\n    public static setAttrs(element: HTMLElement, attrs: object): void {\r\n        for (const key in attrs) {\r\n            if (attrs.hasOwnProperty(key)) {\r\n                element.setAttribute(key, attrs[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static isObject(item: any): boolean {\r\n        return (item && typeof item === 'object' && !Array.isArray(item));\r\n    }\r\n\r\n    // 对象扩展，当前只适用于对象形式，数组形式如有需求，请在该方法中自行扩展\r\n    public static extend(target: object, source: object): object {\r\n        const output: object = {...target};\r\n        if (!(TpUtil.isObject(target) && TpUtil.isObject(source))) {\r\n            return;\r\n        }\r\n        (Object.keys(source) as Array<string>).forEach((key: string) => {\r\n            if (TpUtil.isObject(source[key])) {\r\n                if (!(key in target)) {\r\n                    Object.assign(output, { [key]: source[key] });\r\n                } else {\r\n                    output[key] = TpUtil.extend(target[key], source[key]);\r\n                }\r\n            } else {\r\n                Object.assign(output, { [key]: source[key] });\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n\r\n    /**\r\n     * url 跳转的目标路径 string\r\n     * params  参数对象集合 Object\r\n     */\r\n    public static addUrlParams(url: string, params: any): string {\r\n        if (!Util.isString(url) || url === '' || Util.isUndefined(params)) {\r\n            return url;\r\n        }\r\n        let finalUrl: string = url;\r\n        for (const key in params) {\r\n            if (Object.prototype.hasOwnProperty.call(params, key)) {\r\n                const param: string = key + '=' + encodeURIComponent(params[key]);\r\n                if (url.indexOf('?') === -1) {\r\n                    finalUrl = finalUrl +  '?' + param;\r\n                } else {\r\n                    finalUrl = finalUrl +  '&' + param;\r\n                }\r\n            }\r\n        }\r\n\r\n        return finalUrl;\r\n    }\r\n\r\n    /**\r\n     * url 跳转的目标路径 string\r\n     * params 参数对象集合 Object\r\n     */\r\n    public static addDefaultParam(url: string, params: any): string {\r\n        const defaultParam: any = {\r\n            service: window.location.href  // 默认参数为当前页面链接地址，方便用户实现返回原页面\r\n        };\r\n        const finalParams: any = { ...defaultParam, ...params };\r\n\r\n        return this.addUrlParams(url, finalParams);\r\n    }\r\n    /**\r\n     * 得到cookie的值\r\n     * @param key： cookie名对应的键值\r\n     */\r\n    public static getCookie(key: string): any {\r\n        if (!document.cookie) {\r\n            return;\r\n        }\r\n        const splitedCookie: Array<string> = document.cookie.split(';');\r\n        for (const cookie of splitedCookie) {\r\n            const temp: Array<string> = cookie.split('=');\r\n            if (temp[0] && temp[0].trim() === key) {\r\n                return temp[1].trim();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 设置cookie的值，包括key、value\r\n     */\r\n    public static setCookie(key: string, value: string): void {\r\n        document.cookie = `${key}=${value}`;\r\n    }\r\n\r\n}\r\n","import { Component, ContentChild, EventEmitter, Input, Output, TemplateRef } from '@angular/core';\r\nimport { getLocaleCurrencySymbol } from '@angular/common';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\n\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\nimport { TpDiscoutsConfig } from '../discounts/TpDiscountsModule';\r\n\r\nimport { TpUtil } from './../../utils/TpUtil';\r\n\r\nexport interface TpCosts {\r\n    /**\r\n     * 价格label\r\n     */\r\n    label?: string;\r\n    /**\r\n     * 价格数值\r\n     */\r\n    value?: number | string;\r\n    /**\r\n     * 计量单位\r\n     */\r\n    measureUnit?: string;\r\n    /**\r\n     * 是否公测\r\n     */\r\n    isBeta?: boolean;\r\n    /**\r\n     * 优惠金额\r\n     */\r\n    discount?: number;\r\n    /**\r\n     * 价格详情链接\r\n     */\r\n    link?: string;\r\n    /**\r\n     * 是否是主要价格\r\n     */\r\n    majorPrice?: boolean;\r\n    /**\r\n     * 是否隐藏价格\r\n     *\r\n     * 10.1.0 新增\r\n     */\r\n    hide?: boolean;\r\n    /**\r\n     * 是否隐藏价格之间的加号连接符号\r\n     *\r\n     * 10.1.0 新增\r\n     */\r\n    hideConnectSymbol?: boolean;\r\n    /**\r\n     * 价格明细\r\n     */\r\n    pricelist?: Array<any>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    tipTitle?: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     *\r\n     * 10.1.2新增\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpCalculator {\r\n    /**\r\n     * 链接\r\n     */\r\n    url?: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * @ignore\r\n * 购买浮层左侧价格区域\r\n * <example-url>../tinyplus3demo/#/buylayer/buylayer-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-buylayer-left',\r\n    templateUrl: './buylayer-left.html',\r\n    styleUrls: ['./buylayer-left.less']\r\n})\r\n\r\nexport class TpBuylayerLeftComponent extends TiBaseComponent {\r\n    /**\r\n     * 浮层左侧价格列表集合\r\n     */\r\n    @Input() costs: Array<TpCosts> = [];\r\n    /**\r\n     * 优惠详情弹窗信息配置(主要价格)总接口，具体详情可参考discounts组件\r\n     */\r\n    @Input() majorDiscoutsConfig: TpDiscoutsConfig;\r\n    /**\r\n     * 优惠详情弹窗信息配置（次要价格）总接口，具体详情可参考discounts组件\r\n     */\r\n    @Input() minorDiscoutsConfig: TpDiscoutsConfig;\r\n    /**\r\n     * 是否显示免费套餐场景\r\n     */\r\n    @Input() showFreechargeDetail: boolean;\r\n    /**\r\n     * 用户可自定义价格详情信息\r\n     */\r\n    @Input() costExplain: string;\r\n    /**\r\n     * 价格计算器场景展示时候的配置接口\r\n     */\r\n    @Input() calculator: TpCalculator;\r\n    /**\r\n     * 货币精度设置接口\r\n     * 自定义保留位数，例如：1.2-4，表示整数部分最少保留1位，小数部分最小保留2位，小数部分最大保留4位。\r\n     * 默认值取自各局点\r\n     */\r\n    @Input() numFormat: string;\r\n    /**\r\n     * 了解计费详情链接\r\n     */\r\n    @Input() detailHref: string;\r\n    /**\r\n     * @ignore\r\n     * 是否是退费场景\r\n     */\r\n    @Input() isRefund: boolean;\r\n    /**\r\n     * 计费详情tip最大宽度\r\n     * 10.1.4新增\r\n     */\r\n    @Input() detailTipMaxWidth: string;\r\n    /**\r\n     * 可选优惠项切换选择项时触发\r\n     *\r\n     * 9.0.3 新增接口\r\n     */\r\n    @Output() readonly discountsChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ContentChild(TemplateRef) leftZoneEle1: TemplateRef<any>;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public freechargeDetailLink: string = '';\r\n    /**\r\n     * @ignore\r\n     * tip中的表头\r\n     */\r\n    public pricelistHead: string = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_pricelist;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public majorPriceNum: number;\r\n\r\n    /**\r\n     * @ignore\r\n     * 是否只有主要价格。当只有主要价格时，计费详情tip在主要价格后；当有次要费用时，在次要价格之后。\r\n     */\r\n    public onlyHasMajorprice: boolean;\r\n    /**\r\n     * @ignore\r\n     * 主要价格是否包含数字。如果包含则需要出现计费详情，否则不出现。\r\n     */\r\n    public hasNumberofMajorprice: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * 是否显示主要价格的优惠详情\r\n     */\r\n    public showMajorDiscount: boolean;\r\n    /**\r\n     * @ignore\r\n     * 是否显示次要价格的优惠详情\r\n     */\r\n    public showMinorDiscount: boolean;\r\n    /**\r\n     * @ignore\r\n     * 主要价格是否全隐藏\r\n     */\r\n    public isMajorPriceAllHide: boolean;\r\n    /**\r\n     * @ignore\r\n     * 次要价格是否全隐藏\r\n     */\r\n    public isMinorPriceAllHide: boolean;\r\n    /**\r\n     * @ignore\r\n     * 浮层实际呈现的价格数组集合\r\n     */\r\n    public finalCosts: Array<TpCosts>;\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        const routeLink: string = TiLocale.getLocaleWords().tpBuylayer.buyLayer_freeCharge_detailLink;\r\n\r\n        this.costsChange();\r\n\r\n        this.discountChange();\r\n\r\n        if (!Util.isUndefined(this.numFormat) && !Util.isUndefined(this.majorDiscoutsConfig)) {\r\n            // 浮层配置的价格精度同样作用到优惠详情部分，两者保持一致。\r\n            this.majorDiscoutsConfig.numFormat = this.numFormat;\r\n        }\r\n\r\n        CfUtil.getLinks()\r\n            .then((linksData: any) => {\r\n            if (linksData && linksData.links && linksData.links.user_center_common) {\r\n                this.freechargeDetailLink = this.addLinkParams(linksData.links.user_center_common + routeLink);\r\n            }\r\n        });\r\n    }\r\n\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnChanges(): void {\r\n        this.costsChange();\r\n        this.discountChange();\r\n    }\r\n\r\n    ngDoCheck(): void {\r\n        if (!Util.isArray(this.costs) || this.costs.length === 0) {\r\n            return;\r\n        }\r\n        // costs动态hide之后，重新获取主次要价格数组，并且新数组的第一项（头部价格）不带加号连接符\r\n        const currentMajorCosts = this.costs.filter((item: TpCosts) => !item.hide && item.majorPrice);\r\n        const currentMinorCosts = this.costs.filter((item: TpCosts) => !item.hide && !item.majorPrice);\r\n        currentMajorCosts.forEach((item: TpCosts, index: number) => {\r\n            item.hideConnectSymbol = !index;\r\n        })\r\n        currentMinorCosts.forEach((item: TpCosts, index: number) => {\r\n            item.hideConnectSymbol = !index;\r\n        });\r\n    }\r\n    // 数据初始化及变更之后都需执行\r\n    private costsChange(): void {\r\n        this.setMajorPrice();\r\n        this.finalCosts = this.costs.filter((item: TpCosts) => !item.hide);\r\n        this.majorPriceNum = this.getMajorPriceNum();\r\n        this.isCostsAllHide();\r\n        if (this.isRefund) {\r\n            this.setRefundParams();\r\n        }\r\n\r\n        this.onlyHasMajorprice = this.finalCosts && this.finalCosts.length > 0 && this.majorPriceNum === this.finalCosts.length ? true : false;\r\n    }\r\n\r\n    private hasDiscountsData(config: TpDiscoutsConfig): boolean {\r\n        const hasSelectableDiscounts: boolean = Util.isArray(config.selectableDiscounts) && config.selectableDiscounts.length > 0;\r\n        const hasSelectedDiscounts: boolean = Util.isArray(config.selectedDiscounts) && config.selectedDiscounts.length > 0;\r\n        const hasDiscounts: boolean = Util.isArray(config.discounts) && config.discounts.length > 0;\r\n\r\n        return hasDiscounts || (hasSelectedDiscounts || hasSelectableDiscounts);\r\n    }\r\n\r\n    private discountChange(): void {\r\n        if (TpUtil.isObject(this.majorDiscoutsConfig) && this.hasDiscountsData(this.majorDiscoutsConfig) && this.majorPriceNum > 0) {\r\n            this.showMajorDiscount = true;\r\n        } else {\r\n            this.showMajorDiscount = false;\r\n        }\r\n\r\n        const minorpriceNum: number = this.costs && this.costs.length - this.majorPriceNum; // 得到次要价格的数目\r\n        if (TpUtil.isObject(this.minorDiscoutsConfig) && this.hasDiscountsData(this.minorDiscoutsConfig) && minorpriceNum > 0) {\r\n            this.showMinorDiscount = true;\r\n        } else {\r\n            this.showMinorDiscount = false;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public change($event: Event): void {\r\n        this.discountsChange.emit($event);\r\n    }\r\n    // 获取主要价格数量\r\n    private getMajorPriceNum(): number {\r\n        if (this.finalCosts && this.finalCosts.length > 0) {\r\n            let num: number = 0;\r\n            for (const cost of this.finalCosts) {\r\n                if (cost.majorPrice) {\r\n                    num++;\r\n                    if (this.isNumber(cost.value)) {\r\n                        this.hasNumberofMajorprice = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return num;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n    // 判断主/次要价格是否都隐藏\r\n    private isCostsAllHide() {\r\n        if (this.costs && this.costs.length > 0) {\r\n            // 获取主要价格集合\r\n            const majorPriceArr = this.costs.filter((item) => item.majorPrice);\r\n            // 获取次要价格集合\r\n            const minorPriceArr = this.costs.filter((item) => !item.majorPrice);\r\n            this.isMinorPriceAllHide = this.isAllHide(minorPriceArr);\r\n            this.isMajorPriceAllHide = this.isAllHide(majorPriceArr);\r\n        }\r\n    }\r\n    private isAllHide(arr): boolean {\r\n        let isAllHide = true;\r\n        if (arr.length > 0) {\r\n            for (const cost of arr) {\r\n                if(!cost.hide) {\r\n                    isAllHide = false;\r\n                }\r\n            }\r\n        }\r\n        return isAllHide;\r\n    }\r\n    // 设置价格类型\r\n    private setMajorPrice(): void {\r\n        if (this.costs && this.costs.length > 0) {\r\n            for (const cost of this.costs) {\r\n                if (Util.isUndefined(cost.label) && !this.isRefund) {\r\n                    cost.label = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_label;\r\n                    cost.tipTitle = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_label;\r\n                }\r\n                if (Util.isUndefined(cost.majorPrice)) {\r\n                    cost.majorPrice = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 设置退费场景下的相关参数\r\n     */\r\n    private setRefundParams(): void {\r\n        if (this.costs && this.costs.length > 0) {\r\n            for (const cost of this.costs) {\r\n                if (Util.isUndefined(cost.label)) {\r\n                    cost.label = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_label_refund_majorprice;\r\n                    cost.tipTitle = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_label_refund_detail;\r\n                }\r\n\r\n                if (cost.pricelist && cost.pricelist.length > 0) {\r\n                    cost.pricelist[0].title = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_pricelist_label_before;\r\n                    cost.pricelist[1].title = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_pricelist_label_after;\r\n                    cost.pricelist[2] = {\r\n                        title: TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_label_refund,\r\n                        priceNum: cost.value\r\n                    };\r\n\r\n                    this.pricelistHead = TiLocale.getLocaleWords().tpBuylayer.buyLayer_cost_type;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public isNumber(val: any): boolean {\r\n        return Util.isNumber(val);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public isPositiveNumber(val: any): boolean {\r\n        return Util.isNumber(val) && val > 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 货币国际化\r\n     */\r\n    public getLocalSymble(): any {\r\n        const localeKey: string = TiLocale.getLocaleWords().tiLocaleKey;\r\n\r\n        return getLocaleCurrencySymbol(localeKey);\r\n    }\r\n\r\n    // 获取agencyID和locale\r\n    private addLinkParams(url: string): string {\r\n        if (url === '') {\r\n            return url;\r\n        }\r\n        const storage: any = CfUtil.getStorageService();\r\n        if (!(!Util.isUndefined(storage) && !Util.isUndefined(storage.cookieStorage) && Util.isFunction(storage.cookieStorage.getItem))) {\r\n            return url;\r\n        }\r\n        const agencyID: any = storage.cookieStorage.getItem('agencyID');\r\n        const locale: any = storage.cookieStorage.getItem('locale');\r\n        let finalUrl: string = url;\r\n        if (!Util.isEmptyString(agencyID)) {\r\n            finalUrl = finalUrl + '?agencyId=' + agencyID;\r\n            if (!Util.isEmptyString(locale)) {\r\n                finalUrl = finalUrl + '&locale=' + locale;\r\n            }\r\n        } else if (!Util.isEmptyString(locale)) {\r\n            finalUrl = finalUrl + '?locale=' + locale;\r\n        }\r\n\r\n        return finalUrl;\r\n    }\r\n\r\n}\r\n","import { TiPositionType } from '@cloud/tiny3';\r\nimport { Component, Input } from '@angular/core';\r\nexport interface TpButtons {\r\n    /**\r\n     * 按钮文本内容\r\n     */\r\n    label: string;\r\n    /**\r\n     * 按钮是否隐藏\r\n     */\r\n    hide?: boolean;\r\n    /**\r\n     * 按钮是否灰化\r\n     */\r\n    disabled?: boolean;\r\n    /**\r\n     * 按钮是否为主要按钮颜色\r\n     */\r\n    color?: 'danger' | 'primary';\r\n    /**\r\n     * 按钮点击事件\r\n     */\r\n    click?(): void; // 按钮点击事件\r\n    /**\r\n     * 按钮id\r\n     */\r\n    id?: string;\r\n    /**\r\n     * 按钮Tip内容\r\n     */\r\n    tip?: string;\r\n    /**\r\n     * 按钮Tip展开方向\r\n     */\r\n    tipPosition?: TiPositionType;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * @ignore\r\n * 购买浮层右侧按钮区域\r\n * <example-url>../tinyplus3demo/#/buylayer/buylayer-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-buylayer-right',\r\n    templateUrl: './buylayer-right.html',\r\n    styleUrls: ['./buylayer-right.less'],\r\n    host: {\r\n        '[class.tp-buylayer-right]': 'true'\r\n    }\r\n})\r\n\r\nexport class TpBuylayerRightComponent {\r\n    /**\r\n     * 浮层右侧按钮列表集合\r\n     */\r\n    @Input() buttons: Array<TpButtons> = [];\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n/**\r\n * @ignore\r\n */\r\n@Pipe({ name: 'rate' })\r\nexport class RatePipe implements PipeTransform {\r\n    transform(value: Array<any>): Array<any> {\r\n        return value.filter((item: any) => item.rate > 0 && item.rate < 1);\r\n    }\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\n@Pipe({ name: 'notEqualTo0' })\r\nexport class NotEqualTo0Pipe implements PipeTransform {\r\n    transform(value: Array<any>): Array<any> {\r\n        return value.filter((item: any) => item.priceNum !== 0);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\n@Pipe({ name: 'notEqualTo01' })\r\nexport class NotEqualTo01Pipe implements PipeTransform {\r\n    transform(value: Array<any>): Array<any> {\r\n        return value.filter((item: any) => {\r\n            if (item.id === 'no-discounts') {\r\n                return item.priceNum === 0;\r\n            } else {\r\n                return item.priceNum !== 0;\r\n            }\r\n        });\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    Output,\r\n    Renderer2,\r\n    SimpleChanges,\r\n    ViewChild\r\n} from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\n\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\nexport interface TpDiscountDetail {\r\n    /**\r\n     * 折扣种类名称\r\n     */\r\n    name?: string;\r\n    /**\r\n     * 优惠资源名称\r\n     */\r\n    resourceName?: string;\r\n    /**\r\n     * 规格\r\n     */\r\n    specification?: string;\r\n    /**\r\n     * 尺寸\r\n     */\r\n    size?: string;\r\n    /**\r\n     * 详情链接类型\r\n     */\r\n    type?: number;\r\n    /**\r\n     * 折扣率\r\n     */\r\n    rate?: number;\r\n    /**\r\n     * 详情链接内容\r\n     */\r\n    href?: string;\r\n    /**\r\n     * 优惠到期时间\r\n     */\r\n    expireTime?: string;\r\n    /**\r\n     * 优惠金额\r\n     */\r\n    priceNum?: number;\r\n    /**\r\n     * 包周期可选优惠项id\r\n     *\r\n     * 包周期可选择优惠项配置场景必选\r\n     */\r\n    id?: string;\r\n    /**\r\n     * 是否为优选优惠项\r\n     */\r\n    isRecommend?: boolean;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpDiscoutsConfig {\r\n    /**\r\n     * 优惠场景类型， 如包周期、按需等\r\n     */\r\n    type: 'period' | 'ondemand';\r\n    /**\r\n     * 优惠金额数字位数控制\r\n     * 自定义保留位数，例如：1.2-4，表示整数部分最少保留1位，小数部分最小保留2位，小数部分最大保留4位。\r\n     * 默认值取自各局点\r\n     */\r\n    numFormat?: string;\r\n    /**\r\n     * 包周期已选择优惠项\r\n     */\r\n    selectedDiscounts?: Array<TpDiscountDetail>;\r\n    /**\r\n     * 包周期可选优惠项，被选项ID\r\n     */\r\n    selectedId?: string;\r\n    /**\r\n     * 包周期可选优惠项\r\n     */\r\n    selectableDiscounts?: Array<TpDiscountDetail>;\r\n    /**\r\n     * 按需场景优惠项\r\n     */\r\n    discounts?: Array<TpDiscountDetail>;\r\n    /**\r\n     * 优惠弹窗最大高度\r\n     */\r\n    maxHeight?: number;\r\n    /**\r\n     * 优惠价格单位\r\n     *  10.1.0 新增\r\n     */\r\n    measureUnit?: string;\r\n}\r\n/**\r\n * @ignore\r\n * 优惠场景，主要有包周期场景和按需场景，服务可根据实际类型自行配置。\r\n *\r\n * <example-url>../tinyplus3demo/#/discounts/discounts-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-discounts',\r\n    templateUrl: './discounts.html',\r\n    styleUrls: ['./discounts.less'],\r\n    host: {\r\n        '(click)': 'onClick($event)'\r\n    }\r\n})\r\n\r\nexport class TpDiscountsComponent extends TiBaseComponent {\r\n    constructor(private elementRef: ElementRef, private render: Renderer2) {\r\n        super(elementRef, render);\r\n    }\r\n    /**\r\n     * 优惠数据总配置接口\r\n     */\r\n    @Input() discoutsConfig: TpDiscoutsConfig;\r\n    /**\r\n     * 可选优惠项切换选择项时触发\r\n     *\r\n     * 9.0.3 新增接口\r\n     */\r\n    @Output() readonly discountsChange: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('font') fontEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('container') containerEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('before') beforeEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * 用户获取当前语言集合\r\n     */\r\n    public localeWords: any = TiLocale.getLocaleWords();\r\n    /**\r\n     * @ignore\r\n     * 用于获取词条\r\n     */\r\n    public tpDiscounts: any = this.localeWords.tpDiscounts;\r\n    /**\r\n     * @ignore\r\n     * 模板使用,判断是否为中文场景\r\n     */\r\n    public isChinese: boolean = this.localeWords.tiLocaleKey === 'zh-CN';\r\n    /**\r\n     * @ignore\r\n     * 模板使用,弹窗是否展开标志量\r\n     */\r\n    public isOpen: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * 模板使用,总优惠额\r\n     */\r\n    public sum: number;\r\n    /**\r\n     * @ignore\r\n     * 按需场景最终配置\r\n     */\r\n    public ondemandDiscountsConfig: Array<TpDiscountDetail>;\r\n\r\n    private onlistenClick: () => void;\r\n\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        if (this.discoutsConfig.type === 'ondemand') {\r\n            this.handleDiscounts(this.discoutsConfig.discounts);\r\n        }\r\n        if (this.discoutsConfig.type === 'period') {\r\n            this.setTotalSavings();\r\n            this.setSelectableData(this.discoutsConfig.selectableDiscounts);\r\n        }\r\n        this.onlistenClick = this.render.listen(window, 'click', () => this.onDocumentClick());\r\n    }\r\n\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        if (this.discoutsConfig.type === 'ondemand') {\r\n            this.handleDiscounts(this.discoutsConfig.discounts);\r\n        }\r\n        if (this.discoutsConfig.type === 'period') {\r\n            const change: any = changes['discoutsConfig'];\r\n            if (change && !change.isFirstChange()) {\r\n                this.setTotalSavings();\r\n            }\r\n            this.setSelectableData(this.discoutsConfig.selectableDiscounts);\r\n        }\r\n\r\n    }\r\n\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngAfterViewChecked(): void {\r\n        super.ngAfterViewChecked();\r\n        if (this.isOpen) {\r\n            // 定位元素宽度\r\n            const tipModalIconWidth: number = this.fontEle.nativeElement.offsetWidth;\r\n            // 定位元素左侧靠边距离\r\n            // 服务实际业务中，使用offselLeft获取的值不准确（缺失左侧sideBar的47px），导致较小分辨率下，挤压出横向滚动条。\r\n            // 此处修改为getBoundingClientRect().left，在服务环境上已测试ok.\r\n            const tipModalIconLeft: number = this.fontEle.nativeElement.getBoundingClientRect().left;\r\n            // 定位元素距离右侧窗口的位置\r\n            const tipModalIconRight: number = window.innerWidth - tipModalIconLeft - tipModalIconWidth;\r\n            // 提示弹窗宽度\r\n            const tipContainerWidth: number = this.containerEle.nativeElement.offsetWidth;\r\n            // 居中显示需要的偏移量\r\n            const offset: number = (tipContainerWidth - tipModalIconWidth) / 2;\r\n            // 弹窗正常居中对齐的偏移量 - 定位元素距离左侧窗口的位置；如果大于0，说明左溢出\r\n            const isLeftOverflow: boolean = (offset - tipModalIconLeft) > 0;\r\n            // 弹窗正常居中对齐的偏移量 - 定位元素距离右侧窗口的位置；如果大于0，则说明右溢出。\r\n            const isRightOverflow: boolean = (offset - tipModalIconRight) > 0;\r\n            const distance: number = 20; // 溢出时，距离左侧留20px余量\r\n            let marginLeft: number;\r\n            if (isLeftOverflow) {\r\n                marginLeft = -tipModalIconLeft + distance;\r\n            } else if (isRightOverflow) {\r\n                marginLeft = -(tipContainerWidth - tipModalIconRight - tipModalIconWidth) - distance;\r\n            } else {\r\n                marginLeft = -offset;\r\n            }\r\n            this.render.setStyle(this.containerEle.nativeElement, 'margin-left', marginLeft + 'px');\r\n            this.render.setStyle(this.beforeEle.nativeElement, 'left', tipModalIconWidth / 2 + 'px');\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this.onlistenClick) {\r\n            this.onlistenClick();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 单选radio点击切换选择项触发\r\n     */\r\n    public onRadioChange($event: Event): void {\r\n        this.setTotalSavings();\r\n        this.discountsChange.emit($event);\r\n    }\r\n    /**\r\n     * 点击documnet优惠信息窗口关闭\r\n     */\r\n    private onDocumentClick(): void {\r\n        this.isOpen = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击右上角叉号图标，弹窗关闭\r\n     */\r\n    public onClose($event: any): void {\r\n        this.isOpen = false;\r\n        $event.stopPropagation();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 模板使用，tip面板点击需要组织冒泡\r\n     */\r\n    public onContainerClick($event: any): void {\r\n        $event.stopPropagation();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick($event: any): void {\r\n        // 当在焦点在A标签，触发回车键的时候，不需要关闭面板。\r\n        if (event.target['tagName'] === 'A') {\r\n            return;\r\n        }\r\n        this.isOpen = !this.isOpen;\r\n        $event.stopPropagation();\r\n    }\r\n    // 按需优惠项信息合并\r\n    private getOndemandDiscounts(data: Array<TpDiscountDetail>): Array<TpDiscountDetail> {\r\n        const out: Array<TpDiscountDetail> = [];\r\n        for (let i: number = 0; i < data.length; i++) {\r\n            const cur: TpDiscountDetail = data[i];\r\n            const n: number = out.findIndex((ele: any) => ele.label === cur.label);\r\n            if (n > -1) {\r\n                const item: TpDiscountDetail = {\r\n                    ...out[n],\r\n                    ...cur,\r\n                    ...{\r\n                        expireTime: Util.isString(out[n].expireTime) && Util.isString(cur.expireTime) &&\r\n                            new Date(out[n].expireTime).getTime() > new Date(cur.expireTime).getTime() ? cur.expireTime : out[n].expireTime,\r\n                        type: this.getData(out[n].type, cur.type),\r\n                        href: this.getData(out[n].href, cur.href)\r\n                    }\r\n                };\r\n                out[n] = item;\r\n            } else {\r\n                out.push(cur);\r\n            }\r\n        }\r\n\r\n        return out;\r\n    }\r\n    // tslint:disable-next-line:prefer-function-over-method\r\n    private getData(val1: any, val2: any): any {\r\n        if (Util.isUndefined(val2) || val2 === '') {\r\n            return val1;\r\n        }\r\n\r\n        return val2;\r\n    }\r\n\r\n    // 根据接口type来设定详情链接，也支持用户自定义详情链接\r\n    // tslint:disable-next-line:prefer-function-over-method\r\n    private setDetailLink(item: TpDiscountDetail): void {\r\n        CfUtil.getLinks()\r\n        .then((linksData: any) => {\r\n            const user_center_common: string = linksData && linksData.links && linksData.links.user_center_common\r\n                ? linksData.links.user_center_common : '';\r\n            let detailLink: string = '';\r\n            switch (item.type) {\r\n                case 0:\r\n                    detailLink = user_center_common + this.tpDiscounts.discounts_detailLink_type0;\r\n                    break;\r\n                case 1:\r\n                    detailLink = user_center_common + this.tpDiscounts.discounts_detailLink_type1;\r\n                    break;\r\n                case 2:\r\n                    detailLink = user_center_common + this.tpDiscounts.discounts_detailLink_type2\r\n                    + (Util.isUndefined(item.beId) ? '' : '&beId=' + item.beId);\r\n                    break;\r\n                default:\r\n                    detailLink = Util.isString(item.href) ? item.href : '';\r\n                    break;\r\n            }\r\n            detailLink = this.addLinkParams(detailLink);\r\n            item.href = detailLink;\r\n        });\r\n    }\r\n\r\n    private getLink(value: Array<TpDiscountDetail>): void {\r\n        value.forEach((item: TpDiscountDetail) => {\r\n            this.setDetailLink(item);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 到期时间一周之内才显示\r\n     */\r\n    public showExpireTime(val: Date): boolean {\r\n        const nowTime: number = new Date().getTime();\r\n        const expireTime: number = new Date(val).getTime();\r\n        const gap: number = expireTime - nowTime;\r\n\r\n        return gap > 0 && gap < 86400000 * 7;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 到期时间格式化\r\n     */\r\n    public getFormatExpireTime(val: Date): any {\r\n        return CfUtil.formatLocaleDateTime(val);\r\n    }\r\n\r\n    // 按需场景数据拼接处理\r\n    private handleDiscounts(items: Array<TpDiscountDetail>): Array<any> {\r\n        const ondemandDiscounts: Array<any> = [];\r\n        for (let i: number = 0; i < items.length; i++) {\r\n            //  类似 8折与 20% off 转换\r\n            items[i].discountRate = !Util.isNumber(items[i].rate) ? '' :\r\n                this.isChinese ? ` ${parseFloat((items[i].rate * 10).toFixed(2))}${this.tpDiscounts.discounts}`\r\n                : `; ${parseFloat(((1 - items[i].rate) * 100).toFixed(2))}%${this.tpDiscounts.discounts}`;\r\n            ondemandDiscounts[i] = {\r\n                rate: Util.isNumber(items[i].rate) ? items[i].rate : undefined,\r\n                expireTime: Util.isString(items[i].expireTime) ? items[i].expireTime : '',\r\n                type: Util.isNumber(items[i].type) ? items[i].type : undefined,\r\n                beId: Util.isString(items[i].beId) ? items[i].beId : '',\r\n                href: Util.isString(items[i].href) ? items[i].href : ''\r\n            };\r\n\r\n            let name: string;\r\n            let resourceName: string;\r\n            let specification: string;\r\n            if (this.isChinese) {\r\n                name = Util.isString(items[i].name) ? items[i].name : '';\r\n                resourceName = Util.isString(items[i].resourceName) ? items[i].resourceName : '';\r\n                specification = Util.isString(items[i].specification) ? items[i].specification : '';\r\n            } else {\r\n                name = !Util.isEmptyString(items[i].name) ? items[i].name : '';\r\n                resourceName = !Util.isEmptyString(items[i].resourceName) ? '; ' + items[i].resourceName : '';\r\n                specification = !Util.isEmptyString(items[i].specification) ? ', ' + items[i].specification : '';\r\n            }\r\n            ondemandDiscounts[i].label = name + resourceName + specification + items[i].discountRate;\r\n        }\r\n        this.ondemandDiscountsConfig = this.getOndemandDiscounts(ondemandDiscounts);\r\n        this.getLink(this.ondemandDiscountsConfig);\r\n\r\n        return this.ondemandDiscountsConfig;\r\n    }\r\n\r\n    // 可选数据详情链接\r\n    private getSelectableDetail(vals: Array<TpDiscountDetail>): void {\r\n        for (const val of vals) {\r\n            if (!Util.isUndefined(val.href)) {\r\n                return;\r\n            }\r\n            this.setDetailLink(val);\r\n        }\r\n    }\r\n    // 获取agencyID和locale\r\n    private addLinkParams(url: string): string {\r\n        if (url === '') {\r\n            return url;\r\n        }\r\n        const storage: any = CfUtil.getStorageService();\r\n        if (!(!Util.isUndefined(storage) && !Util.isUndefined(storage.cookieStorage) && Util.isFunction(storage.cookieStorage.getItem))) {\r\n            return url;\r\n        }\r\n        const agencyID: any = storage.cookieStorage.getItem('agencyID');\r\n        const locale: any = storage.cookieStorage.getItem('locale');\r\n        let finalUrl: string = url;\r\n        if (!Util.isEmptyString(agencyID)) {\r\n            finalUrl = finalUrl + '&agencyId=' + agencyID;\r\n        }\r\n        if (!Util.isEmptyString(locale)) {\r\n            finalUrl = finalUrl + '&locale=' + locale;\r\n        }\r\n\r\n        return finalUrl;\r\n    }\r\n\r\n    /**\r\n     * 优惠总额\r\n     */\r\n    private setTotalSavings(): void {\r\n        this.sum = 0;\r\n        if (Util.isArray(this.discoutsConfig.selectedDiscounts)) {\r\n            for (const item of this.discoutsConfig.selectedDiscounts) {\r\n                if (!Util.isNumber(item.priceNum)) {\r\n                    continue;\r\n                } else {\r\n                    this.sum += item.priceNum;\r\n                }\r\n            }\r\n        }\r\n        // 获取选中优惠项的索引index\r\n        if (!Util.isUndefined(this.discoutsConfig.selectableDiscounts)) {\r\n            const index: number = this.discoutsConfig.selectableDiscounts.findIndex((ele: any) => ele.id === this.discoutsConfig.selectedId)\r\n            const selectedDiscountsNum: number = this.discoutsConfig.selectableDiscounts[index]\r\n                && this.discoutsConfig.selectableDiscounts[index].priceNum;\r\n            if (index > -1 && Util.isNumber(selectedDiscountsNum)) {\r\n                this.sum += selectedDiscountsNum;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     *\r\n     * 判断优惠总价格是否为0，总结为0不显示共省部分\r\n     */\r\n    public isSumEqualZero(): boolean {\r\n        this.setTotalSavings();\r\n        const reg: RegExp = new RegExp('[\\.-]');\r\n        const precision: number = this.discoutsConfig.numFormat ?\r\n        Number(this.discoutsConfig.numFormat.split(reg)[2]) : 2;\r\n\r\n        return parseFloat(this.sum.toFixed(precision)) === 0;\r\n    }\r\n    /**\r\n     * 可选优惠项数据根据实际场景判断是否添加默认尾项\r\n     */\r\n    private setSelectableData(options: Array<TpDiscountDetail>): void {\r\n        if (!Util.isArray(options) || options.length === 0) {\r\n            return;\r\n        }\r\n        this.getSelectableDetail(options);\r\n            const length: number = options.length;\r\n            if (options[length - 1].id !== 'no-discounts') {\r\n                options[length] = {\r\n                    label: this.tpDiscounts.no_discounts,\r\n                    id: 'no-discounts',\r\n                    href: '',\r\n                    priceNum: 0\r\n                };\r\n            }\r\n    }\r\n}\r\n","import { NotEqualTo01Pipe, NotEqualTo0Pipe, RatePipe } from './RatePipe';\r\nimport { NgModule } from '@angular/core';\r\nimport { TpDiscountsComponent } from './TpDiscountsComponent';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TpLocaleModule } from '../../pipes/locale/TpLocaleModule';\r\nimport { TiLocaleModule, TiRadioModule, TiOutlineModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TiLocaleModule,\r\n    TpIconModule,\r\n    TpLocaleModule,\r\n    TiRadioModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpDiscountsComponent],\r\n  declarations: [NotEqualTo0Pipe, NotEqualTo01Pipe, RatePipe, TpDiscountsComponent]\r\n})\r\n\r\nexport class TpDiscountsModule {}\r\nexport { TpDiscountsComponent, TpDiscoutsConfig } from './TpDiscountsComponent';\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'isMajorPrice' })\r\nexport class IsMajorPricePipe implements PipeTransform {\r\n    transform(value: Array<any>): Array<any> {\r\n        return value.filter((item: any) => item.majorPrice === true);\r\n    }\r\n}\r\n\r\n@Pipe({ name: 'isMinorPrice' })\r\nexport class IsMinorPricePipe implements PipeTransform {\r\n    transform(value: Array<any>): Array<any> {\r\n        return value.filter((item: any) => item.majorPrice === false);\r\n    }\r\n}\r\n","import { TpPricecalcModule } from '../pricecalc/TpPricecalcModule';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpBuylayerComponent } from './TpBuylayerComponent';\r\nimport { TpBuylayerLeftComponent } from './TpBuylayerLeftComponent';\r\nimport { TpBuylayerRightComponent } from './TpBuylayerRightComponent';\r\nimport { TiButtonModule, TiLocaleModule, TiTipModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TpDiscountsModule } from '../discounts/TpDiscountsModule';\r\nimport { IsMajorPricePipe, IsMinorPricePipe } from './IsMajorPrice';\r\nimport { TpLocaleModule } from '../../pipes/locale/TpLocaleModule';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, TiButtonModule,\r\n      TpDiscountsModule, TpIconModule, TpLocaleModule,  TiLocaleModule, TiTipModule, TpPricecalcModule],\r\n  exports: [TpBuylayerComponent, TpBuylayerLeftComponent, TpBuylayerRightComponent],\r\n  declarations: [IsMajorPricePipe, IsMinorPricePipe, TpBuylayerComponent, TpBuylayerLeftComponent, TpBuylayerRightComponent]\r\n})\r\n\r\nexport class TpBuylayerModule {}\r\nexport { TpBuylayerComponent, TpBuylayerConfig } from './TpBuylayerComponent';\r\nexport { TpButtons, TpBuylayerRightComponent } from './TpBuylayerRightComponent';\r\nexport { TpCosts, TpBuylayerLeftComponent } from './TpBuylayerLeftComponent';\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * 卡片组件\r\n *\r\n * <example-url>../tinyplus3demo/#/card/card-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-card',\r\n    template: `\r\n      <ng-content ></ng-content>\r\n    `,\r\n    styleUrls: ['./card.less'],\r\n    host: {\r\n        '[class.tp-card-disabled]': 'disabled',\r\n        '[class.tp-card-active]': 'active',\r\n        '[attr.tabindex]': 'disabled? \"-1\":\"0\"'\r\n    }\r\n})\r\n\r\nexport class TpCardComponent extends TiBaseComponent {\r\n    /**\r\n     * 卡片禁用状态\r\n     */\r\n    @Input() disabled: boolean = false;\r\n    /**\r\n     * 卡片激活选中状态\r\n     */\r\n    @Input() active: boolean = false;\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n *  特殊卡片组件，添加卡片组件\r\n *\r\n * <example-url>../tinyplus3demo/#/card/card-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-card-add',\r\n    templateUrl: './card-add.html',\r\n    styleUrls: ['./card-add.less'],\r\n    host: {\r\n        '[class.tp-card-add-disabled]': 'disabled',\r\n        '[attr.tabindex]': 'disabled? \"-1\":\"0\"'\r\n    }\r\n})\r\n\r\nexport class TpCardAddComponent extends TiBaseComponent {\r\n    /**\r\n     * 禁用状态\r\n     */\r\n    @Input() disabled: boolean = false;\r\n    /**\r\n     * 点击事件\r\n     */\r\n    @Output() readonly add: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    /**\r\n     * @ignore\r\n     * 加号点击回调\r\n     */\r\n    public onClick($event: Event): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.add.emit($event);\r\n    }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\n/**\r\n * <example-url>../tinyplus3demo/#/card/card-all</example-url>\r\n */\r\n@Component({\r\n  selector: 'tp-card-header',\r\n  template: `\r\n    <ng-content></ng-content>\r\n   `,\r\n  styleUrls: ['./card-header.less'],\r\n})\r\nexport class TpCardHeaderComponent {\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpCardComponent } from './TpCardComponent';\r\nimport { TpCardAddComponent } from './TpCardAddComponent';\r\nimport { TpCardHeaderComponent } from './TpCardHeaderComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpIconModule\r\n  ],\r\n  declarations: [\r\n    TpCardComponent,\r\n    TpCardAddComponent,\r\n    TpCardHeaderComponent\r\n  ],\r\n  exports: [\r\n    TpCardComponent,\r\n    TpCardAddComponent,\r\n    TpCardHeaderComponent\r\n  ]\r\n})\r\n\r\nexport class TpCardModule {}\r\nexport { TpCardComponent } from './TpCardComponent';\r\nexport { TpCardAddComponent } from './TpCardAddComponent';\r\nexport { TpCardHeaderComponent } from './TpCardHeaderComponent';\r\n","import { Component, EventEmitter, Input, Output, QueryList, SimpleChanges, ViewChild, ViewChildren } from '@angular/core';\r\nimport { TiDominatorComponent, TiDropComponent, TiDroplistComponent, TiFormComponent, TiListComponent,\r\n    TiPositionType, TiWholeComponent} from '@cloud/tiny3';\r\n\r\nexport interface TpCascaderItem {\r\n    label?: string;\r\n    disabled?: boolean;\r\n    /**\r\n     * 二级面板数据\r\n     *\r\n     * 包含：1.label：显示文本 2.disabled：禁用 3.tip：提示信息 4.tipPosition：方位，默认为‘right’\r\n     */\r\n    children?: Array<{\r\n        label?: string;\r\n        disabled?: boolean;\r\n        tip?: any;\r\n        tipPosition?: TiPositionType;\r\n        [propName: string]: any;\r\n    }>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * 级联选择器 目前只支持二级或三级级联\r\n *\r\n * <example-url>../tinyplus3demo/#/cascader/cascader-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-cascader',\r\n    templateUrl: './cascader.html',\r\n    styleUrls: ['./cascader.less'],\r\n    providers: [TiFormComponent.getValueAccessor(TpCascaderComponent)],\r\n    host: {\r\n        '(blur)': 'onBlur()',\r\n        '[class.tp-cascader-dominator]': 'true'\r\n    }\r\n})\r\n\r\nexport class TpCascaderComponent extends TiFormComponent {\r\n  // TODO: add explicit constructor\r\n\r\n  // TODO: add explicit constructor\r\n\r\n    /**\r\n     * 数据列表\r\n     */\r\n    @Input() items: Array<TpCascaderItem>;\r\n    /**\r\n     * 是否开启清空输入框内容的功能\r\n     */\r\n    @Input() clearable: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * 10.1.0新增\r\n     */\r\n    // @Input() searchable: boolean = false;\r\n    /**\r\n     * 预留文本\r\n     */\r\n    @Input() placeholder: string;\r\n    /**\r\n     * 显示的字段\r\n     */\r\n    @Input() labelKey: string = 'label';\r\n    /**\r\n     * 10.0.4 新增\r\n     *\r\n     * 单级面板的宽度\r\n     */\r\n    @Input() panelWidth: string = '160px';\r\n    /**\r\n     * 10.0.4 新增\r\n     *\r\n     * 面板高度\r\n     */\r\n    @Input() panelHeight: string = '248px';\r\n    /**\r\n     * 10.0.4 新增\r\n     *\r\n     * 是否只能选中叶子节点\r\n     */\r\n    @Input() onlySelectLeaf: boolean = true;\r\n    /**\r\n     * 10.0.4 新增\r\n     *\r\n     * 在选择框上呈现的数据是否显示全部路径\r\n     */\r\n    @Input() showAllLevel: boolean = true;\r\n    /**\r\n     * 10.1.1新增\r\n     * 指定选中值的字段\r\n     */\r\n    @Input() valueKey: string;\r\n\r\n    /**\r\n     * @ignore\r\n     * 选中事件，选中项没有变化\r\n     */\r\n    @Output() readonly select: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     * 选中事件，选中项变化\r\n     */\r\n    @Output() readonly change: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * 清除已选项\r\n     */\r\n    @Output() readonly clear: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDominatorComponent, {static: true}) dominatorCom: TiDominatorComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDropComponent) dropCom: TiDropComponent;\r\n    /**\r\n     * @ignore 呈现各级数据的list\r\n     */\r\n    @ViewChildren('commonList') listComs: QueryList<TiListComponent>;\r\n    /**\r\n     * @ignore 宽的面板，是一个droplist，用于无数据和搜索场景\r\n     */\r\n    @ViewChild('wideDroplist') wideDroplist: TiDroplistComponent;\r\n    /**\r\n     * @ignore 分隔符 以后可能会对外开放\r\n     */\r\n    public separator: string = '/';\r\n    /**\r\n     * @ignore 转化为数字的panelWidth\r\n     */\r\n    public panelWidthNum: number;\r\n    /**\r\n     * @ignore 三个TiListComponent的model\r\n     */\r\n    public listModel: Array<any> = [];\r\n    /**\r\n     * @ignore 用于dominator呈现数据\r\n     */\r\n    public dominatorModel: string;\r\n    /**\r\n     * @ignore\r\n     * itemsArr[0]存放根面板内容，itemArr[1]存放次级面板内容，itemArr[2]存放次次级面板内容\r\n     */\r\n    public itemsArr: Array<Array<any>> = [];\r\n    /**\r\n     * @ignore 宽面板的数据\r\n     */\r\n    public itemForWideDroplist: Array<any> = [];\r\n    /**\r\n     * @ignore\r\n     */\r\n    public dropshow: boolean;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public listComsArr: Array<TiListComponent>;\r\n\r\n    /**\r\n     * modelWhole与model的中间变量\r\n     */\r\n    private _modelWhole: Array<TpCascaderItem>;\r\n\r\n    private valueFn: (item: any) => any = (item: any) => {\r\n        return item[this.valueKey];\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.panelWidthNum = parseInt(this.panelWidth, 10);\r\n    }\r\n    ngOnChanges(change: SimpleChanges): void {\r\n        if (change['items']) {\r\n            this.itemsArr[0] = this.items;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    ngOnModelChange(): void {\r\n        if (this.modelWhole && this.modelWhole.length > 0) {\r\n            this.joinDominatorModel();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (this.dropCom.isShow || this.wideDroplist.isShow) {\r\n            this.close();\r\n\r\n            return;\r\n        }\r\n        this.dropshow = true;\r\n        if (this.items.length === 0) {\r\n            this.wideDroplist.show();\r\n        } else {\r\n            /**\r\n             * 触发tiScroll关闭面板的场景下，drop不显示，但list是显示的，\r\n             * 下次重新打开时，一个或者多个list会全部显示，除第一个外，其他的都定位错误，\r\n             * 所以，需要打开前隐藏除第一个外的其他list。\r\n             */\r\n            this.listComsArr.forEach((list: TiListComponent, index: number): void => {\r\n                if (index > 0) {\r\n                    this.renderer.setStyle(list.nativeElement, 'display', 'none');\r\n                }\r\n            });\r\n            this.dropCom.show();\r\n            if (this.modelWhole && this.modelWhole.length > 0) {\r\n                this.modelWhole.forEach((item: TpCascaderItem, i: number): void => {\r\n                    this.listComsArr[i].model = item;\r\n                    this.itemsArr[i + 1] = item.children;\r\n                    this.showList(i);\r\n                    // 如果是初始有值，不加setTimeout不能滚到正确的位置\r\n                    setTimeout((): void => {\r\n                        this.listComsArr[i].scrollToSelected();\r\n                    }, 0);\r\n                });\r\n            } else {\r\n                this.listComsArr[0].model = undefined;\r\n                this.showList(0);\r\n            }\r\n        }\r\n\r\n        this.focus();\r\n    }\r\n    ngAfterViewInit(): void {\r\n        this.listComsArr = this.listComs.toArray();\r\n        this.setFocusableElems(this.dominatorCom.getFocusableElems());\r\n        this.renderer.setStyle(this.dropCom.nativeElement, 'width', '');\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public close(): void {\r\n        this.dropshow = false;\r\n        this.dropCom.hide();\r\n        this.wideDroplist.hide();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onBlur(): void {\r\n        this.close();\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onSelect($event: TpCascaderItem, panelIndex: number): void {\r\n        // 处理面板\r\n        if ($event.children?.length > 0) {\r\n            // 关闭次次级面板\r\n            for (let i: number = panelIndex + 1; i < this.listComsArr.length - 1; i++) {\r\n                this.renderer.setStyle(this.listComsArr[i + 1].nativeElement, 'display', 'none');\r\n            }\r\n            // 打开次级面板\r\n            this.itemsArr[panelIndex + 1] = $event.children;\r\n            this.showList(panelIndex + 1);\r\n        } else {\r\n            // 关闭次级以后所有面板\r\n            this.close();\r\n        }\r\n        this.listModel = this.listModel || [];\r\n        this.listModel.splice(panelIndex);\r\n        this.listModel.push($event);\r\n        if (!this.onlySelectLeaf || !$event.children || $event.children.length === 0) {\r\n            this.modelWhole = [...this.listModel];\r\n            this.handleModel($event, panelIndex);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClear(): void {\r\n        this.model = [];\r\n        this.clear.emit();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onMouseleave(panelIndex: number): void {\r\n        this.listComsArr[panelIndex].hoverOption = undefined;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public showList(panelIndex: number): void {\r\n        this.renderer.setStyle(this.listComsArr[panelIndex].nativeElement, 'display', 'inline-block');\r\n        this.renderer.setStyle(this.dropCom.nativeElement, 'width', this.panelWidthNum * (panelIndex + 1) + 'px');\r\n        if (!this.listComsArr[panelIndex].model) {\r\n            this.listComsArr[panelIndex].hoverOption = undefined;\r\n        }\r\n    }\r\n\r\n    private handleModel($event: TpCascaderItem, panelIndex: number): void {\r\n        // 处理数据\r\n        this.listModel.splice(panelIndex);\r\n        this.listModel[panelIndex] = $event;\r\n        this.joinDominatorModel();\r\n    }\r\n\r\n    /**\r\n     * 通过model拼接dominatorModel，显示在dominator上\r\n     */\r\n    private joinDominatorModel(): void {\r\n        this.dominatorModel = '';\r\n        if (this.showAllLevel) {\r\n            this.modelWhole.forEach((item: any, index: number): void => {\r\n                if (index === 0) {\r\n                    this.dominatorModel += `${item[this.labelKey]}`;\r\n                } else {\r\n                    this.dominatorModel += `${this.separator}${item[this.labelKey]}`;\r\n                }\r\n            });\r\n        } else {\r\n            this.dominatorModel = this.modelWhole[this.model.length - 1][this.labelKey];\r\n        }\r\n    }\r\n\r\n    writeValue(model): void {\r\n        // super.writeValue(model);\r\n        if (model && this.valueKey) {\r\n            this._modelWhole = this.items.filter((item) => model.includes(this.valueFn(item)));\r\n            if (this._modelWhole[0].children) {\r\n                const nextModelWhole: TpCascaderItem = this._modelWhole[0].children.filter((item) => model.includes(this.valueFn(item)))[0];\r\n                this._modelWhole.push(nextModelWhole);\r\n                if (nextModelWhole.children) {\r\n                    const nextModelWhole1: TpCascaderItem =\r\n                        nextModelWhole.children.filter((item) => model.includes(this.valueFn(item)))[0];\r\n                    nextModelWhole1 && this._modelWhole.push(nextModelWhole1);\r\n                }\r\n            }\r\n        } else {\r\n            this._modelWhole = model;\r\n        }\r\n        super.writeValue(model);\r\n    }\r\n\r\n    private get modelWhole(): any {\r\n        return this._modelWhole;\r\n    }\r\n\r\n    /**\r\n     * 点选时modelWhole改变，要同时更改model\r\n     */\r\n    private set modelWhole(value: any) {\r\n        this._modelWhole = value;\r\n        if (this.valueKey && value !== undefined && value !== null) {\r\n            // 存在valueKey，且value不为空\r\n            this.model = value.map((item) => this.valueFn(item));\r\n        } else {\r\n            this.model = value;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TiDominatorModule, TiDroplistModule, TiDropModule, TiListModule, TiTipModule } from '@cloud/tiny3';\r\n\r\nimport { TpCascaderComponent } from './TpCascaderComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TiDominatorModule,\r\n    TiDropModule,\r\n    TiListModule,\r\n    TiDroplistModule,\r\n    TiTipModule\r\n  ],\r\n  exports: [TpCascaderComponent],\r\n  declarations: [TpCascaderComponent]\r\n})\r\n\r\nexport class TpCascaderModule {}\r\nexport { TpCascaderComponent, TpCascaderItem } from './TpCascaderComponent';\r\n","\r\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * 折叠框组件 collapsebox\r\n *\r\n * collapsebox组件是一个带有关闭操作的容器类组件，服务可自定义内容。\r\n *\r\n * <example-url>../tinyplus3demo/#/collapsebox/collapsebox-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-collapsebox',\r\n    templateUrl: './collapsebox.html',\r\n    styleUrls: ['./collapsebox.less']\r\n})\r\n\r\nexport class TpCollapseboxComponent extends TiBaseComponent {\r\n    /**\r\n     * @ignore\r\n     * 设置折叠框默认展开\r\n     */\r\n    public collapsed: boolean = false;\r\n    /**\r\n     * 是否可关闭\r\n     * 10.0.3新增\r\n     */\r\n    @Input() closeable: boolean = true;\r\n    /**\r\n     * 关闭事件\r\n     * 10.0.3新增\r\n     */\r\n    @Output() readonly close: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     * 10.0.3新增\r\n     */\r\n    public onClickClose(event: Event): void {\r\n        if (this.close.observers.length > 0) {\r\n            this.close.emit();\r\n        } else {\r\n            this.collapsed = true;\r\n        }\r\n    }\r\n }\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { TiCollapseModule, TiOutlineModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpCollapseboxComponent } from './TpCollapseboxComponent';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    TiCollapseModule,\r\n    TpIconModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpCollapseboxComponent],\r\n  declarations: [TpCollapseboxComponent]\r\n})\r\n\r\nexport class TpCollapseboxModule {}\r\nexport { TpCollapseboxComponent } from './TpCollapseboxComponent';\r\n","import { Component, ContentChild, EventEmitter, Input, Output, TemplateRef } from '@angular/core';\r\n\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * 折叠按钮组件，在高级搜索场景中使用\r\n *\r\n * <example-url>../tinyplus3demo/#/collapsebutton/collapsebutton-all</example-url>\r\n */\r\n@Component({\r\n  selector: 'tp-collapsebutton',\r\n  templateUrl: './collapsebutton.html',\r\n  styleUrls: ['./collapsebutton.less'],\r\n  host: {\r\n    '[class.tp-collapsebutton-uncollapsed]': '!collapsed'\r\n  }\r\n})\r\nexport class TpCollapsebuttonComponent extends TiBaseComponent {\r\n\r\n  /**\r\n   * 是否折叠，true：折叠状态 false：非折叠状态，双向绑定\r\n   */\r\n  @Input() collapsed: boolean = true;\r\n  /**\r\n   * 高级搜索显示的筛选条件数目（10.0.4 版本新增）\r\n   */\r\n  @Input() searchCount: number = 0;\r\n  /**\r\n   *  折叠状态改变事件，用于实现折叠状态双向绑定，也可单独使用\r\n   */\r\n  @Output() readonly collapsedChange: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n  /**\r\n   * @ignore\r\n   * 用户自定义按钮文本\r\n   */\r\n  @ContentChild(TemplateRef) textTemplateRef: TemplateRef<any>;\r\n\r\n  /**\r\n   * @ignore\r\n   * 按钮点击事件处理\r\n   */\r\n  public onClickToggle($event: Event): void {\r\n    this.collapsed = !this.collapsed;\r\n    this.collapsedChange.emit(this.collapsed);\r\n  }\r\n\r\n}\r\n","import { Component } from '@angular/core';\r\n/**\r\n * 高级搜索中的面板，可选择使用。\r\n */\r\n@Component({\r\n  selector: 'tp-collapsepanel',\r\n  template: `\r\n    <ng-content></ng-content>\r\n  `,\r\n  styleUrls: ['./collapsepanel.less']\r\n})\r\nexport class TpCollapsepanelComponent {\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TiButtonModule, TiLocaleModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpCollapsebuttonComponent } from './TpCollapsebuttonComponent';\r\nimport { TpCollapsepanelComponent } from './TpCollapsepanelComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiButtonModule,\r\n    TiLocaleModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [\r\n    TpCollapsebuttonComponent,\r\n    TpCollapsepanelComponent\r\n  ],\r\n  declarations: [\r\n    TpCollapsebuttonComponent,\r\n    TpCollapsepanelComponent\r\n  ]\r\n})\r\n\r\nexport class TpCollapsebuttonModule { }\r\nexport { TpCollapsebuttonComponent } from './TpCollapsebuttonComponent';\r\nexport { TpCollapsepanelComponent } from './TpCollapsepanelComponent';\r\n","import { Component, ElementRef, Input, Renderer2 } from '@angular/core';\r\nimport { TiFormComponent, TiLocale } from '@cloud/tiny3';\r\n\r\n/**\r\n * NPS评分组件\r\n *\r\n * <example-url>../tinyplus3demo/#/score/score-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-score',\r\n    templateUrl: './score.html',\r\n    styleUrls: ['./score.less'],\r\n    providers: [ TiFormComponent.getValueAccessor(TpScoreComponent) ]\r\n})\r\n\r\nexport class TpScoreComponent extends TiFormComponent {\r\n    /**\r\n     * 设置最小评分值文本描述\r\n     */\r\n    @Input() minText: string;\r\n    /**\r\n     * 设置最大评分值文本描述\r\n     */\r\n    @Input() maxText: string;\r\n\r\n    /**\r\n     * @ignore\r\n     * 定义含有11项成员的数组\r\n     */\r\n    public scoreArray: Array<any> = new Array(11);\r\n\r\n    constructor(protected hostRef: ElementRef, protected renderer: Renderer2) {\r\n        super(hostRef, renderer);\r\n        this.minText = this.minText || TiLocale.getLocaleWords().tpScore.minText;\r\n        this.maxText = this.maxText || TiLocale.getLocaleWords().tpScore.maxText;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 选择评分时，触发事件\r\n     */\r\n    public onClick(value: number): void {\r\n        this.model = value;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpScoreComponent } from './TpScoreComponent';\r\nimport { TiOutlineModule } from '@cloud/tiny3';\r\n@NgModule({\r\n  imports: [CommonModule, TiOutlineModule],\r\n  exports: [TpScoreComponent],\r\n  declarations: [TpScoreComponent]\r\n})\r\n\r\nexport class TpScoreModule { }\r\nexport { TpScoreComponent } from './TpScoreComponent';\r\n","import { Component, ElementRef, Input, OnInit, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\n\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\n\r\nimport { TpUtil } from './../../utils/TpUtil';\r\n\r\nexport interface TpQuestionInfo {\r\n    /**\r\n     * 问题Id\r\n     *\r\n     */\r\n    questionId: string;\r\n    /**\r\n     * 问题的类型，有radio和essay、两种类型\r\n     *\r\n     */\r\n    type: 'radio' | 'essay';\r\n    /**\r\n     * 问题是否呈现\r\n     */\r\n    show: boolean;\r\n    /**\r\n     * 问题是否是必选\r\n     *\r\n     */\r\n    require: boolean;\r\n    /**\r\n     * 问题的名称\r\n     *\r\n     */\r\n    title: string;\r\n}\r\n\r\nexport interface TpSurveyOptions {\r\n    /**\r\n     * 服务Id，各个服务需要唯一\r\n     *\r\n     */\r\n    serviceId: string;\r\n    /**\r\n     * 触点Id，一个服务内的触点Id需要保证唯一\r\n     *\r\n     */\r\n    contactId: string;\r\n    /**\r\n     * 触点名称，用于拼接问题\r\n     *\r\n     */\r\n    contactName: string;\r\n}\r\n/**\r\n * 满意度调查组件\r\n *\r\n * 10.0.3版本新增\r\n *\r\n * <example-url>../tinyplus3demo/#/contactsurvey/contactsurvey-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-contactsurvey',\r\n    templateUrl: './contactsurvey.html',\r\n    styleUrls: ['./contactsurvey.less'],\r\n    host: {\r\n        class: 'tp-contactsurvey-container' // 给最外层元素加样式类\r\n    }\r\n})\r\n\r\nexport class TpContactsurveyComponent extends TiBaseComponent implements OnInit {\r\n    /**\r\n     * 常量配置(90天对应的毫秒数)\r\n     */\r\n    private static readonly MILLISECONDS_PER_MONTH: number =  90 * 24 * 60 * 60 * 1000;\r\n    /**\r\n     * 组件传入数据\r\n     *\r\n     */\r\n    @Input() options: TpSurveyOptions;\r\n    /**\r\n     * @ignore\r\n     * 是否显示满意度调查组件，默认不显示。符合某些条件才会展示出来。\r\n     */\r\n    public showContactsurvey: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * 控制提交按钮是否禁用，默认为禁用\r\n     */\r\n    public submitDisabled: boolean = true;\r\n    /**\r\n     * @ignore\r\n     * 国际化词条对象\r\n     */\r\n    public tpContactsurvey: any = TiLocale.getLocaleWords().tpContactsurvey;\r\n    /**\r\n     * @ignore\r\n     * 评分值\r\n     */\r\n    public scoreValue: number;\r\n    /**\r\n     * @ignore\r\n     * 文本框组件输入值\r\n     */\r\n    public textareaValue: string;\r\n    /**\r\n     * @ignore\r\n     * 模板中展示的题目\r\n     */\r\n    public displayData: Array<TpQuestionInfo> = [];\r\n    /**\r\n     * @ignore\r\n     * 用户反馈的答案\r\n     */\r\n    public submitAnswer: Array<any> = [];\r\n    /**\r\n     * 类生产环境的请求数据\r\n     */\r\n    private devConfig: any = {\r\n        backend: 'https://console.ulanqab.huawei.com/nps-api',\r\n        surveyId: 'hwcloudbusurvey_key_fbd25bdbdb89'\r\n    };\r\n    /**\r\n     * 现网环境的请求数据\r\n     */\r\n    private prodConfig: any = {\r\n        backend: 'https://voc.huaweicloud.com/survey-api',\r\n        surveyId: 'hwcloudbusurvey_key_fbd25bdbdb89'\r\n    };\r\n    /**\r\n     * 用户ID，作为用户的唯一标识\r\n     */\r\n    private userId: string = '';\r\n    /**\r\n     * 默认为类生产环境配置\r\n     */\r\n    public config: any = this.devConfig;\r\n    constructor(private elementRef: ElementRef, private renderer2: Renderer2) {\r\n        super(elementRef, renderer2);\r\n        if (location.hostname.indexOf('huaweicloud.com') > -1) {\r\n            this.config = this.prodConfig;\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        CfUtil.getUser()\r\n            .then((user: any): void => {\r\n                const root: any = user;\r\n                const camel: any = CfUtil.getHttpService();\r\n                const msgService: any = CfUtil.getMessage();\r\n                if (!camel || !msgService || !root || !Util.isFunction(camel.get) || !Util.isFunction(msgService.showSuccess)) {\r\n                    return;\r\n                }\r\n                const userId: string = root.domainId;\r\n                this.userId = userId;\r\n                const url: string = `${this.config.backend}/api/get/commit/date?surveyId={survey_id}&userId={user_id}&serviceId={service_id}&contactId={contact_id}`;\r\n                if (userId) {\r\n                    camel.get({\r\n                        url: {\r\n                            s: url,\r\n                            o: {\r\n                                survey_id: this.config.surveyId,\r\n                                user_id: userId,\r\n                                service_id: this.options.serviceId,\r\n                                contact_id: this.options.contactId\r\n                            }\r\n                        }\r\n                    })\r\n                    .then((response: any): void => {\r\n                        // 后台返回的日期格式yyyy-MM-dd，在IE下Date.parse为NaN，导致组件提交成功后还会出现。需要转成yyyy/mm/dd，目前这种格式在3个浏览器都OK\r\n                        const submitDate: any = Date.parse(response.data.replace(/-/g, '/'));\r\n                        // 如果是非法日期，或者没有提交为''，则重新赋值为0。否则会出现NaN，组件展示不出来。\r\n                        const milliSeconds: number = isNaN(submitDate) ? 0 : submitDate;\r\n\r\n                        // 查询上次提交的日期，如果小于90天则不显示。否则，看之前用户是否点击关闭按钮\r\n                        if (new Date().getTime() - milliSeconds > TpContactsurveyComponent.MILLISECONDS_PER_MONTH) {\r\n                            const tinyContactSurvey: string =\r\n                            Util.isUndefined(TpUtil.getCookie('tinyContactSurvey')) ? '' : TpUtil.getCookie('tinyContactSurvey');\r\n\r\n                            if (tinyContactSurvey.indexOf(`${userId}${this.options.serviceId}${this.options.contactId}`) === -1) {\r\n                                this.showContactsurvey = true;\r\n                            }\r\n                        }\r\n                    }, (): void => {\r\n                        // 数据请求失败，不出现该组件。如果出现错误提示，会给用户带来困扰。\r\n                    });\r\n                }\r\n            });\r\n        // 在模板中用于展示的问题数据\r\n        this.displayData = [{\r\n            questionId: 'question1',\r\n            type: 'radio',\r\n            show: true, // 初始是否需要显示\r\n            require: true, // 是够是必选\r\n            title: Util.formatEntry(this.tpContactsurvey.contactSurvey_question1_title, [this.options.contactName])\r\n        }, {\r\n            questionId: 'question2',\r\n            type: 'essay',\r\n            show: false,\r\n            require: false,\r\n            title: this.tpContactsurvey.contactSurvey_question2_title\r\n        }];\r\n    }\r\n    /**\r\n     * @ignore\r\n     *  叉号图标点击事件\r\n     */\r\n    public onClickClose(): void {\r\n        const closedList: string = Util.isUndefined(TpUtil.getCookie('tinyContactSurvey')) ? '' : TpUtil.getCookie('tinyContactSurvey');\r\n        TpUtil.setCookie('tinyContactSurvey', `${closedList}${this.userId}${this.options.serviceId}${this.options.contactId},`);\r\n        this.showContactsurvey = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 调查结果提交事件\r\n     */\r\n    public onClickSubmit(): void {\r\n        CfUtil.getUser().then((user: any): void => {\r\n            const root: any = user;\r\n            const camel: any = CfUtil.getHttpService();\r\n            const msgService: any = CfUtil.getMessage();\r\n            if (!camel || !msgService || !root || !Util.isFunction(camel.post) || !Util.isFunction(msgService.showSuccess)) {\r\n                return;\r\n            }\r\n            const url: string = `${this.config.backend}/api/save`;\r\n            // 发送请求，向后台发送问卷结果\r\n            const sendData: any = {\r\n                data: {\r\n                    surveyId: this.config.surveyId,\r\n                    serviceId: this.options.serviceId,\r\n                    contactId: this.options.contactId,\r\n                    w3account: root.domainId, // 用户ID\r\n                    answers: this.submitAnswer\r\n                }\r\n            };\r\n\r\n            camel.post({\r\n                url: {\r\n                    s: url\r\n                },\r\n                params: sendData\r\n            })\r\n            .then((): void => { }, (): void => { });\r\n\r\n            this.showContactsurvey = false;\r\n            msgService.showSuccess(this.tpContactsurvey.contactSurvey_submit_success);\r\n        }, (): void => { });\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击评分组件\r\n     */\r\n    public changeScore(score: number): void {\r\n        if (!this.displayData[1].show) {\r\n            this.displayData[1].show = true;\r\n        }\r\n\r\n        this.initAnswerArrray();\r\n\r\n        // 对于单选来说，answer和subRemark的值一样\r\n        this.submitAnswer[0].answer = score;\r\n        this.submitAnswer[0].subRemark = score;\r\n\r\n        this.submitDisabled = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 文本框失焦事件\r\n     */\r\n    public onBlur(value: string): void {\r\n        this.submitAnswer[1].answer = value;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 初始化答案对象，用于给后台下发\r\n     */\r\n    public initAnswerArrray(): void {\r\n        for (let i: number = 0; i < this.displayData.length; i++) {\r\n            this.submitAnswer[i] = { };\r\n            this.submitAnswer[i].questionId = this.displayData[i].questionId;\r\n            this.submitAnswer[i].subQuestionId = null;\r\n            this.submitAnswer[i].subName = this.displayData[i].title;\r\n            this.submitAnswer[i].answer = '';\r\n            this.submitAnswer[i].subRemark = '';\r\n            if (this.displayData[i].type === 'essay') {\r\n                this.submitAnswer[i].subRemark = null;\r\n            }\r\n            this.submitAnswer[i].reason = '0';\r\n        }\r\n    }\r\n}\r\n","import { FormsModule } from '@angular/forms';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiButtonModule, TiIconModule, TiLocaleModule, TiOutlineModule, TiTextareaModule } from '@cloud/tiny3';\r\n\r\nimport { TpScoreModule } from '../score/TpScoreModule';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpContactsurveyComponent } from './TpContactsurveyComponent';\r\n@NgModule({\r\n    imports: [\r\n        TiTextareaModule,\r\n        TpScoreModule,\r\n        TpIconModule,\r\n        TiButtonModule,\r\n        CommonModule,\r\n        TiIconModule,\r\n        FormsModule,\r\n        TiLocaleModule,\r\n        TiOutlineModule],\r\n    exports: [TpContactsurveyComponent],\r\n    declarations: [TpContactsurveyComponent]\r\n})\r\n\r\nexport class TpContactsurveyModule { }\r\nexport { TpContactsurveyComponent, TpQuestionInfo, TpSurveyOptions } from './TpContactsurveyComponent';\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@Component({\r\n    selector: 'tp-toast',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./toast.less']\r\n})\r\n\r\nexport class TpToastComponent {\r\n}\r\n","import { Component, ElementRef, Input, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, TiPopUpRef, TiPopupService, TiPosition } from '@cloud/tiny3';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { delay, throttleTime } from 'rxjs/operators';\r\n\r\nimport { TpToastComponent } from './TpToastComponent';\r\n\r\n/**\r\n * 复制组件，用于复制文本\r\n *\r\n * <example-url>../tinyplus3demo/#/copy/copy-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-copy',\r\n    templateUrl: './copy.html',\r\n    styleUrls: ['./copy.less']\r\n})\r\n\r\nexport class TpCopyComponent extends TiBaseComponent {\r\n    constructor(\r\n        protected hostRef: ElementRef,\r\n        private Renderer: Renderer2,\r\n        private tiPopup: TiPopupService<any>\r\n    ) { super(hostRef, Renderer); }\r\n    @Input() content: string;\r\n    /**\r\n     * 复制后的<strong>即时提示信息</strong>(小黑框)，\r\n     *\r\n     * 缺省值：复制成功/Copied successfully.（国际化），支持自定义\r\n     */\r\n    @Input() successTip: string;\r\n\r\n    private clickObserve: Subject<string> = new Subject();\r\n    private clickSub: Subscription;\r\n    private hideToast: Subject<string> = new Subject();\r\n    private hideToastSub: Subscription;\r\n    private deleteToast: Subject<string> = new Subject();\r\n    private deleteToastSub: Subscription;\r\n\r\n    private toast: TiPopUpRef;\r\n    private toastRef: any;\r\n    private hostSpace: number = 4; // toast距copy图标的距离\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 创建点击事件的observe\r\n        this.createClickObserve();\r\n        // 创建hideToast的observe\r\n        this.createHideToastObserve();\r\n        // 创建deleteToast的observe\r\n        this.createDeleteToastObserve();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 图标点击事件\r\n     */\r\n    public onClick(): void {\r\n        if (!this.content) {\r\n            return;\r\n        }\r\n        this.clickObserve.next();\r\n    }\r\n    private createClickObserve(): void {\r\n        this.clickSub = this.clickObserve.pipe(\r\n            throttleTime(2000)\r\n        )\r\n        .subscribe((): void => {\r\n            // 创建textarea\r\n            const textarea: any = this.Renderer.createElement('textarea');\r\n            this.Renderer.appendChild(document.body, textarea);\r\n            this.Renderer.setStyle(textarea, 'postion', 'absolute');\r\n            this.Renderer.setStyle(textarea, 'top', '-9999px');\r\n            this.Renderer.setStyle(textarea, 'left', '-9999px');\r\n            this.Renderer.setProperty(textarea, 'value', this.content);\r\n            textarea.select();\r\n            document.execCommand('Copy');\r\n            this.Renderer.removeChild(document.body, textarea);\r\n            // 复制成功后，显示即时提示信息\r\n            this.showToast();\r\n            // 显示后隐藏\r\n            this.hideToast.next();\r\n        });\r\n    }\r\n    private createHideToastObserve(): void {\r\n        this.hideToastSub = this.hideToast.pipe(delay(1000))\r\n            .subscribe(() => {\r\n                this.Renderer.addClass(this.toastRef.location.nativeElement, 'fadeout');\r\n                // 隐藏后删除\r\n                this.deleteToast.next();\r\n            });\r\n    }\r\n    private createDeleteToastObserve(): void {\r\n        this.deleteToastSub = this.deleteToast.pipe(delay(300))\r\n            .subscribe(() => {\r\n                this.toast.hide();\r\n            });\r\n    }\r\n    /**\r\n     * 复制成功后，显示toast提示\r\n     */\r\n    private showToast(): void {\r\n        this.toast = this.tiPopup.create(TpToastComponent);\r\n        this.toastRef = this.toast.show({\r\n            content: this.successTip || TiLocale.getLocaleWords().tpCopy.successTip,\r\n            container: 'body'\r\n        });\r\n        TiPosition.setPosition({\r\n            hostEle: this.hostRef.nativeElement,\r\n            targetEle: this.toastRef.location.nativeElement,\r\n            hostSpace: this.hostSpace,\r\n            fixMaxHeight: true,\r\n            determinPositionFn: (layout: any): string => {\r\n                if (layout.avilableLayout.right >= layout.targetLayout.width + this.hostSpace) {\r\n                    return 'right';\r\n                } else {\r\n                    return 'left';\r\n                }\r\n            }\r\n\r\n        });\r\n        this.Renderer.addClass(this.toastRef.location.nativeElement, 'fadein');\r\n    }\r\n    ngOnDestroy(): void {\r\n        if (this.toast) {\r\n            this.toast.hide();\r\n        }\r\n        this.clickSub.unsubscribe();\r\n        this.hideToastSub.unsubscribe();\r\n        this.deleteToastSub.unsubscribe();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TiPopupModule, TiOutlineModule } from '@cloud/tiny3';\r\nimport { TpCopyComponent } from './TpCopyComponent';\r\nimport { TpToastComponent } from './TpToastComponent';\r\n\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiPopupModule,\r\n    TpIconModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpCopyComponent],\r\n  declarations: [TpCopyComponent, TpToastComponent],\r\n  entryComponents: [TpToastComponent]\r\n})\r\n\r\nexport class TpCopyModule {}\r\nexport { TpCopyComponent } from './TpCopyComponent';\r\n","// tslint:disable-next-line: no-implicit-dependencies\r\nimport { Component, Input } from '@angular/core';\r\nimport { TiLocale, TiBaseComponent } from '@cloud/tiny3';\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\nimport { TpDatePipe } from '../../pipes/locale/TpLocaleModule';\r\n\r\n/*\r\n* 倒计时类别, 详情参考“云运营公共接口说明”文档，2.21云服务倒计时信息查询\r\n*/\r\nexport type TpCountDownCode = 'hws_countdown_period_using'\r\n    | 'hws_countdown_period_gracing'\r\n    | 'hws_countdown_period_frozen'\r\n    | 'hws_countdown_period_illegalfrozen'\r\n    | 'hws_countdown_period_policefrozen'\r\n    | 'hws_countdown_period_toondemand'\r\n    | 'hws_countdown_ondemand_using'\r\n    | 'hws_countdown_ondemand_gracing'\r\n    | 'hws_countdown_ondemand_frozen'\r\n    | 'hws_countdown_ondemand_illegalfrozen'\r\n    | 'hws_countdown_ondemand_illegalfrozen_arrear'\r\n    | 'hws_countdown_ondemand_policefrozen';\r\n\r\n/**\r\n * 倒计时信息，接口是根据\"云运营公共接口说明\"文档 2.21云服务倒计时信息查询接口返回数据设置，详情参考接口\r\n */\r\nexport interface TpCountDownInfos {\r\n    status: number;\r\n    nextOperationRemainingDay: number;\r\n    nextOperationRemainingHour: number;\r\n    nextOperationRemainingMinute: number;\r\n    nextOperationRemainingSecond: number;\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 倒计时信息提示信息，接口是根据\"云运营公共接口说明\"文档 2.21云服务倒计时信息查询接口返回数据设置，详情参考接口\r\n */\r\nexport interface TpCountDownTips {\r\n    effTime: string; // 资源生效时间（即资源创建时间）\r\n    expTime: string; // 资源到期时间，如果已经欠费，则为资源欠费时间。\r\n    graceTime: string; // 宽限期结束时间\r\n    releaseTime: string; // 资源释放时间\r\n    frozenTime: string; // 资源冻结时间\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 资源倒计时组件\r\n * <example-url>../tinyplus3demo/#/countdown/countdown-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-countdown',\r\n    templateUrl: './countdown.html',\r\n    styleUrls: ['./countdown.less']\r\n})\r\n\r\nexport class TpCountdownComponent extends TiBaseComponent {\r\n\r\n    /**\r\n     * 是否显示资源的状态\r\n     */\r\n    @Input() showStatus: boolean = true;\r\n    /**\r\n     * 倒计时类别，即倒计时countDownCode字段\r\n     */\r\n    @Input() countDownCode: TpCountDownCode;\r\n    /**\r\n     * 倒计时数据, 和2.21云服务倒计时信息查询接口返回的countDownInfos一致\r\n     */\r\n    @Input() countDownInfos: TpCountDownInfos;\r\n    /**\r\n     * tip提示数据，和2.21云服务倒计时信息查询接口返回的TpCountDownTips一致\r\n     */\r\n    @Input() countDownTips: TpCountDownTips;\r\n\r\n    /**\r\n     * @ignore\r\n     * 倒计时最后显示的文本\r\n     */\r\n    public countdownText: string = '';\r\n    /**\r\n     * @ignore\r\n     * tip 的内容\r\n     */\r\n    public tipContext: any = [];\r\n    /**\r\n     * @ignore\r\n     * tip 的最大宽度\r\n     */\r\n    public tipMaxWidth: string = '500px';\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 生成倒计时内容\r\n        this.generateContent();\r\n        // 生成tip内容\r\n        this.generateTipContent();\r\n    }\r\n\r\n    /**\r\n     * 生成倒计时内容\r\n     */\r\n    private generateContent(): void {\r\n       // 时间间隔\r\n       let timespan: string = '';\r\n       // 时间信息\r\n       let hourInfo: string = '';\r\n       let minuteInfo: string = '';\r\n       //  根据返回时间拼接出时间间隔  {d} 天数 {h} 小时数 {m} 分钟数\r\n       if (this.countDownInfos) {\r\n           if (this.countDownInfos.nextOperationRemainingDay) {\r\n               timespan = this.countDownInfos.nextOperationRemainingDay > 1 ?\r\n                   TiLocale.getLocaleWords().tpCountdown.day\r\n                       .replace(/{d}/, this.countDownInfos.nextOperationRemainingDay) :\r\n                   TiLocale.getLocaleWords().tpCountdown.day\r\n                       .replace(/s/, '')\r\n                       .replace(/{d}/, this.countDownInfos.nextOperationRemainingDay);\r\n           } else if (this.countDownInfos.nextOperationRemainingSecond) {\r\n               timespan = TiLocale.getLocaleWords().tpCountdown.second;\r\n           } else if (this.countDownInfos.nextOperationRemainingHour) {\r\n               hourInfo = this.countDownInfos.nextOperationRemainingHour > 1 ?\r\n                   TiLocale.getLocaleWords().tpCountdown.hour\r\n                       .replace(/{h}/, this.countDownInfos.nextOperationRemainingHour) :\r\n                   TiLocale.getLocaleWords().tpCountdown.hour\r\n                       .replace(/s/, '')\r\n                       .replace(/{h}/, this.countDownInfos.nextOperationRemainingHour);\r\n\r\n               minuteInfo = this.countDownInfos.nextOperationRemainingMinute > 1 ?\r\n                   TiLocale.getLocaleWords().tpCountdown.minute\r\n                       .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute) :\r\n                   TiLocale.getLocaleWords().tpCountdown.minute\r\n                       .replace(/s/, '')\r\n                       .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute);\r\n\r\n               timespan = hourInfo + ' ' + minuteInfo;\r\n           } else if (this.countDownInfos.nextOperationRemainingMinute) {\r\n               timespan = this.countDownInfos.nextOperationRemainingMinute > 1 ?\r\n                   TiLocale.getLocaleWords().tpCountdown.minute.replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute) :\r\n                   TiLocale.getLocaleWords().tpCountdown.minute.replace(/s/, '').replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute);\r\n           }\r\n       }\r\n\r\n       // 根据状态码，得到倒计时整体字符串。 {TS} 时间间隔\r\n       const statusKey: string = this.countDownCode ? this.countDownCode.slice(14) : '';\r\n       if (TiLocale.getLocaleWords().tpCountdown[statusKey]) {\r\n           this.countdownText = TiLocale.getLocaleWords().tpCountdown[statusKey]\r\n               .replace(/{TS}/, timespan);\r\n       }\r\n\r\n       // 如果是按需正常使用，没有倒计时，只提示创建时间，单独处理 {ymdhms} 是 格式为本地化日期时间\r\n       if (this.countDownCode === 'hws_countdown_ondemand_using') {\r\n           this.countdownText = this.countdownText.replace(/{ymdhms}/, new TpDatePipe().transform(this.countDownTips.effTime, 'dateTime'));\r\n       }\r\n\r\n       // 是否展示状态\r\n       if (!this.showStatus) {\r\n           this.countdownText = this.countdownText.split(TiLocale.getLocaleWords().tpCountdown.spliter)\r\n               .pop();\r\n       }\r\n\r\n       // 添加样式类 宽限期，冻结期，违规冻结 提示红色，正常使用，如果小于七天，提示黄色\r\n       if (this.countDownInfos.status > 2) {\r\n           this.nativeElement.classList.add('tp-countdown-alarm');\r\n       } else if ((this.countDownCode === 'hws_countdown_period_using' || this.countDownCode === 'hws_countdown_period_toondemand')\r\n           && this.isDayLess7()) {\r\n           this.nativeElement.classList.add('tp-countdown-warn');\r\n       }\r\n    }\r\n\r\n    // 倒计时是否小于七天\r\n    private isDayLess7(): boolean {\r\n        return !(this.countDownInfos.nextOperationRemainingDay && this.countDownInfos.nextOperationRemainingDay > 7);\r\n    }\r\n\r\n    /**\r\n     * 生成tips 内容\r\n     */\r\n    private generateTipContent(): void {\r\n        switch (this.countDownCode) {\r\n            case 'hws_countdown_period_using':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.effTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: ` ${TiLocale.getLocaleWords().tpCountdown.expire_time} `,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.expTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_gracing':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.expire_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.expTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.graceTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_frozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.frozenTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.releaseTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_illegalfrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.frozenTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.releaseTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_policefrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.frozenTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_toondemand':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.effTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.toonneed_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.expTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_using':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.effTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_gracing':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.arrears_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.expTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.graceTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_frozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.frozenTime)}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time} `,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.releaseTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_illegalfrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.frozenTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_illegalfrozen_arrear':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: ` ${this.formatLocaleDateTime(this.countDownTips.frozenTime)} `\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.releaseTime)}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_policefrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.formatLocaleDateTime(this.countDownTips.frozenTime)}`\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 日期时间戳转换成带时区的\r\n     */\r\n    private formatLocaleDateTime(req: string): string {\r\n        return CfUtil.formatLocaleDateTime(req);\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpCountdownComponent } from './TpCountdownComponent';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiTipModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports:[\r\n    CommonModule,\r\n    TiTipModule\r\n  ],\r\n  exports: [TpCountdownComponent],\r\n  declarations: [TpCountdownComponent]\r\n})\r\n\r\nexport class TpCountdownModule {}\r\nexport { TpCountdownComponent, TpCountDownCode, TpCountDownInfos, TpCountDownTips} from './TpCountdownComponent';\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiBaseComponent, TiLocale } from '@cloud/tiny3';\r\n\r\nimport { TpDatePipe } from '../../pipes/locale/TpDatePipe';\r\n\r\nimport { TpCountCode, TpCountDownStateLevel, TpCountInfos, TpCountTips } from './TpCountComponent';\r\n\r\n/**\r\n * 表格倒计时组件\r\n *\r\n * <example-url>../tinyplus3demo/#/count/count-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-count-time',\r\n    templateUrl: './count-time.html',\r\n    styleUrls: ['./count-time.less'],\r\n    host: {\r\n        // 标记 tp-count-time 是单独使用还是在tp-count中和tp-count-state一起使用\r\n        '[class.tp-count-time-only]': 'pattern === \"only\" '\r\n    }\r\n})\r\nexport class TpCountTimeComponent extends TiBaseComponent {\r\n    /**\r\n     * 倒计时类别，即倒计时countDownCode字段\r\n     */\r\n    @Input() countDownCode: TpCountCode;\r\n    /**\r\n     * 倒计时数据, 和2.21云服务倒计时信息查询接口返回的countDownInfos一致\r\n     */\r\n    @Input() countDownInfos: TpCountInfos;\r\n    /**\r\n     * tip提示数据，和2.21云服务倒计时信息查询接口返回的TpCountDownTips一致\r\n     */\r\n    @Input() countDownTips: TpCountTips;\r\n    /**\r\n     * @ignore\r\n     * 内部使用，only 单独使用，combine 和tp-count-state 一起使用\r\n     */\r\n    @Input() pattern: 'only' | 'combine' = 'only';\r\n\r\n    /**\r\n     * @ignore\r\n     * 倒计时最后显示的文本\r\n     */\r\n    public countdownText: string = '';\r\n    /**\r\n     * @ignore\r\n     * 文字提示的颜色等级\r\n     */\r\n    public stateLevel: TpCountDownStateLevel;\r\n    /**\r\n     * @ignore\r\n     * tip 的内容\r\n     */\r\n    public tipContext: any = [];\r\n    /**\r\n     * @ignore\r\n     * tip 的最大宽度\r\n     */\r\n    public tipMaxWidth: string = '500px';\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 生成倒计时内容\r\n        this.generateContent();\r\n        // 生成tip内容\r\n        if (this.showTip()) {\r\n            this.generateTipContent();\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        // 倒计时内容跟countDownCode和countDownInfos有关\r\n        // 倒计时的颜色提示类别跟countDownCode和countDownInfos有关\r\n        // 倒计时tip提示内容跟 countDownCode和countDownTips有关\r\n        if (changes['countDownCode'] && !changes['countDownCode'].firstChange) {\r\n            this.generateContent();\r\n            this.updateStateLevel();\r\n            this.generateTipContent();\r\n\r\n            return;\r\n        }\r\n        if (changes['countDownInfos'] && !changes['countDownInfos'].firstChange) {\r\n            this.generateContent();\r\n            this.updateStateLevel();\r\n        }\r\n        if (changes['countDownTips'] && !changes['countDownTips'].firstChange) {\r\n            this.generateTipContent();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 是否需要tip\r\n     */\r\n    public showTip(): boolean {\r\n        // tp-count-time 单独使用且资源倒计时不是按需使用状态\r\n        return this.countDownTips && this.countDownCode !== 'hws_countdown_ondemand_using';\r\n    }\r\n\r\n    /**\r\n     * 生成倒计时内容\r\n     */\r\n    private generateContent(): void {\r\n        // 时间间隔\r\n        let timespan: string = '';\r\n        // 时间信息\r\n        let hourInfo: string = '';\r\n        let minuteInfo: string = '';\r\n        //  根据返回时间拼接出时间间隔  {d} 天数 {h} 小时数 {m} 分钟数\r\n        if (this.countDownInfos) {\r\n            if (this.countDownInfos.nextOperationRemainingDay) {\r\n                timespan = this.countDownInfos.nextOperationRemainingDay > 1 ?\r\n                    TiLocale.getLocaleWords().tpCountdown.day\r\n                        .replace(/{d}/, this.countDownInfos.nextOperationRemainingDay) :\r\n                    TiLocale.getLocaleWords().tpCountdown.day\r\n                        .replace(/s/, '')\r\n                        .replace(/{d}/, this.countDownInfos.nextOperationRemainingDay);\r\n            } else if (this.countDownInfos.nextOperationRemainingHour) {\r\n                hourInfo = this.countDownInfos.nextOperationRemainingHour > 1 ?\r\n                    TiLocale.getLocaleWords().tpCountdown.hour\r\n                        .replace(/{h}/, this.countDownInfos.nextOperationRemainingHour) :\r\n                    TiLocale.getLocaleWords().tpCountdown.hour\r\n                        .replace(/s/, '')\r\n                        .replace(/{h}/, this.countDownInfos.nextOperationRemainingHour);\r\n\r\n                minuteInfo = this.countDownInfos.nextOperationRemainingMinute > 1 ?\r\n                    TiLocale.getLocaleWords().tpCountdown.minute\r\n                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute) :\r\n                    TiLocale.getLocaleWords().tpCountdown.minute\r\n                        .replace(/s/, '')\r\n                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute);\r\n\r\n                timespan = `${hourInfo} ${minuteInfo}`;\r\n            } else if (this.countDownInfos.nextOperationRemainingMinute) {\r\n                timespan = this.countDownInfos.nextOperationRemainingMinute > 1 ?\r\n                    TiLocale.getLocaleWords().tpCountdown.minute\r\n                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute) :\r\n                    TiLocale.getLocaleWords().tpCountdown.minute\r\n                        .replace(/s/, '')\r\n                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute);\r\n            } else if (this.countDownInfos.nextOperationRemainingSecond) {\r\n                timespan = TiLocale.getLocaleWords().tpCountdown.second;\r\n            }\r\n        }\r\n\r\n        // 根据状态码，得到倒计时整体字符串。 {TS} 时间间隔\r\n        const statusKey: string = this.countDownCode ? this.countDownCode.slice(14) : '';\r\n        if (TiLocale.getLocaleWords().tpCount[statusKey]) {\r\n            this.countdownText = TiLocale.getLocaleWords().tpCount[statusKey]\r\n                .replace(/{TS}/, timespan);\r\n        }\r\n\r\n        // 如果是按需正常使用，没有倒计时，只提示创建时间，单独处理 {ymdhms} 是 格式为yyyy/mm/dd  hh:mm:ss 日期时间\r\n        if (this.countDownCode === 'hws_countdown_ondemand_using') {\r\n            // tslint:disable-next-line: max-line-length\r\n            this.countdownText = this.countdownText.replace(/{ymdhms}/, new TpDatePipe().transform(this.countDownInfos.createTime, 'dateTimeZone'));\r\n        }\r\n\r\n        // 更新样式提示\r\n        this.updateStateLevel();\r\n    }\r\n    private updateStateLevel(): void {\r\n        // 添加样式类 宽限期，冻结期，违规冻结 提示红色，正常使用，如果小于七天，提示黄色\r\n        if (this.countDownInfos.status > 2) {\r\n            this.stateLevel = 'alarm';\r\n        } else if ((this.countDownCode === 'hws_countdown_period_using' || this.countDownCode === 'hws_countdown_period_toondemand')\r\n            && this.isDayLess7()) {\r\n            this.stateLevel = 'warn';\r\n        }\r\n    }\r\n\r\n    // 倒计时是否小于七天\r\n    private isDayLess7(): boolean {\r\n        return !(this.countDownInfos.nextOperationRemainingDay && this.countDownInfos.nextOperationRemainingDay > 7);\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 生成tips 内容\r\n     */\r\n    public generateTipContent(): void {\r\n        // 当tp-count-time 作为 tp-count 子元素时不传countDownTips\r\n        if (!this.countDownTips) {\r\n            return;\r\n        }\r\n        this.tipContext = [];\r\n        switch (this.countDownCode) {\r\n            case 'hws_countdown_period_using':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,\r\n                    time: `${this.countDownTips.effTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: ` ${TiLocale.getLocaleWords().tpCountdown.expire_time} `,\r\n                    time: `${this.countDownTips.expTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_gracing':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.expire_time}`,\r\n                    time: `${this.countDownTips.expTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,\r\n                    time: `${this.countDownTips.graceTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_frozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.countDownTips.frozenTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,\r\n                    time: `${this.countDownTips.releaseTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_illegalfrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,\r\n                    time: `${this.countDownTips.frozenTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,\r\n                    time: `${this.countDownTips.releaseTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_policefrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,\r\n                    time: `${this.countDownTips.frozenTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_period_toondemand':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,\r\n                    time: `${this.countDownTips.effTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.toonneed_time}`,\r\n                    time: `${this.countDownTips.expTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_using':\r\n                // 按需正在使用不添加tip\r\n                break;\r\n            case 'hws_countdown_ondemand_gracing':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.arrears_time}`,\r\n                    time: `${this.countDownTips.expTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.countDownTips.graceTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_frozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.countDownTips.frozenTime}`\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time} `,\r\n                    time: `${this.countDownTips.releaseTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_illegalfrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.countDownTips.frozenTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_illegalfrozen_arrear':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: ` ${this.countDownTips.frozenTime} `\r\n                });\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,\r\n                    time: `${this.countDownTips.releaseTime}`\r\n                });\r\n                break;\r\n            case 'hws_countdown_ondemand_policefrozen':\r\n                this.tipContext.push({\r\n                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,\r\n                    time: `${this.countDownTips.frozenTime}`\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n","// tslint:disable-next-line: no-implicit-dependencies\r\nimport { Component, ElementRef, Input, Renderer2, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiLocale, TiTipRef, TiTipService, TiTipShowInfo } from '@cloud/tiny3';\r\n\r\nimport { TpCountTimeComponent } from './TpCountTimeComponent';\r\n\r\n/**\r\n * 倒计时类别, 详情参考“云运营公共接口说明”文档，2.21云服务倒计时信息查询\r\n */\r\nexport type TpCountCode = 'hws_countdown_period_using'\r\n    | 'hws_countdown_period_gracing'\r\n    | 'hws_countdown_period_frozen'\r\n    | 'hws_countdown_period_illegalfrozen'\r\n    | 'hws_countdown_period_policefrozen'\r\n    | 'hws_countdown_period_toondemand'\r\n    | 'hws_countdown_ondemand_using'\r\n    | 'hws_countdown_ondemand_gracing'\r\n    | 'hws_countdown_ondemand_frozen'\r\n    | 'hws_countdown_ondemand_illegalfrozen'\r\n    | 'hws_countdown_ondemand_illegalfrozen_arrear'\r\n    | 'hws_countdown_ondemand_policefrozen';\r\n\r\n/**\r\n * @ignore\r\n * 倒计时不同阶段对应的颜色提示类别\r\n */\r\nexport type TpCountDownStateLevel = 'normal' | 'warn' | 'alarm';\r\n\r\n/**\r\n * 倒计时信息，即countDownInfos对象类型,\r\n * 接口是根据\"云运营公共接口说明\"文档 2.21云服务倒计时信息查询接口返回数据设置，详情参考接口\r\n */\r\nexport interface TpCountInfos {\r\n    /**\r\n     * 资源的当前的状态,1：未生效（开通中，资源还未使用）2：生效中（未到期，可正常使用资源）\r\n     */\r\n    status: number;\r\n    /**\r\n     * 当前状态到下一步操作执行，还剩下的天数（XX>=24小时）\r\n     */\r\n    nextOperationRemainingDay?: number;\r\n    /**\r\n     * 当前状态到下一步操作执行，还剩下的小时数（24小时>XX>=1小时）\r\n     */\r\n    nextOperationRemainingHour?: number;\r\n    /**\r\n     * 当前状态到下一步操作执行，还剩下的分钟数（60分钟>XX>=1分钟）\r\n     */\r\n    nextOperationRemainingMinute?: number;\r\n    /**\r\n     * 当前状态到下一步操作执行，还剩下的秒数（60秒>XX）\r\n     *\r\n     */\r\n    nextOperationRemainingSecond?: number;\r\n    /**\r\n     * 资源创建时间\r\n     */\r\n    createTime?: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 倒计时信息提示信息，接口是根据\"云运营公共接口说明\"文档 2.21云服务倒计时信息查询接口返回数据设置，详情参考接口\r\n */\r\nexport interface TpCountTips {\r\n    /**\r\n     * 资源生效时间（即资源创建时间）\r\n     */\r\n    effTime?: string;\r\n    /**\r\n     * 资源到期时间，如果已经欠费，则为资源欠费时间。\r\n     */\r\n    expTime?: string;\r\n    /**\r\n     * 宽限期结束时间\r\n     */\r\n    graceTime?: string;\r\n    /**\r\n     * 资源释放时间\r\n     */\r\n    releaseTime?: string;\r\n    /**\r\n     * 资源冻结时间\r\n     */\r\n    frozenTime?: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n *  计费模式\r\n *  period-包周期，ondemand-按需\r\n */\r\nexport type TpCountChargingMode = 'period' | 'ondemand';\r\n\r\n/**\r\n * @ignore\r\n * 1行tip内容，内部使用\r\n */\r\nexport interface TpCountTipItem {\r\n    // 标题\r\n    title: string;\r\n    // 日期时间字符串\r\n    time: string;\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 表格倒计时组件\r\n *\r\n * tp-countdown 组件升级版，countdown组件的接口和功能保留，添加计费模式和资源状态\r\n *\r\n * 10.0.1 新增\r\n *\r\n * <example-url>../tinyplus3demo/#/count/count-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-count',\r\n    templateUrl: './count.html',\r\n    styleUrls: ['./count.less']\r\n})\r\nexport class TpCountComponent extends TpCountTimeComponent {\r\n    /**\r\n     * 计费模式\r\n     */\r\n    @Input() type: TpCountChargingMode = 'period';\r\n\r\n    /**\r\n     * @ignore\r\n     * 资源状态和倒计时的父容器，为添加tip\r\n     */\r\n    @ViewChild('stateTime', { static: false }) stateTimeRef: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * 倒计时组件\r\n     */\r\n    @ViewChild(TpCountTimeComponent) countTimeCom: TpCountTimeComponent;\r\n    /**\r\n     * @ignore\r\n     * tip内容模板\r\n     */\r\n    @ViewChild('tipContent') tipContentTemplate: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     * tip实例\r\n     */\r\n    private tipInstance: TiTipRef;\r\n    /**\r\n     * @ignore\r\n     * tip 的内容\r\n     */\r\n    public tipContext: Array<TpCountTipItem> = [];\r\n\r\n    constructor(private element: ElementRef, private renderer2: Renderer2, private tipService: TiTipService) {\r\n        super(element, renderer2);\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        super.ngAfterViewInit();\r\n        if (this.showTip()) {\r\n            this.generateTipContent();\r\n            this.addTip();\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        // 倒计时tip提示内容跟 countDownCode和countDownTips有关\r\n        // 此处是资源状态和倒计时整体添加tip\r\n        if ((changes['countDownCode'] && !changes['countDownCode'].firstChange) ||\r\n            (changes['countDownTips'] && !changes['countDownTips'].firstChange)) {\r\n            // 按需正在使用阶段没有tip实例，处理按需正在使用变化成按需宽限期场景报错\r\n            if (this.tipInstance) {\r\n                this.tipInstance.destroy();\r\n            }\r\n            if (this.showTip()) {\r\n                // 按需正在使用阶段到按需宽限期，模板的ng-if 条件改变导致stateTimeRef是否存在也改变\r\n                // stateTimeRef无法立刻获取到\r\n                setTimeout((): void => {\r\n                    this.addTip();\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     *\r\n     */\r\n    public showState(): boolean {\r\n        return !(this.countDownCode === 'hws_countdown_period_using' ||\r\n            this.countDownCode === 'hws_countdown_period_toondemand' ||\r\n            this.countDownCode === 'hws_countdown_ondemand_using');\r\n    }\r\n\r\n    private addTip(): void {\r\n        //  按需正在使用时因为显示内容和tip内容相同，所有不需要tip\r\n        if (Array.isArray(this.tipContext) && this.tipContext.length > 0\r\n            && this.countDownCode !== 'hws_countdown_ondemand_using' && this.stateTimeRef) {\r\n            this.tipInstance = this.tipService.create(this.stateTimeRef.nativeElement, {\r\n                trigger: 'mouse',\r\n                maxWidth: this.tipMaxWidth,\r\n                showFn: (): TiTipShowInfo => {\r\n                    return {\r\n                        content: this.tipContentTemplate\r\n                    };\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","// tslint:disable-next-line: no-implicit-dependencies\r\nimport { Component, Input, SimpleChanges } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiBaseComponent, TiLocale } from '@cloud/tiny3';\r\n\r\nimport { TpCountCode, TpCountDownStateLevel, TpCountInfos } from './TpCountComponent';\r\n\r\n/**\r\n * 表格倒计时组件\r\n *\r\n * <example-url>../tinyplus3demo/#/count/count-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-count-state',\r\n    template: `\r\n         {{ state }}{{ pattern === 'combine'? spliter:'' }}\r\n      `,\r\n    host: {\r\n        '[class.tp-count-alarm]': 'stateLevel === \"alarm\"',\r\n        '[class.tp-count-warn]': 'stateLevel === \"warn\"'\r\n    }\r\n})\r\nexport class TpCountStateComponent extends TiBaseComponent {\r\n    /**\r\n     * 倒计时类别，即倒计时countDownCode字段\r\n     */\r\n    @Input() countDownCode: TpCountCode;\r\n    /**\r\n     * 倒计时数据, 和2.21云服务倒计时信息查询接口返回的countDownInfos一致\r\n     */\r\n    @Input() countDownInfos: TpCountInfos;\r\n    /**\r\n     * @ignore\r\n     * 是单独使用，还是和tp-count-time一起使用，单独使用没有逗号，一起使用有逗号\r\n     */\r\n    @Input() pattern: 'only' | 'combine' = 'only';\r\n    /**\r\n     * @ignore\r\n     * 资源状态描述文字\r\n     */\r\n    public state: string = '';\r\n    /**\r\n     * @ignore\r\n     * 文字提示的颜色等级\r\n     */\r\n    public stateLevel: TpCountDownStateLevel;\r\n    /**\r\n     * @ignore\r\n     * 分割号，分隔号放在资源状态中，主要解决资源状态和倒计时一起使用，文字中间有空间。\r\n     */\r\n    public spliter: string = '';\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.updateState();\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        // 类型更新或倒计时更新，需要更新一下资源状态\r\n        if ((changes['countDownCode'] && !changes['countDownCode'].firstChange)\r\n            || (changes['countDownInfos'] && !changes['countDownInfos'].firstChange)) {\r\n            this.updateState();\r\n        }\r\n    }\r\n    // 更新状态文字和文字颜色类别\r\n    private updateState(): void {\r\n        switch (this.countDownCode) {\r\n            case 'hws_countdown_period_using':\r\n                this.state = TiLocale.getLocaleWords().tpCount.using;\r\n                // 包周期，资源倒计时小于7天时文字颜色区别显示\r\n                this.stateLevel = this.isDayLess7() ? 'warn' : 'normal';\r\n                break;\r\n            case 'hws_countdown_period_gracing':\r\n                this.state = TiLocale.getLocaleWords().tpCount.overdue;\r\n                // 此种倒计时需要分隔号\r\n                this.spliter = TiLocale.getLocaleWords().tpCountdown.spliter;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_period_frozen':\r\n                this.state = TiLocale.getLocaleWords().tpCount.frozened;\r\n                // 此种倒计时需要分隔号\r\n                this.spliter = TiLocale.getLocaleWords().tpCountdown.spliter;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_period_illegalfrozen':\r\n                this.state = TiLocale.getLocaleWords().tpCount.illegalFrozened;\r\n                // 此种倒计时需要分隔号\r\n                this.spliter = TiLocale.getLocaleWords().tpCountdown.spliter;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_period_policefrozen':\r\n                this.state = TiLocale.getLocaleWords().tpCount.illegalFrozened;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_period_toondemand':\r\n                this.state = TiLocale.getLocaleWords().tpCount.using;\r\n                this.stateLevel = 'warn';\r\n                break;\r\n            case 'hws_countdown_ondemand_using':\r\n                this.state = TiLocale.getLocaleWords().tpCount.using;\r\n                this.stateLevel = 'normal';\r\n                break;\r\n            case 'hws_countdown_ondemand_gracing':\r\n                this.state = TiLocale.getLocaleWords().tpCount.arrear;\r\n                this.stateLevel = 'alarm';\r\n                this.spliter = TiLocale.getLocaleWords().tpCountdown.spliter;\r\n                break;\r\n            case 'hws_countdown_ondemand_frozen':\r\n                this.state = TiLocale.getLocaleWords().tpCount.frozened;\r\n                // 此种倒计时需要分隔号\r\n                this.spliter = TiLocale.getLocaleWords().tpCountdown.spliter;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_ondemand_illegalfrozen':\r\n                this.state = TiLocale.getLocaleWords().tpCount.illegalFrozened;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_ondemand_illegalfrozen_arrear':\r\n                this.state = TiLocale.getLocaleWords().tpCount.illegalFrozened;\r\n                // 此种倒计时需要分隔号\r\n                this.spliter = TiLocale.getLocaleWords().tpCountdown.spliter;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            case 'hws_countdown_ondemand_policefrozen':\r\n                this.state = TiLocale.getLocaleWords().tpCount.illegalFrozened;\r\n                this.stateLevel = 'alarm';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 倒计时是否小于七天\r\n    private isDayLess7(): boolean {\r\n        return !(this.countDownInfos.nextOperationRemainingDay && this.countDownInfos.nextOperationRemainingDay > 7);\r\n    }\r\n}\r\n","// tslint:disable-next-line: no-implicit-dependencies\r\nimport { Component, Input, SimpleChanges } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiBaseComponent, TiLocale } from '@cloud/tiny3';\r\nimport { TpCountChargingMode } from './TpCountComponent';\r\n\r\n/**\r\n * 表格倒计时组件\r\n *\r\n * <example-url>../tinyplus3demo/#/count/count-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-count-pattern',\r\n    template: `\r\n      {{ text }}\r\n    `\r\n})\r\nexport class TpCountPatternComponent extends TiBaseComponent {\r\n    /**\r\n     * 计费模式\r\n     */\r\n    @Input() type: TpCountChargingMode = 'period';\r\n\r\n    /**\r\n     * @ignore\r\n     * 计费模式显示文本\r\n     */\r\n    public text: string;\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        this.updateText();\r\n    }\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n\r\n        if (changes['type'] && !changes['type'].firstChange) {\r\n            this.updateText();\r\n        }\r\n    }\r\n\r\n    private updateText(): void {\r\n        this.text = this.type === 'period' ?\r\n            TiLocale.getLocaleWords().tpCount.periodCharging : TiLocale.getLocaleWords().tpCount.ondemandCharging;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiLocaleModule, TiOverflowModule, TiTipModule } from '@cloud/tiny3';\r\n\r\nimport { TpLocaleModule } from '../../pipes/locale/TpLocaleModule';\r\n\r\nimport { TpCountComponent } from './TpCountComponent';\r\nimport { TpCountTimeComponent } from './TpCountTimeComponent';\r\nimport { TpCountStateComponent } from './TpCountStateComponent';\r\nimport { TpCountPatternComponent } from './TpCountPatternComponent';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        TiTipModule,\r\n        TpLocaleModule,\r\n        TiOverflowModule,\r\n        TiLocaleModule\r\n    ],\r\n    exports: [TpCountComponent, TpCountTimeComponent, TpCountStateComponent, TpCountPatternComponent],\r\n    declarations: [TpCountComponent, TpCountTimeComponent, TpCountStateComponent, TpCountPatternComponent]\r\n})\r\nexport class TpCountModule { }\r\nexport { TpCountComponent, TpCountCode, TpCountInfos, TpCountTips, TpCountChargingMode } from './TpCountComponent';\r\nexport { TpCountPatternComponent } from './TpCountPatternComponent';\r\nexport { TpCountStateComponent } from './TpCountStateComponent';\r\nexport { TpCountTimeComponent } from './TpCountTimeComponent';\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale } from '@cloud/tiny3';\r\nimport { TpCountDownCode, TpCountDownInfos } from '../countdown/TpCountdownModule';\r\n\r\n/**\r\n * 倒计时提示组件\r\n *\r\n * <example-url>../tinyplus3demo/#/countdownalert/countdownalert-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-countdownalert',\r\n    templateUrl: './countdownalert.html',\r\n    styleUrls: ['./countdownalert.less']\r\n})\r\n\r\nexport class TpCountdownalertComponent extends TiBaseComponent {\r\n    /**\r\n     * 告警类型， 默认为error\r\n     */\r\n    @Input() type: 'success' | 'error' | 'warn' | 'prompt' = 'error';\r\n    /**\r\n     * 是否显示左侧提示类型图标\r\n     */\r\n    @Input() typeIcon: boolean = true;\r\n    /**\r\n     * 是否显示关闭按钮\r\n     */\r\n    @Input() closeIcon: boolean = true;\r\n    /**\r\n     * 是否显示countdownalert\r\n     */\r\n    @Input() open: boolean = false;\r\n    /**\r\n     * 显示多长时间后消失，默认不延迟消失，只在点击关闭按钮时消失\r\n     */\r\n    @Input() dismissOnTimeout: number;\r\n    /**\r\n     * 是否触发下拉类组件消失的事件，适用于countdownalert的呈现状态影响页面下拉类组件位置的场景\r\n     */\r\n    @Input() triggerScroll: boolean = false;\r\n    /**\r\n     * 自定义告警内容\r\n     */\r\n    @Input() label: string;\r\n    /**\r\n     * 倒计时时间信息（未配置label时需要定义）\r\n     */\r\n    @Input() infos: TpCountDownInfos;\r\n    /**\r\n     * 资源状态（未配置label时需要定义）\r\n     */\r\n    @Input() status:  TpCountDownCode;\r\n    /**\r\n     * 资源名称\r\n     */\r\n    @Input() resource: string;\r\n    /**\r\n     * 链接地址\r\n     *\r\n     * 包周期为续费时（status = hws_countdown_period_gracing | hws_countdown_period_frozen），服务需要传自定义续费链接；\r\n     */\r\n    @Input() linkHref: string;\r\n    /**\r\n     * 自定义客服联系电话号码\r\n     * 10.1.2 版本新增\r\n     */\r\n    @Input() phoneNumber: string;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public innerLabel: string = '';\r\n    /**\r\n     * @ignore\r\n     */\r\n    public showBuyLink: boolean;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public linkText: string;\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        if (this.label) { return; }\r\n        // 处理label\r\n        const localeWords: any = TiLocale.getLocaleWords().tpCountdownalert;\r\n        let timespan: string = '';\r\n        if (this.infos) {\r\n            timespan = this.getTimespan(this.infos, localeWords);\r\n        }\r\n\r\n        if (this.status) {\r\n            const statusKey: string = this.status ? this.status.slice(14) : '';\r\n            if (Object.keys(localeWords).indexOf(statusKey) >= 0) {\r\n                this.innerLabel = localeWords[statusKey].replace(/{TS}/, String(timespan))\r\n                    .replace(/{RN}/, this.resource || '');\r\n            } else {\r\n                // 状态正常，不需要显示alert\r\n                this.open = false;\r\n            }\r\n        }\r\n\r\n        // 处理充值续费链接：包周期为续费，服务需要传自定义链接；按需为充值，充值为固定链接\r\n        if (this.status === 'hws_countdown_period_gracing' || this.status === 'hws_countdown_period_frozen') {\r\n            this.showBuyLink = true;\r\n            this.linkText = localeWords.renew;\r\n        } else if (this.status === 'hws_countdown_ondemand_gracing' || this.status === 'hws_countdown_ondemand_frozen') {\r\n            this.showBuyLink = true;\r\n            this.linkText = localeWords.recharge;\r\n            this.linkHref = 'https://account.huaweicloud.com/usercenter/#/userindex/balanceRecharge';\r\n        }\r\n\r\n        // 国际站 联系方式处理\r\n        const intlContactPath: string = '/ticket/?#/ticketindex/createfeedback'; // 国际站联系客服路径\r\n        const url: string = `${window.location.protocol}//${window.location.host}${intlContactPath}`;\r\n        this.innerLabel = this.innerLabel.replace(\r\n            /{contactLink}/,\r\n            `<a class=\"tp-countdownalert-link\" target=\"_blank\" rel=\"noopener noreferrer\"  href=\"${url}\">${localeWords.contact_customer_service}</a>`);\r\n\r\n        // 自定义客服联系电话号码处理\r\n        this.innerLabel = this.innerLabel.replace(/{phoneNumber}/, this.phoneNumber || localeWords.phoneNumber);\r\n    }\r\n\r\n    private getTimespan(infos: TpCountDownInfos, localeWords: any): string {\r\n        // tslint:disable-next-line: typedef\r\n        const { day, hour, minute, second } = localeWords;\r\n        if (infos.nextOperationRemainingDay) {\r\n            return day.replace(/{d}/, infos.nextOperationRemainingDay);\r\n        } else if (infos.nextOperationRemainingHour) {\r\n            return hour.replace(/{h}/, infos.nextOperationRemainingHour)\r\n                .replace(/{m}/, infos.nextOperationRemainingMinute);\r\n        } else if (infos.nextOperationRemainingMinute) {\r\n            return minute.replace(/{m}/, infos.nextOperationRemainingMinute);\r\n        } else if (infos.nextOperationRemainingSecond) {\r\n            return second;\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TiAlertModule, TiLocaleModule } from '@cloud/tiny3';\r\nimport { TpCountdownalertComponent } from './TpCountdownalertComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiAlertModule,\r\n    TiLocaleModule\r\n  ],\r\n  exports: [TpCountdownalertComponent],\r\n  declarations: [TpCountdownalertComponent]\r\n})\r\n\r\nexport class TpCountdownalertModule {}\r\nexport { TpCountdownalertComponent } from './TpCountdownalertComponent';\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { Params } from '@angular/router';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\nexport interface TpLink {\r\n    /* tslint:disable:no-redundant-jsdoc */\r\n    /**\r\n     * 设置链接文本内容;\r\n     */\r\n    label?: string;\r\n    /**\r\n     * 设置链接地址;\r\n     */\r\n    href?: string;\r\n    /**\r\n     * 设置链接打开方式\r\n     * @default '_self'\r\n     */\r\n    target?: '_self' | '_blank' | '_parent' | '_top';\r\n    /**\r\n     * 跳转路由\r\n     * 10.0.4 新增\r\n     */\r\n    routerLink?: string | Array<any>;\r\n    /**\r\n     * 跳转路由参数\r\n     * 10.1.0 新增\r\n     */\r\n    queryParams?: Params\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n *  crumb面包屑组件\r\n *\r\n * 面包屑组件除最后一级外，其余几级一般都为可跳转的链接，链接地址可以通过href属性设置;\r\n * 用户也可通过添加事件，实现业务逻辑。\r\n *\r\n * <example-url>../tinyplus3demo/#/crumb/crumb-all</example-url>\r\n */\r\n\r\n@Component({\r\n    selector: 'tp-crumb',\r\n    templateUrl: './crumb.html',\r\n    styleUrls: ['./crumb.less']\r\n})\r\n\r\nexport class TpCrumbComponent extends TiBaseComponent {\r\n    /**\r\n     * 组件数据\r\n     */\r\n    @Input() items: Array<TpLink>;\r\n    /**\r\n     * 用户设置href属性且不是最后一级时，触发事件\r\n     */\r\n    @Output() readonly select: EventEmitter<TpLink> = new EventEmitter<TpLink>();\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(item: TpLink): boolean {\r\n        this.select.emit(item);\r\n        // 不设置链接时，阻止跳转（a标签在click事件返回值为false时，会阻止默认行为）\r\n        if (!item.href) {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { TiOverflowModule } from '@cloud/tiny3';\r\n\r\nimport { TpCrumbComponent } from './TpCrumbComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    TiOverflowModule\r\n  ],\r\n  exports: [TpCrumbComponent],\r\n  declarations: [TpCrumbComponent]\r\n})\r\n\r\nexport class TpCrumbModule {}\r\nexport { TpCrumbComponent, TpLink } from './TpCrumbComponent';\r\n","import { Component, Input, TemplateRef } from '@angular/core';\r\nimport { TiBaseComponent, TiPositionType } from '@cloud/tiny3';\r\n\r\n/**\r\n * 描述及购买组件，用于解释说明服务，并提供了购买等操作按钮\r\n *\r\n * <example-url>../tinyplus3demo/#/descandbuy/descandbuy-all</example-url>\r\n */\r\n\r\nexport interface TpDescandbuyConfig {\r\n    /**\r\n     * helptip的配置对象\r\n     *\r\n     * 包含label、iconTip、iconTipPosition、iconTipMaxWidth（9.0.4 版本新增）属性，参考[TpHelptip组件]{@link ../components/TpHelptipComponent.html}\r\n     */\r\n    helptip: {\r\n        label?: string;\r\n        iconTip?: string | TemplateRef<any> | any;\r\n        iconTipPosition?: TiPositionType;\r\n        iconTipMaxWidth?: string;\r\n    };\r\n    buttons: Array<Button>;\r\n    /**\r\n     * 价格计算器的配置对象\r\n     *\r\n     * 包含values对象数组、url、detailHref三个属性换和beforeClick()方法，\r\n     * 参考[TpPricecalc组件]{@link ../components/TpPricecalcComponent.html}\r\n     */\r\n    pricecalc?: {\r\n        values?: Array<{\r\n            key: string;\r\n            value: string;\r\n        }>;\r\n        url?: string;\r\n        detailHref?: string;\r\n        beforeClick?(): void;\r\n    };\r\n}\r\n\r\nexport interface Button {\r\n    /**\r\n     * 按钮ID\r\n     */\r\n    id?: string;\r\n    /**\r\n     * 按钮文本\r\n     */\r\n    label: string;\r\n    /**\r\n     * 按钮颜色：默认按钮/强调色按钮/主题色按钮，参考[tiny3Button组件]{@link ../../tiny3doc/components/TiButtonComponent.html}\r\n     */\r\n    color?: string;\r\n    /**\r\n     * tinyPlus图标名称\r\n     */\r\n    iconName?: string;\r\n    /**\r\n     * 按钮禁用 9.0.4版本新增\r\n     */\r\n    disabled?: boolean;\r\n    /**\r\n     * tip内容 9.0.4版本新增\r\n     */\r\n    tip?: string | TemplateRef<any>;\r\n    /**\r\n     * tip方位 9.0.4版本新增\r\n     */\r\n    tipPosition?: TiPositionType;\r\n    /**\r\n     * 按钮是否显示 10.1.3版本新增\r\n     */\r\n    show?: boolean;\r\n    /**\r\n     * 点击事件\r\n     */\r\n    click?(): void;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n@Component({\r\n    selector: 'tp-descandbuy',\r\n    templateUrl: './descandbuy.html',\r\n    styleUrls: ['./descandbuy.less']\r\n})\r\n\r\nexport class TpDescandbuyComponent extends TiBaseComponent {\r\n    /**\r\n     * 组件的配置对象，详情可以参考TpDescandbuyConfig接口\r\n     */\r\n    @Input() config: TpDescandbuyConfig;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onButtonClick(button: Button): void {\r\n        if (typeof button.click === 'function') {\r\n            button.click();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onPricecalcClick(): void {\r\n        if (typeof this.config.pricecalc.beforeClick === 'function') {\r\n            this.config.pricecalc.beforeClick();\r\n        }\r\n    }\r\n}\r\n","import { Component, Input, TemplateRef } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * 帮助提示组件\r\n *\r\n * 由被提示的文本和一个问号图标构成，鼠标悬浮在图标上可以看到对文本内容的解释说明\r\n *\r\n * <example-url>../tinyplus3demo/#/helptip/helptip-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-helptip',\r\n    templateUrl: './helptip.html',\r\n    styleUrls: ['./helptip.less'],\r\n    // host: {\r\n    //     '[class.tp-helptip-wrapper]': 'true'\r\n    // }\r\n})\r\n\r\nexport class TpHelptipComponent extends TiBaseComponent {\r\n    /**\r\n     * 待解释的的文本内容\r\n     */\r\n    @Input() label: string;\r\n    /**\r\n     * 提示说明文本，可为字符串/ng-template/component\r\n     */\r\n    @Input() iconTip: string | TemplateRef<any> | any;\r\n    /**\r\n     * 提示说明方向\r\n     */\r\n    @Input() iconTipPosition: string;\r\n    /**\r\n     * 提示说明的最大宽度\r\n     *\r\n     * 9.0.4 版本新增\r\n     *\r\n     * @default '276px'\r\n     */\r\n    @Input() iconTipMaxWidth: string;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpHelptipComponent } from './TpHelptipComponent';\r\n\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TiTipModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiTipModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpHelptipComponent],\r\n  declarations: [TpHelptipComponent]\r\n})\r\n\r\nexport class TpHelptipModule {}\r\nexport { TpHelptipComponent } from './TpHelptipComponent';\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpDescandbuyComponent } from './TpDescandbuyComponent';\r\nimport { TpHelptipModule } from '../helptip/TpHelptipModule';\r\nimport { TpPricecalcModule } from '../pricecalc/TpPricecalcModule';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TiButtonModule, TiTipModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiButtonModule,\r\n    TiTipModule,\r\n    TpIconModule,\r\n    TpHelptipModule,\r\n    TpPricecalcModule\r\n  ],\r\n  exports: [TpDescandbuyComponent],\r\n  declarations: [TpDescandbuyComponent]\r\n})\r\n\r\nexport class TpDescandbuyModule {}\r\nexport { TpDescandbuyComponent, TpDescandbuyConfig } from './TpDescandbuyComponent';\r\n","import { Component, ElementRef, EventEmitter, Input, Output, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent, Util, TiKeymap } from '@cloud/tiny3';\r\n/**\r\n * 右侧半屏弹窗组件\r\n *\r\n * 半屏弹窗分为两种，1.不带灰色背景层，点击弹窗外会关闭弹窗；2.带灰色背景层，点击弹窗外不能关闭弹窗。\r\n *\r\n * 两种弹窗都可以通过点击右上角“X”图标或者hide()方法关闭弹窗\r\n *\r\n * 注：第一类弹窗，点击弹窗外关闭的原理是在document上注册点击事件触发`TpHalfmodalComponent.hide()`，如果不想关闭弹窗可以阻止事件冒泡。\r\n *\r\n * <example-url>../tinyplus3demo/#/halfmodal/halfmodal-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-halfmodal',\r\n    templateUrl: './halfmodal.html',\r\n    styleUrls: ['./halfmodal.less'],\r\n    host: {\r\n        '[style.width]': 'width',\r\n        '[style.top]': 'clientRectTop',\r\n        '[style.right]': 'width ? \"-\" + width : \"-600px\"',\r\n        '[hidden]': '!isShow'\r\n    }\r\n})\r\n\r\nexport class TpHalfmodalComponent extends TiBaseComponent {\r\n    constructor(protected elementRef: ElementRef, protected renderer2: Renderer2) {\r\n        super(elementRef, renderer2);\r\n    }\r\n    /**\r\n     * 设置弹窗宽度\r\n     */\r\n    @Input() width: string;\r\n    /**\r\n     * 10.0.2新增\r\n     *\r\n     * 是否含有遮罩层，默认没有遮罩层；\r\n     */\r\n    @Input() backdrop: boolean = false;\r\n    /**\r\n     * 10.1.3新增\r\n     * 弹窗顶部距窗口顶部的距离\r\n     */\r\n    @Input() clientRectTop: string = '50px';\r\n    /**\r\n     * 10.1.3新增\r\n     * 是否显示关闭图标\r\n     */\r\n    @Input() closeIcon: boolean = true;\r\n    /**\r\n     * 10.1.3新增\r\n     * 关闭前的事件接口，如果监听beforeHide，则由业务关闭弹窗\r\n     */\r\n    @Output() readonly beforeHide: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     */\r\n    public isShow: boolean = false;\r\n\r\n    private isWantShow: boolean = false;\r\n\r\n    private unlistenClick: () => void;\r\n    // 背景遮罩层元素\r\n    private backdropEle: Element;\r\n    // 可聚焦元素\r\n    private focusableElementsString: string = `a[href], area[href], input:not([disabled]):not([tabindex=\\'-1\\']),\r\n    button:not([disabled]):not([tabindex=\\'-1\\']),select:not([disabled]):not([tabindex=\\'-1\\']),\r\n    textarea:not([disabled]):not([tabindex=\\'-1\\']),\r\n    iframe, object, embed, *[tabindex]:not([tabindex=\\'-1\\']), *[contenteditable=true]`;\r\n    private unListenDocumentKeydown: () => void;\r\n\r\n    /**\r\n     * @description 向上查找最近的指定祖先元素\r\n     * @param ele 子元素\r\n     * @param parentNode 祖先元素标签名\r\n     * @return 找到的祖先元素或者undefined\r\n     */\r\n    private static findClosest(ele: any, parentNodeName: string): Element | undefined {\r\n        if (ele.nodeName === 'HTML' || Util.isNull(ele.parentNode)) {\r\n            return undefined;\r\n        } else if (ele.parentNode.nodeName === parentNodeName) {\r\n            return ele.parentNode;\r\n        } else {\r\n            return this.findClosest(ele.parentNode, parentNodeName);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 弹窗显示事件\r\n     * @param element 通过事件触发halfModal显示的元素\r\n     *\r\n     * 10.1.3版本前，如果完全是通过JS调用打开半屏弹窗，则不需该参数，点击弹窗外任意位置会关闭弹窗\r\n     * 10.1.3及以上不需要参数\r\n     */\r\n    public show(element?: Element): void {\r\n        this.isShow = true;\r\n        this.isWantShow = true;\r\n        this.renderer2.addClass(this.nativeElement, 'tp-halfmodal-animation');\r\n        if (this.backdrop && !this.backdropEle) {\r\n            this.backdropEle = this.renderer2.createElement('div');\r\n            this.renderer2.addClass(this.backdropEle, 'tp-halfmodal-backdrop');\r\n            this.renderer2.appendChild(document.body, this.backdropEle);\r\n            // 防止多次打开半屏弹窗的时候，事件注册多次。\r\n            if (!this.unListenDocumentKeydown) {\r\n                this.unListenDocumentKeydown = this.renderer2.listen(document, 'keydown', (event: KeyboardEvent): void => {\r\n                    switch (event.which) {\r\n                        case TiKeymap.KEY_TAB: // tab键用于处理在提示框内循环获取焦点\r\n                            this.clickTab(event);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            if (!this.unlistenClick) {\r\n                this.unlistenClick = this.renderer2.listen(document, 'click', ($event: MouseEvent): void => {\r\n                    if (element && element.contains($event.target as Node) || this.isWantShow) {\r\n                        this.isWantShow = false;\r\n\r\n                        return;\r\n                    }\r\n                    if (TpHalfmodalComponent.findClosest($event.target, 'TI-MESSAGE') || TpHalfmodalComponent.findClosest($event.target, 'TI-MODAL-WRAPPER')) {\r\n                        return;\r\n                    }\r\n                    // 判断鼠标是否在弹窗范围内\r\n                    if (document.documentElement.clientWidth - $event.clientX > this.nativeElement.offsetWidth\r\n                        || document.documentElement.clientHeight - $event.clientY > this.nativeElement.offsetHeight) {\r\n                            this.wantHide();\r\n                        }\r\n                });\r\n            }\r\n        }\r\n    }\r\n     private clickTab(event: KeyboardEvent): void {\r\n        const introModal: HTMLElement = document.querySelector('.tp-halfmodal-animation');\r\n        const focusableElements: NodeList = introModal?.querySelectorAll(this.focusableElementsString);\r\n        Util.focusInDialogOnTabchange(event, focusableElements);\r\n     }\r\n    /**\r\n     * @ignore\r\n     * 即将关闭，如果监听beforeHide，则由业务关闭弹窗\r\n     */\r\n    public wantHide(): void {\r\n        if (this.beforeHide.observers.length > 0) {\r\n            this.beforeHide.emit(this);\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n    /**\r\n     * 10.0.2对外提供\r\n     *\r\n     * 弹窗隐藏事件\r\n     */\r\n    public hide(): void {\r\n        this.hideBackdrop();\r\n\r\n        this.isShow = false;\r\n        if (this.unlistenClick) {\r\n            this.unlistenClick();\r\n            this.unlistenClick = undefined;\r\n        }\r\n    }\r\n\r\n    private hideBackdrop(): void {\r\n        if (this.backdropEle) {\r\n            this.renderer2.removeChild(document.body, this.backdropEle);\r\n            this.backdropEle = undefined;\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.hideBackdrop();\r\n        if (this.unlistenClick) {\r\n            this.unlistenClick();\r\n            this.unlistenClick = undefined;\r\n        }\r\n        if (this.unListenDocumentKeydown) {\r\n            this.unListenDocumentKeydown();\r\n            this.unListenDocumentKeydown = undefined;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpHalfmodalComponent } from './TpHalfmodalComponent';\r\nimport { TiOutlineModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpIconModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpHalfmodalComponent],\r\n  declarations: [TpHalfmodalComponent]\r\n})\r\n\r\nexport class TpHalfmodalModule {}\r\nexport { TpHalfmodalComponent } from './TpHalfmodalComponent';\r\n","import { Component, ElementRef, EventEmitter, Input, Output, Renderer2 } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, ValidationErrors } from '@angular/forms';\r\nimport { TiBaseComponent, TiBrowser, TiLocale, TiValidationConfig, TiValidators, Util } from '@cloud/tiny3';\r\n\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\n\r\nimport { TpFeedbackOptions, TpQuestionOption } from './TpFeedbackInterface';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@Component({\r\n    selector: 'tp-feedback-content',\r\n    templateUrl: './feedback-content.html',\r\n    styleUrls: ['./feedback-content.less']\r\n})\r\n\r\nexport class TpFeedbackContentComponent extends TiBaseComponent {\r\n    // 类生产测试环境\r\n    private static devConfig: any = {\r\n        backend: 'https://console.ulanqab.huawei.com/nps-api',\r\n        surveyId: 'hwcloudbusurvey_key_fbd25bdbdb87'\r\n    };\r\n    // 现网环境\r\n    private static prodConfig: any = {\r\n        backend: 'https://voc.huaweicloud.com/survey-api',\r\n        surveyId: 'hwcloudbusurvey_key_fbd25bdbdb87'\r\n    };\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public static config: any = TpFeedbackContentComponent.devConfig;\r\n    /**\r\n     * 组件数据\r\n     */\r\n    @Input() options: TpFeedbackOptions;\r\n    /**\r\n     * 10.1.4新增\r\n     * 提交问卷成功后事件\r\n     */\r\n    @Output() readonly submit: EventEmitter<any> = new EventEmitter();\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public showheader: boolean = true;\r\n\r\n    /**\r\n     * @ignore\r\n     * 初始化用来存储答案的数组\r\n     */\r\n    public displayData: any;\r\n\r\n    /**\r\n     * 初始化用来存储答案的数组\r\n     */\r\n    private submitAnswer: Array<any> = [];\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public questions: any;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public validation: TiValidationConfig;\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public form: FormGroup;\r\n\r\n    private vaildrules: any = {};\r\n\r\n    constructor(protected hostRef: ElementRef, protected renderer2: Renderer2,\r\n                private fb: FormBuilder) {\r\n        super(hostRef, renderer2);\r\n        if (location.hostname.indexOf('huaweicloud.com') > -1) {\r\n            TpFeedbackContentComponent.config = TpFeedbackContentComponent.prodConfig;\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.showQuestions();\r\n    }\r\n\r\n    // 初始化展示题目\r\n    private showQuestions(): void {\r\n        const questionArray: Array<TpQuestionOption> = this.options.customQuestion;\r\n        this.options.customQuestion = Util.isArray(questionArray) ? questionArray : [];\r\n        // 问题的个数必须是3的倍数\r\n        if (questionArray && questionArray.length % 3 !== 0) {\r\n            console.log('自定义题目的格式不符合规范！'); // 供服务查看\r\n            this.showheader = false;\r\n\r\n            return;\r\n        }\r\n\r\n        // 获取Feedback词条\r\n        const tpFeedback: any = TiLocale.getLocaleWords().tpFeedback;\r\n\r\n        // 模板中最终渲染的数据\r\n        this.displayData = {\r\n            title: Util.formatEntry(tpFeedback.title, [this.options.serviceName]),\r\n            startDesc: tpFeedback.title_desc,\r\n            questions: [\r\n                {\r\n                    type: 'radio',\r\n                    show: true,\r\n                    require: true,\r\n                    title: [\r\n                        {\r\n                            title: Util.formatEntry(tpFeedback.question1_title, [this.options.serviceName]),\r\n                            type: 'main'\r\n                        },\r\n                        {\r\n                            title: tpFeedback.question1_title_desc\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    type: 'checkbox',\r\n                    show: false,\r\n                    require: true,\r\n                    title: [\r\n                        {\r\n                            title: tpFeedback.question1_title_unSati\r\n                        }\r\n                    ],\r\n                    hasOtherReason: true,\r\n                    options: [\r\n                        {\r\n                            value: '1',\r\n                            remark: tpFeedback.question_unSati_options1\r\n                        },\r\n                        {\r\n                            value: '2',\r\n                            remark: tpFeedback.question_unSati_options2\r\n                        },\r\n                        {\r\n                            value: '3',\r\n                            remark: tpFeedback.question_unSati_options3\r\n                        },\r\n                        {\r\n                            value: '4',\r\n                            remark: tpFeedback.question_unSati_options4\r\n                        },\r\n                        {\r\n                            value: '5',\r\n                            remark: tpFeedback.question_unSati_options5\r\n                        },\r\n                        {\r\n                            value: '6',\r\n                            remark: tpFeedback.question_unSati_options6\r\n                        },\r\n                        {\r\n                            value: '7',\r\n                            remark: tpFeedback.question_unSati_options7\r\n                        },\r\n                        {\r\n                            value: '8',\r\n                            remark: tpFeedback.question_unSati_options8\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    type: 'checkbox',\r\n                    show: false,\r\n                    require: true,\r\n                    title: [\r\n                        {\r\n                            title: tpFeedback.question1_title_sati\r\n                        }\r\n                    ],\r\n                    hasOtherReason: true,\r\n                    options: [\r\n                        {\r\n                            value: '1',\r\n                            remark: tpFeedback.question_sati_options1\r\n                        },\r\n                        {\r\n                            value: '2',\r\n                            remark: tpFeedback.question_sati_options2\r\n                        },\r\n                        {\r\n                            value: '3',\r\n                            remark: tpFeedback.question_sati_options3\r\n                        },\r\n                        {\r\n                            value: '4',\r\n                            remark: tpFeedback.question_sati_options4\r\n                        },\r\n                        {\r\n                            value: '5',\r\n                            remark: tpFeedback.question_sati_options5\r\n                        },\r\n                        {\r\n                            value: '6',\r\n                            remark: tpFeedback.question_sati_options6\r\n                        },\r\n                        {\r\n                            value: '7',\r\n                            remark: tpFeedback.question_sati_options7\r\n                        },\r\n                        {\r\n                            value: '8',\r\n                            remark: tpFeedback.question_sati_options8\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    type: 'essay',\r\n                    show: true,\r\n                    require: false,\r\n                    title: [\r\n                        {\r\n                            title: Util.formatEntry(TiLocale.getLocaleWords().tpFeedback.questionLast_title, [this.options.serviceName])\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        };\r\n\r\n        // 用户自定义题目\r\n        if (this.options.allQuestion) {\r\n            this.displayData = { ...this.options.allQuestion };\r\n        } else if (this.options.customQuestion.length > 0) {\r\n            const customQuestionCopy: any = { ...this.options.customQuestion };\r\n            const keys: any = Object.keys(customQuestionCopy);\r\n            for (const key of keys) {\r\n                this.displayData.questions.splice(this.displayData.questions.length - 1, 0, customQuestionCopy[key]); // 返回修改后数组\r\n            }\r\n        }\r\n        this.questions = this.displayData.questions;\r\n\r\n        for (let i: number = 0; i < this.questions.length; i++) {\r\n            this.questions[i].questionId = 'question_' + i;\r\n            if (this.questions[i].type === 'checkbox' && this.questions[i].hasOtherReason) {\r\n                this.questions[i].showOtherReason = false;\r\n\r\n                // 为每个otherreason创建表单control\r\n                this.vaildrules[`reasonInput_${i}`] = new FormControl('');\r\n                this.form = this.fb.group(this.vaildrules);\r\n\r\n            }\r\n\r\n            // 存储问题答案\r\n            this.submitAnswer[i] = {\r\n                questionId: this.questions[i].questionId, // 题目Id\r\n                subQuestionId: null, // Nps约束，矩阵题非null\r\n                subName: this.questions[i].title[0].title, // 只存放主标题\r\n                answer: [],\r\n                subRemark: [],\r\n                reason: '0'\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 满意度评分触发事件\r\n     * @param value 选择评分值\r\n     * @param index 题目下标值\r\n     */\r\n    onChangeScore(value: number, index: number): void {\r\n        // 单选的回调函数，每次选择都要清空数组\r\n        this.submitAnswer[index].answer = [];\r\n        this.submitAnswer[index].subRemark = [];\r\n\r\n        // 单选题answer和remark是保持一致的。\r\n        this.submitAnswer[index].answer.push(value);\r\n        this.submitAnswer[index].subRemark.push(value);\r\n\r\n        /**\r\n         * 约束:\r\n         * （1）题目格式：要求的一个母题需要带两个子题的格式\r\n         * （2）题目顺序：母题，第一个子题目（index+1），第二个子题(index+2)\r\n         */\r\n        if (index % 3 === 0) {\r\n            const firstIndex: number = index + 1;\r\n            const secondIndex: number = index + 2;\r\n            const oldFirstShow: boolean = this.questions[firstIndex].show;\r\n            const oldSecondShow: boolean = this.questions[secondIndex].show;\r\n\r\n            this.questions[firstIndex].show = value <= 7 ? true : false;\r\n            this.questions[secondIndex].show = value > 7 ? true : false;\r\n\r\n            /**\r\n             * 多选题目且其它原因输入框显示时，重置对应控件\r\n             * IE下，输入框（titext，titextarea）placeholder为中文时，初始化时表单控件会被标记为dirty，进行校验，\r\n             * 通过markAsPristine方法在输入框显示时，将该表单控件标记为 pristine（原始状态），需进行延迟处理\r\n             * 先在该组件进行处理，后续优化\r\n             */\r\n            if (this.questions[firstIndex].show !== oldFirstShow && this.questions[firstIndex].showOtherReason) {\r\n                if (TiBrowser.isIE()) {\r\n                    setTimeout(() => {\r\n                        this.form.controls[`reasonInput_${firstIndex}`].markAsPristine();\r\n                    }, 0);\r\n                }\r\n                this.form.setControl(`reasonInput_${firstIndex}`, new FormControl('', [TiValidators.required, TiValidators.maxLength(400)]));\r\n            }\r\n\r\n            if (this.questions[secondIndex].show !== oldSecondShow && this.questions[secondIndex].showOtherReason) {\r\n                if (TiBrowser.isIE()) {\r\n                    setTimeout(() => {\r\n                        this.form.controls[`reasonInput_${secondIndex}`].markAsPristine();\r\n                    }, 0);\r\n                }\r\n                this.form.setControl(`reasonInput_${secondIndex}`, new FormControl('', [TiValidators.required, TiValidators.maxLength(400)]));\r\n            }\r\n        }\r\n\r\n        this.questions[index].hasfinshed = true;\r\n\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 选中项超过三项时，其余项不可选中，并设置\"最多选择三项\"的样式。\r\n     */\r\n    onClickItem(event: Event): void {\r\n        // IE下选择选项后触发click事件，会冒泡到父级触发halfmodal点击事件，导致弹窗关闭，此处阻止事件冒泡，防止弹窗关闭\r\n        event.stopPropagation();\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 复选框选中事件，最多选择三项\r\n     * @param item 复选项数据\r\n     * @param question 题目数据\r\n     * @param index 复选项下标\r\n     */\r\n    onChangeCheckbox(item: any, question: any, index: number): void {\r\n        const questionIndex: number = this.getIndexByQuestionId(question.questionId);\r\n        const submitQuestion: any = this.submitAnswer[questionIndex];\r\n\r\n        // 失焦校验，输入不能为空且字符个数最多为400\r\n        this.validation = {\r\n            type: 'blur'\r\n        };\r\n\r\n        if (this.getCheckedNumber(question.options) > 3) {\r\n            question.checkLimit = true;\r\n            /**\r\n             * 此处使用延时处理\r\n             * 原因：在选择第四个选项后，更改checked属性值为false，会再次触发ngModalChange事件，导致再次选择时，该选项会被选中\r\n             */\r\n            setTimeout(() => {\r\n                item.checked = false;\r\n            }, 0);\r\n\r\n            return;\r\n        }\r\n\r\n        question.checkLimit = false;\r\n        // 约束：其它原因是多选项中的最后一项\r\n        if (question.hasOtherReason && index === question.options.length - 1) {\r\n            question.showOtherReason = item.checked;\r\n\r\n            // 其它输入框显示添加校验规则\r\n            if (question.showOtherReason) {\r\n                this.form.setControl(`reasonInput_${questionIndex}`, new FormControl('', [TiValidators.required, TiValidators.maxLength(400)]));\r\n                /**\r\n                 * IE下，输入框（titext，titextarea）placeholder为中文时，初始化时表单控件会被校验，\r\n                 * 通过markAsPristine方法在输入框显示时，将该表单控件标记为 pristine（原始状态），需进行延迟处理\r\n                 * 先在该组件进行处理，后续优化\r\n                 */\r\n                if (TiBrowser.isIE()) {\r\n                    setTimeout(() => {\r\n                        this.form.controls[`reasonInput_${questionIndex}`].markAsPristine();\r\n                    }, 0);\r\n                }\r\n            } else {\r\n                submitQuestion.reason = '0';\r\n            }\r\n        }\r\n\r\n        if (item.checked) {\r\n            this.questions[questionIndex].hasfinshed = true;\r\n            submitQuestion.answer.push(index);\r\n            submitQuestion.subRemark.push(item.remark);\r\n        } else {\r\n            submitQuestion.answer = submitQuestion.answer.filter((answer: any) => answer !== index);\r\n            submitQuestion.subRemark = submitQuestion.subRemark.filter((remark: any) => remark !== item.remark);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 复选项为其它原因，存储用户输入内容\r\n     * @param question 题目数据\r\n     */\r\n    updateOtherReason(question: any): void {\r\n        const questionIndex: number = this.getIndexByQuestionId(question.questionId);\r\n        this.submitAnswer[questionIndex].reason = this.form.controls[`reasonInput_${questionIndex}`].value;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 题目为essay时，存储用户输入文本域内容\r\n     * @param textareaValue 文本域输入内容\r\n     * @param index 题目下标\r\n     */\r\n    updateTextarea(textareaValue: number, index: number): void {\r\n        this.submitAnswer[index].answer[0] = textareaValue;\r\n        this.submitAnswer[index].subRemark[0] = 'null';\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 提交问卷\r\n     */\r\n    onSubmit(): void {\r\n        CfUtil.getUser().then((user: any) => {\r\n            const root: any = user;\r\n            const camel: any = CfUtil.getHttpService();\r\n            const msgService: any = CfUtil.getMessage();\r\n            if (!camel || !msgService || !root || !Util.isFunction(camel.post) || !Util.isFunction(msgService.showSuccess)) {\r\n                return;\r\n            }\r\n\r\n            // 题目未显示或其它原因不显示时，移除对应控件\r\n            for (let i: number = 0; i < this.questions.length; i++) {\r\n                if (!this.questions[i].show || !this.questions[i].showOtherReason) {\r\n                    this.form.removeControl(`reasonInput_${i}`);\r\n                }\r\n            }\r\n\r\n            const errors: ValidationErrors | null = TiValidators.check(this.form);\r\n\r\n            if (this.isRequiredComplete(this.questions, this.submitAnswer) && !errors) {\r\n\r\n                for (let i: number = 0; i < this.submitAnswer.length; i++) {\r\n                    this.submitAnswer[i].answer = this.submitAnswer[i].answer.join();\r\n                    this.submitAnswer[i].subRemark = this.submitAnswer[i].subRemark.join();\r\n                    this.submitAnswer[i].show = this.questions[i].show; // 过滤不显示的题目\r\n                }\r\n\r\n                // 过滤未显示题目及删除show属性，不需要发送给后台\r\n                this.submitAnswer = this.submitAnswer.filter((answer: any) => answer.show !== false);\r\n                for (const answer of this.submitAnswer) {\r\n                    delete answer.show;\r\n                }\r\n\r\n                const url: string = `${TpFeedbackContentComponent.config.backend}/api/save`;\r\n\r\n                // 发送请求，向后台发送问卷结果\r\n                const sendData: any = {\r\n                    data: {\r\n                        surveyId: TpFeedbackContentComponent.config.surveyId,\r\n                        serviceId: this.options.serviceId,\r\n                        w3account: root.domainId, // 用户ID\r\n                        answers: this.submitAnswer\r\n                    }\r\n                };\r\n\r\n                camel.post({\r\n                    url: {\r\n                        s: url\r\n                    },\r\n                    params: sendData\r\n                })\r\n                    .then(() => { }, () => { });\r\n\r\n                this.submit.emit();\r\n                msgService.showSuccess(TiLocale.getLocaleWords().tpFeedback.submit_success);\r\n            } else {\r\n                // 未完成则显示'选择不能为空'提示\r\n                this.checkQuestion(this.questions, this.submitAnswer);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 通过问题ID得到属于第几道题目\r\n    private getIndexByQuestionId(questionId: string): number {\r\n        for (let i: number = 0; i < this.submitAnswer.length; i++) {\r\n            if (this.submitAnswer[i].questionId === questionId) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // 得到复选框选中项的个数\r\n    private getCheckedNumber: (itemArray: any) => number = (itemArray: any) => {\r\n        let checkedNum: number = 0;\r\n        for (const item of itemArray) {\r\n            if (item.checked) {\r\n                checkedNum++;\r\n            }\r\n        }\r\n\r\n        return checkedNum;\r\n    }\r\n\r\n    // 检查每个题目的完成情况，返回一个数组\r\n    private checkQuestion: (questionArray: any, answerArray: any) => any = (questionArray: any, answerArray: any) => {\r\n        const resultArray: Array<boolean> = [];\r\n        for (let i: number = 0; i < questionArray.length - 1; i++) {\r\n            // 判断问题是否已正确填写. （1）必填 （2）show=true (3)有填写问卷\r\n            if (questionArray[i].show === true && questionArray[i].require === true && answerArray[i].answer.length === 0) {\r\n                questionArray[i].hasfinshed = false;\r\n                resultArray[i] = false;\r\n            }\r\n        }\r\n\r\n        return resultArray;\r\n\r\n    }\r\n\r\n    // 题目是否已完成\r\n    private isRequiredComplete(questionArray: any, answerArray: any): boolean {\r\n        const resultArray: any = this.checkQuestion(questionArray, answerArray);\r\n        for (const result of resultArray) {\r\n            if (result === false) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n","import { Component, Input, ViewChild } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\n\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\nimport { TpHalfmodalComponent } from '../halfmodal/TpHalfmodalModule';\r\n\r\nimport { TpFeedbackContentComponent } from './TpFeedbackContentComponent';\r\nimport { TpFeedbackOptions } from './TpFeedbackInterface';\r\nimport { TpUtil } from './../../utils/TpUtil';\r\n/**\r\n * 问卷调查组件 feedback\r\n *\r\n * 该组件支持服务去自定义题目，但是题目的类型要求是单选题目，并且会关联出两个多选题目。如果多选题目中有其它原因这个选项，要求这个选项放在最后。\r\n *\r\n * 使用该组件需注意以下几点：\r\n *\r\n * 1.该组件与console相关，需要使用到@cloud/cfdata;<br>\r\n * 2.options.allQuestion和options.customQuestion两个接口互斥。customQuestion是在默认的题目中去新增题目，allQuestion是由服务去定制所有的问卷内容（适用于CBC、客服、IAM等服务）；<br>\r\n * 3.本地调试确保端口是<b>8888</b>，目前NPS后台已经将http://localhost:8888 放开；<br>\r\n * 4.同一个用户数据提交之后，90（10.1.0 版本规范变更，由31变更为90）天内组件不显示。如果调测需要，可自行修改源码中阈值MILLISECONDS_PER_MONTH(含义：N毫秒之后可以显示)；<br>\r\n * 5.用户提交的数据下发到NPS后台，如需查看数据，请联系NPS后台同事孙正东 30009929\"；<br>\r\n * 6.华为云各服务可根据http://csbi.huawei.com/#/home 查找对应编号或英文简称设置<b>serviceId</b>；\r\n *\r\n * <example-url>../tinyplus3demo/#/feedback/feedback-all</example-url>\r\n */\r\n\r\n@Component({\r\n    selector: 'tp-feedback',\r\n    templateUrl: './feedback.html',\r\n    styleUrls: ['./feedback.less'],\r\n    host: {\r\n        '[hidden]': '!showFeedBack'\r\n    }\r\n})\r\n\r\nexport class TpFeedbackComponent extends TiBaseComponent {\r\n    /**\r\n     * 组件数据\r\n     */\r\n    @Input() options: TpFeedbackOptions;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('halfModal', { static: true }) halfmodalCom: TpHalfmodalComponent;\r\n\r\n    // 常量配置\r\n    private CONST_ANT: any = {\r\n        MILLISECONDS_PER_MONTH: 90 * 24 * 60 * 60 * 1000 // 90天对应的毫秒数\r\n    };\r\n\r\n    /**\r\n     * @ignore\r\n     * 是否显示问卷入口\r\n     */\r\n    public showFeedBack: boolean = false;\r\n\r\n    /**\r\n     * @ignore\r\n     * 是否显示弹出框\r\n     */\r\n    public openModalAlert: boolean = false;\r\n\r\n    /**\r\n     * @ignore\r\n     * 打开弹窗链接文本\r\n     */\r\n    public alertLinkText: string;\r\n    private useId: string = '';\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        CfUtil.getUser()\r\n            .then((user: any) => {\r\n                const root: any = user;\r\n                const camel: any = CfUtil.getHttpService();\r\n                const msgService: any = CfUtil.getMessage();\r\n\r\n                if (!camel || !Util.isFunction(camel.get) || !root || !msgService || !Util.isFunction(msgService.showSuccess)) {\r\n                    return;\r\n                }\r\n\r\n                this.alertLinkText = Util.formatEntry(\r\n                    TiLocale.getLocaleWords().tpFeedback.open_halfModal.click, [this.options.serviceName]);\r\n\r\n                const useId: string = root.domainId;\r\n                const url: string = `${TpFeedbackContentComponent.config.backend}/api/get/commit/date?surveyId={survey_id}&userId={user_id}&serviceId={service_id}`;\r\n                this.useId = useId;\r\n                if (this.useId) {\r\n                    camel.get({\r\n                        url: {\r\n                            s: url,\r\n                            o: {\r\n                                survey_id: TpFeedbackContentComponent.config.surveyId,\r\n                                user_id: this.useId, // 此处取值实际是domainId而不是userId\r\n                                service_id: this.options.serviceId\r\n                            }\r\n                        }\r\n                    })\r\n                        .then((response: any) => {\r\n                            // 后台返回的日期格式yyyy-MM-dd，在IE下Date.parse为NaN，需要转成yyyy/mm/dd\r\n                            const submitDate: number = Date.parse(response.data.replace(/-/g, '/'));\r\n\r\n                            // 如果是非法日期，或者没有提交为''，则重新赋值为0.否则会出现NaN，组件展示不出来。\r\n                            const milliSeconds: number = isNaN(submitDate) ? 0 : submitDate;\r\n\r\n                            // 查询上次提交的日期，如果小于90天则不显示。否则，看之前用户是否点击关闭按钮\r\n                            if (new Date().getTime() - milliSeconds > this.CONST_ANT.MILLISECONDS_PER_MONTH) {\r\n                                const tinyVocValue: string = Util.isUndefined(TpUtil.getCookie('tinyVoc')) ? '' : TpUtil.getCookie('tinyVoc');\r\n                                if (tinyVocValue.indexOf(`${this.options.serviceId}${this.useId}`) === -1) {\r\n                                    this.showFeedBack = true;\r\n                                    this.openModalAlert = true;\r\n                                }\r\n                            }\r\n                        }, () => {\r\n                            // 数据请求失败，不出现该组件。如果出现错误提示，会给用户带来困扰。\r\n                        });\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 关闭弹出框\r\n     */\r\n    closeModalAlert(): void {\r\n        const serverlist: string = Util.isUndefined(TpUtil.getCookie('tinyVoc')) ? '' : TpUtil.getCookie('tinyVoc');\r\n        TpUtil.setCookie('tinyVoc', `${serverlist}${this.options.serviceId}${this.useId},`);\r\n        this.showFeedBack = false;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 提交问卷\r\n     */\r\n    onSubmit(): void {\r\n        this.halfmodalCom.hide(); // 弹窗关闭\r\n        this.openModalAlert = false; // 入口关闭\r\n        this.showFeedBack = false;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport {\r\n  TiAlertModule,\r\n  TiButtonModule,\r\n  TiCheckboxModule,\r\n  TiIconModule,\r\n  TiLocaleModule,\r\n  TiOutlineModule,\r\n  TiTextareaModule,\r\n  TiTextModule,\r\n  TiValidationModule\r\n} from '@cloud/tiny3';\r\n\r\nimport { TpHalfmodalModule } from '../halfmodal/TpHalfmodalModule';\r\nimport { TpScoreModule } from '../score/TpScoreModule';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpFeedbackComponent } from './TpFeedbackComponent';\r\nimport { TpFeedbackContentComponent } from './TpFeedbackContentComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TiLocaleModule,\r\n    TiAlertModule,\r\n    TiButtonModule,\r\n    TiCheckboxModule,\r\n    TiIconModule,\r\n    TiTextareaModule,\r\n    TiTextModule,\r\n    TiValidationModule,\r\n    TiOutlineModule,\r\n    TpHalfmodalModule,\r\n    TpScoreModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpFeedbackComponent, TpFeedbackContentComponent],\r\n  declarations: [TpFeedbackComponent, TpFeedbackContentComponent ],\r\n})\r\n\r\nexport class TpFeedbackModule { }\r\nexport { TpFeedbackComponent } from './TpFeedbackComponent';\r\nexport { TpFeedbackContentComponent } from './TpFeedbackContentComponent';\r\nexport { TpFeedbackOptions, TpQuestionOption, TpAllquestionOption } from './TpFeedbackInterface';\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale } from '@cloud/tiny3';\r\n\r\n/**\r\n * 折叠文本\r\n *\r\n * 10.0.1 新增\r\n *\r\n * <example-url>../tinyplus3demo/#/foldtext/foldtext-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-foldtext',\r\n    templateUrl: './foldtext.html',\r\n    styleUrls: ['./foldtext.less']\r\n})\r\nexport class TpFoldtextComponent extends TiBaseComponent {\r\n    /**\r\n     * 文本内容\r\n     */\r\n    @Input() texts: Array<string> = [];\r\n    /**\r\n     * 折叠时显示几行\r\n     */\r\n    @Input() line: number = 2;\r\n    /**\r\n     * @ignore\r\n     * “查看全部” 词条\r\n     */\r\n    public showMore: string = TiLocale.getLocaleWords().tpFoldtext.showMore;\r\n    /**\r\n     * @ignore\r\n     * “收起” 词条\r\n     */\r\n    public showLess: string = TiLocale.getLocaleWords().tpFoldtext.showLess;\r\n\r\n    /**\r\n     * @ignore\r\n     * 显示文本内容的高度\r\n     */\r\n    public height: string;\r\n    /**\r\n     * @ignore\r\n     * 是否折叠\r\n     */\r\n    public folded: boolean = true;\r\n    // 表格中的默认font-size:12px, 默认line-height:1.5, 所以默认值取18px\r\n    private lineHeight: string = '18px';\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        super.ngAfterViewInit();\r\n\r\n        const CSSStyles: CSSStyleDeclaration = getComputedStyle(this.nativeElement);\r\n        const lineHeight: string = CSSStyles.getPropertyValue('line-height');\r\n\r\n        if (!Number.isNaN(parseFloat(lineHeight))) {\r\n            this.lineHeight = lineHeight;\r\n        }\r\n        // 修改了页面的数据height，消除ExpressionChangedAfterItHasBeenCheckedError报错使用setTimeout\r\n        setTimeout(() => {\r\n            this.height = (this.line * parseFloat(this.lineHeight)) + 'px';\r\n        }, 0);\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n\r\n        if (changes['texts'] && !changes['texts'].firstChange || changes['line'] && !changes['line'].firstChange) {\r\n            this.height = (this.line * parseFloat(this.lineHeight)) + 'px';\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 切换文本的点击事件\r\n     */\r\n    public onClick(event: Event): void {\r\n        this.folded = !this.folded;\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpFoldtextComponent } from './TpFoldtextComponent';\r\nimport { TiLocaleModule, TiOverflowModule, TiOutlineModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        TiOverflowModule,\r\n        TiLocaleModule,\r\n        TiOutlineModule\r\n    ],\r\n  exports: [TpFoldtextComponent],\r\n  declarations: [TpFoldtextComponent]\r\n})\r\n\r\nexport class TpFoldtextModule {}\r\nexport { TpFoldtextComponent } from './TpFoldtextComponent';\r\n","import {\r\n    Component, ElementRef, EventEmitter, Input, Output, Renderer2, TemplateRef, ViewChild\r\n    // tslint:disable-next-line: no-implicit-dependencies\r\n} from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiBaseComponent, TiTipRef, TiTipService, TiTipShowInfo, Util } from '@cloud/tiny3';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\n\r\n/**\r\n * @ignore\r\n * 每条受限信息\r\n */\r\nexport interface TpFrozenInfo {\r\n    /**\r\n     * 1 冻结，2 解冻结\r\n     */\r\n    status: number;\r\n    /**\r\n     * 1-表示公安冻结, 2表示未实名认证冻结,3-表示欠费冻结,4-合作伙伴冻结,5-账号销户前冻结,6-违规冻结\r\n     */\r\n    type: number;\r\n    /**\r\n     * json 字符串，可以解析为一个数组，包含两个冻结信息\r\n     * 详情参考 云运营公共接口文档 4.10 查询账号冻结场景\r\n     */\r\n    statusMsg: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n * 消息类型，'POP' 为提示块中的消息，'TIP' 为tip 提示消息\r\n */\r\ntype TpFrozenMessageType = 'POP' | 'TIP';\r\n\r\n/**\r\n * @ignore\r\n *\r\n */\r\nexport interface TpFrozenStatusMsg {\r\n    /**\r\n     * 消息类型，'POP' 为提示块中的消息，'TIP' 为tip 提示消息\r\n     */\r\n    msgType: TpFrozenMessageType;\r\n    /**\r\n     * 消息字符串\r\n     */\r\n    msgContent: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n\r\n}\r\n/**\r\n * @ignore\r\n * 4.10\t查询账号冻结场景 http 返回数据类型\r\n */\r\nexport interface TpFrozenResponse {\r\n    /**\r\n     * 接口返回值设置\r\n     */\r\n    frozenInfos: Array<TpFrozenInfo>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 账号冻结组件，组件查询CBC查询账号冻结场景接口，获取冻结信息，展示块提示，给目标元素添加tip提示。\r\n *\r\n * 9.0.3版本新增\r\n *\r\n * <example-url>../tinyplus3demo/#/frozen/frozen-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-frozen',\r\n    templateUrl: './frozen.html',\r\n    styleUrls: ['./frozen.less']\r\n})\r\nexport class TpFrozenComponent extends TiBaseComponent {\r\n    /**\r\n     * 添加tip的按钮元素\r\n     */\r\n    @Input() buttonElem: HTMLElement;\r\n    /**\r\n     * 获取数据成功事件\r\n     */\r\n    @Output() readonly response: EventEmitter<TpFrozenResponse | Error> = new EventEmitter<TpFrozenResponse | Error>();\r\n    /**\r\n     * @ignore\r\n     * tip 内容template\r\n     */\r\n    @ViewChild('tipContentTemplate', { static: false }) tipContentTemplate: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     * 内部alert 打开关闭\r\n     */\r\n    public open: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * alert 类型\r\n     */\r\n    public alertType: string = 'error';\r\n    /**\r\n     * @ignore\r\n     * 内部alert类型图标\r\n     */\r\n    public typeIcon: boolean = true;\r\n    /**\r\n     * @ignore\r\n     * 内部alert关闭图标\r\n     */\r\n    public closeIcon: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * alert 内容\r\n     */\r\n    public label: string = '';\r\n    /**\r\n     * @ignore\r\n     * tip 提示内容\r\n     */\r\n    public tipContent: string;\r\n    /**\r\n     * @ignore\r\n     * tip实例，销毁tip作用\r\n     */\r\n    private tipInstance: TiTipRef;\r\n    /**\r\n     * @ignore\r\n     * 从http返回数据中获取内容字符串\r\n     */\r\n    public static getMsgContent(data: TpFrozenResponse, msgType: TpFrozenMessageType): string {\r\n        if (data && Array.isArray(data.frozenInfos) && data.frozenInfos.length > 0) {\r\n            // 返回数据中 frozenInfos按优先级排序，所以取第一个\r\n            const frozenInfo: TpFrozenInfo = data.frozenInfos[0] as TpFrozenInfo;\r\n            // status 1 冻结 2 解冻\r\n            if (frozenInfo.status !== 1 || !Util.isString(frozenInfo.statusMsg)) {\r\n                return;\r\n            }\r\n            try {\r\n                frozenInfo.statusMsgs = JSON.parse(frozenInfo.statusMsg) as Array<TpFrozenStatusMsg>;\r\n            } catch (error) {\r\n                console.warn(error);\r\n\r\n                return;\r\n            }\r\n            const msg: TpFrozenStatusMsg = frozenInfo.statusMsgs.find((item: TpFrozenStatusMsg) => {\r\n                return item.msgType === msgType;\r\n            });\r\n            if (msg && Util.isString(msg.msgContent)) {\r\n                return msg.msgContent;\r\n            }\r\n        }\r\n    }\r\n\r\n    private static getUserInfo(config?: any): Promise<string> {\r\n        // config 本地测试使用，实际使用时请忽略此参数\r\n        if (config) {\r\n            return new Promise((resolve, reject) => {\r\n                resolve(config.domainId);\r\n            });\r\n        } else {\r\n            return CfUtil.getUser().then((user: any) => user.domainId);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 请求账号冻结场景接口\r\n     * config 本地测试使用，实际使用时请忽略此参数\r\n     */\r\n    public static queryFrozenInfo(config?: any): Promise<TpFrozenResponse> {\r\n        const queryFrozenInfoPromise: Promise<TpFrozenResponse> = TpFrozenComponent.getUserInfo(config)\r\n            .then((domainId: string) => {\r\n                const camel: any = config ? config.camel : CfUtil.getHttpService();\r\n                const customerId: string = domainId;\r\n                if (customerId && camel) {\r\n                    let url: string = '/rest/cbc/cbccustmgrservice/v1/customer/frozen';\r\n                    // AppWebPath 为console.home框架的设置,例如'/console'路径\r\n                    const appWebPath: string = CfUtil.getAppWebPath();\r\n                    if (Util.isString(appWebPath)) {\r\n                        url = appWebPath + url;\r\n                    }\r\n\r\n                    return camel.get({\r\n                        url: {\r\n                            s: url\r\n                        },\r\n                        params: { customerId }\r\n                    });\r\n                } else {\r\n                    return Promise.reject(new Error('frozen 依赖camel服务，使用前请先注入'));\r\n                }\r\n            });\r\n\r\n        return queryFrozenInfoPromise;\r\n    }\r\n\r\n    constructor(\r\n        protected hostRef: ElementRef,\r\n        protected renderer2: Renderer2,\r\n        private tipService: TiTipService\r\n    ) {\r\n        super(hostRef, renderer2);\r\n    }\r\n\r\n    /**\r\n     * 查询冻结\r\n     * config 为方便测试设置，实际使用时请忽略\r\n     */\r\n    public queryFrozen(config?: any): void {\r\n        TpFrozenComponent.queryFrozenInfo(config)\r\n            .then((response: any) => {\r\n                this.label = TpFrozenComponent.getMsgContent(response, 'POP');\r\n                // 是字符串显示\r\n                this.open = Util.isString(this.label);\r\n\r\n                // 给按钮添加tip\r\n                this.tipContent = TpFrozenComponent.getMsgContent(response, 'TIP');\r\n                if (Util.isString(this.tipContent) && this.buttonElem) {\r\n                    this.addTip(this.buttonElem);\r\n                }\r\n\r\n                if (!this.label && !this.tipContent) {\r\n                    this.unfrozen();\r\n                }\r\n                // 获取数据成功，触发response事件，将后台原始响应数据传递出去，方便使用者自行处理相关逻辑\r\n                this.response.emit(response);\r\n            }, (error: Error) => {\r\n                this.response.emit(error);\r\n                this.open = false;\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 隐藏提示块,销毁tip\r\n     */\r\n    private unfrozen(): void {\r\n        this.open = false;\r\n        // @ts-ignore:忽略destroy检查\r\n        if (this.tipInstance && Util.isFunction(this.tipInstance.destroy)) {\r\n            // @ts-ignore:外层有判断\r\n            this.tipInstance.destroy();\r\n            this.tipInstance = undefined;\r\n        }\r\n    }\r\n    /**\r\n     *  给目标元素添加tip\r\n     *  v9.0.4 版本添加\r\n     */\r\n    public addTip(...targets: Array<HTMLElement>): void {\r\n        if (this.tipContentTemplate && this.tipContent) {\r\n            targets.forEach((element: HTMLElement) => {\r\n                this.tipInstance = this.tipService.create(element, {\r\n                    trigger: 'mouse',\r\n                    showFn: (): TiTipShowInfo => {\r\n                        return {\r\n                            content: this.tipContentTemplate\r\n                        };\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n}\r\n","// tslint:disable-next-line: no-implicit-dependencies\r\nimport { NgModule } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { CommonModule } from '@angular/common';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiAlertModule, TiTipServiceModule } from '@cloud/tiny3';\r\n\r\nimport { TpFrozenComponent } from './TpFrozenComponent';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        TiAlertModule,\r\n        TiTipServiceModule\r\n    ],\r\n    exports: [TpFrozenComponent],\r\n    declarations: [TpFrozenComponent]\r\n})\r\nexport class TpFrozenModule { }\r\nexport { TpFrozenComponent, TpFrozenResponse } from './TpFrozenComponent';\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TiLocale, Util, TiBaseComponent } from '@cloud/tiny3';\r\nimport { TpFrozenComponent } from '../frozen/TpFrozenModule';\r\n/**\r\n * 冻结页面组件\r\n *\r\n * <example-url>../tinyplus3demo/#/frozenpage/frozenpage-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-frozenpage',\r\n    templateUrl: './frozenpage.html',\r\n    styleUrls: ['./frozenpage.less']\r\n})\r\n\r\nexport class TpFrozenpageComponent extends TiBaseComponent {\r\n    /**\r\n     * 服务名称\r\n     */\r\n    @Input() serviceName: string;\r\n    /**\r\n     * 触发返回服务列表事件\r\n     */\r\n    @Output() readonly backServiceList: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     */\r\n    public backService: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public content: string = '';\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.backService = Util.formatEntry(TiLocale.getLocaleWords().tpFrozenpage.back_service, [this.serviceName]);\r\n        TpFrozenComponent.queryFrozenInfo()\r\n            .then((response: any) => {\r\n                this.content = TpFrozenComponent.getMsgContent(response, 'POP');\r\n            }, () => { });\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(): void {\r\n        this.backServiceList.emit();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpFrozenpageComponent } from './TpFrozenpageComponent';\r\nimport { TiLocaleModule } from '@cloud/tiny3'\r\n\r\n@NgModule({\r\n  imports: [TiLocaleModule],\r\n  exports: [TpFrozenpageComponent],\r\n  declarations: [TpFrozenpageComponent]\r\n})\r\n\r\nexport class TpFrozenpageModule {}\r\nexport { TpFrozenpageComponent } from './TpFrozenpageComponent';\r\n","import { Component, ViewEncapsulation } from '@angular/core';\r\n\r\n/**\r\n *  @ignore\r\n *\r\n *  栅格样式组件\r\n *\r\n *  10.0.4及之前的版本grid.less是全局的。10.1.0版本为了实现样式按需加载，将grid.less封装在一个组件模块，所以该组件实际只提供了样式。\r\n *\r\n * 使用示例在 card 组件示例中\r\n *\r\n */\r\n@Component({\r\n    selector: '.tp-row', // 兼容延用栅格样式选择器\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./grid.less'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class TpGridComponent { }\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { TpGridComponent } from './TpGridComponent';\r\n\r\n/**\r\n *  @ignore\r\n *\r\n */\r\n@NgModule({\r\n  exports: [TpGridComponent],\r\n  declarations: [TpGridComponent]\r\n})\r\nexport class TpGridModule {}\r\nexport { TpGridComponent } from './TpGridComponent';\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * 情景引导组件\r\n *\r\n * <example-url>../tinyplus3demo/#/guides/guides-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-guides',\r\n    template: `<ng-content></ng-content>`,\r\n    styleUrls: ['./guides.less'],\r\n    // host: {\r\n    //     '[class.tp-guides-container]': 'true'\r\n    // }\r\n})\r\n\r\nexport class TpGuidesComponent extends TiBaseComponent {\r\n    /**\r\n     * 设置activeIndex属性，指定当前激活项，默认值为-1，表示无激活状态；激活状态从0开始，在设置值之前的guide为完成项，之后则为待办项。\r\n     */\r\n    @Input() activeIndex: number = -1;\r\n}\r\n","import { Component, ElementRef, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\nimport { TpGuidesComponent } from './TpGuidesComponent';\r\n/**\r\n * TiGuideComponent 是单个引导模块组件\r\n */\r\n@Component({\r\n    selector: 'tp-guide',\r\n    templateUrl: './guide.html',\r\n    styleUrls: ['./guide.less'],\r\n    host: {\r\n        '[class.tp-guide-card-container]': 'true',\r\n        '[class.tp-guide-card-undo]': 'isUndo(cardIndex)',\r\n        '[class.tp-guide-card-active]': 'isActive(cardIndex)',\r\n        '[class.tp-guide-card-done]': 'isDone(cardIndex)'\r\n    }\r\n})\r\n\r\nexport class TpGuideComponent extends TiBaseComponent {\r\n    constructor(protected elementRef: ElementRef, protected renderer2: Renderer2, private guidesComp: TpGuidesComponent) {\r\n        super(elementRef, renderer2);\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 下标值\r\n     */\r\n    public cardIndex: number = -1;\r\n    /**\r\n     * @ignore\r\n     * 是否含有body\r\n     */\r\n    public hasBody: boolean = false;\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterContentInit(): void {\r\n        super.ngAfterContentInit();\r\n        this.setCardIndex();\r\n        this.cardIndex = this.nativeElement.cardIndex;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 设置步骤标志\r\n     */\r\n    private setCardIndex(): void {\r\n        const cardNum: number = this.guidesComp.nativeElement.children.length;\r\n        for (let i: number = 0; i < cardNum; i++) {\r\n            this.guidesComp.nativeElement.children[i].cardIndex = i;\r\n            if (cardNum <= 2) {\r\n                this.renderer.setStyle(this.guidesComp.nativeElement.children[i], 'max-width', '445px');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 是否待办项\r\n     */\r\n    public isUndo(index: number): boolean {\r\n        return this.guidesComp.activeIndex >= 0 && index > this.guidesComp.activeIndex;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 是否当前项\r\n     */\r\n    public isActive(index: number): boolean {\r\n        return this.guidesComp.activeIndex >= 0 && index === this.guidesComp.activeIndex;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 是否已完成\r\n     */\r\n    public isDone(index: number): boolean {\r\n        return this.guidesComp.activeIndex >= 0 && index < this.guidesComp.activeIndex;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 是否含有间距\r\n     */\r\n    public hasSpace(index: number): boolean {\r\n        return this.isActive(index) && this.hasBody;\r\n    }\r\n}\r\n","import { Component } from '@angular/core';\r\n/**\r\n * TiGuideHeaderComponent 是单个引导模块组件的标题头\r\n */\r\n@Component({\r\n    selector: 'tp-guide-header',\r\n    template: `<span><ng-content></ng-content></span>`,\r\n    styleUrls: ['./guide-header.less'],\r\n})\r\n\r\nexport class TpGuideHeaderComponent {}\r\n","import { Component } from '@angular/core';\r\n/**\r\n * TiGuideContentComponent 是单个引导模块组件的content区域\r\n */\r\n@Component({\r\n    selector: 'tp-guide-content',\r\n    template: `<ng-content></ng-content>`,\r\n    styleUrls: ['./guide-content.less'],\r\n})\r\n\r\nexport class TpGuideContentComponent {}\r\n","import { Component, ElementRef, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent, TiRenderer } from '@cloud/tiny3';\r\n\r\nimport { TpGuideComponent } from './TpGuideComponent';\r\nimport { TpGuidesComponent } from './TpGuidesComponent';\r\n/**\r\n * TiGuideBodyComponent 是单个引导模块的body区域\r\n */\r\n@Component({\r\n    selector: 'tp-guide-body',\r\n    templateUrl: './guide-body.html',\r\n    styleUrls: ['./guide-body.less']\r\n})\r\n\r\nexport class TpGuideBodyComponent extends TiBaseComponent {\r\n    constructor(private elementRef: ElementRef, private renderer2: Renderer2, private tiRenderer: TiRenderer,\r\n                private guideComp: TpGuideComponent, private guidesComp: TpGuidesComponent) {\r\n        super(elementRef, renderer2);\r\n    }\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.guideComp.hasBody = true;\r\n        this.tiRenderer.insertAfter(this.nativeElement, this.guidesComp.nativeElement);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 展示激活项body\r\n     */\r\n    public showActiveBody(): boolean {\r\n        return this.guidesComp.activeIndex === this.guideComp.cardIndex;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpGuidesComponent } from './TpGuidesComponent';\r\nimport { TpGuideComponent } from './TpGuideComponent';\r\nimport { TpGuideHeaderComponent } from './TpGuideHeaderComponent';\r\nimport { TpGuideContentComponent } from './TpGuideContentComponent';\r\nimport { TpGuideBodyComponent } from './TpGuideBodyComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpGuidesComponent, TpGuideComponent, TpGuideHeaderComponent, TpGuideContentComponent, TpGuideBodyComponent],\r\n  declarations: [TpGuidesComponent, TpGuideComponent, TpGuideHeaderComponent, TpGuideContentComponent, TpGuideBodyComponent]\r\n})\r\n\r\nexport class TpGuidesModule {}\r\nexport { TpGuidesComponent } from './TpGuidesComponent';\r\nexport { TpGuideComponent } from './TpGuideComponent';\r\nexport { TpGuideHeaderComponent } from './TpGuideHeaderComponent';\r\nexport { TpGuideContentComponent } from './TpGuideContentComponent';\r\nexport { TpGuideBodyComponent } from './TpGuideBodyComponent';\r\n","import { Component } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * 小步骤引导组件\r\n *\r\n * <example-url>../tinyplus3demo/#/guidesteps/guidesteps-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-guidesteps',\r\n    template: `<ng-content></ng-content>`,\r\n    styleUrls: ['./guidesteps.less']\r\n})\r\n\r\nexport class TpGuidestepsComponent extends TiBaseComponent {}\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * TiGuidestepComponent 是单个小步骤模块组件\r\n */\r\n@Component({\r\n    selector: 'tp-guidestep',\r\n    template: `<ng-content></ng-content>`,\r\n    styleUrls: ['./guidestep.less']\r\n})\r\n\r\nexport class TpGuidestepComponent extends TiBaseComponent {\r\n    /**\r\n     * 当前步骤是否已经完成\r\n     */\r\n    @Input() isComplete: boolean = false;\r\n}","import { Component, ElementRef, Renderer2 } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\nimport { TpGuidestepComponent } from './TpGuidestepComponent';\r\n\r\n/**\r\n * TpGuidestepHeaderComponent 是单个小步骤模块组件的标题头\r\n */\r\n@Component({\r\n    selector: 'tp-guidestep-header',\r\n    template: `<span><ng-content></ng-content></span>`,\r\n    styleUrls: ['./guidestep-header.less'],\r\n    host: {\r\n        '[class.tp-guidestep-dot-complete]': 'guidestepComp.isComplete'\r\n    }\r\n})\r\n\r\nexport class TpGuidestepHeaderComponent extends TiBaseComponent {\r\n    constructor(private elementRef: ElementRef, private renderer2: Renderer2, public guidestepComp: TpGuidestepComponent) {\r\n        super(elementRef, renderer2);\r\n    }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * TpGuidestepContentComponent 是单个小步骤模块组件的content区域\r\n */\r\n@Component({\r\n    selector: 'tp-guidestep-content',\r\n    template: `<ng-content></ng-content>`,\r\n    styleUrls: ['./guidestep-content.less']\r\n})\r\n\r\nexport class TpGuidestepContentComponent extends TiBaseComponent {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpGuidestepsComponent } from './TpGuidestepsComponent';\r\nimport { TpGuidestepComponent } from './TpGuidestepComponent';\r\nimport { TpGuidestepHeaderComponent } from './TpGuidestepHeaderComponent';\r\nimport { TpGuidestepContentComponent } from './TpGuidestepContentComponent';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  exports: [TpGuidestepsComponent, TpGuidestepComponent, TpGuidestepHeaderComponent, TpGuidestepContentComponent],\r\n  declarations: [TpGuidestepsComponent, TpGuidestepComponent, TpGuidestepHeaderComponent, TpGuidestepContentComponent]\r\n})\r\n\r\nexport class TpGuidestepsModule {}\r\nexport { TpGuidestepsComponent } from './TpGuidestepsComponent';\r\nexport { TpGuidestepComponent } from './TpGuidestepComponent';\r\nexport { TpGuidestepHeaderComponent } from './TpGuidestepHeaderComponent';\r\nexport { TpGuidestepContentComponent } from './TpGuidestepContentComponent';\r\n","import { Component, ElementRef, Input, ViewChild } from '@angular/core';\r\nimport { TiFormComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n *  Icon组件\r\n *\r\n *  Icon组件可以设置显示Icon。\r\n *\r\n * <example-url>../tinyplus3demo/#/iconaction/iconaction-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-iconaction',\r\n    templateUrl: './iconaction.html',\r\n    styleUrls: ['./iconaction.less']\r\n})\r\nexport class TpIconactionComponent extends TiFormComponent {\r\n  // TODO: add explicit constructor\r\n\r\n  // TODO: add explicit constructor\r\n\r\n    /**\r\n     * icon名称\r\n     */\r\n    @Input() iconName: string = 'cloud-action-add2';\r\n    /**\r\n     * icon名称\r\n     */\r\n    @Input() label: string;\r\n    /**\r\n     * 跳转链接\r\n     *\r\n     * 10.1.2新增\r\n     */\r\n    @Input() href: string;\r\n    /**\r\n     * 跳转方式\r\n     *\r\n     * 10.1.2新增\r\n     */\r\n    @Input() target: string = '_blank';\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('a', { static: true }) aRef: ElementRef;\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        // 基类中做了设置宿主id的操作\r\n        super.ngOnInit();\r\n        this.setFocusableElems([this.aRef.nativeElement]);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClickFn(event: Event): void {\r\n        if(!this.href) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 不传href时，禁用右键打开新窗口功能\r\n     */\r\n    public oncontextmenu(): boolean {\r\n        return !!this.href;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpIconactionComponent } from './TpIconactionComponent';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, TpIconModule],\r\n  exports: [TpIconactionComponent],\r\n  declarations: [TpIconactionComponent]\r\n})\r\nexport class TpIconactionModule {}\r\nexport { TpIconactionComponent } from './TpIconactionComponent';\r\n","import { FormControl, ValidatorFn } from '@angular/forms';\r\nimport {\r\n    ChangeDetectorRef,\r\n    Component,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    Output,\r\n    Renderer2,\r\n    ViewChild,\r\n    NgZone,\r\n    AfterViewChecked\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { TiFormComponent, TiTextareaComponent, TiTextComponent, TiValidationConfig, Util } from '@cloud/tiny3';\r\n\r\n/**\r\n * 可编辑文本组件，主要实现了编辑文本的功能。组件有两种状态：编辑状态和非编辑状态。\r\n * 在非编辑状态:点击右侧笔图标时，切换到编辑状态。\r\n * 在编辑状态:点击右侧对号图标时，切换到非编辑状态，\r\n * 并且将输入框中内容显示在非编辑状态的文本中;\r\n * 点击右侧叉图标时，切换到非编辑状态，非编辑状态的文本保持之前的不变，用户输入不生效。\r\n *\r\n * <example-url>../tinyplus3demo/#/labeleditor/labeleditor-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-labeleditor',\r\n    templateUrl: 'labeleditor.html',\r\n    styleUrls: ['./labeleditor.less'],\r\n    providers: [TiFormComponent.getValueAccessor(TpLabeleditorComponent)]\r\n})\r\n// extends TiFormComponent\r\nexport class TpLabeleditorComponent extends TiFormComponent {\r\n    constructor(\r\n        protected elementRef: ElementRef,\r\n        private changeDetectorRef: ChangeDetectorRef,\r\n        protected renderer2: Renderer2,\r\n        private zone: NgZone) {\r\n        super(elementRef, renderer2);\r\n    }\r\n    /**\r\n     * 是否超出显示TIP\r\n     */\r\n    @Input() autoTip: boolean = true;\r\n    /**\r\n     * 是否为多行文本编辑\r\n     */\r\n    @Input() multiline: boolean;\r\n    /**\r\n     * 用来调整文本框大小，该属性提供了四个属性值:\r\n     *\r\n     * none(不可调整组件大小):\r\n     *\r\n     * vertical(仅可调整垂直方向的大小，即调整组件的高度)\r\n     *\r\n     * horizontal(仅可调节水平方向的大小，即调整组件的宽度)\r\n     *\r\n     * both(水平和垂直方向均可调节，宽高都可调节)\r\n     */\r\n    @Input() resize: 'none' | 'vertical' | 'horizontal' | 'both' = 'both';\r\n    /**\r\n     * 显示文本length\r\n     */\r\n    @Input() maxlength: number;\r\n    /**\r\n     * 编辑图标Tip内容\r\n     */\r\n    @Input() iconTip: string;\r\n    /**\r\n     * 配置校验相关信息，详见接口TiValidationConfig\r\n     */\r\n    @Input() validation: TiValidationConfig;\r\n    /**\r\n     * 用户自定义校验规则\r\n     *\r\n     * 接口值被当作new FormControl()的第二个参数\r\n     *\r\n     * 接口类型与new FormControl()的第二个参数格式一致，详情参考angular表单部分\r\n     */\r\n    @Input() validationRules: Array<ValidatorFn>;\r\n    /**\r\n     * 新增10.1.2\r\n     * 用来配置文本框的宽\r\n     */\r\n    @Input() width: string;\r\n    /**\r\n     * 新增10.1.2\r\n     * 用来配置文本框的高\r\n     */\r\n    @Input() height: string;\r\n    /**\r\n     * 编辑事件接口\r\n     */\r\n    @Output() readonly editor: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * 确认事件接口\r\n     */\r\n    @Output() readonly confirm: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * 取消事件接口\r\n     */\r\n    @Output() readonly cancel: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('textarea', {static: false}) textareaComp: TiTextareaComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('text', {static: false}) textComp: TiTextComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('confirmIcon') confirmIconEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('edit', {static: false}) editEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public isEditing: boolean = false; // 是否处于编辑状态\r\n    /**\r\n     * @ignore\r\n     */\r\n    public value: string; // value内容\r\n    /**\r\n     * @ignore\r\n     */\r\n    public oldValue: string; // value内容\r\n    /**\r\n     * @ignore\r\n     */\r\n    public emptyValue: string = '--'; // 内容为空时显示‘--’\r\n    /**\r\n     * @ignore\r\n     */\r\n    public control: FormControl;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public valueInvalid: boolean = false;\r\n    private subscription: Subscription;\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.control = new FormControl(this.model, this.validationRules);\r\n        // 校验提示tip默认top方向展开\r\n        if (this.validation) {\r\n            this.validation.tipPosition = Util.isUndefined(this.validation.tipPosition) ? 'top' :\r\n            this.validation.tipPosition;\r\n        }\r\n        this.subscription = this.control.statusChanges.subscribe((status: string) => {\r\n            this.valueInvalid = status === 'INVALID';\r\n            this.changeDetectorRef.detectChanges();\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    // tslint:disable-next-line:typedef\r\n    ngOnModelChange() {\r\n        if (this.model) {\r\n            this.control.setValue(this.model.slice(0, this.maxlength));\r\n        } else {\r\n            this.control.setValue('');\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnDestroy(): void {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n          }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 点击编辑图标事件\r\n     */\r\n    public onClickEdit(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.isEditing = true;\r\n        this.oldValue = this.model;\r\n        this.editor.emit(this.model);\r\n        if (this.model) {\r\n            this.control.setValue(this.model.slice(0, this.maxlength));\r\n        }\r\n        setTimeout((): void => {\r\n            if (this.multiline) {\r\n                this.textareaComp.nativeElement.focus();\r\n                if (Util.isUndefined(this.maxlength)) {\r\n                    this.renderer2.removeAttribute(this.textareaComp.nativeElement, 'maxlength');\r\n                } else {\r\n                    this.renderer2.setAttribute(this.textareaComp.nativeElement, 'maxlength', String(this.maxlength));\r\n                }\r\n            } else {\r\n                this.textComp.nativeElement.focus();\r\n            }\r\n        }, 0);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击确认图标事件\r\n     */\r\n    public onClickConfirm(): void {\r\n        if (this.valueInvalid) {\r\n            return;\r\n        }\r\n        this.isEditing = false;\r\n        this.model = this.control.value;\r\n        this.confirm.emit(this.model);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击取消图标事件\r\n     */\r\n    public onClickCancel(): void {\r\n        this.isEditing = false;\r\n        this.cancel.emit(this.model);\r\n        this.control.setValue(this.oldValue);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpLabeleditorComponent } from './TpLabeleditorComponent';\r\nimport { TiOutlineModule, TiIconModule, TiOverflowModule, TiTextareaModule, TiTextModule, TiTipModule, TiValidationModule } from '@cloud/tiny3';\r\n\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TiOutlineModule,\r\n    TiIconModule,\r\n    TiOverflowModule,\r\n    TpIconModule,\r\n    TiTextareaModule,\r\n    TiTipModule,\r\n    TiTextModule,\r\n    TiValidationModule\r\n  ],\r\n  exports: [TpLabeleditorComponent],\r\n  declarations: [TpLabeleditorComponent]\r\n})\r\n\r\nexport class TpLabeleditorModule {}\r\nexport { TpLabeleditorComponent } from './TpLabeleditorComponent';\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * 布局组件，提供整个页面内容区域的布局\r\n *\r\n * 头部\r\n *\r\n * <example-url>../tinyplus3demo/#/layout/layout-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-layout-header',\r\n    template: '<div class=\"tp-layout-header-content\"><ng-content></ng-content></div>',\r\n    styleUrls: ['./layout-header.less'],\r\n    host: {\r\n        '[class.tp-layout-header]': 'true'\r\n    }\r\n})\r\nexport class TpLayoutHeaderComponent {\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * 布局组件，提供整个页面内容区域的布局\r\n *\r\n * 内容容器\r\n *\r\n * <example-url>../tinyplus3demo/#/layout/layout-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-layout-content',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./layout-content.less'],\r\n    host: {\r\n        '[class.tp-layout-content]': 'true'\r\n    }\r\n})\r\nexport class TpLayoutContentComponent {\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * 布局组件，提供整个页面内容区域的布局\r\n *\r\n * 内部分区\r\n *\r\n * <example-url>../tinyplus3demo/#/layout/layout-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-layout-section',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./layout-section.less'],\r\n    host: {\r\n        '[class.tp-layout-section]': 'true'\r\n    }\r\n})\r\nexport class TpLayoutSectionComponent {\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * 布局组件，提供整个页面内容区域的布局\r\n *\r\n * 内容主体\r\n *\r\n * <example-url>../tinyplus3demo/#/layout/layout-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-layout-content-body',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./layout-content-body.less']\r\n})\r\nexport class TpLayoutContentBodyComponent {\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * 布局组件，提供整个页面内容区域的布局\r\n *\r\n * 内容头部\r\n *\r\n * <example-url>../tinyplus3demo/#/layout/layout-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-layout-content-header',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./layout-content-header.less']\r\n})\r\nexport class TpLayoutContentHeaderComponent {\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * 布局组件，提供整个页面内容区域的布局\r\n *\r\n * 内容容器\r\n *\r\n * <example-url>../tinyplus3demo/#/layout/layout-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-layout-column',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./layout-column.less']\r\n})\r\nexport class TpLayoutColumnComponent {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpLayoutHeaderComponent } from './TpLayoutHeaderComponent';\r\nimport { TpLayoutContentComponent } from './TpLayoutContentComponent';\r\nimport { TpLayoutSectionComponent } from './TpLayoutSectionComponent';\r\nimport { TpLayoutContentBodyComponent } from './TpLayoutContentBodyComponent';\r\nimport { TpLayoutContentHeaderComponent } from './TpLayoutContentHeaderComponent';\r\nimport { TpLayoutColumnComponent } from './TpLayoutColumnComponent';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  exports: [ TpLayoutContentComponent,\r\n             TpLayoutContentBodyComponent,\r\n             TpLayoutHeaderComponent,\r\n             TpLayoutSectionComponent,\r\n             TpLayoutContentHeaderComponent,\r\n             TpLayoutColumnComponent],\r\n  declarations: [TpLayoutContentComponent,\r\n                 TpLayoutContentBodyComponent,\r\n                 TpLayoutHeaderComponent,\r\n                 TpLayoutSectionComponent,\r\n                 TpLayoutContentHeaderComponent,\r\n                 TpLayoutColumnComponent]\r\n})\r\nexport class TpLayoutModule {}\r\nexport { TpLayoutContentComponent } from './TpLayoutContentComponent';\r\nexport { TpLayoutContentBodyComponent } from './TpLayoutContentBodyComponent';\r\nexport { TpLayoutHeaderComponent } from './TpLayoutHeaderComponent';\r\nexport { TpLayoutSectionComponent } from './TpLayoutSectionComponent';\r\nexport { TpLayoutContentHeaderComponent } from './TpLayoutContentHeaderComponent';\r\nexport { TpLayoutColumnComponent } from './TpLayoutColumnComponent';\r\n","import { Component, ContentChild, ElementRef, EventEmitter, Input, Output } from \"@angular/core\";\r\nimport { TiBaseComponent, TiLeftmenuItem } from '@cloud/tiny3';\r\n\r\nexport interface TpLeftmenuConfig {\r\n    /**\r\n     * 设置服务名称\r\n     */\r\n    serviceName: string;\r\n    /**\r\n     * 控制右侧内容区的刷新\r\n     *\r\n     * 注意：当重复点击当前激活菜单项时，需要刷新右侧内容区，为了实现此功能设置了该接口；\r\n     * 该接口是双向绑定的，当重复点击当前激活菜单项时，reloadState的值会经历 true(上次的值) -> false -> true\r\n     * 的变化过程，开发者给改接口与其右侧区域容器上ngIf接口绑定的是同一个变量，所以ngIf的值也会经历同样的变化，\r\n     * 从而做到右侧内容区的刷新。\r\n     */\r\n    reloadState: boolean;\r\n    /**\r\n     * 是否开启左侧菜单面板可折叠功能，默认开启。\r\n     */\r\n    toggleable?: boolean;\r\n    /**\r\n     * 左侧菜单面板是否为收起状态，用于设置面板收起/展开状态，默认展开。\r\n     */\r\n    collapsed?: boolean;\r\n    /**\r\n     * 左侧菜单面板收起/展开状态改变时向外通知\r\n     */\r\n    collapsedChangeFn?: (collapsed: boolean) => void;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpLeftmenuItem extends TiLeftmenuItem {\r\n    /**\r\n     * 菜单项文本内容\r\n     */\r\n    label: string;\r\n    /**\r\n     * 分组或一级菜单项可设置该属性\r\n     */\r\n    children?: Array<TpLeftmenuItem>;\r\n    /**\r\n     * 是否隐藏菜单项\r\n     */\r\n    hide?: boolean;\r\n    /**\r\n     * 是否为分组项\r\n     */\r\n    isGroup?: boolean;\r\n    /**\r\n     * 如果是分组项，是否展开该组\r\n     */\r\n    expanded?: boolean;\r\n    // click: () => {}; TODO:\r\n    // hyperlink: string; TODO:\r\n}\r\n\r\n/**\r\n * TpLeftmenu组件主要用于左侧导航，是基于Tiny3中的TiLeftmenu组件进行封装的，详细的数据接口说明可参照Tiny3中的TiLeftmenu。\r\n *\r\n * <example-url>../tinyplus3demo/#/leftmenu/leftmenu-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-leftmenu',\r\n    templateUrl: './leftmenu.html',\r\n    styleUrls: ['./leftmenu.less']\r\n})\r\nexport class TpLeftmenuComponent extends TiBaseComponent {\r\n    private static readonly CHINESE_REG: RegExp = new RegExp('[\\u4e00-\\u9fa5]'); // 汉字\r\n    /**\r\n     * 左侧菜单配置项\r\n     */\r\n    @Input() config: TpLeftmenuConfig;\r\n    /**\r\n     * 左侧菜单数据\r\n     *\r\n     * 其中的 href 属性 在v10.0.1 ~ v10.1.3版本存在XSS攻击(url类型)风险，v10.1.4 版本做了安全处理，已不存在安全问题，建议业务尽快升级版本。\r\n     *\r\n     */\r\n    @Input() items: Array<TpLeftmenuItem>;\r\n    /**\r\n     * 设置激活菜单项。这个值应该是 TiLeftmenuLevel1 和 TiLeftmenuLevel2 组件的 item 接口传入的值的集合中的一个(item)\r\n     *\r\n     * 此接口是双向绑定的，设置时中括号“[]”和圆括号“()”要同时使用\r\n     */\r\n    @Input() active: TpLeftmenuItem;\r\n    /**\r\n     * 激活菜单项改变时向外通知\r\n     */\r\n    @Output() readonly activeChange: EventEmitter<TpLeftmenuItem> = new EventEmitter();\r\n    /**\r\n     * @ignore\r\n     * 底部元素\r\n     */\r\n    @ContentChild('foot') leftmenuFoot: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * 模板中使用\r\n     */\r\n    public getHeaderTextClass(): string {\r\n        return this.config && TpLeftmenuComponent.CHINESE_REG.test(this.config.serviceName) && this.config.serviceName.length > 8 ?\r\n            'tp-leftmenu-title-long' : 'tp-leftmenu-title';\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 激活菜单项改变时向外通知\r\n     */\r\n    onActiveChange(item: TpLeftmenuItem): void {\r\n        this.activeChange.emit(item);\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 触发点击事件\r\n     */\r\n    triggerClick(item: TpLeftmenuItem): void { // TODO: 暂未开放click事件\r\n        if (typeof(item.click) === 'function') {\r\n            item.click(item);\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TiIconModule, TiLeftmenuModule } from '@cloud/tiny3';\r\nimport { TpLeftmenuComponent } from './TpLeftmenuComponent';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiIconModule,\r\n    TiLeftmenuModule\r\n  ],\r\n  exports: [TpLeftmenuComponent],\r\n  declarations: [TpLeftmenuComponent]\r\n})\r\n\r\nexport class TpLeftmenuModule {}\r\nexport { TpLeftmenuComponent, TpLeftmenuItem, TpLeftmenuConfig } from './TpLeftmenuComponent';\r\n","import {\r\n    AfterViewInit,\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    OnDestroy,\r\n    OnInit,\r\n    Output,\r\n    SimpleChange,\r\n    SimpleChanges,\r\n    ElementRef,\r\n    Renderer2,\r\n    TemplateRef\r\n} from '@angular/core';\r\nimport { Util, TiBaseComponent } from '@cloud/tiny3';\r\nimport { ActivatedRoute, NavigationEnd, NavigationExtras, Router, UrlTree } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport interface TpLeftmenuthinItem {\r\n    /**\r\n     * 设置当前菜单项对应的路由，与 Router.navigate方法的第一个参数一样\r\n     */\r\n    router: Array<any>;\r\n    // routerExtras?: { relativeTo?: string, queryParams?: Object, fragment?: string };\r\n    /**\r\n     * 设置当前菜单项对应路由的配置信息，与 Router.navigate方法的第二个参数一样\r\n     */\r\n    routerExtras?: NavigationExtras;\r\n    /**\r\n     * 设置一个router路由列表，当该列表中的路由被激活时，其对应的菜单项被激活处于高亮状态。\r\n     * 其使用场景为多个路由对应同一个左侧菜单项。\r\n     *\r\n     * routerList 数组中每一个元素与 Router.navigate方法的第一个参数一样\r\n     */\r\n    routerList?: Array<Array<any>>; // 数组中元素也为数组\r\n    /**\r\n     * 选项label\r\n     */\r\n    label: string;\r\n    /**\r\n     * 选项图标名称\r\n     */\r\n    iconName?: string;\r\n    /**\r\n     * 非云服务或非入库图标使用展示\r\n     *\r\n     * 10.1.0 新增\r\n     */\r\n    customizeIcon?: TemplateRef<any>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * 组件功能与leftMenu组件相似。\r\n *\r\n * <example-url>../tinyplus3demo/#/leftmenuthin/leftmenuthin-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-leftmenuthin',\r\n    templateUrl: './leftmenuthin.html',\r\n    styleUrls: ['./leftmenuthin.less']\r\n})\r\n\r\nexport class TpLeftmenuthinComponent extends TiBaseComponent {\r\n    /**\r\n     * 设置激活菜单项。接口传入的值的集合中的一个(item)\r\n     *\r\n     * 此接口是双向绑定的，设置时中括号“[]”和圆括号“()”要同时使用\r\n     */\r\n    @Input() active: TpLeftmenuthinItem;\r\n    /**\r\n     * 激活菜单项改变时向外通知\r\n     */\r\n    @Output() readonly activeChange: EventEmitter<TpLeftmenuthinItem> = new EventEmitter();\r\n    /**\r\n     * 点击菜单项触发此事件\r\n     */\r\n    @Output() readonly select: EventEmitter<TpLeftmenuthinItem> = new EventEmitter();\r\n    /**\r\n     * 控制右侧内容区的刷新\r\n     *\r\n     * 注意：当重复点击当前激活菜单项时，需要刷新右侧内容区，为了实现此功能设置了该接口；\r\n     * 该接口是双向绑定的，当重复点击当前激活菜单项时，reloadState的值会经历 true(上次的值) -> false -> true\r\n     * 的变化过程，开发者给改接口与其右侧区域容器上ngIf接口绑定的是同一个变量，所以ngIf的值也会经历同样的变化，\r\n     * 从而做到右侧内容区的刷新。\r\n     */\r\n    @Input() reloadState: boolean = true;\r\n    /**\r\n     * 菜单数据列表\r\n     */\r\n    @Input() items: Array<TpLeftmenuthinItem>;\r\n    /**\r\n     * 右侧内容区是否需要刷新的状态值改变时向外通知\r\n     */\r\n    @Output() readonly reloadStateChange: EventEmitter<boolean> = new EventEmitter();\r\n    /**\r\n     * @ignore\r\n     */\r\n    public readonly resolvedPromise: Promise<any> = Promise.resolve(null);\r\n    /**\r\n     * 标志量，是否为url改变(需要去改变active)\r\n     */\r\n    private isUrlChange: boolean = false;\r\n    private navigationSubscription: Subscription;\r\n    constructor(\r\n        private router: Router,\r\n        private activeRoute: ActivatedRoute,\r\n        protected hostRef: ElementRef, protected renderer: Renderer2 ) {\r\n            super(hostRef, renderer)\r\n    }\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 初始时右侧内容区默认显示，需使外部用户的reloadState值为true。\r\n        // 双向绑定数据时，对初始传入的值立即修改并传出时会报错，\r\n        // 此处参考ngModel源码setValue的处理，使用promise延后执行时序\r\n        this.resolvedPromise.then(() => {\r\n            this.reloadStateChange.emit(true);\r\n        });\r\n    }\r\n    ngAfterViewInit(): void {\r\n        // 直接输入url(刷新页面)改变状态时，leftmenu能同步修改激活状态\r\n        const urlActiveItem: TpLeftmenuthinItem = this.getActiveItemByUrl(this.items);\r\n        if (urlActiveItem) {\r\n            // 双向绑定数据时，对初始传入的值立即修改并传出时会报错，\r\n            // 此处参考ngModel源码setValue的处理，使用promise延后执行时序\r\n            this.resolvedPromise.then(() => {\r\n                if (urlActiveItem !== this.active) {\r\n                    this.isUrlChange = true;\r\n                    this.active = urlActiveItem;\r\n                    this.activeChange.emit(this.active);\r\n                }\r\n            });\r\n        } else {\r\n            this.link();\r\n        }\r\n        // 从非leftMenu处跳转改变状态时，leftmenu能同步修改激活状态\r\n        this.navigationSubscription = this.router.events.subscribe((evt: any) => {\r\n            if (evt instanceof NavigationEnd) {\r\n                const newActiveItem: TpLeftmenuthinItem = this.getActiveItemByUrl(this.items);\r\n                if (newActiveItem && newActiveItem !== this.active) {\r\n                    this.active = newActiveItem;\r\n                    this.activeChange.emit(this.active);\r\n                    this.isUrlChange = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const activeObj: SimpleChange = changes['active'];\r\n        if (activeObj && !activeObj.firstChange) {\r\n            if (!this.isUrlChange) {\r\n                this.link();\r\n                this.isUrlChange = false;\r\n            } else {\r\n                this.navigate(activeObj.currentValue);\r\n            }\r\n        }\r\n    }\r\n    ngOnDestroy(): void {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 模板中使用\r\n     */\r\n    public selectFn(item: any): void {\r\n        const oldactive: TpLeftmenuthinItem = this.active;\r\n        const newactive: TpLeftmenuthinItem = item;\r\n        // 点击当前已经激活的item时，刷新对应路由\r\n        if (newactive === oldactive) {\r\n            this.triggerReload(item);\r\n        } else if (newactive !== oldactive) {\r\n            this.active = newactive;\r\n            this.navigate(item);\r\n            this.activeChange.emit(this.active);\r\n        }\r\n        this.select.emit(item);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击当前选中项时，触发内容区重载\r\n     * @param item 当前点击项\r\n     */\r\n    public triggerReload(item: TpLeftmenuthinItem): void {\r\n        // 使reloadState由false变为true,配合内容区的ngIf做到内容区的重载\r\n        this.reloadStateChange.emit(false);\r\n        setTimeout(() => {\r\n            this.reloadStateChange.emit(true);\r\n            this.navigate(item);\r\n        }, 0);\r\n    }\r\n    private navigate(item: TpLeftmenuthinItem): void {\r\n        this.router.navigate(item.router, this.getNavigationExtras(item.routerExtras));\r\n    }\r\n    private getNavigationExtras(routerExtras: Object): Object {\r\n        return { relativeTo: this.activeRoute, ...routerExtras };\r\n    }\r\n    private getActiveItemByUrl(arr: Array<any>): TpLeftmenuthinItem {\r\n        let resultItem: TpLeftmenuthinItem;\r\n        for (const item of arr) {\r\n            if (this.isActived(item)) {\r\n                resultItem = item;\r\n\r\n                return resultItem;\r\n            }\r\n        }\r\n\r\n        return resultItem;\r\n    }\r\n    private isActived(item: TpLeftmenuthinItem): boolean {\r\n        const relativeRoute: NavigationExtras = this.getRelativeRoute(item.routerExtras);\r\n        if (this.isMatchCurrentUrl(item.router, relativeRoute)) {\r\n            return true;\r\n        }\r\n\r\n        if (Util.isArray(item.routerList) && item.routerList.length > 0) {\r\n            for (const router of item.routerList) {\r\n                if (this.isMatchCurrentUrl(router, relativeRoute)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n    private getRelativeRoute(routerExtras: Object): NavigationExtras {\r\n        if (!routerExtras || !routerExtras['relativeTo']) {\r\n            return { relativeTo: this.activeRoute };\r\n        }\r\n\r\n        return { relativeTo: routerExtras['relativeTo'] };\r\n    }\r\n    private isMatchCurrentUrl(router: Array<any>, relativeRoute: NavigationExtras): boolean {\r\n        if (!Util.isArray(router)) {\r\n            return false;\r\n        }\r\n        const itemUrlTree: UrlTree = this.router.createUrlTree(router, relativeRoute);\r\n\r\n        return this.router.isActive(itemUrlTree, false);\r\n    }\r\n    private link(): void {\r\n        if (this.active) {\r\n            this.navigate(this.active);\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpLeftmenuthinComponent } from './TpLeftmenuthinComponent';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TiOutlineModule } from '@cloud/tiny3';\r\n\r\n\r\n@NgModule({\r\n  imports: [CommonModule, RouterModule, TpIconModule, TiOutlineModule],\r\n  exports: [TpLeftmenuthinComponent],\r\n  declarations: [TpLeftmenuthinComponent]\r\n})\r\n\r\nexport class TpLeftmenuthinModule {}\r\nexport { TpLeftmenuthinComponent, TpLeftmenuthinItem } from './TpLeftmenuthinComponent';\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiFormComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * 链接按钮组件 linkbutton\r\n *\r\n * 该属性指令需要结合a标签使用，实现链接按钮样式\r\n *\r\n * <example-url>../tinyplus3demo/#/linkbutton/linkbutton-all</example-url>\r\n */\r\n@Component({\r\n    // tslint:disable-next-line: component-selector\r\n    selector: '[tpLinkbutton]',\r\n    templateUrl: './linkbutton.html',\r\n    styleUrls: ['./linkbutton.less']\r\n})\r\n\r\nexport class TpLinkbuttonComponent extends TiFormComponent {\r\n  // TODO: add explicit constructor\r\n\r\n  // TODO: add explicit constructor\r\n\r\n    /**\r\n     * icon名称\r\n     */\r\n    @Input() iconName: string;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpLinkbuttonComponent } from './TpLinkbuttonComponent';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, TpIconModule],\r\n  exports: [TpLinkbuttonComponent],\r\n  declarations: [TpLinkbuttonComponent]\r\n})\r\n\r\nexport class TpLinkbuttonModule {}\r\nexport { TpLinkbuttonComponent } from './TpLinkbuttonComponent';\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\nimport { TpLink } from '../crumb/TpCrumbModule';\r\n\r\nexport interface TpLinkOption {\r\n    /* tslint:disable:no-redundant-jsdoc */\r\n    /**\r\n     * 链接块的标题;\r\n     */\r\n    title?: string;\r\n    /**\r\n     * 设置链接是否为导航链接的默认样式（导航链接默认显示为蓝色）;\r\n     * @default false\r\n     */\r\n    isNavigation?: boolean;\r\n    /**\r\n     * 设置链接块是否隐藏;\r\n     * @default false\r\n     */\r\n    hide?: boolean;\r\n    /**\r\n     * 链接块的链接列表数据;\r\n     */\r\n    items?: Array<TpLinkItem>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\nexport interface TpLinkItem extends TpLink {\r\n    /**\r\n     * 设置链接是否隐藏;\r\n     * @default false\r\n     */\r\n    hide?: boolean;\r\n}\r\n/**\r\n * 链接列表组件 linklist\r\n *\r\n * <example-url>../tinyplus3demo/#/linklist/linklist-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-linklist',\r\n    templateUrl: './linklist.html',\r\n    styleUrls: ['./linklist.less']\r\n})\r\n\r\nexport class TpLinklistComponent extends TiBaseComponent {\r\n    /**\r\n     * 组件数据\r\n     */\r\n    @Input() options: Array<TpLinkOption>;\r\n    /**\r\n     * 点击某个链接文本触发此事件\r\n     */\r\n    @Output() readonly select: EventEmitter<TpLinkItem> = new EventEmitter<TpLinkItem>();\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(item: TpLinkItem): boolean {\r\n        this.select.emit(item);\r\n        // 不设置链接时，阻止跳转（a标签在click事件返回值为false时，会阻止默认行为）\r\n        if (!item.href) {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpLinklistComponent } from './TpLinklistComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [TpLinklistComponent],\r\n  declarations: [TpLinklistComponent]\r\n})\r\n\r\nexport class TpLinklistModule { }\r\nexport { TpLinklistComponent, TpLinkOption, TpLinkItem } from './TpLinklistComponent';\r\n","import { Component, ViewEncapsulation } from '@angular/core';\r\nimport { TiModalBodyComponent } from '@cloud/tiny3'\r\n\r\n/**\r\n *\r\n *  业务典型场景用到的弹窗组件\r\n *\r\n *  10.1.0新增\r\n *\r\n *  提供了UI规范推荐的四种尺寸的弹窗样式，还有带alert提示的弹窗和典型confirm弹窗的样式\r\n *\r\n *  10.0.4及之前的版本是以模板的形式提供(相关的样式是全局的）；10.1.0版本为了实现样式按需加载，去掉了之前的模板，将其封装在一个组件模块，所以该组件实际只提供了样式。\r\n *\r\n *  <example-url>../tinyplus3demo/#/modalbody/modalbody-all</example-url>\r\n *\r\n */\r\n@Component({\r\n    selector: 'tp-modal-body', // 兼容延用之前的样式选择器\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./modalbody.less'],\r\n    encapsulation: ViewEncapsulation.None,\r\n    host: {\r\n        '[class.ti3-modal-body]': 'true' // 1. tiny3中的 .ti3-modal-body 有些样式；2. TiModalComponent 中有通过该样式类获取dom的逻辑\r\n    }\r\n})\r\nexport class TpModalBodyComponent extends TiModalBodyComponent { }\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { TpModalBodyComponent } from './TpModalBodyComponent';\r\n\r\n@NgModule({\r\n  exports: [TpModalBodyComponent],\r\n  declarations: [TpModalBodyComponent]\r\n})\r\nexport class TpModalBodyModule {}\r\nexport { TpModalBodyComponent } from './TpModalBodyComponent';\r\n","import { ChangeDetectorRef, Component, ElementRef, Input, Renderer2, SimpleChange, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * 该接口定义与console框架数据结构保持一致\r\n *\r\n * 10.1.0/9.1.0新增\r\n */\r\nexport interface TpRegionData {\r\n    /**\r\n     * 当前region数据，对象类型\r\n     */\r\n    region?: any;\r\n    /**\r\n     * 当前服务自行处理后支持的region列表，数组对象类型\r\n     */\r\n    supportRegions?: Array<any>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 区域服务不支持页面组件\r\n *\r\n * 该组件与console框架相关，框架处理数据，组件获取数据显示；\r\n * 有些服务无法在servicecm配置支持的region列表，可通过regionData接口配置\r\n *\r\n * <b>注</b>：支持列表中的region区域是服务已配置的可支持的区域。\r\n *\r\n * <example-url>../tinyplus3demo/#/nonsupportregion/nonsupportregion-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-nonsupportregion',\r\n    templateUrl: './nonsupportregion.html',\r\n    styleUrls: ['./nonsupportregion.less']\r\n})\r\n\r\nexport class TpNonsupportregionComponent extends TiBaseComponent {\r\n    /**\r\n     * 配置当前区域数据和当前服务下支持的区域列表数据，默认数据来源于console框架getRegionData()中提供的region及supportRegions\r\n     *\r\n     * 业务侧可自行处理console框架getRegionData()中提供的区域数据后传入\r\n     *\r\n     * 10.1.0/9.1.0新增\r\n     */\r\n    @Input() regionData: TpRegionData;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('container') containerEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    label: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    supportRegions: Array<any>;\r\n    private regionsDataSub: Subscription;\r\n\r\n    constructor(\r\n        private elementRef: ElementRef,\r\n        private renderer2: Renderer2,\r\n        private changeDetector: ChangeDetectorRef) {\r\n        super(elementRef, renderer2);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        if (this.regionData) {\r\n            this.setViewInfo(this.regionData);\r\n\r\n            return;\r\n        }\r\n\r\n        this.setRegionsData();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        const regionsObj: SimpleChange = changes['regionData'];\r\n        if (regionsObj && regionsObj.currentValue && !regionsObj.isFirstChange()) {\r\n            this.setViewInfo(regionsObj.currentValue);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this.regionsDataSub) {\r\n            this.regionsDataSub.unsubscribe();\r\n        }\r\n    }\r\n\r\n    private setRegionsData(): void {\r\n        if (!(window as any).cfRegionSubject) {\r\n            return;\r\n        }\r\n        this.regionsDataSub = (window as any).cfRegionSubject.subscribe({\r\n            next: (items: TpRegionData): void => {\r\n                this.setViewInfo(items);\r\n            }\r\n        });\r\n    }\r\n\r\n    private setViewInfo(items: any): void {\r\n        if (items.region && items.region.displayName) {\r\n            const displayName: any = `<span>${items.region.displayName}</span>`;\r\n            this.label = Util.formatEntry(TiLocale.getLocaleWords().tpNonsupportregion.label, [displayName]);\r\n        }\r\n        this.supportRegions = items.supportRegions;\r\n        this.changeDetector.detectChanges();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpNonsupportregionComponent } from './TpNonsupportregionComponent';\r\nimport { TpSupportregionlistModule } from '../supportregionlist/TpSupportregionlistModule';\r\n\r\n@NgModule({\r\n  imports: [TpSupportregionlistModule],\r\n  exports: [TpNonsupportregionComponent],\r\n  declarations: [TpNonsupportregionComponent]\r\n})\r\n\r\nexport class TpNonsupportregionModule { }\r\nexport { TpNonsupportregionComponent, TpRegionData} from './TpNonsupportregionComponent';","// tslint:disable-next-line: no-implicit-dependencies\r\nimport { Component, ElementRef, Input, Renderer2, SimpleChange, SimpleChanges, ViewChild } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiButtongroupComponent, TiButtonItem, TiFormComponent, TiLocale, Util } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n * 内部使用\r\n */\r\nexport interface TpPricelineRect {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    active: boolean;\r\n    text: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n\r\n}\r\n/**\r\n * 价格曲线每个按钮选项数据\r\n */\r\nexport interface TpPricelineItem extends TiButtonItem {\r\n    /**\r\n     * 每个选项对应的价格\r\n     */\r\n    price: number;\r\n}\r\n\r\n/**\r\n *  价格曲线组件, 对应tiny2中btnSlider组件price-option接口配置后的功能\r\n *\r\n *  9.0.4版本新增\r\n *\r\n * <example-url>../tinyplus3demo/#/priceline/priceline-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-priceline',\r\n    templateUrl: './priceline.html',\r\n    styleUrls: ['./priceline.less'],\r\n    providers: [TiFormComponent.getValueAccessor(TpPricelineComponent)]\r\n})\r\nexport class TpPricelineComponent extends TiFormComponent {\r\n\r\n    /**\r\n     * 按钮配置数据\r\n     */\r\n    @Input() items: Array<TpPricelineItem> = [];\r\n    /**\r\n     * 设置单选按钮组是否可以取消选中\r\n     */\r\n    @Input() deselectable: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * canvas 元素引用\r\n     */\r\n    @ViewChild('canvas') canvasRef: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * canvas 包裹元素，\r\n     */\r\n    @ViewChild('canvasWrap') canvasWrapRef: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * 按钮组\r\n     */\r\n    @ViewChild(TiButtongroupComponent) buttonGroupCom: TiButtongroupComponent;\r\n\r\n    // 当前画笔\r\n    private ctx: CanvasRenderingContext2D;\r\n    // canvas 画板的配置\r\n    private canvasOption: any;\r\n    private canvasWidth: number;\r\n    // 动画当前第几步，动画使用，\r\n    private step: number;\r\n    // 上一次的items 数据，用于动画\r\n    private previousItems: Array<any>;\r\n    // 每个背景柱子和\r\n    private rects: Array<TpPricelineRect>;\r\n    // 统计点的坐标\r\n    private x: number;\r\n    private y: number;\r\n    private lastX: number;\r\n    private lastButton: DOMRect;\r\n    // 最大价格，价格曲线可以升，最大值不是items[0].price\r\n    private maxPrice: number;\r\n    // IE11 CSSVar 补丁初始化样式的生效有延迟，initCanvas函数中获取不到主题相关的样式，所以需要定时器多次获取\r\n    private timer: any;\r\n\r\n    constructor(hostRef: ElementRef, renderer: Renderer2) {\r\n        super(hostRef, renderer);\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        super.ngAfterViewInit();\r\n        this.initCanvas();\r\n        if (this.canvasOption) {\r\n            // 视图渲染后修改了视图相关数据，所以使用setTimeout\r\n            setTimeout(() => {\r\n                this.draw(this.items);\r\n            }, 0);\r\n        } else {\r\n            this.timer = setInterval(() => {\r\n                this.initCanvas();\r\n                if (this.canvasOption) {\r\n                    this.draw(this.items);\r\n                    clearInterval(this.timer);\r\n                }\r\n               // 测试IE11刷新需要40ms左右完成，URL访问需要80ms左右完成，真实业务场景比较复杂取100\r\n            }, 100);\r\n        }\r\n\r\n        // tslint:disable-next-line: newline-per-chained-call\r\n        this.setFocusableElems(this.buttonGroupCom.getFocusableElems().concat(this.nativeElement));\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        // 价格变化\r\n        const items: SimpleChange = changes['items'];\r\n        if (items && !items.firstChange) {\r\n            this.step = 10;\r\n            this.previousItems = items.previousValue;\r\n            this.changeDraw();\r\n        }\r\n    }\r\n\r\n    onNgModelChange(data: TiButtonItem): void {\r\n        // 选中项变化，折线的标题会变化，重新绘制\r\n        if (this.model) {\r\n            this.draw(this.items);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        clearInterval(this.timer);\r\n    }\r\n    // 价格变动时重绘动画\r\n    // 实现思路，动画时间是200ms，每一次绘制间隔设置20ms，分10步绘制，\r\n    // todo 1.绘制间隔设置为16.66接近 60帧动效，2.使用 requestAnimationFrame 代替 setTimeout\r\n    private changeDraw(): void {\r\n        // 动画过程中变化的items\r\n        const currentItems: Array<TiButtonItem> = this.items.map((item: any, index: number) => {\r\n            // 重新生成一个新对象，避免修改原始数据\r\n            const newItem: TiButtonItem = { ...item };\r\n            newItem.price = newItem.price - (newItem.price - this.previousItems[index].price) * (this.step / 10);\r\n\r\n            return newItem;\r\n        });\r\n\r\n        this.draw(currentItems);\r\n        this.step--;\r\n        // 20 每一帧间隔时间20ms\r\n        setTimeout(() => {\r\n            if (this.step > -1) {\r\n                this.changeDraw();\r\n            }\r\n        }, 20);\r\n\r\n    }\r\n\r\n    // 初始化价格曲线 canvas\r\n    private initCanvas(): void {\r\n\r\n        let lineColor: string;\r\n        let color: string;\r\n        let activeColor: string;\r\n        let startColor: string;\r\n        let endColor: string;\r\n\r\n        if (Util.supportsCssVars()) {\r\n            // Chrome等支持CSSVar的浏览器，正常操作,  从CSSVar变量中取出颜色。\r\n            const cSSStyleDeclaration: CSSStyleDeclaration = getComputedStyle(document.documentElement);\r\n            lineColor = cSSStyleDeclaration.getPropertyValue('--ti-common-color-line-active');\r\n            color = cSSStyleDeclaration.getPropertyValue('--ti-common-color-text-weaken');\r\n            activeColor = cSSStyleDeclaration.getPropertyValue('--ti-common-color-text-primary');\r\n            startColor = cSSStyleDeclaration.getPropertyValue('--ti-common-color-bg-emphasize');\r\n            endColor = startColor;\r\n        } else {\r\n            // IE和低版Edge不支持CSSVar的浏览器，从一个CSS样式中取出颜色。\r\n            const cSSStyleDeclaration: CSSStyleDeclaration = getComputedStyle(this.canvasRef.nativeElement);\r\n            color = cSSStyleDeclaration.getPropertyValue('flood-color');\r\n            activeColor = cSSStyleDeclaration.getPropertyValue('lighting-color');\r\n\r\n            const cSSStyleDeclaration2: CSSStyleDeclaration = getComputedStyle(this.canvasWrapRef.nativeElement);\r\n            lineColor = cSSStyleDeclaration2.getPropertyValue('flood-color');\r\n            startColor = cSSStyleDeclaration2.getPropertyValue('lighting-color');\r\n            endColor = cSSStyleDeclaration2.getPropertyValue('stop-color');\r\n            // tslint:disable-next-line: max-line-length\r\n        }\r\n\r\n        if (!lineColor || !color || !activeColor || !startColor || !endColor) {\r\n\r\n            return;\r\n        }\r\n\r\n        // canvas曲线配置项\r\n        this.canvasOption = {\r\n            // 整个画板的高度\r\n            height: 60,\r\n            carveHeight: 40,\r\n            // 经验值，设置为1折线不平滑\r\n            lineWidth: 1.4,\r\n            // chrome  拿到的颜色有前后空格\r\n            lineColor: lineColor.trim(),\r\n            title: TiLocale.getLocaleWords().tpPriceline.carveTitle,\r\n            color: color.trim(),\r\n            titleX: 0,\r\n            titleY: 14,\r\n            fontSize: '12px',\r\n            fontFamily: 'Roboto,Microsoft YaHei,微软雅黑,Sans-serif',\r\n            activeColor: activeColor.trim(),\r\n            tagOffset: 6,\r\n            tagUnit: '/' + TiLocale.getLocaleWords().tpPriceline.tagUnit,\r\n            tagPrefix: TiLocale.getLocaleWords().tpPriceline.tagPrefix,\r\n            currency: TiLocale.getLocaleWords().tpPriceline.tagCurrency,\r\n            startColor: this.color2rgba(startColor.trim(), 0.26),\r\n            endColor: this.color2rgba(endColor.trim(), 0)\r\n        };\r\n\r\n        // 设置canvas的高度\r\n        this.renderer.setAttribute(this.canvasRef.nativeElement, 'height', this.canvasOption.height);\r\n\r\n        // 设置canvas 宽度和canvas上下文，在IE11环境 ngAfterViewInit中设置，获取宽度有误差，所以放在此处\r\n        const wrapStyles: CSSStyleDeclaration = getComputedStyle(this.canvasWrapRef.nativeElement);\r\n        this.canvasWidth = parseInt(wrapStyles.width, 10);\r\n        this.renderer.setAttribute(this.canvasRef.nativeElement, 'width', String(this.canvasWidth));\r\n\r\n        this.ctx = (this.canvasRef.nativeElement as HTMLCanvasElement).getContext('2d');\r\n    }\r\n\r\n    // ie11 canvas 渐变透明不支持# 开头的八位颜色写法，所有需要转化成rgba表示形式\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private color2rgba(hex: string, alpha?: number): string {\r\n        const colorRegex: RegExp = /^#?[a-fA-F0-9]+$/;\r\n        if (!colorRegex.test(hex) || hex.length !== 7) {\r\n            return hex;\r\n        }\r\n        const values: Array<number> = [\r\n            parseInt(hex.slice(1, 3), 16),\r\n            parseInt(hex.slice(3, 5), 16),\r\n            parseInt(hex.slice(5), 16)\r\n        ];\r\n        if (alpha >= 0 && alpha <= 1) {\r\n            values.push(alpha);\r\n        } else {\r\n            values.push(1);\r\n        }\r\n\r\n        return `rgba(${values.join(',')})`;\r\n    }\r\n    // 画图实现思路：1 获取按钮的位置和宽度，2.根据按钮的位置宽度和items中的price数据，在每个价格变化时生成一个记录对象放在rects中，\r\n    // 3. 根据记录的对象数组rects, 先画矩形背景和价格标签，4. 再根据rects画折线\r\n    private draw(items: Array<any>): void {\r\n        if (!items || items.length < 2 || !this.canvasOption) {\r\n            return;\r\n        }\r\n        // 每次重绘前清空画板\r\n        this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasOption.height);\r\n        this.rects = [];\r\n        this.x = 0;\r\n        this.lastX = 0;\r\n        this.maxPrice = items[0].price;\r\n        // tslint:disable-next-line: prefer-for-of\r\n        for (let index: number = 1; index < this.items.length; index++) {\r\n            if (items[index].price > this.maxPrice) {\r\n                this.maxPrice = items[index].price;\r\n            }\r\n        }\r\n        this.y = this.canvasOption.height - this.canvasOption.carveHeight * items[0].price / this.maxPrice;\r\n\r\n        const buttons: NodeListOf<Element> = (this.nativeElement as HTMLElement).querySelectorAll('.ti3-btn-item-radio');\r\n        //  曲线图的背景和选择按钮的的\r\n        this.lastButton = buttons[0].getBoundingClientRect();\r\n\r\n        // 画标题\r\n        this.drawText({\r\n            x: this.canvasOption.titleX,\r\n            y: this.canvasOption.titleY,\r\n            text: this.canvasOption.title\r\n        });\r\n\r\n        // 遍历按钮数据\r\n        const len: number = this.items.length;\r\n        for (let index: number = 1; index < len; index++) {\r\n\r\n            // 不是最后一条并且价格没有变化，不需要处理\r\n            if (index !== len - 1 && this.items[index].price === this.items[index - 1].price) {\r\n                continue;\r\n            }\r\n\r\n            const button: DOMRect = buttons[index].getBoundingClientRect();\r\n            // 最后一条数据，有价格变化，需要画2次\r\n            if (index === len - 1 && items[index].price !== items[index - 1].price) {\r\n                this.x = this.x + (button.left - this.lastButton.left);\r\n                this.record(items, index);\r\n                // 最后一次\r\n                this.lastX = this.x;\r\n                this.y = this.canvasOption.height - this.getCurrentHeight(items[index].price, items);\r\n                this.lastButton = button;\r\n                this.x = this.x + button.width;\r\n                this.record(items, index, true);\r\n                // 最后一个数据没有价格变化\r\n            } else if (index === len - 1 && items[index].price === items[index - 1].price) {\r\n                this.x = this.x + ((button.left + button.width) - this.lastButton.left);\r\n                this.record(items, index, true);\r\n                // 中间的按钮数据\r\n            } else {\r\n                this.x = this.x + button.left - this.lastButton.left;\r\n                this.record(items, index);\r\n                this.lastX = this.x;\r\n                this.y = this.canvasOption.height - this.getCurrentHeight(items[index].price, items);\r\n                this.lastButton = button;\r\n            }\r\n\r\n        }\r\n\r\n        // 画柱状背景和标题\r\n        this.rects.forEach((rect: TpPricelineRect) => {\r\n            this.drawRect(rect);\r\n        });\r\n\r\n        // 画折线\r\n        this.drawLine(this.ctx, { width: this.canvasOption.lineWidth, color: this.canvasOption.lineColor });\r\n    }\r\n\r\n    // 根据第一个按钮数据的价格计算当前价格柱状高度\r\n    private getCurrentHeight(curPrice: number, items: Array<any>): number {\r\n        return this.canvasOption.carveHeight * curPrice / this.maxPrice;\r\n    }\r\n\r\n    // 每一步遍历数据，记录一个配置点\r\n    private record(items: Array<any>, currrentIndex: number, isEnd?: boolean): void {\r\n        const price: number = this.items[isEnd ? currrentIndex : currrentIndex - 1].price;\r\n        // 柱状背景\r\n        const rectOption: TpPricelineRect = {\r\n            x: this.lastX,\r\n            y: this.y,\r\n            width: isEnd ? (this.x - this.lastX) : (this.x - this.lastX - 2),\r\n            height: this.canvasOption.height - this.y,\r\n            // tslint:disable-next-line: max-line-length\r\n            text: `${this.rects.length === 0 ? this.canvasOption.tagPrefix : ''}${this.canvasOption.currency}${price.toFixed(2)}${this.canvasOption.tagUnit}`,\r\n            active: price === this.model.price\r\n        };\r\n        this.rects.push(rectOption);\r\n    }\r\n\r\n    // canvas 画文字\r\n    private drawText(config: any): void {\r\n        const option: any = {\r\n            offset: this.canvasOption.tagOffset,\r\n            color: this.canvasOption.color,\r\n            fontSize: this.canvasOption.fontSize,\r\n            fontFamily: this.canvasOption.fontFamily,\r\n            ...config\r\n        };\r\n\r\n        this.ctx.fillStyle = option.active ? this.canvasOption.activeColor : this.canvasOption.color;\r\n        // font 同时设置字体大小和字体时，需用空格隔开\r\n        this.ctx.font = `${option.fontSize} ${option.fontFamily}`;\r\n\r\n        if (option.alignRight) {\r\n            const textMetrics: TextMetrics = this.ctx.measureText(option.text);\r\n            option.x = (option.x + option.width) - textMetrics.width;\r\n            option.y = option.y - 6;\r\n        }\r\n        this.ctx.fillText(option.text, option.x, option.y);\r\n    }\r\n    // 画线\r\n    private drawLine(ctx: CanvasRenderingContext2D, option: { width: number, color: string }): void {\r\n        ctx.lineJoin = 'round';\r\n        ctx.lineWidth = option.width;\r\n        ctx.strokeStyle = option.color;\r\n        ctx.beginPath();\r\n\r\n        for (let index: number = 0; index < this.rects.length; index++) {\r\n            const rect: TpPricelineRect = this.rects[index];\r\n\r\n            // 第一个矩形，从起点开始\r\n            if (index === 0) {\r\n                ctx.moveTo(Math.round(rect.x), Math.round(rect.y));\r\n            } else {\r\n                // 非第一个，竖线部分\r\n                ctx.lineTo(Math.round(rect.x - 1), Math.round(rect.y));\r\n            }\r\n            // 矩形的左边到右边\r\n            ctx.lineTo(Math.round(rect.x + rect.width + 1), Math.round(rect.y));\r\n        }\r\n\r\n        ctx.stroke();\r\n    }\r\n    // 画背景和文字\r\n    private drawRect(option: TpPricelineRect): void {\r\n        // tslint:disable-next-line: max-line-length\r\n        const canvasGradient: CanvasGradient = this.ctx.createLinearGradient(0, this.canvasOption.height - this.canvasOption.carveHeight, 0, this.canvasOption.height);\r\n        canvasGradient.addColorStop(0, this.canvasOption.startColor);\r\n        canvasGradient.addColorStop(1, this.canvasOption.endColor);\r\n        this.ctx.fillStyle = canvasGradient;\r\n        this.ctx.fillRect(option.x, option.y, option.width, option.height);\r\n        this.drawText({ ...option, alignRight: true });\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpPricelineComponent } from './TpPricelineComponent';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiButtongroupModule } from '@cloud/tiny3';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  imports:[\r\n    CommonModule,\r\n    FormsModule,\r\n    TiButtongroupModule\r\n  ],\r\n  exports: [TpPricelineComponent],\r\n  declarations: [TpPricelineComponent]\r\n})\r\n\r\nexport class TpPricelineModule {}\r\nexport { TpPricelineComponent, TpPricelineItem } from './TpPricelineComponent';\r\n","import { AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, Renderer2, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { TiFilePreviewInfo, TiImagepreviewComponent, TiModalService , TiBaseComponent} from '@cloud/tiny3';\r\n\r\n/**\r\n * 商品预览组件\r\n *\r\n * 该组件用来展示商品的预览内容，包括上方的主预览图和下方的缩略图\r\n *\r\n * 10.0.3 增加\r\n *\r\n * <example-url>../tinyplus3demo/#/productpreview/productpreview-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-productpreview',\r\n    templateUrl: './productpreview.html',\r\n    styleUrls: ['./productpreview.less']\r\n})\r\nexport class TpProductpreviewComponent extends TiBaseComponent implements OnInit, OnChanges, AfterViewInit {\r\n    /**\r\n     * 每页显示的小图个数\r\n     */\r\n    private static readonly ITEM_PER_PAGE: number = 4;\r\n\r\n    /**\r\n     * 预览文件列表\r\n     */\r\n    @Input() files: Array<TiFilePreviewInfo> = [];\r\n\r\n    /**\r\n     * @ignore\r\n     * 缩略图列表，翻页时重新设置\r\n     */\r\n    public thumbList: Array<TiFilePreviewInfo> = [];\r\n\r\n    /**\r\n     * @ignore 记录当前预览的商品索引\r\n     */\r\n    public currentPreviewIndex: number = -1;\r\n\r\n    /**\r\n     * @ignore 缩略图当前页\r\n     */\r\n    public currentThumbPage: number = 1;\r\n\r\n    /**\r\n     * @ignore 缩略图总页数\r\n     *\r\n     */\r\n    public totalThumbPage: number = 1;\r\n\r\n    /**\r\n     * @ignore 内部变量\r\n     */\r\n    @ViewChild('productThumb') productThumbEle: ElementRef;\r\n\r\n    constructor(private tiModal: TiModalService, private render: Renderer2, private hostEleRef: ElementRef) {\r\n        super(hostEleRef, render);\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.render.addClass(this.productThumbEle.nativeElement.children[0], 'tp-product-preview-thumb-item-active');\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.files && changes.files.firstChange === false) {\r\n            this.files = changes.files.currentValue;\r\n            this.initThumb();\r\n            if (this.productThumbEle) {\r\n                this.setThumbList();\r\n            }\r\n            // 确保files接口变化时，第一个缩略图的选中样式生效\r\n            setTimeout((): void => {\r\n                if (this.productThumbEle) {\r\n                    this.render.addClass(this.productThumbEle.nativeElement.children[0], 'tp-product-preview-thumb-item-active');\r\n                }\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.initThumb();\r\n    }\r\n\r\n    /**\r\n     * 初始化缩略图相关变量\r\n     */\r\n    private initThumb(): void {\r\n        if (this.files && this.files.length > 0) {\r\n            this.currentPreviewIndex = 0;\r\n            // 计算总页数\r\n            this.totalThumbPage = Math.ceil(this.files.length / TpProductpreviewComponent.ITEM_PER_PAGE);\r\n            this.currentThumbPage = 1;\r\n            this.files.length >= TpProductpreviewComponent.ITEM_PER_PAGE ?\r\n                this.thumbList = this.files.slice(0, TpProductpreviewComponent.ITEM_PER_PAGE) : this.thumbList = this.files;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore 主图查看\r\n     * @param event: 事件\r\n     * @param index: 当前选中项在this.thumbList中的索引,this.thumbList中始终只有4项\r\n     */\r\n    onMouseenterThumb(event: any, index: number): void {\r\n        this.currentPreviewIndex = (this.currentThumbPage - 1) * TpProductpreviewComponent.ITEM_PER_PAGE + index ;\r\n        // 计算最后一页的缩略图个数\r\n        const thumbItemNumber: number = this.files.length % TpProductpreviewComponent.ITEM_PER_PAGE;\r\n        // 如果是最后一页，且最后一页不满4个\r\n        if (this.totalThumbPage > 1 && this.currentThumbPage === this.totalThumbPage && thumbItemNumber !== 0) {\r\n            this.currentPreviewIndex -= (TpProductpreviewComponent.ITEM_PER_PAGE - thumbItemNumber);\r\n        }\r\n\r\n        // 设置选中样式\r\n        const thumbItemEles: any = this.productThumbEle.nativeElement.children;\r\n        for (const item of thumbItemEles) {\r\n            this.render.removeClass(item, 'tp-product-preview-thumb-item-active');\r\n        }\r\n        this.render.addClass(event.target.parentElement, 'tp-product-preview-thumb-item-active');\r\n    }\r\n\r\n    /**\r\n     * @ignore 弹框中预览大图\r\n     */\r\n    onClickMain(event: any): void {\r\n        this.tiModal.open(TiImagepreviewComponent, {\r\n            id: this.id + '_productPreviewModal',\r\n            modalClass: 'tp-product-preview-modal',\r\n            context: {\r\n                index: this.currentPreviewIndex, // 当前文件索引\r\n                fileList: this.files, // 预览列表\r\n                id: this.id // 传递id\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @ignore 缩略图上一页\r\n     */\r\n    prev(): void {\r\n        if (this.currentThumbPage === 1) {\r\n            return;\r\n        }\r\n        this.currentThumbPage--;\r\n        this.setThumbList();\r\n    }\r\n\r\n    /**\r\n     * @ignore 缩略图下一页\r\n     */\r\n    next(): void {\r\n        if (this.currentThumbPage === this.totalThumbPage) {\r\n            return;\r\n        }\r\n        this.currentThumbPage++;\r\n        this.setThumbList();\r\n    }\r\n\r\n    /**\r\n     * 设置缩略图列表\r\n     */\r\n    private setThumbList(): void {\r\n        // undefined、null、false、string情况下，不处理\r\n        if (!this.files || typeof this.files === 'string' || (this.files && this.files.slice === undefined)) {\r\n            return;\r\n        }\r\n        // tslint:disable-next-line: max-line-length\r\n        this.thumbList = this.files.slice((this.currentThumbPage - 1) * TpProductpreviewComponent.ITEM_PER_PAGE, this.currentThumbPage * TpProductpreviewComponent.ITEM_PER_PAGE);\r\n\r\n        // 计算最后一页的缩略图个数\r\n        const thumbItemNumber: number = this.files.length % TpProductpreviewComponent.ITEM_PER_PAGE;\r\n        if (this.totalThumbPage > 1 && this.currentThumbPage === this.totalThumbPage && thumbItemNumber !== 0) {\r\n            this.thumbList = this.files.slice(this.files.length - TpProductpreviewComponent.ITEM_PER_PAGE, this.files.length);\r\n        }\r\n\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiIconModule, TiImagepreviewModule, TiModalModule, TiZoomModule, TiOutlineModule } from '@cloud/tiny3';\r\n\r\nimport { TpProductpreviewComponent } from './TpProductpreviewComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiImagepreviewModule,\r\n    TiIconModule,\r\n    TiModalModule,\r\n    TiZoomModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpProductpreviewComponent],\r\n  declarations: [TpProductpreviewComponent]\r\n})\r\nexport class TpProductpreviewModule {}\r\nexport { TpProductpreviewComponent } from './TpProductpreviewComponent';\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * 进度条提示类型，percent-百分数 fraction-分数\r\n */\r\nexport type TpProgressbarLabelType = 'percent' | 'fraction';\r\n\r\n/**\r\n * @ignore\r\n * 内部使用\r\n */\r\nexport type TpProgressbarWarnLevel = 'normal' | 'warn' | 'alarm';\r\n\r\n/**\r\n *  进度条组件\r\n *\r\n *  本组件是ti-progressbar 的业务封装，有2种使用场景：\r\n *\r\n *  1.无预警：进度条[必选]+百分比或分数[必选]\r\n *\r\n *  2.有预警：进度条[必选]+百分比或分数[必选]\r\n *\r\n *  场景2设置了warn 和 alarm 接口后生效\r\n *\r\n *  10.0.1 新增\r\n *\r\n * <example-url>../tinyplus3demo/#/progressbar/progressbar-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-progressbar',\r\n    templateUrl: './progressbar.html',\r\n    styleUrls: ['./progressbar.less']\r\n})\r\nexport class TpProgressbarComponent extends TiBaseComponent {\r\n    /**\r\n     * label 显示类型，\r\n     */\r\n    @Input() labelType: TpProgressbarLabelType = 'percent';\r\n    /**\r\n     * 当前值\r\n     */\r\n    @Input() value: number;\r\n    /**\r\n     * 最大值\r\n     */\r\n    @Input() max: number;\r\n    /**\r\n     * 橙色（告警）的临界值,\r\n     */\r\n    @Input() warn: number;\r\n    /**\r\n     * 红色（告警）的临界值\r\n     */\r\n    @Input() alarm: number;\r\n    /**\r\n     * label单位\r\n     */\r\n    @Input() unit: string;\r\n    /**\r\n     * @ignore\r\n     * 预警类型样式类别\r\n     */\r\n    public warnLevel: TpProgressbarWarnLevel;\r\n\r\n    /**\r\n     * @ignore\r\n     * 显示文字内容\r\n     */\r\n    public label: string;\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.updateLabel();\r\n        this.updateWarnLevel();\r\n    }\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n\r\n        if (changes['value'] && !changes['value'].firstChange ||\r\n            (changes['warn'] && !changes['warn'].firstChange) ||\r\n            changes['alarm'] && !changes['alarm'].firstChange) {\r\n            this.updateLabel();\r\n            this.updateWarnLevel();\r\n        }\r\n        if (changes['labelType'] && !changes['labelType'].firstChange) {\r\n            this.updateLabel();\r\n        }\r\n    }\r\n\r\n    private updateWarnLevel(): void {\r\n        if (this.warn && this.alarm) {\r\n            if (this.value > this.alarm) {\r\n                this.warnLevel = 'alarm';\r\n            } else if (this.value > this.warn) {\r\n                this.warnLevel = 'warn';\r\n            } else {\r\n                this.warnLevel = 'normal';\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateLabel(): void {\r\n        // 百分比保留两位小数\r\n        this.label = this.labelType === 'percent' ? `${Math.round(this.value / this.max * 10000) / 100}%` : `${this.value}/${this.max}`;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpProgressbarComponent } from './TpProgressbarComponent';\r\nimport { TiProgressbarModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n      CommonModule,\r\n      TiProgressbarModule\r\n  ],\r\n  exports: [TpProgressbarComponent],\r\n  declarations: [TpProgressbarComponent]\r\n})\r\nexport class TpProgressbarModule {}\r\nexport { TpProgressbarComponent, TpProgressbarLabelType } from './TpProgressbarComponent';\r\n","import { Component, EventEmitter, Input, Output, SimpleChanges } from '@angular/core';\r\nimport { TiBaseComponent, Util } from '@cloud/tiny3';\r\nimport { TpDiscoutsConfig } from '../discounts/TpDiscountsModule';\r\n\r\nexport interface TpHelpOptions {\r\n    /**\r\n     * 提示说明文本\r\n     */\r\n    iconTip: string;\r\n    /**\r\n     * 提示框最大宽度\r\n     */\r\n    iconTipMaxWidth?: string;\r\n    /**\r\n     * 提示语方向\r\n     */\r\n    iconTipPosition?: string;\r\n}\r\n\r\n/**\r\n * 购买清单组件\r\n * <example-url>../tinyplus3demo/#/purchaselist/purchaselist-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-purchaselist',\r\n    templateUrl: './purchaselist.html',\r\n    styleUrls: ['./purchaselist.less']\r\n})\r\n\r\nexport class TpPurchaselistComponent extends TiBaseComponent {\r\n    /**\r\n     * 购物清单名称\r\n     */\r\n    @Input() purchaseTitle: string;\r\n    /**\r\n     * 是否存在一键清空功能\r\n     */\r\n    @Input() enableClear: boolean = true;\r\n    /**\r\n     * 费用总金额\r\n     */\r\n    @Input() totalPrice: number = 0;\r\n    /**\r\n     * 优惠金额\r\n     */\r\n    @Input() discountPrice: number = 0;\r\n    /**\r\n     * 货币精度设置接口\r\n     * 自定义保留位数，例如：1.2-4，表示整数部分最少保留1位，小数部分最小保留2位，小数部分最大保留4位。\r\n     * 默认值取自各局点\r\n     */\r\n    @Input() numFormat: string;\r\n    /**\r\n     * 优惠详情配置接口。参考discounts组件\r\n     */\r\n    @Input() purchaseDiscoutsConfig: TpDiscoutsConfig;\r\n    /**\r\n     * @ignore\r\n     * 清单是否没有商品\r\n     */\r\n    @Input() hasNodata: boolean;\r\n    /**\r\n     * tip配置\r\n     */\r\n    @Input() helpOptions: TpHelpOptions;\r\n    /**\r\n     * 底部协议部分\r\n     */\r\n    @Input() footerProtocol: string;\r\n    /**\r\n     * 底部温馨提示语部分\r\n     */\r\n    @Input() footerPrompt: string;\r\n    /**\r\n     * 订单确认按钮文本\r\n     */\r\n    @Input() buttonText: string;\r\n    /**\r\n     * 用户可根据实际场景决定确认按钮是否禁用（比如未实名认证等）\r\n     *\r\n     * 10.1.1新增接口\r\n     */\r\n    @Input() buttonDisabled: boolean = true;\r\n    /**\r\n     * 采购产品数量统计\r\n     */\r\n    @Input() total: number = 0;\r\n    /**\r\n     * 订单确认按钮点击事件\r\n     */\r\n    @Output() readonly confirm: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * 头部一键清空按钮点击事件\r\n     */\r\n    @Output() readonly clear: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * 可选优惠项切换选择项时触发\r\n     *\r\n     * 10.1.2 新增接口\r\n     */\r\n    @Output() readonly discountChange: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * @ignore\r\n     */\r\n    public emptyText: string = '--';\r\n    /**\r\n     * @ignore\r\n     * 协议是否勾选\r\n     */\r\n    public checked: boolean = false;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public discountsChange($event: any) {\r\n        this.discountChange.emit($event);\r\n    }\r\n    onCheckboxNgModelChange(model: boolean) {\r\n        // Todo 禁用tip\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 确认按钮点击触发\r\n     */\r\n    public clickFn(): void {\r\n        this.confirm.emit();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 一键清空\r\n     */\r\n    public clearFn(): void {\r\n        this.clear.emit();\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * <example-url>../tinyplus3demo/#/purchaselist/purchaselist-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-purchaseheader-item',\r\n    templateUrl: './purchaseitem.html',\r\n    styleUrls: ['./purchaselist-item.less']\r\n})\r\n\r\nexport class TpPurchaseitemComponent extends TiBaseComponent {\r\n    /**\r\n     * 商品信息是否带有region\r\n     */\r\n    @Input() hasArea: boolean = false;\r\n    /**\r\n     * 单个产品右侧叉号点击事件\r\n     */\r\n    @Output() readonly close: EventEmitter<any> = new EventEmitter();\r\n    /**\r\n     * @ignore\r\n     */\r\n    public closeFn(): void {\r\n        this.close.emit();\r\n    }\r\n}\r\n","import { Component } from '@angular/core';\r\n/**\r\n * <example-url>../tinyplus3demo/#/purchaselist/purchaselist-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-purchase-nodata',\r\n    templateUrl: './purchase-nodata.html',\r\n    styleUrls: ['./purchaselist-nodata.less']\r\n})\r\n\r\nexport class TpPurchaseNodataComponent {\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TiLocaleModule, TiCheckboxModule, TiButtonModule, TiOutlineModule } from '@cloud/tiny3';\r\nimport { TpLocaleModule } from '../../pipes/locale/TpLocaleModule';\r\nimport { TpPurchaselistComponent } from './TpPurchaselistComponent';\r\nimport { TpPurchaseitemComponent } from './TpPurchaseitemComponent';\r\nimport { TpPurchaseNodataComponent } from './TpPurchaseNodataComponent';\r\nimport { TpDiscountsModule } from '../discounts/TpDiscountsModule';\r\nimport { TpHelptipModule } from '../helptip/TpHelptipModule';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\n@NgModule({\r\n  imports: [TiButtonModule,\r\n            CommonModule,\r\n            FormsModule,\r\n            TpIconModule,\r\n            TpLocaleModule,\r\n            TiLocaleModule,\r\n            TpDiscountsModule,\r\n            TpHelptipModule,\r\n            TiOutlineModule,\r\n            TiCheckboxModule],\r\n  exports: [TpPurchaselistComponent, TpPurchaseitemComponent, TpPurchaseNodataComponent],\r\n  declarations: [TpPurchaselistComponent, TpPurchaseitemComponent, TpPurchaseNodataComponent]\r\n})\r\n\r\nexport class TpPurchaselistModule {}\r\nexport { TpHelpOptions, TpPurchaselistComponent } from './TpPurchaselistComponent';\r\nexport { TpPurchaseitemComponent } from './TpPurchaseitemComponent';\r\nexport { TpPurchaseNodataComponent } from './TpPurchaseNodataComponent';\r\n","import { Component, ContentChild, EventEmitter, Input, Output, TemplateRef } from '@angular/core';\r\n\r\nimport { TiBaseComponent, TiLocale, TiPositionType } from '@cloud/tiny3';\r\n\r\nexport interface TpRecommendItem {\r\n    /**\r\n     * 显示的区域名称\r\n     */\r\n    displayName: string;\r\n    /**\r\n     * 资源数量\r\n     */\r\n    num?: number;\r\n    /**\r\n     * tip提示的内容\r\n     */\r\n    tip?: string | TemplateRef<any>;\r\n    /**\r\n     * tip提示方位\r\n     */\r\n    tipPosition?: TiPositionType;\r\n    /**\r\n     * 是否显示资源数量，默认显示\r\n     */\r\n    showNum?: boolean;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 推荐组件，优先向用户推荐可用区中的某些区域\r\n *\r\n * <example-url>../tinyplus3demo/#/recommend/recommend-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-recommend',\r\n    templateUrl: './recommend.html',\r\n    styleUrls: ['./recommend.less'],\r\n    // host: {\r\n    //     '[class.tp-recommend-wrapper]': 'true'\r\n    // }\r\n})\r\n\r\nexport class TpRecommendComponent extends TiBaseComponent {\r\n    /**\r\n     * 供选择的数据\r\n     */\r\n    @Input() items: Array<TpRecommendItem>;\r\n    /**\r\n     * 组件左侧的文本\r\n     */\r\n    @Input() label: string;\r\n    /**\r\n     * 选中事件，点击某项时向外通知该选中项\r\n     */\r\n    @Output() readonly select: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     * 自定义item左侧的DOM\r\n     */\r\n    @ContentChild('beforeItem', { static: true }) beforeItemTemplate: TemplateRef<any>;\r\n\r\n    /**\r\n     * @ignore 处理资源数量\r\n     */\r\n    public getNum(num: number): string {\r\n        return num > 99 ? '99+' : String(num);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public clickFn(item: any): void {\r\n        this.select.emit(item);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.label = this.label || TiLocale.getLocaleWords().tpRecommend.label;\r\n    }\r\n}\r\n","import { Component, ContentChild, Input, TemplateRef } from \"@angular/core\";\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n *\r\n * 智能提示组件\r\n *\r\n * <example-url>../tinyplus3demo/#/smartalert/smartalert-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-smartalert',\r\n    templateUrl: 'smartalert.html',\r\n    styleUrls: ['./smartalert.less']\r\n})\r\n\r\nexport class TpSmartalertComponent extends TiBaseComponent {\r\n    /**\r\n     * 提示类型\r\n     */\r\n    @Input() type: 'prompt' | 'warn' | 'error' = 'prompt';\r\n    /**\r\n     * 样式大小\r\n     */\r\n    @Input() size: 'normal' | 'small' = 'normal';\r\n    /**\r\n     * 边框一直显示或是悬浮显示\r\n     */\r\n    @Input() border: 'always' | 'hover' = 'always';\r\n    /**\r\n     * @ignore 自定义左侧图标\r\n     */\r\n    @ContentChild('leftIcon', { static: true }) leftIconTemplate: TemplateRef<any>;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpSmartalertComponent } from './TpSmartalertComponent';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiIconModule } from '@cloud/tiny3';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiIconModule\r\n  ],\r\n  exports: [TpSmartalertComponent],\r\n  declarations: [TpSmartalertComponent]\r\n})\r\n\r\nexport class TpSmartalertModule {}\r\nexport { TpSmartalertComponent } from './TpSmartalertComponent';\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpRecommendComponent } from './TpRecommendComponent';\r\n\r\nimport { TpSmartalertModule } from '../smartalert/TpSmartalertModule';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TiOverflowModule, TiTipModule, TiOutlineModule } from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpSmartalertModule,\r\n    TiTipModule,\r\n    TiOverflowModule,\r\n    TpIconModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpRecommendComponent],\r\n  declarations: [TpRecommendComponent]\r\n})\r\n\r\nexport class TpRecommendModule {}\r\nexport { TpRecommendComponent, TpRecommendItem } from './TpRecommendComponent';\r\n","import { Component, ContentChild, EventEmitter, Input, Output, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\nimport { TiDominatorComponent, TiDropComponent, TiDroplistComponent, TiFormComponent, TiLocale } from '@cloud/tiny3';\r\n\r\nexport interface TpRegionItem {\r\n    /**\r\n     * 当前大区的名称文本\r\n     */\r\n    displayName: string;\r\n    /**\r\n     * 大区的一组地区\r\n     */\r\n    regions?: Array<TpRegion>;\r\n    /**\r\n     * 大区的另一组地区，亚太区下某些需要特殊处理的区域\r\n     */\r\n    special?: Array<TpRegion>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpRegion {\r\n    /**\r\n     * 当前区域的名称\r\n     */\r\n    displayName: string;\r\n    disabled?: boolean;\r\n    tipContent?: string;\r\n    tipPosition?: string;\r\n    /**\r\n     * 灰化的原因\r\n     */\r\n    title?: string;\r\n    /**\r\n     * 设置选项的标志块\r\n     *\r\n     * 对象类型，包含两个属性:1.text: 显示的文本；2.class:标志的样式；eg:{text: string; class: string}\r\n     */\r\n    sup?: {\r\n        text?: string;\r\n        class?: string;\r\n        /**\r\n         * 允许有多余的属性字段\r\n         */\r\n        [propName: string]: any;\r\n    };\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 区域选择组件\r\n *\r\n * 组件提供了[TpRegionUtil]{@link ../classes/TpRegionUtil.html}供某些业务处理数据。\r\n *\r\n * <example-url>../tinyplus3demo/#/region/region-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-region',\r\n    templateUrl: './region.html',\r\n    styleUrls: ['./region.less'],\r\n    providers: [TiFormComponent.getValueAccessor(TpRegionComponent)],\r\n    host: {\r\n        '(blur)': 'onBlur()'\r\n    }\r\n})\r\n// TODO：和Select有重复代码，未来设法消除。\r\nexport class TpRegionComponent extends TiFormComponent {\r\n  // TODO: add explicit constructor\r\n\r\n  // TODO: add explicit constructor\r\n\r\n    /**\r\n     * 下拉面板展示的数据列表\r\n     */\r\n    @Input() items: Array<TpRegionItem>;\r\n    /**\r\n     * 预留文本\r\n     */\r\n    // tslint:disable-next-line: no-input-rename\r\n    @Input('placeholder') placeholderText: string;\r\n    /**\r\n     * 选中事件，选中项没有变化\r\n     */\r\n    @Output() readonly select: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * 选中事件，选中项变化\r\n     */\r\n    // @Output() readonly change: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDominatorComponent, { static: true }) TiDominatorCom: TiDominatorComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDropComponent, {static: false}) dropCom: TiDropComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDroplistComponent, {static: false}) droplistCom: TiDroplistComponent;\r\n    /**\r\n     * @ignore\r\n     * 获取到用户自定义的按钮标志模板\r\n     */\r\n    @ContentChild('sup', { static: true }) public supTemplate: TemplateRef<any>;\r\n   /**\r\n    * @ignore\r\n    * 灰化时默认提示文本\r\n    */\r\n    public dafaultDisableReason: string = TiLocale.getLocaleWords().tpRegion.unSupport;\r\n    /**\r\n     * @ignore\r\n     * 是否为ctc局点，面板结构类似于hws，选块较小\r\n     */\r\n    public isSmallItem: boolean = TiLocale.getLocaleWords().tpRegionSmallItem;\r\n    /**\r\n     * @ignore\r\n     * 是否为非hws非ctc局点，面板使用droplist，以select形式呈现\r\n     */\r\n    public isUseDroplist: boolean = TiLocale.getLocaleWords().tpRegionSelectStyle;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public selectedItem: TpRegionItem;\r\n    // ngOnInit(): void {\r\n    //     // TODO：兼容disable和disabled\r\n    // }\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes['items']?.currentValue?.length > 0 && this.model) {\r\n            this.loopItemsFindSelectedItem();\r\n        }\r\n    }\r\n    ngAfterViewInit(): void {\r\n        super.ngAfterViewInit();\r\n        if (this.isUseDroplist) {\r\n            this.setFocusableElems(this.TiDominatorCom.getFocusableElems());\r\n        } else {\r\n            this.setFocusableElems(this.TiDominatorCom.getFocusableElems()\r\n            .concat(this.dropCom.nativeElement));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    ngOnModelChange(): void {\r\n        if (this.model && this.items?.length > 0) {\r\n            this.loopItemsFindSelectedItem();\r\n        } else {\r\n            this.selectedItem = undefined;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onMousedown(event: MouseEvent): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.togglePanel();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(item: any, event: MouseEvent): void {\r\n        if (item.disabled) {\r\n            // 防止dominator 失焦blur\r\n            event.preventDefault();\r\n\r\n            return;\r\n        }\r\n        if (!this.model || this.model !== item) {\r\n            this.model = item;\r\n        } else {\r\n            this.select.emit(item);\r\n        }\r\n        this.dropCom.hide();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onBlur(): void {\r\n        this.dropCom && this.dropCom.hide();\r\n        this.droplistCom && this.droplistCom.hide();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 记录下拉面板展开状态\r\n     */\r\n    public get dropshow(): boolean {\r\n        if (this.isUseDroplist) {\r\n            return this.droplistCom ? this.droplistCom.isShow : false;\r\n        } else {\r\n            return  this.dropCom ? this.dropCom.isShow : false;\r\n        }\r\n    }\r\n    /**\r\n     * 面板的打开或关闭，统一处理drop和droplist\r\n     */\r\n    private togglePanel(): void {\r\n        if (this.dropshow) {\r\n            this.dropCom && this.dropCom.hide();\r\n            this.droplistCom && this.droplistCom.hide();\r\n        } else {\r\n            this.dropCom && this.dropCom.show();\r\n            this.droplistCom && this.droplistCom.show();\r\n        }\r\n    }\r\n    private loopItemsFindSelectedItem(): void {\r\n        this.items.some((item: TpRegionItem): boolean => {\r\n            if (item.regions && this.findSelectedItem(item.regions, item)) {\r\n                return true;\r\n            } else if (item.special) {\r\n                return this.findSelectedItem(item.special, item);\r\n            }\r\n\r\n            return false;\r\n        });\r\n    }\r\n\r\n    private findSelectedItem(data: Array<TpRegion>, item: TpRegionItem): boolean {\r\n        const flag: boolean =  data.some((region: TpRegion): boolean => {\r\n            if (region === this.model) {\r\n                this.selectedItem = item;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n        return flag;\r\n    }\r\n}\r\n","import { TiLocale, Util } from '@cloud/tiny3';\r\n\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\n\r\nimport { TpRegionItem } from './TpRegionComponent';\r\n/**\r\n * 提供了转化数据的方法，可以将特定的不可用的数据转化为[TpRegionComponent]{@link ../components/TpRegionComponent.html}的可用数据\r\n */\r\nexport class TpRegionUtil {\r\n    public static getRegionList(regionArr: Array<any>): Array<TpRegionItem> {\r\n        let result: Array<TpRegionItem> = [];\r\n        if (!Util.isArray(regionArr)) {\r\n            return result;\r\n        }\r\n        const isSmallItem: boolean = TiLocale.getLocaleWords().tpRegionSmallItem;\r\n        result = isSmallItem ? this.processCTCData(regionArr) : TpRegionUtil.processHWSData(regionArr);\r\n\r\n        return result;\r\n    }\r\n    /**\r\n     * 在对象数组中，查找某一个对象，可以模糊匹配，返回其索引\r\n     */\r\n    private static findIndex(arr: Array<any>, target: any): number {\r\n        if (!Util.isArray(arr)) {\r\n            return -1;\r\n        }\r\n        let result: any;\r\n        for (const item of arr) {\r\n            const itemKey: Array<string> = Object.keys(item);\r\n            const targetKey: Array<string> = Object.keys(target);\r\n            let flag: boolean = true;\r\n            for (const key of targetKey) {\r\n                if (itemKey.indexOf(key) === -1 || target[key] !== item[key]) {\r\n                    flag = false;\r\n                }\r\n            }\r\n            if (flag) {\r\n                result = arr.indexOf(item);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (result === undefined) {\r\n            result = -1;\r\n        }\r\n\r\n        return result;\r\n    }\r\n    /**\r\n     * 类似于findIndex，返回最后一个模糊匹配元素的索引\r\n     */\r\n    private static findLastIndex(arr: any, item: any) {\r\n        if (!Util.isArray(arr)) {\r\n            return -1;\r\n        }\r\n        const originalArr: Array<any> = arr;\r\n        const reservedArr: Array<any> = arr.reverse();\r\n        const index: number = TpRegionUtil.findIndex(reservedArr, item);\r\n        if (index === -1) {\r\n            return -1;\r\n        } else {\r\n            return originalArr.indexOf(reservedArr[index]);\r\n        }\r\n\r\n    }\r\n    private static processHWSData(regionArr): Array<TpRegionItem> {\r\n        let result: Array<TpRegionItem> = [];\r\n\r\n        for (let region of regionArr) {\r\n            // 过滤掉属性isAlliance 或 isSelfDevelop为true的region\r\n            if (region.isAlliance || region.isSelfDevelop) {\r\n                continue;\r\n            }\r\n            const index: number = TpRegionUtil.findLastIndex(result, {displayName: region.geoCategory}); // 判断已处理数据中有无该大区\r\n            const key: string = region.geoArea === '31' ? 'special' : 'regions'; // 当geoArea为31时，则表示当前项属于亚太区下需要做特殊处理\r\n\r\n            // result中没有该大区时：大区名称和id都取geoCategory；存放各区域的属性为special/regions，为数组类型，直接将当前项push到该数组中\r\n            if (index === -1) {\r\n                let itemObj: TpRegionItem = {\r\n                    displayName: region.geoCategory\r\n                };\r\n                itemObj[key] = [];\r\n                itemObj[key].push(region);\r\n                result.push(itemObj);\r\n                continue;\r\n            }\r\n\r\n            // result中有该大区时：判断存放当前项的属性为special/regions是否存在，如果不存在则令该属性为空数组，存在直接将当前项push到该数组中\r\n            if (Util.isUndefined(result[index][key])) {\r\n                result[index][key] = [];\r\n            }\r\n\r\n            result[index][key].push(region);\r\n\r\n            CfUtil.getUser()\r\n                .then((user: any) => {\r\n                const isNonsupportRegionFn: (nonsupportRegions: any, regionId: any,\r\n                                             supportRegions: any) => boolean = CfUtil.isNonsupportRegion();\r\n                if (typeof isNonsupportRegionFn === 'function') {\r\n                    region.disabled = isNonsupportRegionFn(user.nonsupportRegions, region.regionId, user.supportRegions);\r\n                }\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private static processCTCData(regionArr): Array<TpRegionItem> {\r\n        // ctc下的数据，由组件装配成A-G, H-K, L-S, T-Z四个大区，先定义四个大区对象，循环传入参数，装入四个对象\r\n        let result: Array<TpRegionItem> = [\r\n            {displayName: 'A-G', regions: []},\r\n            {displayName: 'H-K', regions: []},\r\n            {displayName: 'L-S', regions: []},\r\n            {displayName: 'T-Z', regions: []}\r\n        ];\r\n\r\n        regionArr.forEach((region: {shortName: string}): void => {\r\n            if (!region.shortName) {\r\n                return;\r\n            }\r\n            if (region.shortName.charCodeAt(0) >= 65 && region.shortName.charCodeAt(0) <= 71\r\n                || region.shortName.charCodeAt(0) >= 97 && region.shortName.charCodeAt(0) <= 103) {\r\n                    TpRegionUtil.pushRegion(result[0].regions, region);\r\n            } else if (region.shortName.charCodeAt(0) >= 72 && region.shortName.charCodeAt(0) <= 75\r\n                || region.shortName.charCodeAt(0) >= 104 && region.shortName.charCodeAt(0) <= 107) {\r\n                TpRegionUtil.pushRegion(result[1].regions, region);\r\n            } else if (region.shortName.charCodeAt(0) >= 76 && region.shortName.charCodeAt(0) <= 83\r\n                || region.shortName.charCodeAt(0) >= 108 && region.shortName.charCodeAt(0) <= 115) {\r\n                TpRegionUtil.pushRegion(result[2].regions, region);\r\n            } else if (region.shortName.charCodeAt(0) >= 84 && region.shortName.charCodeAt(0) <= 90\r\n                || region.shortName.charCodeAt(0) >= 116 && region.shortName.charCodeAt(0) <= 122) {\r\n                TpRegionUtil.pushRegion(result[3].regions, region);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private static pushRegion(regions: Array<TpRegionItem>, region: any): void {\r\n        const index: number = regions.findIndex((item: TpRegionItem): boolean => item.displayName === region.ascription);\r\n        if (index > -1) {\r\n            regions[index].project.push(region);\r\n        } else {\r\n            const regionObj: TpRegionItem = {\r\n                displayName: region.ascription,\r\n                project: [region]\r\n            };\r\n            regions.push(regionObj);\r\n        }\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TiDominatorModule, TiDroplistModule, TiDropModule, TiIconModule, TiListModule, TiTipModule } from '@cloud/tiny3';\r\n\r\nimport { TpRegionComponent } from './TpRegionComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TiDroplistModule,\r\n    TiDominatorModule,\r\n    TiListModule,\r\n    TiDropModule,\r\n    TiIconModule,\r\n    TiTipModule\r\n  ],\r\n  exports: [TpRegionComponent],\r\n  declarations: [TpRegionComponent]\r\n})\r\n\r\nexport class TpRegionModule {}\r\nexport { TpRegionComponent, TpRegionItem } from './TpRegionComponent';\r\nexport { TpRegionUtil } from './TpRegionUtil';\r\n","import { Component, ElementRef, EventEmitter, Input, Output, Renderer2, ViewChild } from '@angular/core';\r\nimport { TiLocale, TiFormComponent, Util, TiDominatorComponent, TiDropsearchComponent, TiButtongroupComponent } from '@cloud/tiny3';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n */\r\nexport interface TpRegionselectOption {\r\n    /**\r\n     * 地区名称\r\n     */\r\n    label: string;\r\n    /**\r\n     * 地区对应序列ID\r\n     */\r\n    id: string;\r\n    /**\r\n     * 当前地区的下级地区列表\r\n     */\r\n    nextLevel?: Array<TpRegionselectOption>;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n *\r\n * regionselect组件提供省、市、县三级区域的选择\r\n *\r\n * <example-url>../tinyplus3demo/#/regionselect/regionselect-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-regionselect',\r\n    templateUrl: './regionselect.html',\r\n    styleUrls: ['./regionselect.less'],\r\n    providers: [TiFormComponent.getValueAccessor(TpRegionselectComponent)],\r\n    host: {\r\n        '(blur)': 'onBlur()'\r\n    }\r\n})\r\n\r\nexport class TpRegionselectComponent extends TiFormComponent {\r\n    constructor(protected hostRef: ElementRef, protected renderer: Renderer2) {\r\n        super(hostRef, renderer);\r\n    }\r\n    /**\r\n     * 区域选择总数据\r\n     */\r\n    @Input() regionselectOption: Array<TpRegionselectOption>; // 下拉总数据\r\n    /**\r\n     * 无数据时组件下展显示，需服务自行配置\r\n     */\r\n    @Input() noDataText: string = '...';\r\n    /**\r\n     * 是否支持搜索\r\n     */\r\n    @Input() searchable: boolean = false;\r\n    /**\r\n     * 区域点击选择之后触发该事件\r\n     */\r\n    @Output() readonly change: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDominatorComponent, { static: true }) TiDominatorCom: TiDominatorComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiDropsearchComponent, { static: true }) dropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiButtongroupComponent, { static: true }) btnGroupCom: TiButtongroupComponent;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('wrapper', { static: false }) wrapperEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('buttongroup', { static: false }) buttongroupEle: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public labelKey: string = 'label';\r\n    /**\r\n     * @ignore\r\n     */\r\n    public showText: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public btnItems: Array<any>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public btnSelected: any;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public options: Array<TpRegionselectOption> = []; // 下拉实际数据,默认空数组\r\n    /**\r\n     * @ignore\r\n     */\r\n    public currentmodel: any;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public dropshow: boolean; // 记录下拉面板展开状态\r\n    private regionArr: Array<any> = [];\r\n    private hasFoundId: boolean; // 标志量 是否根据id找到匹配项\r\n    private isSpecialZone: boolean; // 标志量 是否为直辖市\r\n    private isNotLastOne: boolean = true; // 标志量 是否为最后一级\r\n    private classifications: Array<any>;\r\n    private classificationLevel: number = 0; // 当前正在选择区域项的等级，省为0，市为1，区为2\r\n    private currentClassificationsLength: number = 0; // 当前已选择区域项的等级，省为0，市为1，区为2\r\n    private cfRegionSelectSeparativeSign: string = '-';\r\n    private originSuggestions: Array<TpRegionselectOption>;\r\n    private hasadjustWidth: boolean;\r\n    private oldSearchable: boolean = undefined;\r\n    /**\r\n     * @ignore\r\n     */\r\n    writeValue(val: any): void {\r\n        if (!val) {\r\n            return;\r\n        } else {\r\n            this.model = val;\r\n        }\r\n        this.initSelectedData();\r\n    }\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.classifications = [\r\n            {\r\n                id: 'province',\r\n                text: TiLocale.getLocaleWords().tpRegionselect.regionSelect_province_label\r\n            }, {\r\n                id: 'city',\r\n                text: TiLocale.getLocaleWords().tpRegionselect.regionSelect_city_label\r\n            }, {\r\n                id: 'country',\r\n                text: TiLocale.getLocaleWords().tpRegionselect.regionSelect_county_label\r\n            }\r\n        ];\r\n        this.model = Util.isUndefined(this.model) ? {} : this.model;\r\n        this.hasadjustWidth = false;\r\n        this.options = this.regionselectOption;\r\n        this.getBtnItems();\r\n        this.changePlaceholder();\r\n        this.changeBtnRight();\r\n        this.changeSelectedData();\r\n    }\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        super.ngAfterViewInit();\r\n        this.setFocusableElems(this.TiDominatorCom.getFocusableElems());\r\n    }\r\n    // tslint:disable-next-line:use-life-cycle-interface\r\n    ngAfterViewChecked(): void {\r\n        super.ngAfterViewChecked();\r\n        if (this.searchable !== this.oldSearchable) {\r\n            this.oldSearchable = this.searchable;\r\n            if (this.searchable) {\r\n                this.setFocusableElems(this.TiDominatorCom.getFocusableElems()\r\n                    .concat(this.dropCom.getFocusableElems()));\r\n            } else {\r\n                this.setFocusableElems(this.TiDominatorCom.getFocusableElems());\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onMousedownFn(event: MouseEvent): void {\r\n        event.preventDefault();  // 防止按钮聚焦\r\n        event.stopPropagation();  // 阻止事件冒泡到document\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onBlur(): void {\r\n        this.dropCom.hideWithoutFocus();\r\n        this.dropshow = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击关闭或隐藏下拉面板\r\n     */\r\n    public onClickFn(event: MouseEvent): void {\r\n        if (this.dropCom.isShow) {\r\n            this.dropCom.hide();\r\n            this.dropshow = false;\r\n        } else {\r\n            this.dropCom.show();\r\n            this.dropshow = true;\r\n            if (!this.hasadjustWidth) {\r\n                const btns: NodeListOf<Element> = document.querySelectorAll('.ti3-btn-item');\r\n                const extraWidth: number = this.getExtraWidth();\r\n                const width: number = extraWidth / btns.length;\r\n                btns.forEach((btn: any) => {\r\n                    const oriWidth: number = btn.offsetWidth;\r\n                    this.renderer.setStyle(btn, 'width', oriWidth + width + 'px');\r\n                });\r\n                this.hasadjustWidth = true;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 选择数据之后触发事件\r\n     */\r\n    public onSelect(option: any): void {\r\n        this.onSelectFn(option);\r\n        this.change.emit(option);\r\n        const event: any = window.event;\r\n    }\r\n\r\n    private onSelectFn(selectedRegion: TpRegionselectOption): void {\r\n        const currentBtn: any = this.btnItems[this.classificationLevel]; // 当前准备选择的按钮等级\r\n        currentBtn.selectedText = selectedRegion.label; // 等级名称获取\r\n        // 判断选择项是否是曾经已选择项\r\n        const isChosenOption: boolean = this.btnItems.some((btnItem: any) => {\r\n            return btnItem.selectedId === selectedRegion.id;\r\n        });\r\n        if (!isChosenOption) {\r\n            this.currentClassificationsLength = this.btnItems.findIndex((btnItem: any) =>\r\n                btnItem.id === this.btnSelected.id); // 获取当前已选择的级别（0、1、2）\r\n            this.btnItems.forEach((item: any, index: number) => {\r\n                if (index > this.currentClassificationsLength) {\r\n                    item.selectedText = item.text;\r\n                    item.originId = '';\r\n                    item.selectedId = '';\r\n                }\r\n            });\r\n        }\r\n\r\n        this.btnItems[this.classificationLevel].selectedId = selectedRegion.id;\r\n        this.changeSelectedData();\r\n        this.isNotLastOne = this.classificationLevel < this.btnItems.length - 1;\r\n        if (this.isNotLastOne) {\r\n            this.classificationLevel++;\r\n            this.currentClassificationsLength++;\r\n            this.btnItems[this.classificationLevel].originId = this.btnItems[this.classificationLevel].originId || selectedRegion.id;\r\n            this.handleOriginSuggestions();\r\n            this.changeDropdownSuggestions();\r\n\r\n            /**\r\n             * 1、当子选项只有一项，且子选项id与当前项id相同，证明为同一区域级别\r\n             * 2、同一区域级别情况下，如果子选项不是最后一级，证明为直辖市，需要自动跳过子选项的选择\r\n             * 3、同一区域级别情况下，如果子选项是最后一级，证明为直辖县，则正常显示\r\n             */\r\n            if (this.originSuggestions.length === 1 &&\r\n                (this.originSuggestions[0].id === selectedRegion.id\r\n                    && this.classificationLevel < this.btnItems.length - 1)) {\r\n                this.btnItems[this.classificationLevel].noDataDisable = true;\r\n                this.onSelectFn(this.originSuggestions[0]);\r\n            } else {\r\n                this.btnItems[this.classificationLevel].noDataDisable = false;\r\n                this.btnSelected = this.btnItems[this.classificationLevel];\r\n                this.btnChangeFn();\r\n            }\r\n        } else {\r\n            // 点击最低级别地区之后，面板会收起\r\n            this.dropshow = false;\r\n        }\r\n        this.changePlaceholder();\r\n        this.changeBtnRight();\r\n    }\r\n\r\n    // 当选择区域后，会更改selectedData数据\r\n    private changeSelectedData(): void {\r\n        const selectedTextArr: Array<any> = [];\r\n        this.btnItems.forEach((item: any, index: number) => {\r\n            const hasChosen: boolean = item.selectedText !== item.text;\r\n            if (hasChosen) {\r\n                if (index === this.classificationLevel) {\r\n                    this.model[item.id] = {\r\n                        id: item.selectedId,\r\n                        label: item.selectedText\r\n                    };\r\n                }\r\n                if (item.selectedText && !item.noDataDisable) {\r\n                    selectedTextArr.push(item.selectedText);\r\n                }\r\n                this.model.id = item.selectedId;\r\n                this.model.level = index;\r\n            } else {\r\n                this.model[item.id] = {};\r\n            }\r\n        });\r\n        this.model.text = selectedTextArr.join(this.cfRegionSelectSeparativeSign);\r\n        // 改变model地址触发modelchange事件发生\r\n        this.model = {...this.model};\r\n    }\r\n\r\n    // 获取按钮配置项\r\n    private getBtnItems(): void {\r\n        this.btnItems = this.classifications.map((classification: any) => {\r\n            classification.selectedText = classification.text;\r\n\r\n            return classification;\r\n        });\r\n        this.btnSelected = this.btnItems[0];\r\n    }\r\n    // 根据selected初始配置,逻辑处理\r\n    private initSelectedData(): void {\r\n        if ((this.model && !this.model.id) || !this.regionselectOption || !this.regionselectOption.length) {\r\n            return;\r\n        }\r\n        const regionIdArr: Array<any> = this.getRegionIdArr();\r\n        if (regionIdArr.length) {\r\n            this.getBtnItems();\r\n            this.btnChangeFn();\r\n            for (const item of regionIdArr) {\r\n                this.onSelectFn(item);\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:typedef\r\n    private getRegionIdArr() {\r\n        this.getSelectedOption(this.regionselectOption);\r\n\r\n        return this.regionArr;\r\n    }\r\n    // 根据selectedId 获取已选择数据详情\r\n    private getSelectedOption(items: Array<any>): void {\r\n        this.hasFoundId = false;\r\n        this.regionArr = [];\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i: number = 0; i < items.length; i++) {\r\n            if (items[i].id === this.model.id) {\r\n                this.hasFoundId = true;\r\n                const nextLevel: Array<TpRegionselectOption> = items[i].nextLevel;\r\n                if (nextLevel && nextLevel.length && nextLevel[0].id === items[i].id) {\r\n                    this.isSpecialZone = true;\r\n                }\r\n                if (this.isSpecialZone && !items[i].nextLevel[0].nextLevel) { // 直辖县\r\n                    this.regionArr.unshift({\r\n                        id: items[i].id,\r\n                        label: items[i].label\r\n                    });\r\n                }\r\n                this.regionArr.unshift({\r\n                    id: items[i].id,\r\n                    label: items[i].label\r\n                });\r\n                break;\r\n            }\r\n            if (items[i].nextLevel && items[i].nextLevel.length) {\r\n                this.getSelectedOption(items[i].nextLevel);\r\n                if (this.hasFoundId) {\r\n                    this.regionArr.unshift({\r\n                        id: items[i].id,\r\n                        label: items[i].label\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public btnChangeFn(): void {\r\n        const selectedBtn: any = this.btnItems.find((item: any) => item.id === this.btnSelected.id);\r\n        this.classificationLevel = this.btnItems.findIndex((item: any) => item === selectedBtn);\r\n        this.isNotLastOne = this.classificationLevel < this.btnItems.length - 1;\r\n        this.handleOriginSuggestions();\r\n        this.changeDropdownSuggestions();\r\n        if (this.model && this.model[selectedBtn.id]) {\r\n            const index: number = this.options.findIndex((item: any) => item.id === this.model[selectedBtn.id].id);\r\n            this.currentmodel = this.options[index];\r\n        }\r\n    }\r\n\r\n    private findIndex(): number {\r\n        return this.options.findIndex((item: any) => item.id === this.model.id);\r\n    }\r\n\r\n    private handleOriginSuggestions(): void {\r\n        let dropdownSuggestions: Array<any> = this.regionselectOption;\r\n        this.originSuggestions = [];\r\n        this.btnItems.forEach((item: any, index: number) => {\r\n            if (index > this.classificationLevel) {\r\n                return;\r\n            }\r\n            const currentData: any = dropdownSuggestions.find((dropdown: any): boolean => {\r\n                return dropdown.id === item.originId;\r\n            });\r\n            if (currentData && currentData.nextLevel && currentData.nextLevel.length) {\r\n                dropdownSuggestions = currentData.nextLevel;\r\n            }\r\n        });\r\n        if (!dropdownSuggestions) {\r\n            return;\r\n        }\r\n        // 根据id从小到大进行排序\r\n        dropdownSuggestions = dropdownSuggestions.sort((a: any, b: any) => {\r\n            return a.id - b.id;\r\n        });\r\n        dropdownSuggestions.forEach((item1: any) => {\r\n            this.originSuggestions.push({\r\n                id: item1.id,\r\n                label: item1.label,\r\n                nextLevel: item1.nextLevel\r\n            });\r\n        });\r\n    }\r\n\r\n    // 根据originId从原始数据中第一级往下寻找\r\n    private changeDropdownSuggestions(): void {\r\n        this.options = this.originSuggestions;\r\n    }\r\n\r\n    // 更改选择区域显示文本\r\n    private changePlaceholder(): void {\r\n        let showText: string = '';\r\n        this.btnItems.forEach((item: any, index: number) => {\r\n            if (item.noDataDisable) {\r\n                return;\r\n            }\r\n            const text: string = item.selectedText + ' ';\r\n            if (index === 0) {\r\n                showText += text;\r\n            } else {\r\n                // tslint:disable-next-line:prefer-template\r\n                showText += this.cfRegionSelectSeparativeSign + ' ' + text;\r\n            }\r\n        });\r\n        this.showText = showText;\r\n    }\r\n\r\n    // 判断按钮组disable权限\r\n    private changeBtnRight(): void {\r\n        this.btnItems.map((item: any, index: number) => {\r\n            item.disabled = (index > this.currentClassificationsLength) || item.noDataDisable;\r\n\r\n            return item;\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 判断是否溢出并获取超出宽度\r\n     */\r\n    public getExtraWidth(): number {\r\n        const wrapperWidth: number = this.wrapperEle.nativeElement.offsetWidth;\r\n        const buttonsWidth: number = this.buttongroupEle.nativeElement.offsetWidth;\r\n        const isOverflow: boolean = wrapperWidth > buttonsWidth;\r\n        if (!isOverflow) {\r\n            return 0;\r\n        } else {\r\n            const extraWidth: number = wrapperWidth - buttonsWidth;\r\n\r\n            return extraWidth;\r\n        }\r\n    }\r\n}\r\n","import { FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { TpRegionselectComponent } from './TpRegionselectComponent';\r\nimport { TiButtongroupModule, TiDominatorModule, TiDropsearchModule } from '@cloud/tiny3';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n */\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, TiButtongroupModule, TiDominatorModule, TiDropsearchModule],\r\n  exports: [TpRegionselectComponent],\r\n  declarations: [TpRegionselectComponent]\r\n})\r\n\r\nexport class TpRegionselectModule {}\r\nexport { TpRegionselectComponent } from './TpRegionselectComponent';\r\n","import { Component } from '@angular/core';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@Component({\r\n    selector: 'tp-renamemodal',\r\n    styleUrls: ['./renamecontainer.less'],\r\n    template: '<ng-content></ng-content>'\r\n})\r\n\r\nexport class TpRenameModalContainerComponent {\r\n}\r\n","import { Component, Input, ViewChild, ElementRef } from '@angular/core';\r\nimport { TiLocale, TiValidationConfig, TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@Component({\r\n    templateUrl: './TpRenameModalComponent.html',\r\n    styleUrls: ['./renamemodal.less']\r\n})\r\n\r\nexport class TpRenameModalComponent extends TiBaseComponent {\r\n    @Input() value: string;\r\n    @Input() modalHeader: string;\r\n\r\n    @ViewChild('input', { static: true }) input: ElementRef;\r\n\r\n    public okLabel: string = TiLocale.getLocaleWords().tpRename.okButton;\r\n    public cancelLabel: string = TiLocale.getLocaleWords().tiCommon.cancelBtn;\r\n    public model: string;\r\n\r\n    public validation: TiValidationConfig = {\r\n        errorMessage: {\r\n            regExp: TiLocale.getLocaleWords().tpRename.inValidMessage\r\n        }\r\n    };\r\n    // 此处的close并不是按钮真正的close()，参数form的类型本应是FormGroup，所以没有引入FormGroup，指定为any\r\n    close(form: any): void {\r\n    }\r\n    dismiss(): void {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.model = this.value;\r\n    }\r\n    ngAfterViewInit(): void {\r\n        this.input.nativeElement.focus();\r\n        this.input.nativeElement.setSelectionRange(0, 0, 'backward');\r\n    }\r\n\r\n}\r\n","import { Component, ContentChild, ElementRef, EventEmitter, Input,  NgZone,  Output, Renderer2, TemplateRef } from '@angular/core';\r\nimport { FormGroup, ValidationErrors } from '@angular/forms';\r\nimport { TiBaseComponent, TiLocale, TiPopUpRef, TiPopupService, TiPosition, TiPositionType, TiValidators } from '@cloud/tiny3';\r\n\r\nimport { TpRenameModalContainerComponent } from './TpRenameModalContainerComponent';\r\nimport { TpRenameModalComponent } from './TpRenameModalComponent';\r\n\r\n/**\r\n * rename组件生产的弹窗实例，提供hide()方法，用于关闭弹窗\r\n */\r\nexport interface TpRenameModalRef {\r\n    /**\r\n     * 关闭弹窗的方法\r\n     */\r\n    hide(): void;\r\n}\r\n/**\r\n * 名称编辑组件\r\n *\r\n * <example-url>../tinyplus3demo/#/rename/rename-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-rename',\r\n    templateUrl: './rename.html',\r\n    styleUrls: ['./rename.less']\r\n})\r\n\r\nexport class TpRenameComponent extends TiBaseComponent {\r\n    constructor(\r\n        protected hostRef: ElementRef,\r\n        protected renderer2: Renderer2,\r\n        private tiPopup: TiPopupService<any>,\r\n        private zone: NgZone\r\n    ) {\r\n        super(hostRef, renderer2);\r\n        this.defaultModalHeader = TiLocale.getLocaleWords().tpRename.modalHeader;\r\n    }\r\n    /**\r\n     * 待编辑的内容\r\n     */\r\n    @Input() value: string;\r\n    /**\r\n     * 标识该行数据是否为new\r\n     */\r\n    @Input() isNew: boolean = false;\r\n    /**\r\n     * 组件是否可用\r\n     */\r\n    @Input() disabled: boolean = false;\r\n    /**\r\n     * 弹窗标题\r\n     */\r\n    @Input() modalHeader: string;\r\n    /**\r\n     * @ignore\r\n     * 铅笔图标的tip提示信息\r\n     *\r\n     * 根据华为云4.0规范变更，使用原生title代替tip解释图标的作用，10.0.1版本起该接口隐藏，并取消缺省值（编辑/Edit（国际化））\r\n     */\r\n    @Input() iconTip: string;\r\n    /**\r\n     * @ignore\r\n     * 铅笔图标的tip提示信息方位，10.0.1版本起该接口隐藏\r\n     */\r\n    @Input() iconTipPosition: TiPositionType = 'top';\r\n    /**\r\n     * 10.0.1新增\r\n     *\r\n     * 图标的title属性，用于说明图标的作用\r\n     */\r\n    @Input() iconTitle: string = TiLocale.getLocaleWords().tpRename.tip;\r\n    /**\r\n     * 10.0.3新增\r\n     *\r\n     * 是否通过组件显示被编辑的内容，组件以文本的形式显示，默认显示\r\n     */\r\n    @Input() showValue: boolean = true;\r\n    /**\r\n     * 确认/OK按钮点击事件，参数：输入框的内容\r\n     */\r\n    @Output() readonly confirm: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * 确认/OK按钮点击事件，为开发者提供关闭弹窗的时机\r\n     *\r\n     * 参数：弹窗实例[TpRenameModalRef]{@link ../interfaces/TpRenameModalRef.html}\r\n     */\r\n    @Output() readonly beforeClose: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     * 自定义弹窗模板\r\n     */\r\n    @ContentChild('renameModal', { static: true }) customModal: TemplateRef<any>;\r\n\r\n    private hostSpace: number = 5; // 弹窗距rename的距离\r\n\r\n    private defaultModalHeader: string;\r\n\r\n    private unlistenDocumentClick: () => void;\r\n\r\n    private renameModal: TiPopUpRef;\r\n\r\n    private TpRenameModalComponentRef: any;\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.iconTitle = this.iconTip ? '' : this.iconTitle;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        // 初始create一次即可，多次点击编辑图标避免重复生成的逻辑，在popupService内部已有处理\r\n        if (!this.renameModal) {\r\n            this.renameModal = this.tiPopup.create(TpRenameModalContainerComponent);\r\n        }\r\n        // open modal\r\n        this.TpRenameModalComponentRef =  this.renameModal.show({\r\n            content: this.customModal || TpRenameModalComponent,\r\n            contentContext: this.customModal ?\r\n                {\r\n                    renameModal: this.renameModal,\r\n                    value: this.value\r\n                } : {\r\n                value: this.value,\r\n                id: this.id + '_renameModal',\r\n                modalHeader: this.modalHeader || this.defaultModalHeader,\r\n                close: (form: FormGroup): void => {\r\n                    // 因为非常明确该组件只有一个表单元素 校验结果定义为error而不是errors，直接通过input获取校验失败的元素\r\n                    const error: ValidationErrors | null = TiValidators.check(form);\r\n                    if (error) {\r\n                        this.TpRenameModalComponentRef.location.nativeElement.querySelector('input')\r\n                            .focus();\r\n                    } else {\r\n                        this.beforeClose.emit(this.renameModal);\r\n                        this.confirm.emit(this.TpRenameModalComponentRef.location.nativeElement.querySelector('input').value);\r\n                        // tslint:disable-next-line: no-unused-expression\r\n                        this.destroyRenameModal();\r\n                    }\r\n                },\r\n                dismiss: (): void => {\r\n                    this.destroyRenameModal();\r\n                }\r\n            },\r\n            container: 'body'\r\n        });\r\n        const modal: ElementRef = this.TpRenameModalComponentRef.location.nativeElement;\r\n        this.renderer2.setStyle(modal, 'left', '-9999px');\r\n        this.renderer2.setStyle(modal, 'top', '-9999px');\r\n\r\n        const td: ElementRef = this.findClosestTD(this.hostRef.nativeElement);\r\n        TiPosition.setPosition({\r\n            targetEle: modal,\r\n            hostEle: this.hostRef.nativeElement,\r\n            hostEleX: td || this.hostRef.nativeElement,\r\n            hOffset: td ? 10 : 0,\r\n            hostSpace: this.hostSpace,\r\n            fixMaxHeight: true,\r\n            determinPositionFn: this.DeterminePosition\r\n        });\r\n\r\n        this.addDocumentClickEvent();\r\n    }\r\n\r\n    private DeterminePosition: (layout: any) => string = (layout: any) => {\r\n        if (layout.avilableLayout.bottom >= layout.targetLayout.height + this.hostSpace) {\r\n            return 'bottom-left';\r\n        } else {\r\n            return 'top-left';\r\n        }\r\n    }\r\n\r\n    private findClosestTD: (ele: any) => ElementRef = (ele: any) => {\r\n        if (ele.nodeName === 'HTML') {\r\n            return undefined;\r\n        } else if (ele.parentNode.nodeName === 'TD') {\r\n            return ele.parentNode;\r\n        } else {\r\n            return this.findClosestTD(ele.parentNode);\r\n        }\r\n    }\r\n\r\n    private addDocumentClickEvent(): void {\r\n        this.zone.runOutsideAngular((): void => {\r\n            this.unlistenDocumentClick = this.renderer2.listen(document, 'click', (event: MouseEvent): void => {\r\n                // 编辑图标被点击，触发其绑定的click事件，这里不做处理。\r\n                if (this.hostRef.nativeElement.contains(event.target)) {\r\n                    return;\r\n                }\r\n                if (this.TpRenameModalComponentRef) {\r\n                    const tpRenameModalHostElement: any = this.TpRenameModalComponentRef.location.nativeElement;\r\n                    // renameModal之外的元素被点击，销毁renameModal\r\n                    if (!(tpRenameModalHostElement && tpRenameModalHostElement.contains(event.target))) {\r\n                        this.zone.run((): void => {\r\n                            this.destroyRenameModal();\r\n                        });\r\n                    }\r\n                }\r\n\r\n            });\r\n        });\r\n    }\r\n\r\n    // 销毁弹窗、取消document的click事件\r\n    private destroyRenameModal(): void {\r\n        // tslint:disable-next-line: no-unused-expression\r\n        this.renameModal && this.renameModal.hide();\r\n        if (this.unlistenDocumentClick) {\r\n            this.unlistenDocumentClick();\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        this.destroyRenameModal();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { TpRenameComponent } from './TpRenameComponent';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpRenameModalContainerComponent } from './TpRenameModalContainerComponent';\r\nimport { TpRenameModalComponent } from './TpRenameModalComponent';\r\n\r\nimport {\r\n  TiButtonModule,\r\n  TiLocaleModule,\r\n  TiModalModule,\r\n  TiPopupModule,\r\n  TiTableModule,\r\n  TiTextModule,\r\n  TiTipModule,\r\n  TiValidationModule\r\n} from '@cloud/tiny3';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TiButtonModule,\r\n    TiLocaleModule,\r\n    TiModalModule,\r\n    TiPopupModule,\r\n    TiTipModule,\r\n    TiValidationModule,\r\n    TiTableModule,\r\n    TiTextModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpRenameComponent],\r\n  declarations: [TpRenameComponent, TpRenameModalComponent, TpRenameModalContainerComponent],\r\n  entryComponents: [TpRenameModalComponent, TpRenameModalContainerComponent]\r\n})\r\n\r\nexport class TpRenameModule {}\r\nexport { TpRenameComponent, TpRenameModalRef } from './TpRenameComponent';\r\nexport { TpRenameModalComponent } from './TpRenameModalComponent';\r\nexport { TpRenameModalContainerComponent } from './TpRenameModalContainerComponent';\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TpResourceItem } from './TpResourceItemComponent';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * 资源列表 resources\r\n *\r\n * <example-url>../tinyplus3demo/#/resources/resources-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-resources',\r\n    templateUrl: './resources.html',\r\n    styleUrls: ['./resources.less']\r\n})\r\n\r\nexport class TpResourcesComponent extends TiBaseComponent {\r\n    /**\r\n     * 资源列表标题\r\n     */\r\n    @Input() title: string;\r\n    /**\r\n     * 列表对象主接口；用于列表中每个内容中参数的传递。\r\n     */\r\n    @Input() items: Array<TpResourceItem>;\r\n    /**\r\n     * 选中某项资源时，触发事件\r\n     */\r\n    @Output() readonly select: EventEmitter<TpResourceItem> = new EventEmitter<TpResourceItem>();\r\n    /**\r\n     * 选中某项资源异常数时，触发事件\r\n     */\r\n    @Output() readonly errorSelect: EventEmitter<TpResourceItem> = new EventEmitter<TpResourceItem>();\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(item: TpResourceItem): void {\r\n        this.select.emit(item);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onErrorSelect(item: TpResourceItem): void {\r\n        this.errorSelect.emit(item);\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { TiBaseComponent, TiPositionType } from '@cloud/tiny3';\r\n\r\nexport interface TpResourceItem {\r\n    /* tslint:disable:no-redundant-jsdoc */\r\n    /**\r\n     * 设置资源内容；\r\n     */\r\n    name: string;\r\n    /**\r\n     * 设置资源总数。\r\n     */\r\n    total?: number;\r\n    /**\r\n     * 设置资源异常数；\r\n     */\r\n    error?: number;\r\n    /**\r\n     * 设置资源异常数最大值；\r\n     * @default 99\r\n     */\r\n    errorMax?: number;\r\n    /**\r\n     * 设置资源名称的提示信息，文本溢出时，鼠标悬停会显示提示信息\r\n     *\r\n     * content：默认文本为name属性内容；\r\n     *\r\n     * position：默认显示位置：'top'；\r\n     */\r\n    nameTip?: TpResourceTip;\r\n    /**\r\n     * 设置资源总数的提示信息：\r\n     *\r\n     * content：默认无提示信息；\r\n     *\r\n     * position：默认显示位置 'bottom-left'；\r\n     */\r\n    totalTip?: TpResourceTip;\r\n    /**\r\n     * 设置资源异常数的提示信息:\r\n     *\r\n     * content：默认无提示信息；\r\n     *\r\n     * position：默认显示位置 'bottom-left'；\r\n     */\r\n    errorTip?: TpResourceTip;\r\n    /**\r\n     * 设置资源项是否隐藏;\r\n     * @default false\r\n     */\r\n    hide?: boolean;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpResourceTip {\r\n    /**\r\n     * 提示信息内容\r\n     */\r\n    content?: string;\r\n    /**\r\n     * 提示信息显示位置，有以下值可选，其中auto代表自适应位置显示；\r\n     *\r\n     * \"top\" | \"top-left\" | \"top-right\" | \"bottom\" | \"bottom-left\" | \"bottom-right\" | \"left\" | \"left-top\" | \"left-bottom\" | \"right\" | \"right-top\" | \"right-bottom\" | \"center\" | \"auto\" | \"none\"\r\n     */\r\n    position?: TiPositionType;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\n@Component({\r\n    selector: 'tp-resource-item',\r\n    templateUrl: './resource-item.html',\r\n    styleUrls: ['./resource-item.less'],\r\n    // host: {\r\n    //     '[class.tp-resource-item]': 'true'\r\n    // }\r\n})\r\n\r\nexport class TpResourceItemComponent extends TiBaseComponent {\r\n    /**\r\n     * 每项资源配置对象内容\r\n     */\r\n    @Input() item: TpResourceItem;\r\n\r\n    /**\r\n     * 选中某项资源异常数时，触发事件\r\n     */\r\n    @Output() readonly errorSelect: EventEmitter<TpResourceItem> = new EventEmitter<TpResourceItem>();\r\n\r\n    /**\r\n     * @ignore\r\n     * 获取显示异常资源数\r\n     */\r\n    public getErrorNumber(error: number, errorMax: number): any {\r\n        const baseValue: any = errorMax && errorMax > 0 ? errorMax : 99;\r\n\r\n        return error > baseValue ? `${baseValue}+` : error;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClickError(item: TpResourceItem, event: Event): void {\r\n        // 阻止事件冒泡，触发父级事件\r\n        event.stopPropagation();\r\n        this.errorSelect.emit(item);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TpResourcesComponent } from './TpResourcesComponent';\r\nimport { TpResourceItemComponent } from './TpResourceItemComponent';\r\nimport { TiOverflowModule, TiTipModule, TiOutlineModule } from '@cloud/tiny3';\r\nimport { TpCardModule } from '../card/TpCardModule';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TpCardModule,\r\n    TiOverflowModule,\r\n    TiTipModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpResourcesComponent, TpResourceItemComponent],\r\n  declarations: [TpResourcesComponent, TpResourceItemComponent]\r\n})\r\n\r\nexport class TpResourcesModule {}\r\nexport { TpResourcesComponent } from './TpResourcesComponent';\r\nexport { TpResourceItemComponent } from './TpResourceItemComponent';\r\nexport { TpResourceItem } from './TpResourceItemComponent';\r\n","import { Component, Input } from '@angular/core';\r\n\r\n/**\r\n * @ignore\r\n * goandback模板组件定义\r\n */\r\n@Component({\r\n    templateUrl: './goandback.html',\r\n    styleUrls: ['./goandback.less']\r\n})\r\n\r\nexport class TpGoandbackComponent {\r\n    @Input() warn: any;\r\n    @Input() error: any;\r\n    @Input() href: string;\r\n    @Input() words: any;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpGoandbackComponent } from './TpGoandbackComponent';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiAlertModule, TiLocaleModule, TiMessageModule } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n *\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiAlertModule,\r\n    TiMessageModule,\r\n    TiLocaleModule\r\n  ],\r\n  exports: [TpGoandbackComponent],\r\n  declarations: [TpGoandbackComponent],\r\n  entryComponents: [TpGoandbackComponent]\r\n})\r\n\r\nexport class TpGoandbackModule {}\r\nexport { TpGoandbackComponent } from './TpGoandbackComponent';\r\n","import { Injectable, SecurityContext } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { TpGoandbackModule } from './TpGoandbackModule';\r\nimport { TpGoandbackComponent } from './TpGoandbackComponent';\r\nimport { TiMessageService, TiMessageType, TiModalRef, Util } from '@cloud/tiny3';\r\nimport { TpUtil } from '../../utils/TpUtil';\r\n\r\nexport interface TpGoAndBackConfig {\r\n    /**\r\n     * 去绑定|认证|充值跳转链接\r\n     *\r\n     * v10.1.3及之前版本存在XSS攻击(url类型)风险，v10.1.4 版本做了安全处理，已不存在安全问题，建议业务尽快升级版本。\r\n     */\r\n    url?: string;\r\n    /**\r\n     * 标准key:value的参数，总体对象形式\r\n     */\r\n    params?: { [propName: string]: string };\r\n    /**\r\n     * @ignore\r\n     * 受限组件词条\r\n     */\r\n    words?: any;\r\n    /**\r\n     * @ignore\r\n     * url是否添加params（restrict受限组件需略过goToUrl方法中对url的处理）\r\n     * 10.1.2 版本添加\r\n     */\r\n    addUrlParams?: boolean;\r\n    /**\r\n     * 点击已绑定|充值|认证按钮的函数回调接口，该函数存在两个参数（instances,openAlert）：\r\n     *\r\n     * 1.instances:弹窗的示例，可调用instances.dismiss()方法关闭弹窗<br>\r\n     * 2.openAlert(alertType):控制提示信息的种类和显示隐藏的方法；alertType有两个可选值：\r\n     *\r\n     * a.\"error\"：系统繁忙状态；b.\"warn\"：未绑定|认证|充值状态\r\n     */\r\n    confirmFn?(instances?: TiModalRef, openAlertFn?: Function): void;\r\n    /**\r\n     * 弹窗关闭时的函数回调接口，该函数存在一个参数（instances）\r\n     * 只有一级弹窗时，关闭回调在一级弹窗关闭时执行；存在二级弹窗时，关闭回调在二级弹窗关闭时执行\r\n     * 10.1.4 版本添加\r\n     */\r\n    closeFn?(instances?: TiModalRef): void;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * 组件内部封装基类服务，只供内部使用\r\n */\r\n@Injectable({\r\n    providedIn: TpGoandbackModule\r\n})\r\n/**\r\n * @internal\r\n */\r\nexport class TpGoandbackService {\r\n    /**\r\n     * 获取词条\r\n     */\r\n    protected words: any;\r\n    /**\r\n     * 弹窗类型\r\n     */\r\n    protected firstMessageType: TiMessageType = 'warn';\r\n    constructor(protected tiMessage: TiMessageService, private domSanitizer: DomSanitizer) {\r\n    }\r\n\r\n    public open(config?: TpGoAndBackConfig): void {\r\n        // 受限组件需通过调用方法传入词条\r\n        this.words = config.words ? config.words : this.words;\r\n        this.firstMessage(config);\r\n    }\r\n    /**\r\n     * 触发去绑定|认证|充值按钮事件\r\n     * @param configObj 用户配置对象\r\n     */\r\n    private firstMessage(configObj: TpGoAndBackConfig): void {\r\n        const configId = Util.isString(configObj.id) && configObj.id !== '' ? configObj.id : 'tp_message_modal'; // 用户未设置id时，设置默认id用于拼接\r\n        const contentHref: string = this.words.firstMessageContentLabel ?\r\n    `<a tiNavigation target=\"_blank\" rel=\"noopener noreferrer\" href=\"${this.words.firstMessageContentHref}\">${this.words.firstMessageContentLabel}</a>` : '';\r\n        const instances: TiModalRef = this.tiMessage.open({\r\n            id: configId,\r\n            type: this.firstMessageType,\r\n            title: this.words.firstMessageTitle,\r\n            content: Util.formatEntry(this.words.firstMessageContent, [contentHref]),\r\n            okButton: {\r\n                text: this.words.firstMessageOkButtonText,\r\n                autofocus: true,\r\n                click: (): void => {\r\n                    const handleUrl: string = this.goToUrl(configObj);\r\n                    instances.close();\r\n                    // 受限组件存在无第二个弹窗的情况；此处添加判断，是否需要触发该弹窗出现\r\n                    if (this.words.secondMessageTitle) {\r\n                        this.secondMessage(configObj, handleUrl, configId);\r\n                    }\r\n                }\r\n            },\r\n            cancelButton: {\r\n                show: false\r\n            },\r\n            close: (messageRef: TiModalRef): void => {\r\n                // 如果不需要二级弹窗，关闭回调在一级弹窗关闭时执行\r\n                if (!this.words.secondMessageTitle && configObj.closeFn && Util.isFunction(configObj.closeFn)) {\r\n                    configObj.closeFn(messageRef);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 触发已绑定|认证|充值按钮事件\r\n     * @param configObj 用户配置对象\r\n     * @param handleUrl 跳转链接\r\n     */\r\n    private secondMessage(configObj: TpGoAndBackConfig, handleUrl: string, promptId: string): void {\r\n        const instances: TiModalRef = this.tiMessage.open({\r\n            id: promptId + '_prompt',\r\n            type: 'prompt',\r\n            title: this.words.secondMessageTitle,\r\n            modalClass: 'tp-goandback-body',\r\n            content: TpGoandbackComponent,\r\n            // context定义上下文对象，对应组件@Input属性，可设置/获取这些接口属性\r\n            context: {\r\n                words: this.words,\r\n                href: handleUrl,\r\n                label: this.words.secondMessageFail,\r\n                warn: {\r\n                    type: 'warn',\r\n                    open: false,\r\n                    id: promptId + '_prompt_warn'\r\n                },\r\n                error: {\r\n                    type: 'error',\r\n                    open: false,\r\n                    id: promptId + '_prompt_error'\r\n                }\r\n            },\r\n            okButton: {\r\n                text: this.words.secondMessageOkButtonText,\r\n                autofocus: true,\r\n                click: (): void => {\r\n                    if (configObj.confirmFn && Util.isFunction(configObj.confirmFn)) {\r\n                        // tslint:disable-next-line: no-use-before-declare\r\n                        configObj.confirmFn(instances, openAlertFn);\r\n                    }\r\n                }\r\n            },\r\n            close: (messageRef: TiModalRef): void => {\r\n                // 关闭回调在二级弹窗关闭时执行\r\n                if (configObj.closeFn && Util.isFunction(configObj.closeFn)) {\r\n                    configObj.closeFn(messageRef);\r\n                }\r\n            }\r\n        });\r\n\r\n        /**\r\n         * 用户调用该函数，打开对应弹框\r\n         * @param alertType (error: 系统繁忙) || (warn: 未完成绑定|认证|充值)\r\n         */\r\n        const openAlertFn: (alertType: string) => void = (alertType: string): void => {\r\n            const context: any = instances.content.instance.context;\r\n            context.warn.open = alertType === 'warn' ? true : false;\r\n            context.error.open = alertType === 'error' ? true : false;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @param definedUrl 跳转链接\r\n     * @param params 链接参数\r\n     */\r\n    private goToUrl(configObj: TpGoAndBackConfig): string {\r\n        // 未配置addUrlParams属性时，默认赋值true\r\n        configObj.addUrlParams = Util.isUndefined(configObj.addUrlParams)\r\n                                 ? true : configObj.addUrlParams;\r\n        const [definedUrl, params] = [configObj.url, configObj.params];\r\n        let url: string = Util.isString(definedUrl) ? definedUrl : this.words.path;\r\n        // 判断是否需要url添加params处理（restrict受限组件需略过 issues-#1830）\r\n        if (configObj.addUrlParams) {\r\n            url = TpUtil.addDefaultParam(url, params);\r\n        }\r\n        const win: any = window.open(this.domSanitizer.sanitize(SecurityContext.URL, url), '_blank');\r\n\r\n        // IE浏览器下，有些场景下window.open()无返回值时不用处理\r\n        if (win) {\r\n            // 处理打开一个新的标签，新标签中的页面如果存在恶意代码，就可以将原网站直接导航到一个虚假网站的安全漏洞\r\n            win.opener = null;\r\n        }\r\n\r\n        return url;\r\n    }\r\n}\r\n","import { Component, ElementRef, Renderer2, TemplateRef, ViewChild } from '@angular/core';\r\nimport { TiBaseComponent, TiModalRef, TiTipRef, TiTipService, TiTipShowInfo } from '@cloud/tiny3';\r\nimport { TpGoandbackService } from '../../services/goandback/TpGoandbackService';\r\n\r\n/**\r\n * @ignore\r\n * 内部使用\r\n */\r\nexport interface TpRestrictMessage {\r\n    label: string;\r\n    href: string;\r\n    link: string;\r\n}\r\n\r\n/**\r\n * 用户受限组件\r\n * <example-url>../tinyplus3demo/#/restrict/restrict-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-restrict',\r\n    templateUrl: './restrict.html',\r\n    styleUrls: ['./restrict.less']\r\n})\r\nexport class TpRestrictComponent extends TiBaseComponent {\r\n\r\n    /**\r\n     * @ignore\r\n     * tip 内容template\r\n     */\r\n    @ViewChild('tipContentTemplate', { static: false }) tipContentTemplate: TemplateRef<any>;\r\n\r\n    /**\r\n     * @ignore\r\n     * alert 是否展示控制项\r\n     */\r\n    public open: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * alert 类型\r\n     */\r\n    public alertType: string = 'error';\r\n    /**\r\n     * @ignore\r\n     * 内部alert类型图标\r\n     */\r\n    public typeIcon: boolean = true;\r\n    /**\r\n     * @ignore\r\n     * 内部alert关闭图标\r\n     */\r\n    public closeIcon: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * alert 内容\r\n     */\r\n    public alertContent: string = '';\r\n    /**\r\n     * @ignore\r\n     * tipcontent 内容\r\n     */\r\n    public tipContent: string = '';\r\n\r\n    constructor(\r\n        protected hostRef: ElementRef,\r\n        protected renderer2: Renderer2,\r\n        private tipService: TiTipService,\r\n        private tpGoandbackService: TpGoandbackService\r\n    ) {\r\n        super(hostRef, renderer2);\r\n    }\r\n\r\n    /**\r\n     * 显示提示块\r\n     */\r\n    public openAlert(content?: string): void {\r\n        if (content) {\r\n            this.alertContent = content;\r\n            this.open = true;\r\n        } else {\r\n            this.open = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 给目标元素添加tip\r\n     */\r\n    public addTip(target: HTMLElement, content: string): TiTipRef {\r\n        this.tipContent = content;\r\n        if (this.tipContentTemplate) {\r\n            return this.tipService.create(target, {\r\n                trigger: 'mouse',\r\n                showFn: (): TiTipShowInfo => {\r\n                    return {\r\n                        content: this.tipContentTemplate\r\n                    };\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * 打开弹窗\r\n     */\r\n    public openMessage(messageOption: any, confirmFn?: (instances: TiModalRef, openAlertFn: Function) => void): void {\r\n        let words: any;\r\n        if (messageOption.firstMessage) {\r\n            const message: TpRestrictMessage = this.getMessageInfo(messageOption.firstMessage);\r\n\r\n            words = {\r\n                firstMessageContent: message.label,\r\n                firstMessageOkButtonText: message.link,\r\n                path: message.href,\r\n                ...messageOption\r\n            };\r\n        } else {\r\n            words = messageOption;\r\n        }\r\n        this.tpGoandbackService.open({\r\n            words,\r\n            confirmFn,\r\n            // 略过url添加params处理（restrict受限组件需略过tpGoandbackService中goToUrl方法对url的处理）\r\n            addUrlParams: false\r\n        });\r\n\r\n    }\r\n\r\n    //  message 弹窗的内容和按钮需要 alert 的内容转化\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private getMessageInfo(content: string): TpRestrictMessage {\r\n        let href: string;\r\n        let link: string;\r\n        let matchedString: string;\r\n        // 返回数据中可能没有href属性，所有正则匹配两次\r\n        // 提取出a 标签中的所有字符\r\n        const reg: RegExp = /<a([^>]*)>(.*?)<\\/a>/g;\r\n\r\n        let regExeRes: RegExpExecArray = reg.exec(content);\r\n        while (regExeRes && reg.lastIndex !== content.length) {\r\n            regExeRes = reg.exec(content);\r\n        }\r\n        if (regExeRes) {\r\n            // 提取a属性字符中的href内容\r\n            const reg2: RegExp = /href=['\"]?([^\"]*)['\"]?/g;\r\n            matchedString = regExeRes[0];\r\n            link = regExeRes[2];\r\n            // 提取 href 的值\r\n            const attrsStr: string = regExeRes[1];\r\n            const regExeRes2: RegExpExecArray = reg2.exec(attrsStr);\r\n            href = regExeRes2 ? regExeRes2[1] : '';\r\n        }\r\n\r\n        return {\r\n            label: content.replace(matchedString, ''),\r\n            link,\r\n            href\r\n        };\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TiAlertModule, TiTipServiceModule } from '@cloud/tiny3';\r\nimport { TpGoandbackModule } from '../../services/goandback/TpGoandbackModule';\r\nimport { TpRestrictComponent } from './TpRestrictComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiAlertModule,\r\n    TpGoandbackModule,\r\n    TiTipServiceModule\r\n  ],\r\n  exports: [TpRestrictComponent],\r\n  declarations: [TpRestrictComponent]\r\n})\r\nexport class TpRestrictModule {}\r\nexport { TpRestrictComponent } from './TpRestrictComponent';\r\n","import {\r\n    ChangeDetectorRef,\r\n    Component,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    Output,\r\n    Renderer2,\r\n    SimpleChanges,\r\n    ViewChild,\r\n    ViewChildren,\r\n    QueryList\r\n} from '@angular/core';\r\nimport { AbstractControl, FormControl, FormGroup, ValidationErrors, ValidatorFn } from '@angular/forms';\r\nimport {\r\n    TiBrowser, TiDateComponent, TiDominatorComponent, TiDropComponent, TiDropsearchComponent,\r\n    TiFormComponent, TiKeymap, TiLocale, TiLocaleFormat, TiValidators, Util\r\n    // tslint:disable-next-line: no-implicit-dependencies\r\n} from '@cloud/tiny3';\r\n\r\nimport { TpIconComponent } from '../icon/TpIconModule';\r\n\r\n/**\r\n * tag类型, radio-默认单选， noValue-非正常tag，tag值为空，  checkbox-多选，map-键值tag, numRange-数字范围tag,\r\n * dateRange-日期范围tag。tag 的分类是根据键值的结果划分\r\n */\r\nexport type TpSearchboxTagType = 'radio' | 'noValue' | 'checkbox' | 'map' | 'numRange' | 'dateRange';\r\n/**\r\n * 候选tag数据配置项\r\n */\r\nexport interface TpSearchboxItem {\r\n    /**\r\n     * 搜索字段，tag的键\r\n     */\r\n    field: string;\r\n    /**\r\n     * tag 键的显示值，实际结果是field\r\n     */\r\n    label: string;\r\n    /**\r\n     * 配置项可生产的tag类型\r\n     */\r\n    type?: TpSearchboxTagType;\r\n    /**\r\n     * tag 值的选择项数据\r\n     */\r\n    options: Array<TpSearchboxOption>;\r\n    /**\r\n     * 自动识别匹配正则\r\n     * 10.0.2 新增\r\n     */\r\n    regexp?: RegExp;\r\n    /**\r\n     * radio 单选类型可设置, 设置为false时,单选属性可以多次选择\r\n     */\r\n    replace?: boolean;\r\n    /**\r\n     * 单选或多选值的选中项键值\r\n     * 10.0.2 新增\r\n     */\r\n    optionValueKey?: string;\r\n    /**\r\n     * dateRange 类型日期显示和结果格式，dateRange时必选\r\n     */\r\n    format?: string;\r\n    /**\r\n     * numRange 最小值，类型为number\r\n     * dateRange开始日期，类型为Date\r\n     */\r\n    start?: number | Date;\r\n    /**\r\n     * numRange 最大值，类型为number\r\n     * dateRange起始日期，类型为Date\r\n     */\r\n    end?: number | Date;\r\n    /**\r\n     * numRange 可填最小值，用于校验\r\n     * dateRange可选最小值，用于校验\r\n     */\r\n    min?: number | Date;\r\n    /**\r\n     * numRange 可填最大值，用于校验\r\n     * dateRange可选最大值，用于校验\r\n     */\r\n    max?: number | Date;\r\n    /**\r\n     * 每个item对应的提示文本\r\n     */\r\n    placeholder?: string;\r\n    [propName: string]: any;\r\n}\r\n\r\nexport interface TpSearchboxOption {\r\n    /**\r\n     * 选项显示值\r\n     */\r\n    label: string;\r\n    /**\r\n     * 搜索目标字段，只有‘label’才需要\r\n     */\r\n    field?: string;\r\n    /**\r\n     * 控制map类型二级选项是否出现内置所有值，map类型需要\r\n     */\r\n    allValues?: boolean;\r\n    /**\r\n     * 控制map类型二级选项是否出现内置空值，map类型需要\r\n     */\r\n    emptyValue?: boolean;\r\n    /**\r\n     * map类型二级选项数据\r\n     */\r\n    options?: Array<any>;\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * 每个选中tag的类型\r\n */\r\nexport interface TpSearchboxTag {\r\n    /**\r\n     * 搜索目标搜字段\r\n     */\r\n    field: string;\r\n    /**\r\n     * tag键，field的显示值\r\n     */\r\n    label: string;\r\n    /**\r\n     * tag值\r\n     */\r\n    value: string;\r\n    /**\r\n     * 类型\r\n     */\r\n    type: TpSearchboxTagType;\r\n    /**\r\n     * 数字范围和日期范围tag 开始值\r\n     */\r\n    start?: number | string;\r\n    /**\r\n     * 数字范围和日期范围tag 结束值\r\n     */\r\n    end?: number | string;\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * search 事件回调参数的数据对象，对象的键对应field，对象的值是字符串数组，单选单个，多选多个\r\n */\r\nexport interface TpSearchboxFilter {\r\n    [propName: string]: Array<String>;\r\n}\r\n\r\n/**\r\n * ip正则\r\n * 10.0.2 新增\r\n */\r\nexport const TP_REGEXP_IP: RegExp = /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])(\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])){3}$/;\r\n/**\r\n * UUID正则\r\n * 10.0.2 新增\r\n */\r\nexport const TP_REGEXP_UUID: RegExp = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\n\r\n/**\r\n * 综合搜索组件。\r\n * 用户通过该组件，选择出数据过滤需要的参数\r\n *\r\n * <example-url>../tinyplus3demo/#/searchbox/searchbox-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-searchbox',\r\n    templateUrl: './searchbox.html',\r\n    styleUrls: ['./searchbox.less'],\r\n    host: {\r\n        '(blur)': 'onBlur()',\r\n        '(click)': 'onClick($event)'\r\n    },\r\n    providers: [TiFormComponent.getValueAccessor(TpSearchboxComponent)]\r\n})\r\nexport class TpSearchboxComponent extends TiFormComponent {\r\n    /**\r\n     * @ignore\r\n     * formControl 校验状态，通过了所有有效性检查\r\n     */\r\n    public static readonly VALID: string = 'VALID';\r\n    /**\r\n     * @ignore\r\n     * formControl 校验状态，至少有一个有效性检查失败了\r\n     */\r\n    public static readonly INVALID: string = 'INVALID';\r\n\r\n    /**\r\n     * 设置默认的过滤范围字段\r\n     */\r\n    @Input() defaultField: string = '';\r\n    /**\r\n     * 没有生成tag时的占位提示文本\r\n     *\r\n     */\r\n    @Input() emptyPlaceholder: string = '';\r\n\r\n    /**\r\n     * 输入框的宽度\r\n     */\r\n    @Input() inputWidth: string;\r\n\r\n    /**\r\n     * 是否显示帮助图标\r\n     *\r\n     */\r\n    @Input() showHelp: boolean = true;\r\n    /**\r\n     * 是否显示设置defaultField图标\r\n     */\r\n    @Input() showSettings: boolean = false;\r\n    /**\r\n     * 源数据\r\n     */\r\n    @Input() items: Array<TpSearchboxItem> = [];\r\n    /**\r\n     * 设置组件最多显示几行，\r\n     */\r\n    @Input() maxLine: number = 2;\r\n\r\n    /**\r\n     * 下拉框最大高度，单位为px，\r\n     *\r\n     */\r\n    @Input() panelMaxHeight: string = '999px';\r\n\r\n    /**\r\n     * 设置属性面板宽度\r\n     */\r\n    @Input() propPanelWidth: string = '200px';\r\n\r\n    /**\r\n     * 设置属性值面板宽度\r\n     */\r\n    @Input() valuePanelWidth: string = '200px';\r\n    /**\r\n     * 设置tag的最大宽度，解决tag太长，属性值\r\n     */\r\n    @Input() tagMaxWidth: string = '400px';\r\n\r\n    /**\r\n     * help 图标提示事件\r\n     */\r\n    @Output() readonly help: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * 清除事件\r\n     */\r\n    @Output() readonly clear: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * 搜索事件\r\n     */\r\n    @Output() readonly search: EventEmitter<TpSearchboxFilter> = new EventEmitter<TpSearchboxFilter>();\r\n    /**\r\n     * 值面板打开前事件,用于懒加载值选项\r\n     */\r\n    @Output() readonly beforeOpen: EventEmitter<TpSearchboxComponent> = new EventEmitter<TpSearchboxComponent>();\r\n    /**\r\n     * @ignore\r\n     * 选中项后，输入值变化事件\r\n     * 10.0.2 新增\r\n     */\r\n    @Output() readonly inputValueChange: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    /**\r\n     * 默认匹配字段发生改变事件\r\n     * 10.1.2 新增\r\n     */\r\n    @Output() readonly defaultFieldChange: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     * 内部标签donimator组件\r\n     */\r\n    @ViewChild(TiDominatorComponent, { static: true }) dominatorCom: TiDominatorComponent;\r\n    /**\r\n     * @ignore\r\n     * 属性面板\r\n     */\r\n    @ViewChild('propDrop', { static: true }) propDropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     * 值面板\r\n     */\r\n    @ViewChild('valueDrop', { static: true }) valueDropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     * 多选值面板\r\n     */\r\n    @ViewChild('valueMultiDrop', { static: false }) valueMultiDropCom: TiDropsearchComponent;\r\n    /**\r\n     * @ignore\r\n     * 自定义面板 numRange / daterange\r\n     */\r\n    @ViewChild('customDrop', { static: false }) customDropCom: TiDropComponent;\r\n    /**\r\n     * @ignore\r\n     * 设置面板\r\n     */\r\n    @ViewChild('settingsDrop', { static: false }) settingsDropCom: TiDropComponent;\r\n    /**\r\n     * @ignore\r\n     * 日期范围开始日期\r\n     */\r\n    @ViewChild('dateRangeStart', { static: false }) dateRangeStartCom: TiDateComponent;\r\n    /**\r\n     * @ignore\r\n     * 日期范围结束日期\r\n     */\r\n    @ViewChild('dateRangeEnd', { static: false }) dateRangeEndCom: TiDateComponent;\r\n    /**\r\n     * @ignore\r\n     * 搜索输入框\r\n     */\r\n    @ViewChild('searchInput', { static: false }) searchInputRf: ElementRef;\r\n    /**\r\n     * @ignore\r\n     * settings 设置图标 用于drop 设置dominatorElem\r\n     */\r\n    @ViewChild('settings', { static: false }) settingsCom: TpIconComponent;\r\n    /**\r\n     * @ignore\r\n     * 右侧图标（help、setting、search）\r\n     */\r\n    @ViewChildren('rightIcon') rightIconsRef: QueryList<TpIconComponent>;\r\n    /**\r\n     * @ignore\r\n     * 分割符号，默认是中文冒号\r\n     */\r\n    public tagSeperator: string = '：';\r\n    /**\r\n     * @ignore\r\n     * 有选中标签后的placeholder\r\n     */\r\n    public inputPlaceholder: string = TiLocale.getLocaleWords().tpSearchbox.addPlaceholder;\r\n    /**\r\n     * @ignore\r\n     * 属性选项\r\n     */\r\n    public propDropOptions: Array<any> = [];\r\n    /**\r\n     * @ignore\r\n     * 值选项\r\n     */\r\n    public valueDropOptions: Array<any> = [];\r\n    /**\r\n     * @ignore\r\n     * 输入框的值\r\n     */\r\n    public inputValue: string = '';\r\n    /**\r\n     * @ignore\r\n     * 选中item, 编辑和选择中都会存在\r\n     */\r\n    public selectedItem: TpSearchboxItem;\r\n    /**\r\n     * @ignore\r\n     * map类型标签,第一级选中的选项\r\n     */\r\n    public selectedOption: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 正在编辑tag\r\n     */\r\n    public editingTag: TpSearchboxTag;\r\n\r\n    /**\r\n     * @ignore\r\n     * 值面板dominator\r\n     */\r\n    public valueDropDominator: HTMLElement;\r\n    /**\r\n     * @ignore\r\n     * 值面板dominator\r\n     */\r\n    public settingsDropDominatorElem: HTMLElement;\r\n    /**\r\n     * @ignore\r\n     * 帮助图标提示内容\r\n     */\r\n    public helpTipContent: string = TiLocale.getLocaleWords().tpSearchbox.help;\r\n    /**\r\n     * @ignore\r\n     * 清空图标提示内容\r\n     */\r\n    public clearTipContent: string = TiLocale.getLocaleWords().tpSearchbox.clearAll;\r\n    /**\r\n     * @ignore\r\n     * 设置默认搜索项图标提示内容\r\n     */\r\n    public settingTipContent: string = TiLocale.getLocaleWords().tpSearchbox.switchText;\r\n    /**\r\n     * @ignore\r\n     * 单选值面板选中项\r\n     */\r\n    public propDropSelected: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 单选值面板选中项\r\n     */\r\n    public valueDropSelected: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 多选值面板选中项\r\n     */\r\n    public valueDropSelecteds: Array<TpSearchboxOption> = [];\r\n    /**\r\n     * @ignore\r\n     * 设置defaultField面板选中项\r\n     */\r\n    public settingsDropSelected: TpSearchboxOption;\r\n    /**\r\n     * @ignore\r\n     * 设置defaultField面板选项\r\n     */\r\n    public settingDropOptions: Array<TpSearchboxOption> = [];\r\n\r\n    /**\r\n     * @ignore\r\n     * drop 面板到触发元素的距离，编辑标签时，距离是6px,所以使用变量\r\n     */\r\n    public dominatorSpace: string = '7px';\r\n    /**\r\n     * 记录默认选中项旧值，用于判断两次选中是否是同一个值。如果是，则不触发defaultFieldChange事件。\r\n     */\r\n    private oldDefaultField: string = '';\r\n\r\n    public dominatorPlaceholder: string = '';\r\n\r\n    // 存储一致需要聚焦的元素\r\n    private alwaysFocusableElems: Array<any> = [];\r\n    // 范围tag 使用的特殊字符串'-'\r\n    private rangeLine: string = '-';\r\n    // 范围tag 使用的特殊字符串'≥'\r\n    private rangeLarge: string = '≥';\r\n    // 范围tag 使用的特殊字符串'≤'\r\n    private rangeLess: string = '≤';\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-parameter-properties\r\n    constructor(hostRef: ElementRef, render: Renderer2, private changeDetectorRef: ChangeDetectorRef) {\r\n        super(hostRef, render);\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.init();\r\n        // 非中文场景下，标签分割符号是英文冒号加空格。\r\n        if (TiLocale.getLocaleWords().tiLocaleKey !== 'zh-CN') {\r\n            this.tagSeperator = ': ';\r\n        }\r\n        this.oldDefaultField = this.defaultField;\r\n        this.setPlaceholder(this.model);\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        if (changes['items'] && this.items && !changes['items'].firstChange) {\r\n            this.init();\r\n        }\r\n\r\n        if (changes['showSettings'] && this.showSettings) {\r\n            // 初始化设置按钮下拉面板中的选项。\r\n            this.initSettingDropOptions();\r\n        } else if (changes['showSettings'] && !this.showSettings) {\r\n            this.settingsDropDominatorElem = null;\r\n        }\r\n\r\n        if (changes['emptyPlaceholder'] && !changes['emptyPlaceholder'].firstChange && this.emptyPlaceholder) {\r\n            this.setPlaceholder(this.model);\r\n        }\r\n    }\r\n\r\n    ngAfterViewChecked (): void {\r\n        if (this.settingsCom && !this.settingsDropDominatorElem) {\r\n            // 根据设置按钮dom，来设置下拉面板的宽度\r\n            this.settingsDropDominatorElem = this.settingsCom.nativeElement;\r\n            // ngAfterViewChecked是视图已经变化检测结束的钩子函数，如果此时再去改变视图上的接口会有报错.\r\n            // 报错信息：(ExpressionChangedAfterItHasBeenCheckedError) 所以需要强制执行一次变化检测。\r\n            this.changeDetectorRef.detectChanges();\r\n        }\r\n    }\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        super.ngAfterViewInit();\r\n        // 值面板可能对齐输入框，也可能对齐标签\r\n        this.valueDropDominator = this.searchInputRf.nativeElement;\r\n        if (this.showSettings) {\r\n            this.settingsDropDominatorElem = this.settingsCom.nativeElement;\r\n        }\r\n\r\n        this.alwaysFocusableElems.push(this.dominatorCom.nativeElement, this.searchInputRf.nativeElement,\r\n            );\r\n        this.rightIconsRef.forEach((item: TpIconComponent): void => {\r\n            this.alwaysFocusableElems.push(item.nativeElement);\r\n        });\r\n        this.setFocusableElems(this.alwaysFocusableElems);\r\n\r\n        //  因为改变了valueDropDominator ，所以强制刷新一次\r\n        this.changeDetectorRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 设置默认field字段面板选中项\r\n     */\r\n    public onSettingDropSelect(option: TpSearchboxOption): void {\r\n        this.defaultField = option.field;\r\n        this.settingsDropCom.hide();\r\n        // 如果最新的选中项和之前不一样，才会触发defaultFieldChange事件。\r\n        if (this.oldDefaultField !== this.defaultField) {\r\n            this.oldDefaultField = this.defaultField;\r\n            this.defaultFieldChange.emit(option);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * tag发生改变（删减、新增）时触发。\r\n     * TODO: 为什么只有在tag删除的时候，才会触发该函数\r\n     */\r\n    public onDominatorModelChange(): void {\r\n        this.setPlaceholder(this.model);\r\n    }\r\n\r\n    private setPlaceholder(model: any): void {\r\n        this.dominatorPlaceholder = model?.length > 0 ? this.inputPlaceholder : this.emptyPlaceholder;\r\n    }\r\n\r\n    // 输入框处理\r\n    /**\r\n     * @ignore\r\n     * 输入点击事件\r\n     */\r\n    public onClickInput(event: Event): void {\r\n\r\n        this.valueDropDominator = this.searchInputRf.nativeElement;\r\n        // 键已经选中\r\n        if (this.selectedItem) {\r\n            // 如果没有可选项，不显示\r\n            if (!this.selectedItem.options && (!this.selectedItem.type || this.selectedItem.type === 'radio')) {\r\n                return;\r\n            }\r\n            this.setValueDropSearchResult(this.getValueDropOptions(this.selectedItem.field));\r\n            this.showValueDrop();\r\n\r\n        } else {\r\n            this.propDropSearch(this.inputValue);\r\n        }\r\n    }\r\n    // 属性面板根据输入框中的值搜索选项\r\n    private propDropSearch(value: string): void {\r\n        const searchResult: Array<TpSearchboxOption> = this.searchOptions(value, this.propDropOptions);\r\n        if (searchResult.length > 0) {\r\n            this.propDropCom.searchResult = searchResult;\r\n            this.propDropCom.show();\r\n        } else {\r\n            this.propDropCom.hide();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 输入框按键按下处理Backspace和Enter键\r\n     */\r\n    public onKeydownInput(event: KeyboardEvent): void {\r\n        // tslint:disable-next-line: deprecation\r\n        switch (event.keyCode) {\r\n            case TiKeymap.KEY_BACKSPACE:\r\n                this.responseBackspace();\r\n                this.setPlaceholder(this.model);\r\n                break;\r\n            case TiKeymap.KEY_ENTER:\r\n                this.responseEnter(event);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 输入框值变化处理，\r\n     * 输入值时，如果展开的是属性面板，搜索属性，如果是值面板，单选搜索选项，多选匹配选项\r\n     */\r\n    public onInputValueChange(value: string): void {\r\n        // 值面板\r\n        if (this.selectedItem) {\r\n            // 有选中项后，输入值之间通知出去，用于值选项数据过多，自己处理搜索。\r\n            this.inputValueChange.emit({\r\n                value,\r\n                item: this.selectedItem\r\n            });\r\n            // 单选搜索\r\n            if (this.selectedItem.type === 'radio') {\r\n                this.dealRadioItemSearch(value);\r\n            // 多选只匹配\r\n            } else if (this.selectedItem.type === 'checkbox') {\r\n                this.matchCheckboxInput(value.trim());\r\n                this.showValueDrop();\r\n            }\r\n\r\n        } else { // 属性面板\r\n            //  ie11 初始化和placeholder改变会触发ngModelChange事件，所有此处屏蔽属性搜索\r\n            if (TiBrowser.isIE()) {\r\n                return;\r\n            }\r\n            this.propDropSearch(value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 输入框失去焦点\r\n     *\r\n     */\r\n    public onBlurInput(): void {\r\n        this.valueDropCom.hide();\r\n        this.propDropCom.hide();\r\n        this.valueMultiDropCom.hide();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 输入框聚焦\r\n     */\r\n    public onFocusInput(): void {\r\n        if (this.selectedItem && this.selectedItem.type === 'radio') {\r\n            this.dealRadioItemSearch(this.inputValue);\r\n        }\r\n    }\r\n\r\n    // 整体\r\n    /**\r\n     * @ignore\r\n     * 整体失去焦点\r\n     */\r\n    public onBlur(): void {\r\n        this.hideAllDrops();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 删除单个tag\r\n     */\r\n    public onDelete(): void {\r\n        // 删除一项后，输入框位置改变，防止drop对齐问题，隐藏所有drop\r\n        this.hideAllDrops();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 整体点击\r\n     */\r\n    public onClick(event: Event): void {\r\n        this.searchInputRf.nativeElement.focus();\r\n        this.onClickInput(event);\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 清除所有tag\r\n     */\r\n    public onClickClear(event: Event): void {\r\n        event.stopPropagation(); // 防止事件冒泡到dominator后，dominator聚焦之后面板打开。\r\n        // 有选中tag才清空，防止多触发ngmodelchange\r\n        if (this.model.length > 0) {\r\n            this.model = [];\r\n        }\r\n        this.selectedItem = undefined;\r\n        this.inputValue = '';\r\n        this.clear.emit();\r\n        this.setPlaceholder(this.model);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击搜索\r\n     */\r\n    public onClickSearch(event: Event): void {\r\n        event.stopPropagation();\r\n\r\n        // 先把输入的内容生成tag\r\n        if (this.inputValue) {\r\n            this.generateTagByInputValue();\r\n        }\r\n\r\n        this.hideAllDrops();\r\n\r\n        const filter: TpSearchboxFilter = this.getFilter();\r\n        this.search.emit(filter);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击help图标\r\n     */\r\n    public onClickHelp(event: Event): void {\r\n        event.stopPropagation();\r\n        this.help.emit(event);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击设置默认搜索项图标\r\n     */\r\n    public onClickSetting(event: Event): void {\r\n        event.stopPropagation();\r\n        this.settingsDropCom.show();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 是否有label 类型，用于label 类型的特殊处理\r\n     */\r\n    public hasLabeltag(): boolean {\r\n\r\n        const index: number = this.items.findIndex((item: TpSearchboxItem): boolean => {\r\n            return item.type === 'noValue';\r\n        });\r\n\r\n        return index > -1;\r\n    }\r\n\r\n    // 两个tag点击切换，事件顺序 mousedown => blur => focus => click\r\n    // tag-value 点击事件 因为要设置焦点，所以要绑定在mousedown上\r\n    /**\r\n     * @ignore\r\n     * 是否有label 类型，用于label 类型的特殊处理\r\n     */\r\n    public onMousedownTagValue(event: Event): void {\r\n        this.setFocusableElems(this.alwaysFocusableElems.concat(event.target as HTMLElement));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClickTagValue(event: Event, tag: TpSearchboxTag): void {\r\n        if (!this.tagEditable(tag.type)) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        this.valueDropDominator = event.target as HTMLElement;\r\n        this.editingTag = tag;\r\n\r\n        this.hideValueDrops();\r\n\r\n        this.selectedItem = this.items.find((item: TpSearchboxItem): boolean => {\r\n            return item.field === tag.field;\r\n        });\r\n\r\n        this.setValueDropSearchResult(this.getValueDropOptions(tag.field));\r\n        // 多选需要匹配已经选中的选项\r\n        if (this.selectedItem.type === 'checkbox') {\r\n            this.setValueDropSelecteds();\r\n        }\r\n\r\n        // 展开面板前更新了面板的参数，所以需要强制变检一次\r\n        this.changeDetectorRef.detectChanges();\r\n\r\n        // 如果没有可选项，不显示\r\n        if (!this.selectedItem.options && (!this.selectedItem.type || this.selectedItem.type === 'radio')) {\r\n            return;\r\n        }\r\n        // 在输入框选择时，再点击已选中标签编辑，面板无法展开，\r\n        // 原因当前mousedown事件回调函数在 输入框blur事件之前，先打开后关闭，\r\n        // 所以这里要添加延迟\r\n        setTimeout((): void => {\r\n            this.showValueDrop();\r\n        }, 0);\r\n\r\n    }\r\n    /**\r\n     * @ignore\r\n     * tag值聚焦\r\n     */\r\n    public onFocusTagValue(event: Event, tag: TpSearchboxTag): void {\r\n        event.preventDefault();\r\n        const elem: HTMLElement = event.target as HTMLElement;\r\n        this.valueDropDominator = elem;\r\n        // 可编辑类型才选中\r\n        if (tag.type === 'radio' || tag.type === 'checkbox') {\r\n            this.selectHTMLElementText(elem);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * tag值失去焦点\r\n     */\r\n    public onBlurTagValue(): void {\r\n        // 非编辑状态，保持面板的dominator在input上\r\n        this.valueDropDominator = this.searchInputRf.nativeElement;\r\n        this.propDropCom.hide();\r\n        this.valueDropCom.hide();\r\n        this.valueMultiDropCom.hide();\r\n        if (this.selectedItem && (this.selectedItem.type === 'radio' || this.selectedItem.type === 'checkbox' || this.selectedItem.type === 'map')) {\r\n            this.selectedItem = undefined;\r\n            this.editingTag = undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * tag 编辑输入框keydown事件，处理编辑状态下 enter 键操作\r\n     */\r\n    public onKeydownTagInput(event: KeyboardEvent): void {\r\n        // tslint:disable-next-line: deprecation\r\n        if (event.keyCode === TiKeymap.KEY_ENTER) {\r\n            const tagValue: string = (event.target as HTMLElement).textContent;\r\n            if (this.isTagExist(this.selectedItem, tagValue)) {\r\n                return;\r\n            }\r\n            this.generateTag(this.selectedItem, tagValue);\r\n            this.emitChange();\r\n            this.selectedItem = undefined;\r\n            this.editingTag = undefined;\r\n            this.hideValueDrops();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 标签编辑时只有多选需要处理匹配\r\n     */\r\n    public onTagInput(event: Event): void {\r\n        if (this.selectedItem.type === 'checkbox') {\r\n            const value: string = (event.target as HTMLElement).textContent.trim();\r\n            this.matchCheckboxInput(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 是否可以编辑\r\n     */\r\n    public tagEditable(type: TpSearchboxTagType): boolean {\r\n        // map 类型标签、日期范围和数字范围不能编辑\r\n        return type === 'radio' || type === 'checkbox';\r\n    }\r\n    /**\r\n     * @ignore\r\n     *  属性面板选中回调\r\n     */\r\n    public onPorpDropSelect(option: TpSearchboxOption): void {\r\n        // label类型tag 只在属性面板中选择一次\r\n        if (option.type === 'noValue') {\r\n            this.generateTagByPropDrop(option);\r\n            this.propDropCom.hide();\r\n\r\n            return;\r\n        }\r\n\r\n        this.selectedItem = this.items.find((item: TpSearchboxItem): boolean => {\r\n            return item.field === option.field;\r\n        });\r\n        // 有beforeOpen懒加载，面板展开交给用户\r\n        if (this.beforeOpen.observers.length > 0) {\r\n            this.beforeOpen.emit(this);\r\n\r\n            return;\r\n        }\r\n\r\n        this.dominatorPlaceholder = option?.placeholder || (this.model.length > 0 ? this.inputPlaceholder : this.emptyPlaceholder);\r\n\r\n        // 如果没有可选项，则不显示值面板。\r\n        if (!this.selectedItem || !this.selectedItem.options && (!this.selectedItem.type || this.selectedItem.type === 'radio')) {\r\n            // 先触发动态变化检测，再清除选中属性值（属性面板不允许有选中状态）\r\n            this.changeDetectorRef.detectChanges();\r\n            this.clearPropDropSelected();\r\n\r\n            return;\r\n        }\r\n\r\n        const options: Array<TpSearchboxOption> = this.getValueDropOptions(option.field);\r\n        this.valueDropOptions = options;\r\n        this.setValueDropSearchResult(options);\r\n\r\n        if (this.selectedItem.type === 'checkbox') {\r\n            this.setValueDropSelecteds();\r\n        }\r\n\r\n         // 面板展开前清空输入内容\r\n         this.inputValue = '';\r\n\r\n        // 展开面板前更新了面板的参数，所以需要强制变检一次\r\n        this.changeDetectorRef.detectChanges();\r\n        this.showValueDrop();\r\n    }\r\n\r\n    /**\r\n     * 暴露外面的打开值面板接口\r\n     */\r\n    public open(options: Array<TpSearchboxOption>): void {\r\n        this.setCustomValueDropSearchResult(options);\r\n        this.showValueDrop();\r\n    }\r\n    /**\r\n     * 获取但前选中数据项\r\n     */\r\n    public getSelectedItem(): TpSearchboxItem {\r\n        return this.selectedItem;\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 单选值面板选中，(包括map类型)\r\n     */\r\n    public onValueDropSelect(selected: TpSearchboxOption): void {\r\n        // 复选时，点击确定按钮结束选择\r\n        if (!this.selectedItem || !selected ) {\r\n            return;\r\n        }\r\n        // 处理map类型，map类型需要选择两次\r\n        if (this.selectedItem.type === 'map') {\r\n            this.mapItemSelect(selected);\r\n            return;\r\n        }\r\n\r\n        this.generateTagByValuePanel();\r\n        this.clearState();\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 多选底部确定按钮\r\n     */\r\n    public onClickValueDropOK(event: Event): void {\r\n        //  阻止按钮获取焦点，输入框失去焦点\r\n        event.preventDefault();\r\n        this.generateTagByValuePanel();\r\n        this.clearState();\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 多选底部取消按钮\r\n     */\r\n    public onClickValueDropCancel(): void {\r\n        this.valueMultiDropCom.hide();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 数字范围\r\n     */\r\n    public onClickCustomDropOK(): void {\r\n\r\n        if (!this.selectedItem) {\r\n            return;\r\n        }\r\n        if (this.selectedItem.type === 'numRange') {\r\n            this.generateNumRangetag();\r\n        } else if (this.selectedItem.type === 'dateRange') {\r\n            this.generateDateRangeTag();\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 自定义面板取消按钮回调\r\n     */\r\n    public onClickCustomDropCancel(): void {\r\n        this.hideCustomDrop();\r\n        if (this.editingTag) {\r\n            this.selectedItem = undefined;\r\n            this.editingTag = undefined;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * numRange 和 dateRange 面板的宽度需要固定值\r\n     */\r\n    public customDropWidth(): string {\r\n        if (!this.selectedItem) {\r\n            return;\r\n        } else if (this.selectedItem.type === 'numRange') {\r\n            return '200px';\r\n        } else if (this.selectedItem.type === 'dateRange') {\r\n            // 根据最宽小语种pt_BR词条\r\n            return '300px';\r\n        }\r\n    }\r\n\r\n    private init(): void {\r\n        this.initItems();\r\n        this.initPropDropOptions();\r\n    }\r\n    private initItems(): void {\r\n        // 初始化 allValues/ emptyValue\r\n        this.items.forEach((item: TpSearchboxItem): void => {\r\n            // items 中不写type, 默认单选'radio'\r\n            if (Util.isUndefined(item.type)) {\r\n                item.type = 'radio';\r\n            } else if (item.type === 'map' && Array.isArray(item.options)) {\r\n                item.options.forEach((option: TpSearchboxOption): void => {\r\n                    // 所有值项\r\n                    if (option.allValues !== false && Array.isArray(option.options)) {\r\n                        const allValues: string = TiLocale.getLocaleWords().tpSearchbox.allValues;\r\n                        const allValueOption: TpSearchboxOption = option.options.find((currentOption: TpSearchboxOption): boolean => {\r\n                            return currentOption.label === allValues;\r\n                        });\r\n\r\n                        if (!allValueOption) {\r\n                            option.options.unshift({\r\n                                label: allValues\r\n                            });\r\n                        }\r\n                    }\r\n                    // 空值项 emptyValue\r\n                    if (option.emptyValue !== false && Array.isArray(option.options)) {\r\n                        const emptyValue: string = TiLocale.getLocaleWords().tpSearchbox.emptyValue;\r\n                        const emptyValueOption: TpSearchboxOption = option.options.find((currentOption: TpSearchboxOption): boolean => {\r\n                            return currentOption.label === emptyValue;\r\n                        });\r\n                        if (!emptyValueOption) {\r\n                            option.options.unshift({\r\n                                label: emptyValue\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n                // 数字范围\r\n            } else if (item.type === 'numRange') {\r\n\r\n                const start: FormControl = new FormControl(item.start,\r\n                    [TiValidators.rangeValue(item.min as number, item.max as number),\r\n                    this.lessMax('end')]);\r\n                const end: FormControl = new FormControl(item.end,\r\n                    [TiValidators.rangeValue(item.min as number, item.max as number),\r\n                    this.moreMin('start')]);\r\n                item.formControls = new FormGroup({\r\n                    start,\r\n                    end\r\n                });\r\n                // 开始值的校验状态改变后，更新一下结束值的校验状态\r\n                start.statusChanges.subscribe((status: string): void => {\r\n                    if (status === TpSearchboxComponent.VALID && end.status === TpSearchboxComponent.INVALID) {\r\n                        end.updateValueAndValidity({\r\n                            onlySelf: true,\r\n                            emitEvent: false\r\n                        });\r\n                    }\r\n                });\r\n\r\n                // 结束值的校验状态改变后，更新一下开始值的校验状态\r\n                end.statusChanges.subscribe((status: string): void => {\r\n                    if (status === TpSearchboxComponent.VALID && start.status === TpSearchboxComponent.INVALID) {\r\n                        start.updateValueAndValidity({\r\n                            onlySelf: true,\r\n                            emitEvent: false\r\n                        });\r\n                    }\r\n                });\r\n                // 日期范围\r\n            } else if (item.type === 'dateRange') {\r\n                // tslint:disable-next-line: no-null-keyword\r\n                const startDate: Date = this.isValidDate(new Date(item.start)) ? new Date(item.start) : null;\r\n                // tslint:disable-next-line: no-null-keyword\r\n                const endDate: Date = this.isValidDate(new Date(item.end)) ? new Date(item.end) : null;\r\n                const start: FormControl = new FormControl(startDate);\r\n                const end: FormControl = new FormControl(endDate);\r\n                item.formControls = new FormGroup({\r\n                    start,\r\n                    end\r\n                });\r\n\r\n                // 开始日期的max是结束日期的选中值，如果结束日期没有选择，使用item中设置的max\r\n                item.startMax = endDate ? endDate : item.max;\r\n                // 结束日期的min是开始日期的选中值，如果开始日期没有选择，使用item中设置的min\r\n                item.endMin = startDate ? startDate : item.min;\r\n                start.valueChanges.subscribe((value: Date): void => {\r\n                    // tslint:disable-next-line: prefer-conditional-expression\r\n                    if (this.isValidDate(value)) {\r\n                        item.endMin = value;\r\n                    } else if (this.isValidDate(item.min as Date)) {\r\n                        item.endMin = item.min;\r\n                    } else {\r\n                        // 没有设置 min,开始日期选中又清除后，需要设置一个min的缺省值\r\n                        item.endMin = undefined;\r\n                    }\r\n                });\r\n                end.valueChanges.subscribe((value: Date): void => {\r\n                    // tslint:disable-next-line: prefer-conditional-expression\r\n                    if (this.isValidDate(value)) {\r\n                        item.startMax = value;\r\n                    } else if (this.isValidDate(item.max as Date)) {\r\n                        item.startMax = item.max;\r\n                    } else {\r\n                        // 没有设置 max, 结束日期选中又清除后，需要设置一个max的缺省值\r\n                        item.startMax = undefined;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    // Invalid Date判断\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private isValidDate(date: Date | string): boolean {\r\n        return Object.prototype.toString.call(date) === '[object Date]' && String(date) !== 'Invalid Date';\r\n    }\r\n\r\n    // 自定义校验规则小于最大值\r\n    // 静态方法返回箭头函数生成环境打包错误，所以使用\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private lessMax(field: string): ValidatorFn {\r\n        return (control: AbstractControl): ValidationErrors | null => {\r\n            if (control.parent && control.parent.get(field)) {\r\n                const end: number = control.parent.get(field).value;\r\n                // 开始和结束值都存在时，判断开始可结束值的大小\r\n                if (end && control.value && control.value > end) {\r\n                    return {\r\n                        minValue: {\r\n                            actualValue: control.value,\r\n                            tiErrorMessage: TiLocale.getLocaleWords().tpSearchbox.rangeMinErr\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n\r\n            // tslint:disable-next-line: no-null-keyword\r\n            return null;\r\n        };\r\n    }\r\n    // 自定义校验规则，大于最小值\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private moreMin(field: string): ValidatorFn {\r\n        return (control: AbstractControl): ValidationErrors | null => {\r\n            if (control.parent && control.parent.get(field)) {\r\n                const start: number = control.parent.get(field).value;\r\n                // 开始和结束值都存在时，判断开始可结束值的大小\r\n                if (start && control.value && control.value < start) {\r\n                    return {\r\n                        minValue: {\r\n                            actualValue: control.value,\r\n                            tiErrorMessage: TiLocale.getLocaleWords().tpSearchbox.rangeMaxErr\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n\r\n            // tslint:disable-next-line: no-null-keyword\r\n            return null;\r\n        };\r\n    }\r\n\r\n    // 初始化属性面板选项\r\n    private initPropDropOptions(): void {\r\n        const options: Array<TpSearchboxOption> = [];\r\n        this.items.forEach((item: TpSearchboxItem): void => {\r\n            const option: TpSearchboxOption = {\r\n                field: item.field,\r\n                label: item.label,\r\n                type: item.type,\r\n                placeholder: item?.placeholder\r\n            };\r\n            // label\r\n            if (item.type === 'noValue') {\r\n                option['children'] = item.children.map((childOption: TpSearchboxOption): TpSearchboxOption => {\r\n                    childOption.type = 'noValue';\r\n\r\n                    return childOption;\r\n                });\r\n            }\r\n            options.push(option);\r\n        });\r\n\r\n        this.propDropOptions = options;\r\n    }\r\n    private initSettingDropOptions(): void {\r\n        // 只有noValue类型不能设置为默认搜索项\r\n        const options: Array<TpSearchboxOption> = this.items.filter((item: TpSearchboxItem): boolean => {\r\n            return item.type !== 'noValue';\r\n        })\r\n            .map((item: TpSearchboxItem): TpSearchboxOption => {\r\n                const option: TpSearchboxOption = {\r\n                    label: item.label,\r\n                    field: item.field\r\n                };\r\n                // 如果设置了defaultField，面板中高亮显示\r\n                if (this.defaultField === option.field) {\r\n                    this.settingsDropSelected = option;\r\n                }\r\n\r\n                return option;\r\n            });\r\n        // 使用分组来显示面板标题\r\n        this.settingDropOptions = [{\r\n            label: this.settingTipContent,\r\n            children: options\r\n        }];\r\n    }\r\n\r\n    private matchCheckboxInput(value: string): void {\r\n        const valueArray: Array<string> = value.split('|')\r\n            .map((span: string): string => {\r\n                return span.trim();\r\n            });\r\n        this.valueDropSelecteds = [];\r\n        this.selectedItem.options.forEach((option: TpSearchboxOption): void => {\r\n            if (valueArray.includes(option.label)) {\r\n                this.valueDropSelecteds.push(option);\r\n            }\r\n        });\r\n    }\r\n\r\n    private dealRadioItemSearch(value: string): void {\r\n        const searchResult: Array<TpSearchboxOption> = this.searchOptions(value, this.valueDropOptions);\r\n        if (searchResult.length > 0) {\r\n            this.setValueDropSearchResult(searchResult);\r\n            this.showValueDrop();\r\n        } else {\r\n            this.valueDropCom.hide();\r\n        }\r\n    }\r\n\r\n    // 设置值面板的选项\r\n    private setValueDropSearchResult(options: Array<TpSearchboxOption>): void {\r\n        if (this.selectedItem.type === 'checkbox') {\r\n            this.valueMultiDropCom.searchResult = options;\r\n        } else if (this.selectedItem.type === 'radio' || this.selectedItem.type === 'map') {\r\n            this.valueDropCom.searchResult = options;\r\n        }\r\n    }\r\n    // 懒加载时，设置值面板选项\r\n    private setCustomValueDropSearchResult(options: Array<TpSearchboxOption>): void {\r\n        if (this.selectedItem.type === 'checkbox') {\r\n            this.selectedItem.options = options;\r\n            this.valueMultiDropCom.searchResult = options;\r\n        } else if (this.selectedItem.type === 'radio') {\r\n            this.selectedItem.options = options;\r\n            this.valueDropCom.searchResult = options;\r\n        } else if (this.selectedItem.type === 'map') {\r\n            this.selectedItem.options = options;\r\n            this.valueDropCom.searchResult = [{\r\n                label: TiLocale.getLocaleWords().tpSearchbox.tagKey,\r\n                children: options\r\n            }];\r\n\r\n        }\r\n        this.changeDetectorRef.detectChanges();\r\n    }\r\n\r\n    // 根据输入内容生成tag\r\n    private generateTagByInputValue(): void {\r\n        // 有选中项且可编辑\r\n        if (this.selectedItem) {\r\n            if (this.tagEditable(this.selectedItem.type) || this.selectedItem.type === 'map') {\r\n                if (this.isTagExist(this.selectedItem, this.inputValue)) {\r\n                    return;\r\n                }\r\n                this.generateTag(this.selectedItem, this.inputValue);\r\n                this.emitChange();\r\n                this.selectedItem = undefined;\r\n                this.inputValue = '';\r\n                this.hideValueDrops();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // 没有选中项，按默认值处理\r\n        if (!this.defaultField || this.inputValue === '') {\r\n            return;\r\n        }\r\n\r\n        // 属性面板展开，会触发dropsearch的快捷键，所以先关闭\r\n        this.propDropCom.hide();\r\n        // 输入字符串之间可能使用中英文','分割\r\n        const values: Array<string> = this.inputValue.split(/[，,]/)\r\n            .map((value: string) => {\r\n                return value.trim();\r\n            })\r\n            .filter((value: string) => {\r\n                return value !== '';\r\n            });\r\n        if (values.length === 0) {\r\n            return;\r\n        }\r\n        // 因为要多次生成tag, 会多次更新model,\r\n        // 用此变量标记在最后一次生成更新model后发射ngModelChange事件\r\n        let modelChanged: boolean = false;\r\n        // 只支持每次输入都是同一类型的，所以多个值用第一个匹配，找到匹配项\r\n        const matchedItem: TpSearchboxItem = this.items.find((item: TpSearchboxItem): boolean => {\r\n            return item.regexp && item.regexp.test(values[0]);\r\n        });\r\n\r\n        if (matchedItem) {\r\n            values.forEach((value: string) => {\r\n                if (!this.isTagExist(matchedItem, value)) {\r\n                    modelChanged = true;\r\n                    this.generateTag(matchedItem, value);\r\n                }\r\n            });\r\n        } else if (this.defaultField) {\r\n            const defaultItem = this.items.find((item: TpSearchboxItem): boolean => {\r\n                return this.defaultField === item.field;\r\n            });\r\n            // 默认项生成tag,不支持逗号分隔，所以用inputValue整体\r\n            if (!this.isTagExist(defaultItem, this.inputValue)) {\r\n                modelChanged = true;\r\n                this.generateTag(defaultItem, this.inputValue);\r\n            }\r\n        }\r\n\r\n        this.inputValue = '';\r\n        if (modelChanged) {\r\n            this.emitChange();\r\n        }\r\n    }\r\n\r\n    // 属性面板没有选中项,所以要清除处理。如果不进行重置，则会出现选中样式~\r\n    private clearPropDropSelected(): void {\r\n        this.propDropSelected = undefined;\r\n    }\r\n\r\n    private responseEnter(event: Event): void {\r\n        this.generateTagByInputValue();\r\n    }\r\n    private responseBackspace(): void {\r\n        if (this.inputValue) {\r\n            return;\r\n        }\r\n        // 处理map类型标签tag\r\n        if (this.selectedOption) {\r\n            this.selectedOption = undefined;\r\n            this.valueDropCom.hide();\r\n            const searchResult: Array<TpSearchboxOption> = this.getValueDropOptions(this.selectedItem.field);\r\n            this.setValueDropSearchResult(searchResult);\r\n\r\n            // 展开面板前更新了面板的参数，所以需要强制变检一次\r\n            this.changeDetectorRef.detectChanges();\r\n\r\n            this.showValueDrop();\r\n\r\n        } else if (this.selectedItem) {\r\n            // 处理有选中属性\r\n\r\n            this.hideValueDrops();\r\n\r\n            this.selectedItem = undefined;\r\n\r\n            // 展开面板前更新了面板的参数，所以需要强制变检一次\r\n            this.changeDetectorRef.detectChanges();\r\n            this.propDropCom.show();\r\n        } else if (this.model.length > 0) {\r\n            // 处理已经选中的标签\r\n            this.propDropCom.hide();\r\n\r\n            // 清除items 中的选中项\r\n            this.model.pop();\r\n            // change事件\r\n            this.emitChange();\r\n        }\r\n\r\n    }\r\n\r\n    // 展示值面板封装单选和多选\r\n    private showValueDrop(): void {\r\n        // 当点击选中的tag值时，dominatorSpace 需要改变，\r\n        // 5px = （22 -16）/2 +2 ; 22-tag高度，16-文字高度，2-上下两边，2-tag和组件边框之间的距离\r\n        this.dominatorSpace = this.editingTag ? '10px' : '7px';\r\n        // 展开面板前更新了面板的参数，所以需要强制变检一次\r\n        this.changeDetectorRef.detectChanges();\r\n        this.clearPropDropSelected();\r\n\r\n        switch (this.selectedItem.type) {\r\n            case 'radio':\r\n                this.valueDropCom.show();\r\n                break;\r\n            case 'map':\r\n                this.valueDropCom.show();\r\n                break;\r\n            case 'checkbox':\r\n                this.valueMultiDropCom.show();\r\n                break;\r\n            case 'numRange':\r\n                this.customDropCom.show();\r\n                this.setNumRangeDropFocusableElems();\r\n                break;\r\n            case 'dateRange':\r\n                this.customDropCom.show();\r\n                this.setDateRangeDropFocusableElems();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private hideAllDrops(): void {\r\n        this.propDropCom.hide();\r\n        this.hideValueDrops();\r\n        if (this.showSettings) {\r\n            this.settingsDropCom.hide();\r\n        }\r\n    }\r\n    private hideValueDrops(): void {\r\n        this.valueDropCom.hide();\r\n        this.valueMultiDropCom.hide();\r\n        this.customDropCom.hide();\r\n    }\r\n\r\n    private hideCustomDrop(): void {\r\n        // 自定义面板隐藏前，让dominator重新聚焦，防止整体失焦\r\n        this.dominatorCom.focus();\r\n        this.customDropCom.hide();\r\n    }\r\n    // 根据关键词(忽略大小写)过滤options\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private searchOptions(keyword: string, options: Array<TpSearchboxOption>): Array<TpSearchboxOption> {\r\n        const keywordUpper: string = keyword.toLocaleUpperCase();\r\n\r\n        return options.filter((option: TpSearchboxOption): boolean => {\r\n            const labelUpper: string = option.label.toLocaleUpperCase();\r\n\r\n            return labelUpper.indexOf(keywordUpper) !== -1;\r\n        });\r\n    }\r\n\r\n    // map 类型\r\n    private mapItemSelect(option: TpSearchboxOption): void {\r\n        if (this.selectedOption) {\r\n            const field: string = this.selectedItem.field;\r\n            const label: string = this.selectedItem.label;\r\n            const value: string = `${this.selectedOption.label}=${option.label}`;\r\n\r\n            const newTag: TpSearchboxTag = {\r\n                field,\r\n                label,\r\n                value,\r\n                type: 'map'\r\n            };\r\n\r\n            if (!this.model) {\r\n                this.model = [newTag];\r\n\r\n                return;\r\n            }\r\n\r\n            const index: number = this.model.findIndex((tag: TpSearchboxTag): boolean => {\r\n                return tag.field === field && tag.value === value;\r\n            });\r\n\r\n            // 标签编辑时，是替换\r\n            if (this.editingTag) {\r\n                this.editingTag = newTag;\r\n                this.model.splice(index, 1, newTag);\r\n            } else if (index === -1) {\r\n                this.model.push(newTag);\r\n            }\r\n            this.emitChange();\r\n            this.selectedItem = undefined;\r\n            this.selectedOption = undefined;\r\n            this.editingTag = undefined;\r\n\r\n            this.valueDropCom.hide();\r\n        } else {\r\n            this.selectedOption = option;\r\n\r\n            if (Array.isArray(this.selectedOption.options)) {\r\n                const children: Array<TpSearchboxOption> = this.selectedOption.options;\r\n                this.valueDropCom.searchResult = [{\r\n                    label: TiLocale.getLocaleWords().tpSearchbox.tagValue,\r\n                    children\r\n                }];\r\n\r\n            } else {\r\n                this.valueDropCom.searchResult = [];\r\n            }\r\n            this.changeDetectorRef.detectChanges();\r\n            // 点击选项后默认会关闭面板，所以延迟后再次打开\r\n            setTimeout((): void => {\r\n                this.showValueDrop();\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    private setValueDropSelecteds(): void {\r\n        const selectedTag: TpSearchboxTag = this.model.find((tag: TpSearchboxTag): boolean => {\r\n            return this.selectedItem.field === tag.field;\r\n        });\r\n        if (selectedTag) {\r\n            this.matchCheckboxInput(selectedTag.value);\r\n        }\r\n    }\r\n    // 清理临时状态\r\n    private clearState(): void {\r\n        this.editingTag = undefined;\r\n        this.selectedItem = undefined;\r\n        this.inputValue = '';\r\n        this.valueDropSelecteds = [];\r\n        this.valueDropSelected = undefined;\r\n        this.hideValueDrops();\r\n    }\r\n\r\n    private generateNumRangetag(): void {\r\n        const values: any = this.selectedItem.formControls.value;\r\n        if (this.selectedItem.formControls.status === TpSearchboxComponent.INVALID || (!values.start && !values.end)) {\r\n            return;\r\n        }\r\n        let tagValue: string;\r\n        if (values.start && values.end) {\r\n            tagValue = `${values.start}${this.rangeLine}${values.end}`;\r\n        } else if (values.start) {\r\n            tagValue = this.rangeLarge + values.start;\r\n        } else if (values.end) {\r\n            tagValue = this.rangeLess + values.end;\r\n        }\r\n        // 数字范围可能有单位\r\n        let label: string = this.selectedItem.label;\r\n        if (this.selectedItem.unit) {\r\n            label = `${label}(${this.selectedItem.unit})`;\r\n        }\r\n        const newTag: TpSearchboxTag = {\r\n            field: this.selectedItem.field,\r\n            label,\r\n            type: 'numRange',\r\n            start: values.start,\r\n            end: values.end,\r\n            value: tagValue\r\n        };\r\n\r\n        if (!this.model) {\r\n            this.model = [newTag];\r\n\r\n            return;\r\n        }\r\n\r\n        const tagIndex: number = this.model.findIndex((tag: TpSearchboxTag): boolean => {\r\n            return tag.field === this.selectedItem.field;\r\n        });\r\n\r\n        if (tagIndex === -1) {\r\n            this.model.push(newTag);\r\n        } else {\r\n            this.model.splice(tagIndex, 1, newTag);\r\n        }\r\n        this.afterGenerateTag();\r\n    }\r\n\r\n    private generateDateRangeTag(): void {\r\n        const values: any = this.selectedItem.formControls.value;\r\n        if (!values.start && !values.end) {\r\n            return;\r\n        }\r\n        let tagValue: string = '';\r\n        let start: string;\r\n        let end: string;\r\n        if (values.start && values.end) {\r\n            tagValue = `${this.formatDate2String(values.start as Date)}${this.rangeLine}${this.formatDate2String(values.end as Date)}`;\r\n            start = values.start.toISOString();\r\n            end = values.end.toISOString();\r\n        } else if (values.start) {\r\n            tagValue = this.rangeLarge + this.formatDate2String(values.start as Date);\r\n            start = values.start.toISOString();\r\n        } else if (values.end) {\r\n            tagValue = this.rangeLess + this.formatDate2String(values.end as Date);\r\n            end = values.end.toISOString();\r\n        }\r\n        const newTag: TpSearchboxTag = {\r\n            field: this.selectedItem.field,\r\n            label: this.selectedItem.label,\r\n            start,\r\n            end,\r\n            type: 'dateRange',\r\n            value: tagValue\r\n        };\r\n\r\n        if (!this.model) {\r\n            this.model = [newTag];\r\n\r\n            return;\r\n        }\r\n\r\n        const tagIndex: number = this.model.findIndex((curTag: TpSearchboxTag): boolean => {\r\n            return curTag.field === this.selectedItem.field;\r\n        });\r\n\r\n        if (tagIndex === -1) {\r\n            this.model.push(newTag);\r\n        } else {\r\n            this.model.splice(tagIndex, 1, newTag);\r\n        }\r\n        this.afterGenerateTag();\r\n    }\r\n\r\n    private afterGenerateTag(): void {\r\n        this.emitChange();\r\n        this.hideCustomDrop();\r\n        this.selectedItem = undefined;\r\n    }\r\n\r\n    private setNumRangeDropFocusableElems(): void {\r\n        const inputs: NodeList = this.customDropCom.nativeElement.querySelectorAll('[tiText]');\r\n        const inputElemsArray: Array<any> = [].slice.call(inputs);\r\n        this.setFocusableElems(this.alwaysFocusableElems.concat(inputElemsArray, this.getButtons(), this.customDropCom.nativeElement));\r\n    }\r\n\r\n    private setDateRangeDropFocusableElems(): void {\r\n        // 日期范围面板中的日期组件，存在焦点问题，\r\n        const elemsNodeList: Array<any> = this.alwaysFocusableElems.concat(\r\n            this.customDropCom.nativeElement,\r\n            this.dateRangeStartCom.getFocusableElems(),\r\n            this.dateRangeEndCom.getFocusableElems(),\r\n            this.getButtons()\r\n        );\r\n        this.setFocusableElems(elemsNodeList);\r\n        this.changeDetectorRef.detectChanges();\r\n        this.changeDetectorRef.markForCheck();\r\n    }\r\n\r\n    private getButtons(): Array<any> {\r\n        const buttons: NodeList = this.customDropCom.nativeElement.querySelectorAll('[tiButton]');\r\n\r\n        return [].slice.call(buttons);\r\n    }\r\n    // 日期对象转字符串\r\n    private formatDate2String(date: Date): string {\r\n        if (!this.isValidDate(date)) {\r\n            return '';\r\n        } else {\r\n            return TiLocaleFormat.formatDate(date, this.selectedItem.format);\r\n        }\r\n    }\r\n\r\n    private generateTagByValuePanel(): void {\r\n        let tagValue: string = '';\r\n        // 单选复选\r\n        if (this.selectedItem.type === 'checkbox') {\r\n             tagValue = this.valueDropSelecteds.reduce((acc: string, cur: TpSearchboxOption, index: number): string => {\r\n                return index === 0 ? cur.label : `${acc} | ${cur.label}`;\r\n            }, '');\r\n        } else {\r\n            tagValue = this.valueDropSelected.label;\r\n        }\r\n\r\n        if (this.isTagExist(this.selectedItem, tagValue)) {\r\n            return;\r\n        }\r\n        this.generateTag(this.selectedItem, tagValue);\r\n        // change 事件\r\n        this.emitChange();\r\n    }\r\n    // 当前要生成的tag是否已经存在\r\n    private isTagExist(selectedItem: TpSearchboxItem, tagValue: string): boolean {\r\n        // 新选中的tag是否已经存在\r\n        const selectedTagIndex: number = this.model.findIndex((tag: TpSearchboxTag): boolean => {\r\n            return tag.field === selectedItem.field && tag.value === tagValue;\r\n        });\r\n\r\n        return selectedTagIndex !== -1;\r\n    }\r\n\r\n    // label 类型的标签，只选择一次\r\n    private generateTagByPropDrop(option: any): void {\r\n        const newTag: TpSearchboxTag = {\r\n            field: option.field,\r\n            label: option.label,\r\n            value: '',\r\n            type: 'noValue'\r\n        };\r\n        if (!this.model) {\r\n            this.model = [newTag];\r\n\r\n            return;\r\n        }\r\n        // 只有一个label类型的tag\r\n        const index: number = this.model.findIndex((tag: TpSearchboxTag): boolean => {\r\n            return tag.type === 'noValue';\r\n        });\r\n        // 存在标签时替换，不存在时添加到最后\r\n        if (index > 0) {\r\n            this.model.splice(index, 1, newTag);\r\n        } else {\r\n            this.model.push(newTag);\r\n        }\r\n        this.emitChange();\r\n\r\n    }\r\n\r\n    // 生成tag\r\n    private generateTag(selectedItem: TpSearchboxItem, tagValue: string): void {\r\n\r\n        const newTag: TpSearchboxTag = {\r\n            field: selectedItem.field,\r\n            label: selectedItem.label,\r\n            value: tagValue,\r\n            type: selectedItem.type\r\n        };\r\n        // 如果选中field中设置了optionValueKey，给生成tag 添加额外的key, 单选为字符串，复选为字符串数组\r\n        if(selectedItem.optionValueKey){\r\n            this.addOtherOptionKey(newTag, selectedItem.optionValueKey);\r\n        }\r\n\r\n        this.updateModel(newTag, selectedItem);\r\n\r\n    }\r\n    private addOtherOptionKey(tag: TpSearchboxTag, valueKey: string): void {\r\n        // 只对单选和复选做处理\r\n        if (this.selectedItem.type === 'checkbox' && this.valueDropSelecteds) {\r\n            this.valueDropSelecteds.forEach((option: TpSearchboxOption) => {\r\n                if (Array.isArray(tag[valueKey])) {\r\n                    tag[valueKey].push(option[valueKey])\r\n                } else {\r\n                    tag[valueKey] = [option[valueKey]];\r\n                }\r\n            });\r\n\r\n        } else if (this.selectedItem.type === 'radio' && this.valueDropSelected) {\r\n            tag[valueKey] = this.valueDropSelected[valueKey];\r\n        }\r\n    }\r\n\r\n    private updateModel(newTag: TpSearchboxTag, selectedItem: TpSearchboxItem): void {\r\n\r\n        if (!this.model) {\r\n            this.model = [newTag];\r\n\r\n            return;\r\n        }\r\n\r\n        // 编辑模式\r\n        if (this.editingTag) {\r\n            const editingTagIndex: number = this.model.findIndex((tag: TpSearchboxTag): boolean => {\r\n                return tag.field === selectedItem.field && tag.value === this.editingTag.value;\r\n            });\r\n            this.model.splice(editingTagIndex, 1, newTag);\r\n        } else {\r\n            // tags中相同field\r\n            const fieldTagIndex: number = this.model.findIndex((tag: TpSearchboxTag): boolean => {\r\n                return tag.field === selectedItem.field;\r\n            });\r\n            // radio 类型可以设置是否替换，map默认不可替换,\r\n            if (fieldTagIndex === -1 || (selectedItem.type === 'radio' && selectedItem.replace === false) || selectedItem.type === 'map') {\r\n                this.model.push(newTag);\r\n            } else {\r\n                this.model.splice(fieldTagIndex, 1, newTag);\r\n            }\r\n        }\r\n\r\n    }\r\n    private emitChange(): void {\r\n        this.model = this.model.concat();\r\n        this.setPlaceholder(this.model);\r\n    }\r\n    private getValueDropOptions(field: string): Array<any> {\r\n\r\n        let options: Array<TpSearchboxOption> = this.selectedItem && Array.isArray(this.selectedItem.options) ?\r\n            this.selectedItem.options : [];\r\n        // map类型，利用分组标题显示面板标题\r\n        if (this.selectedItem.type === 'map') {\r\n            // 如果已经选中标签的键\r\n            if (this.selectedOption) {\r\n                options = [\r\n                    {\r\n                        label: TiLocale.getLocaleWords().tpSearchbox.tagValue,\r\n                        children: this.selectedOption.options\r\n                    }\r\n                ];\r\n            } else {\r\n                options = [\r\n                    {\r\n                        label: TiLocale.getLocaleWords().tpSearchbox.tagKey,\r\n                        children: this.selectedItem.options\r\n                    }\r\n                ];\r\n            }\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    // 生成结果 filter对象\r\n    private getFilter(): TpSearchboxFilter {\r\n        const filter: TpSearchboxFilter = {};\r\n        this.model.forEach((tag: TpSearchboxTag): void => {\r\n            // 已经存在，合并一起\r\n            if (Array.isArray(filter[tag.field])) {\r\n                filter[tag.field] = filter[tag.field].concat(tag.value.split('|')\r\n                    .map((value: string): string => {\r\n                        return value.trim();\r\n                    }));\r\n            } else {\r\n                filter[tag.field] = tag.value.split('|')\r\n                    .map((value: string): string => {\r\n                        return value.trim();\r\n                    });\r\n            }\r\n        });\r\n\r\n        return filter;\r\n    }\r\n    // 选中一段html，三种浏览器测试正常\r\n    // tslint:disable-next-line: prefer-function-over-method\r\n    private selectHTMLElementText(elem: HTMLElement): void {\r\n        const range: Range = document.createRange();\r\n        range.selectNodeContents(elem);\r\n        const selection: Selection = window.getSelection();\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n    }\r\n    // tslint:disable-next-line: max-file-line-count\r\n}\r\n","import { Component, ElementRef, Renderer2, TemplateRef, ViewChild } from '@angular/core';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiBaseComponent, TiLocale, TiModalService } from '@cloud/tiny3';\r\n\r\n@Component({\r\n    selector: 'tp-searchbox-help',\r\n    templateUrl: './searchbox-help.html',\r\n    styleUrls: ['./searchbox-help.less']\r\n})\r\nexport class TpSearchboxHelpComponent extends TiBaseComponent {\r\n    /**\r\n     * @ignore\r\n     * 默认字段\r\n     */\r\n    public defaultField: string = 'testName';\r\n    /**\r\n     * @ignore\r\n     * 示例1选中项\r\n     */\r\n    public tags1: Array<any>;\r\n    /**\r\n     * @ignore\r\n     * 示例二选中项\r\n     */\r\n    public tags2: Array<any>;\r\n    /**\r\n     * @ignore\r\n     * 示例二选中项\r\n     */\r\n    public tags3: Array<any>;\r\n    /**\r\n     * @ignore\r\n     * 输入项\r\n     */\r\n    public items: Array<any> = [];\r\n    /**\r\n     * @ignore\r\n     * 弹窗模板\r\n     */\r\n    @ViewChild(TemplateRef, { static: false }) helpModalTemplateRef: TemplateRef<any>;\r\n\r\n    constructor(hostRef: ElementRef, render: Renderer2, private tiModal: TiModalService) {\r\n        super(hostRef, render);\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // tslint:disable-next-line: typedef\r\n        const { name,\r\n            status,\r\n            running,\r\n            creating,\r\n            stopped,\r\n            restarting,\r\n            tag } = TiLocale.getLocaleWords().tpSearchbox;\r\n        // 初始化数据\r\n        this.items = [{\r\n            label: name,\r\n            field: 'testName',\r\n            type: 'radio',\r\n            options: [{\r\n                label: 'ecs-1'\r\n            }, {\r\n                label: 'obs-2'\r\n            }, {\r\n                label: 'vpc-1'\r\n            }]\r\n        },\r\n        {\r\n            label: status,\r\n            field: 'testStatus',\r\n            type: 'checkbox',\r\n            options: [{\r\n                label: running\r\n            }, {\r\n                label: creating\r\n            }, {\r\n                label: stopped\r\n            }, {\r\n                label: restarting\r\n            }]\r\n        },\r\n        {\r\n            id: '3',\r\n            label: tag,\r\n            field: 'testTag',\r\n            type: 'map',\r\n            options: [\r\n                {\r\n                    label: 'aaa',\r\n                    options: [\r\n                        {\r\n                            label: 'ddd'\r\n                        },\r\n                        {\r\n                            label: 'eee'\r\n                        },\r\n                        {\r\n                            label: 'fff'\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    label: 'bbb',\r\n                    options: [\r\n                        {\r\n                            label: 'ddd'\r\n                        },\r\n                        {\r\n                            label: 'eee'\r\n                        },\r\n                        {\r\n                            label: 'fff'\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    label: 'ccc',\r\n                    options: [\r\n                        {\r\n                            label: 'ddd'\r\n                        },\r\n                        {\r\n                            label: 'eee'\r\n                        },\r\n                        {\r\n                            label: 'fff'\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }];\r\n        this.tags1 = [\r\n            {\r\n                field: 'testName',\r\n                label: name,\r\n                value: 'ecs-1',\r\n                type: 'radio'\r\n            }\r\n        ];\r\n        this.tags2 = [\r\n            {\r\n                field: 'testName',\r\n                label: name,\r\n                value: 'ecs-1',\r\n                type: 'radio'\r\n            },\r\n            {\r\n                field: 'testStatus',\r\n                label: status,\r\n                value: `${running} | ${creating} | ${stopped}`,\r\n                type: 'checkbox'\r\n            }\r\n        ];\r\n        this.tags3 = [\r\n            {\r\n                field: 'testName',\r\n                label: name,\r\n                value: 'ecs-1',\r\n                type: 'radio'\r\n            },\r\n            {\r\n                field: 'testStatus',\r\n                label: status,\r\n                value: running,\r\n                type: 'checkbox'\r\n            },\r\n            {\r\n                field: 'testTag',\r\n                label: tag,\r\n                value: 'aaa=',\r\n                type: 'map'\r\n            }\r\n        ];\r\n    }\r\n    /**\r\n     * 展示弹窗\r\n     */\r\n    public show(): void {\r\n        this.tiModal.open(this.helpModalTemplateRef, {\r\n            id: 'tp-searchbox-help-modal',\r\n            modalClass: 'tp-searchbox-help-modal'\r\n        });\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport {\r\n    TiButtonModule, TiDateModule, TiDropModule,\r\n    TiDropsearchModule, TiLocaleModule, TiModalModule,\r\n    TiOverflowModule, TiTipModule, TiValidationModule,\r\n    TiDominatorModule, TiTextModule, TiOutlineModule\r\n} from '@cloud/tiny3';\r\nimport { TpSearchboxComponent } from './TpSearchboxComponent';\r\nimport { TpSearchboxHelpComponent } from './TpSearchboxHelpComponent';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        TiButtonModule,\r\n        TiModalModule,\r\n        TiDateModule,\r\n        TiDropModule,\r\n        TiDropsearchModule,\r\n        TiDominatorModule,\r\n        TiLocaleModule,\r\n        TiOverflowModule,\r\n        TiTextModule,\r\n        TiTipModule,\r\n        TiValidationModule,\r\n        TpIconModule,\r\n        TiOutlineModule\r\n    ],\r\n    exports: [TpSearchboxComponent, TpSearchboxHelpComponent],\r\n    declarations: [TpSearchboxComponent, TpSearchboxHelpComponent]\r\n})\r\n\r\nexport class TpSearchboxModule { }\r\nexport { TpSearchboxComponent, TpSearchboxItem, TpSearchboxOption, TpSearchboxTag,\r\n    TpSearchboxTagType, TpSearchboxFilter, TP_REGEXP_IP, TP_REGEXP_UUID } from './TpSearchboxComponent';\r\nexport { TpSearchboxHelpComponent } from './TpSearchboxHelpComponent';\r\n","import { Component, Input } from '@angular/core';\r\nimport { TiFormComponent } from '@cloud/tiny3';\r\n/**\r\n * 选择组 组件\r\n *\r\n * 配合[TpSelectItemComponent]{@link ../components/TpSelectitemComponent.html}使用\r\n *\r\n * <example-url>../tinyplus3demo/#/selectgroup/selectgroup-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-selectgroup',\r\n    templateUrl: './selectgroup.html',\r\n    providers: [TiFormComponent.getValueAccessor(TpSelectgroupComponent)]\r\n})\r\n\r\nexport class TpSelectgroupComponent extends TiFormComponent {\r\n    /**\r\n     * 10.1.1 新增\r\n     *\r\n     * 选择组是否多选\r\n     */\r\n    @Input() multiple: boolean;\r\n}\r\n","import { Component, Input, ElementRef, Renderer2, ContentChild, TemplateRef } from '@angular/core';\r\nimport { TpSelectgroupComponent } from './TpSelectgroupComponent';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\nexport interface TpSelectgroupItem {\r\n    /**\r\n     * 卡片标题\r\n     */\r\n    title: string;\r\n    /**\r\n     * 卡片内容\r\n     */\r\n    content?: string;\r\n    /**\r\n     * 卡片是否禁用\r\n     */\r\n    disabled?: boolean;\r\n    /**\r\n     * 卡片左侧图标名\r\n     */\r\n    iconName: string;\r\n    /**\r\n     * 允许有多余的属性字段\r\n     */\r\n    [propName: string]: any;\r\n}\r\n/**\r\n * 配合[TpSelectgroupComponent]{@link ../components/TpSelectgroupComponent.html}使用\r\n *\r\n * <example-url>../tinyplus3demo/#/selectgroup/selectgroup-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-selectitem',\r\n    templateUrl: './selectitem.html',\r\n    styleUrls: ['./selectgroup.less'],\r\n    host: {\r\n        '[class.tp-selectitem-box]': 'true',\r\n        '[class.tp-selectitem-disabled]': 'item.disabled',\r\n        '[class.tp-selectitem-checked]': 'selectgroup.multiple ? isChecked() : selectgroup.model === item',\r\n        '[class.tp-selectitem-template]': 'itemTemplate',\r\n        '(click)': 'onClick()'\r\n    }\r\n})\r\n\r\nexport class TpSelectitemComponent extends TiBaseComponent{\r\n    /**\r\n     * 数据配置\r\n     */\r\n    @Input() item: TpSelectgroupItem;\r\n    /**\r\n     * 选中标识位置\r\n     */\r\n    @Input() checkPosition: 'right-top' | 'right-bottom' = 'right-top';\r\n    // item模板\r\n    @ContentChild('item', /* TODO: add static flag */ { static: true }) itemTemplate: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public selectgroup: any;\r\n    constructor(selectgroup: TpSelectgroupComponent, protected hostRef: ElementRef, protected renderer: Renderer2) {\r\n        super(hostRef, renderer);\r\n        this.selectgroup = selectgroup;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public onClick(): void {\r\n        if (this.item.disabled) {\r\n            return;\r\n        }\r\n        if (this.selectgroup.multiple) { // 多选\r\n            const index: number = this.selectgroup.model.indexOf(this.item);\r\n            if (index > -1) {\r\n                this.selectgroup.model.splice(index, 1);\r\n            } else {\r\n                this.selectgroup.model.push(this.item);\r\n            }\r\n        } else { // 单选\r\n            this.selectgroup.model = this.item;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 是否选中（多选时）\r\n     */\r\n    public isChecked(): boolean {\r\n        if (this.selectgroup.model) {\r\n            return this.selectgroup.model.includes(this.item);\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TiOverflowModule } from '@cloud/tiny3';\r\nimport { TpSelectgroupComponent } from './TpSelectgroupComponent';\r\nimport { TpSelectitemComponent } from './TpSelectitemComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiOverflowModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpSelectgroupComponent, TpSelectitemComponent],\r\n  declarations: [TpSelectgroupComponent, TpSelectitemComponent]\r\n})\r\n\r\nexport class TpSelectgroupModule {}\r\nexport { TpSelectgroupComponent } from './TpSelectgroupComponent';\r\nexport { TpSelectitemComponent, TpSelectgroupItem } from './TpSelectitemComponent';\r\n","import { Component, ViewEncapsulation } from '@angular/core';\r\n\r\n/**\r\n * Selectsearchbox组件由下拉选择组件和搜索框组件构成。\r\n *\r\n * Selectsearchbox组件使用的时候需要和下拉框（TiSelect）及搜索框（TiSearchBox）一起使用。\r\n *\r\n * API详情请参考下拉框（TiSelect）及搜索框（TiSearchBox）。\r\n *\r\n * <example-url>../tinyplus3demo/#/selectsearchbox/selectsearchbox-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-selectsearchbox',\r\n    template: '<ng-content></ng-content>',\r\n    styleUrls: ['./selectsearchbox.less'],\r\n    encapsulation: ViewEncapsulation.None,\r\n    host: {\r\n        '[class.tp-selectsearchbox-container]': 'true'\r\n    }\r\n})\r\n\r\nexport class TpSelectsearchboxComponent {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TpSelectsearchboxComponent } from './TpSelectsearchboxComponent';\r\n\r\n@NgModule({\r\n  imports: [TpIconModule],\r\n  exports: [TpSelectsearchboxComponent],\r\n  declarations: [TpSelectsearchboxComponent]\r\n})\r\n\r\nexport class TpSelectsearchboxModule {}\r\nexport { TpSelectsearchboxComponent } from './TpSelectsearchboxComponent';\r\n","import {\r\n  Component,\r\n  ContentChildren,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  Output,\r\n  QueryList,\r\n  Renderer2,\r\n  SimpleChange,\r\n  SimpleChanges,\r\n  ViewChild\r\n  // tslint:disable-next-line: no-implicit-dependencies\r\n} from '@angular/core';\r\n\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n// tslint:disable-next-line: no-implicit-dependencies\r\nimport { TpCardComponent } from '../card/TpCardModule';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n */\r\nexport interface TpSlidecardsPaginationEvent {\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalPage: number;\r\n  /**\r\n   * 允许有多余的属性字段\r\n   */\r\n  [propName: string]: any;\r\n}\r\n\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n * 滚动卡片列表，功能与轮播图相似，可以显示多屏展示卡片的效果，并且还提供了增加、删除卡片功能。详情参考测试用例。\r\n *\r\n * <example-url>../tinyplus3demo/#/slidecards/slidecards-all</example-url>\r\n */\r\n@Component({\r\n  selector: 'tp-slidecards',\r\n  templateUrl: './slidecards.html',\r\n  styleUrls: ['./slidecards.less']\r\n})\r\nexport class TpSlidecardsComponent extends TiBaseComponent {\r\n  /**\r\n   * 当前选中卡片在数组中的下标\r\n   */\r\n  @Input() currentIndex: number = 0;\r\n  /**\r\n   * 当前页改变事件\r\n   */\r\n  @Output() readonly pageChange: EventEmitter<TpSlidecardsPaginationEvent> = new EventEmitter<TpSlidecardsPaginationEvent>();\r\n  /**\r\n   * @ignore\r\n   * 卡片的可视区\r\n   */\r\n  @ViewChild('listWrapper') listWrapperEleRef: ElementRef;\r\n  /**\r\n   * @ignore\r\n   * 卡片父元素，用于监听内容变化\r\n   */\r\n  @ViewChild('list') listEleRef: ElementRef;\r\n  /**\r\n   * @ignore\r\n   * 所有的卡片集合\r\n   */\r\n  @ContentChildren(TpCardComponent, { descendants: false }) cardComRefs!: QueryList<TpCardComponent>;\r\n  /**\r\n   * @ignore\r\n   * 当前页\r\n   */\r\n  public currentPage: number = 1;\r\n  /**\r\n   * 每个卡片的宽度，用于计算分页\r\n   */\r\n  private cardWidth: number;\r\n  /**\r\n   * 卡片之间的距离，用于计算分页\r\n   */\r\n  private cardSpan: number = 0;\r\n  /**\r\n   * @ignore\r\n   * 卡片父元素的偏移距离，用于控制卡片左右滑动\r\n   */\r\n  public left: string = '0px';\r\n  /**\r\n   * @ignore\r\n   * 分页页码显示数据\r\n   */\r\n  public pageList: Array<string | number> = [];\r\n  /**\r\n   * 每页卡片数\r\n   */\r\n  private pageSize: number = 1;\r\n  /**\r\n   * @ignore\r\n   * 分页总页数\r\n   */\r\n  public totalPage: number = 1;\r\n  /**\r\n   * 总的卡片数量\r\n   */\r\n  private totalCard: number = 0;\r\n\r\n  private unlistenResize: () => void;\r\n  // 卡片父元素 MutationObserver 对象\r\n  private listObserver: MutationObserver;\r\n\r\n  constructor(\r\n    protected hostRef: ElementRef,\r\n    private renderer2: Renderer2,\r\n    private zone: NgZone\r\n  ) {\r\n    super(hostRef, renderer2);\r\n  }\r\n\r\n  // tslint:disable-next-line: use-life-cycle-interface\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    // 一屏显示卡片的数目会随窗口大小而变化，所以监听窗口大小变化重新计算分页，\r\n    this.zone.runOutsideAngular(() => {\r\n      this.unlistenResize = this.renderer2.listen(window, 'resize', () => {\r\n        if (this.canCalculatePaging()) {\r\n          this.calculatePaging();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 因为初始化要展示当前索引卡片，所以在初始化后先计算一次分页，然后显示currentIndex卡片\r\n   * 分页的计算依赖视图可视区的宽度，视图加载完成后才能计算，\r\n   * 分页计算后，会改变数据，所以用setTimeout。\r\n   *  总卡片数及cardsComRef 长度， pageSize = 容器宽度/（卡片宽度 + 卡片间的距离）\r\n   */\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    // 初始化时计算一次分页，然后把当前索引的卡片显示出来\r\n    if (this.canCalculatePaging()) {\r\n        setTimeout(() => {\r\n            this.calculatePaging();\r\n            this.showCurrentCard(this.currentIndex);\r\n        }, 0);\r\n    }\r\n\r\n    this.listObserver = new MutationObserver((mutationRecords) => {\r\n        this.calculatePaging();\r\n    });\r\n    // MutationObserver 对象的回调方法开始接收与给定选项匹配的DOM变化的通知\r\n    // 只需关注卡片增删和lef偏移值，所以只设置childList、attributes\r\n    this.listObserver.observe(this.listEleRef.nativeElement, {\r\n        childList: true, // 监视目标节点添加或删除新的子节点\r\n        attributes: true, // 观察受监视元素的属性值变更,主要是为了监听 style属性\r\n        attributeFilter: ['style'] // 要监视的特定属性名称的数组\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    super.ngOnChanges(changes);\r\n    // currentIndex 改变跳转到对应页显示当前索引卡片\r\n    const currentIndexChange: SimpleChange = changes['currentIndex'];\r\n    if (!currentIndexChange.firstChange) {\r\n      this.showCurrentCard(currentIndexChange.currentValue);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    super.ngOnDestroy();\r\n    // 组件销毁时，注销窗口resize事件监听\r\n    if (this.unlistenResize) {\r\n      this.unlistenResize();\r\n    }\r\n    if (this.listObserver) {\r\n        this.listObserver.disconnect();\r\n    }\r\n  }\r\n  /**\r\n   * 是否能进行分页计算\r\n   * @returns boolean\r\n   */\r\n  private canCalculatePaging(): boolean {\r\n    return this.listWrapperEleRef && this.cardComRefs && this.cardComRefs.length > 0;\r\n  }\r\n  /**\r\n   * 先计算分页每页的卡片数pageSize，再计算总页数totalPage\r\n   */\r\n  private calculatePaging(): void {\r\n    this.calculatePageSize();\r\n    this.calculateTotalPage();\r\n  }\r\n  /**\r\n   * 计算分页总页数\r\n   */\r\n  private calculateTotalPage(): void {\r\n    this.totalCard = this.cardComRefs.length;\r\n    // 计算共有多少页\r\n    this.totalPage = Math.ceil(this.totalCard / this.pageSize);\r\n    // 生成分页器显示数组\r\n    this.generatePagesArray();\r\n    // 重新计算总页面后，需要处理当前页大于总页数的场景\r\n    if (this.currentPage > this.totalPage) {\r\n      this.goPage(this.totalPage);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 计算一次显示的卡片数\r\n   */\r\n  private calculatePageSize(): void {\r\n    // getComputedStyle 获取的宽度，在ie11下不包含padding和border,所以使用getBoundingClientRect（）\r\n    // 在初始化时，totalPage还没有计算出来，左右翻页按钮没有显示，但容器元素的可用宽度应该减去左右按钮的宽度之和30+30=60\r\n    const containerWidth: number = (this.listWrapperEleRef.nativeElement as HTMLElement).getBoundingClientRect().width - 60;\r\n    this.cardWidth = (this.cardComRefs.first.nativeElement as HTMLElement).getBoundingClientRect().width;\r\n    const cardStyle: CSSStyleDeclaration = getComputedStyle(this.cardComRefs.first.nativeElement);\r\n    this.cardSpan = parseFloat(cardStyle.marginRight);\r\n    // 当容器宽度小于card宽度时,需处理，避免分页不能正常生成\r\n    this.pageSize = containerWidth <= (this.cardWidth + this.cardSpan) ? 1 : Math.floor(containerWidth / (this.cardWidth + this.cardSpan));\r\n  }\r\n\r\n  /**\r\n   * 生成分页器显示的数组\r\n   */\r\n  private generatePagesArray(): void {\r\n    this.pageList = [];\r\n    // 判断总页数如果小于等于分页的长度，若小于则直接显示\r\n    if (this.totalPage <= 8) {\r\n      for (let i: number = 1; i <= this.totalPage; i++) {\r\n        this.pageList.push(i);\r\n      }\r\n    } else if (this.currentPage <= 3) {\r\n      // 右边...\r\n      for (let i: number = 1; i <= 5; i++) {\r\n        this.pageList.push(i);\r\n      }\r\n      this.pageList.push('...');\r\n      this.pageList.push(this.totalPage);\r\n    } else if (this.currentPage >= this.totalPage - 3) {\r\n      // 左边 ...\r\n      this.pageList.push(1);\r\n      this.pageList.push('...');\r\n      for (let i: number = 4; i >= 1; i--) {\r\n        this.pageList.push(this.totalPage - i);\r\n      }\r\n      this.pageList.push(this.totalPage);\r\n    } else {\r\n      // 最后一种情况，两边都有...\r\n      this.pageList.push(1);\r\n      this.pageList.push('...');\r\n      for (let i: number = 2; i >= 1; i--) {\r\n        this.pageList.push(this.currentPage - i);\r\n      }\r\n      this.pageList.push(this.currentPage);\r\n      for (let i: number = 1; i < 2; i++) {\r\n        this.pageList.push(this.currentPage + i);\r\n      }\r\n      this.pageList.push('...');\r\n      this.pageList.push(this.totalPage);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 指定页码翻页\r\n   * @param pageNum 跳转到的页码\r\n   * @ignore\r\n   */\r\n  public goPage(pageNum: number | string): void {\r\n    // ... 时，不做处理\r\n    if (typeof pageNum === 'string') {\r\n      return;\r\n    }\r\n\r\n    this.currentPage = pageNum;\r\n    // 偏移量=(当前页-1)*每页的卡片数量*（卡片宽度 + 卡片的Margin)\r\n    this.left = -(pageNum - 1) * this.pageSize * (this.cardWidth + this.cardSpan) + 'px';\r\n    // 触发pageChange事件\r\n    const data: TpSlidecardsPaginationEvent = {\r\n      currentPage: pageNum,\r\n      pageSize: this.pageSize,\r\n      totalPage: this.totalPage\r\n    };\r\n    this.pageChange.emit(data);\r\n\r\n  }\r\n\r\n  /**\r\n   * 向前跳转一页\r\n   * @ignore\r\n   */\r\n  public goPrev(): void {\r\n    if (this.currentPage > 1) {\r\n      this.goPage(this.currentPage - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 向后跳转一页\r\n   * @ignore\r\n   */\r\n  public goNext(): void {\r\n    if (this.currentPage < this.totalPage) {\r\n      this.goPage(this.currentPage + 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 展示指定索引的卡片，在初始化及currentIndex 改变时，如果指定索引不在当前页，跳转到能显示c索引对应卡片的页码\r\n   */\r\n  private showCurrentCard(index: number): void {\r\n    // 如果索引和卡片的数目不匹配，不做处理。\r\n    if (index < 0 && index > (this.totalCard - 1)) {\r\n      return;\r\n    }\r\n    // 当前一屏卡片的最大最小索引\r\n    const maxIndex: number = this.currentPage * this.pageSize - 1;\r\n    const minIndex: number = this.currentPage > 0 ? ((this.currentPage - 1) * this.pageSize - 1) : 0;\r\n    // 当前索卡片是否在当前页面\r\n    if (index < minIndex || index > maxIndex) {\r\n      const targetPage: number = Math.ceil((index + 1) / this.pageSize);\r\n      this.goPage(targetPage);\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\n\r\nimport { TpSlidecardsComponent } from './TpSlidecardsComponent';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpIconModule\r\n  ],\r\n  declarations: [TpSlidecardsComponent],\r\n  exports: [TpSlidecardsComponent]\r\n})\r\n\r\nexport class TpSlidecardsModule {}\r\nexport { TpSlidecardsComponent, TpSlidecardsPaginationEvent} from './TpSlidecardsComponent';\r\n","import { Component, ContentChild, Input, TemplateRef } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n * 步骤引导组件，用于静态展示操作步骤\r\n *\r\n * <example-url>../tinyplus3demo/#/stepguide/stepguide-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-stepguide',\r\n    templateUrl: './stepguide.html',\r\n    styleUrls: ['./stepguide.less']\r\n})\r\nexport class TpStepguideComponent extends TiBaseComponent {\r\n    /**\r\n     * 各步骤呈现涉及的信息配置\r\n     *\r\n     * 包含3个属性，1.label：该步骤的标题；2.iconClass：该步骤的图标/图片样式；3.description：该步骤的详细描述。\r\n     */\r\n    @Input() steps: Array<{\r\n        label: string;\r\n        iconClass: string;\r\n        description: string;\r\n    }>;\r\n    /**\r\n     * 每个步骤最大显示宽度，默认值为'156px'\r\n     */\r\n    @Input() stepMaxWidth: string;\r\n    /**\r\n     * @ignore\r\n     * 自定义description的模板\r\n     */\r\n    @ContentChild('description', { static: true }) description: TemplateRef<any>;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TpStepguideComponent } from './TpStepguideComponent';\r\n/**\r\n * @ignore\r\n * 规范提出，云业务通用场景不会使用该组件，10.1.3起，在官网隐藏该组件。\r\n */\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  exports: [TpStepguideComponent],\r\n  declarations: [TpStepguideComponent]\r\n})\r\nexport class TpStepguideModule {}\r\nexport { TpStepguideComponent } from './TpStepguideComponent';\r\n","import {\r\n   Component,\r\n   EventEmitter,\r\n   Input,\r\n   Output,\r\n   ViewChild\r\n  } from '@angular/core';\r\nimport { Params } from '@angular/router';\r\n\r\nimport { TiBaseComponent, TiSelectComponent, Util, TiPositionType } from '@cloud/tiny3';\r\n\r\n/**\r\n * items接口item项的数据接口\r\n */\r\nexport interface TpSubtitleItem {\r\n    label: string;\r\n    [propName: string]: any;\r\n}\r\n\r\n@Component({\r\n    selector: 'tp-subtitle',\r\n    templateUrl: './subtitle.html',\r\n    styleUrls: ['./subtitle.less'],\r\n    host: {\r\n        '[style.max-width]': 'maxWidth'\r\n    }\r\n})\r\n\r\n/**\r\n * 返回标题组件\r\n *\r\n * <example-url>../tinyplus3demo/#/subtitle/subtitle-all</example-url>\r\n */\r\nexport class TpSubtitleComponent extends TiBaseComponent {\r\n    /**\r\n     * 后退按钮链接\r\n     */\r\n    @Input() href: string = '';\r\n    /**\r\n     * 数据选项，如果选项大于1个，标题是下拉的形式\r\n     */\r\n    @Input() items: Array<TpSubtitleItem> = [];\r\n    /**\r\n     * items 大于1项时，展开面板中是否有搜索\r\n     */\r\n    @Input() searchable: boolean = false;\r\n    /**\r\n     * 指定在何处显示链接的资源, 即a标签的target属性\r\n     */\r\n    @Input() target: '_blank' | '_self' | '_parent' | '_top' = '_blank';\r\n    // select组件选中项模板引用名为#selected, 两个名字冲突，所以使用了别名\r\n    /**\r\n     * 选中项，items 的条数大于1时才生效，双向数据绑定\r\n     */\r\n    @Input('selected') selectedItem: TpSubtitleItem;\r\n    /**\r\n     * 后退按钮点击后的跳转路由, 设置后href和target失效\r\n     * 10.1.2 新增\r\n     */\r\n    @Input() backRouterLink: string | Array<any>;\r\n    /**\r\n     * 后退按钮点击后的跳转路由参数\r\n     * 10.1.0 新增\r\n     */\r\n    @Input() queryParams: Params;\r\n    /**\r\n     * 下拉面板宽度设置\r\n     * 10.1.2 新增\r\n     */\r\n    @Input() panelWidth: string;\r\n    /**\r\n     * 设置最大宽度\r\n     *  10.1.2 新增\r\n     */\r\n    @Input() maxWidth: string = '250px';\r\n    /**\r\n     * 设置标题溢出提示的方向\r\n     *  10.1.3 新增\r\n     */\r\n    @Input() tipPosition: TiPositionType = 'top';\r\n    /**\r\n     * 选中项，items 的条数大于1时才生效，双向数据绑定\r\n     */\r\n    @Output() readonly selectedChange: EventEmitter<TpSubtitleItem> = new EventEmitter();\r\n    /**\r\n     * 后退按钮点击回调\r\n     */\r\n    @Output() readonly back: EventEmitter<Event> = new EventEmitter();\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild(TiSelectComponent) selectComRef: TiSelectComponent;\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 如果没有传入选中项，且items 条目数大于1 默认选中第一项，\r\n        if (Util.isUndefined(this.selectedItem) && this.items.length > 1) {\r\n            this.selectedItem = this.items[0];\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n      super.ngAfterViewInit();\r\n      // 选项数大于等于2 ，才出现select\r\n      if (this.items.length < 2) {\r\n          return ;\r\n      }\r\n      // 暗色背景，给ti-select 添加dark属性\r\n      const attrs: NamedNodeMap = this.hostRef.nativeElement.attributes;\r\n      if (!Util.isUndefined(attrs['dark'])) {\r\n          this.renderer.setAttribute(this.selectComRef.nativeElement, 'dark', '');\r\n      }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 触发back 事件\r\n     */\r\n    public onClick($event: Event): void {\r\n      this.back.emit($event);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * select选中项改变，触发subtitle selectedChange事件\r\n     */\r\n    public onSelectedOptionChange(option: any): void {\r\n       this.selectedChange.emit(option as TpSubtitleItem);\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { TiOverflowModule, TiSelectModule, TiTipModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TpSubtitleComponent } from './TpSubtitleComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    RouterModule,\r\n    TiOverflowModule,\r\n    TiSelectModule,\r\n    TiTipModule,\r\n    TpIconModule\r\n  ],\r\n  exports: [TpSubtitleComponent],\r\n  declarations: [TpSubtitleComponent]\r\n})\r\n\r\nexport class TpSubtitleModule {}\r\nexport { TpSubtitleComponent, TpSubtitleItem} from './TpSubtitleComponent';\r\n","import { Component } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n/**\r\n * TpSwiperCard 是单个卡片组件\r\n */\r\n@Component({\r\n    selector: 'tp-swipercard',\r\n    template: `<ng-content></ng-content>`,\r\n    styleUrls: ['./swipercard.less']\r\n})\r\n\r\nexport class TpSwipercardComponent extends TiBaseComponent {}\r\n","import { Component, ContentChildren, ElementRef, EventEmitter, Input, NgZone, Output, QueryList, Renderer2, SimpleChange, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { TiBaseComponent } from '@cloud/tiny3';\r\n\r\nimport { TpSwipercardComponent } from './TpSwipercardComponent';\r\n\r\n/**\r\n * swiper组件每个展示块为一个card，点击左右按钮可以实现card切换功能\r\n *\r\n * <example-url>../tinyplus3demo/#/swiper/swiper-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-swiper',\r\n    templateUrl: './swiper.html',\r\n    styleUrls: ['./swiper.less'],\r\n    host: {\r\n        '[class.tp-swiper-multiple]': 'showCardNum > 1'\r\n    }\r\n})\r\n\r\nexport class TpSwiperComponent extends TiBaseComponent {\r\n    constructor(private elementRef: ElementRef, private renderer2: Renderer2, private zone: NgZone) {\r\n        super(elementRef, renderer2);\r\n    }\r\n    /**\r\n     * 指定当前激活项\r\n     */\r\n    @Input() activeIndex: number = 0;\r\n    /**\r\n     * 10.0.2新增\r\n     *\r\n     * 是否自动播放\r\n     */\r\n    @Input() autoplay: boolean = false;\r\n    /**\r\n     * 10.0.2新增\r\n     *\r\n     * 自动播放时，默认的播放（翻页）速度\r\n     */\r\n    @Input() autoplaySpeed: number = 3000;\r\n    /**\r\n     * 10.1.2新增\r\n     *\r\n     * 每页展示卡片数量\r\n     */\r\n    @Input() showCardNum: number = 1;\r\n    /**\r\n     * 10.1.2新增\r\n     *\r\n     * 多图轮播卡片间距，8-12px，默认为8px（规范建议使用偶数值，即8px，10px，12px）\r\n     */\r\n    @Input() cardGap: string = '8px';\r\n    /**\r\n     * 10.1.2新增\r\n     *\r\n     * 指示器位置，三个属性值，‘below’容器外部，‘bottom’容器内部底部，‘none’不显示\r\n     */\r\n    @Input() indicatorPosition: 'bottom' | 'below' | 'none' = 'below';\r\n    /**\r\n     * 10.1.2新增\r\n     *\r\n     * 是否无限循环\r\n     */\r\n    @Input() loop: boolean = true;\r\n    /**\r\n     * 当前卡片切换触发的事件\r\n     */\r\n    @Output() readonly activeIndexChange: EventEmitter<any> = new EventEmitter<any>();\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('cards', { static: true }) cards: ElementRef;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ContentChildren(TpSwipercardComponent) swipercardComs: QueryList<TpSwipercardComponent>;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ViewChild('wrapper', { static: true }) wrapperEle: ElementRef;\r\n    /**\r\n    /**\r\n     * @ignore\r\n     * 卡片总页数\r\n     */\r\n    public totalPage: number = 0;\r\n    /**\r\n     * @ignore\r\n     * 当前页， 按照索引值从0开始\r\n     */\r\n    public currentPage: number = 0;\r\n    /**\r\n     * @ignore\r\n     * 面板指示点的集合\r\n     */\r\n    public swiperBullets: Array<any> = [];\r\n    // 卡片切换动画间隔，单位ms\r\n    private transitionSpeed: number = 600;\r\n    // 定时器任务\r\n    private autoplayId: any;\r\n    // 卡片总数量\r\n    private cardNum: number = 0;\r\n    private pageWidth: number;\r\n    private swiperCardWidth: number;\r\n    private cardSpace: number;\r\n    private totalWidth: number;\r\n    private unlistenResize: () => void;\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        // 一屏显示卡片的数目会随窗口大小而变化，所以监听窗口大小变化重新计算分页，\r\n        this.zone.runOutsideAngular(() => {\r\n            this.unlistenResize = this.renderer2.listen(window, 'resize', () => {\r\n                this.setCardsWidth();\r\n                this.setLeftPosition(this.currentPage);\r\n            });\r\n        });\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterContentChecked(): void {\r\n        super.ngAfterContentChecked();\r\n        // 当卡片数量变化时，计算总数量\r\n        if (this.cards.nativeElement.children.length !== this.cardNum ) {\r\n            this.setCardNum();\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line: use-life-cycle-interface\r\n    ngAfterViewInit(): void {\r\n        this.setCardsWidth();\r\n        this.setLeftPosition(this.currentPage);\r\n        this.renderer.setStyle(this.cards.nativeElement, 'transition', `left ${this.transitionSpeed}ms`);\r\n\r\n        // 只有一页时，不自动轮播\r\n        if (this.autoplay && this.autoplaySpeed && this.totalPage > 1) {\r\n            this.autoplayId = setInterval((): void => {\r\n                this.onClickNext();\r\n            }, this.autoplaySpeed);\r\n        }\r\n    }\r\n    ngAfterViewChecked():void {\r\n        // 外层容器宽度有变化时，重新计算宽度及位置\r\n        if (this.wrapperEle && this.wrapperEle.nativeElement.getBoundingClientRect().width !== this.pageWidth) {\r\n            this.setCardsWidth();\r\n            this.setLeftPosition(this.currentPage);\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        super.ngOnChanges(changes);\r\n        const indexObj: SimpleChange = changes['activeIndex'];\r\n        if (indexObj && !indexObj.firstChange) {\r\n            this.calculateCurrentPage(indexObj.currentValue);\r\n            this.setLeftPosition(this.currentPage);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.autoplayId) {\r\n            clearInterval(this.autoplayId);\r\n            this.autoplayId = undefined;\r\n        }\r\n\r\n        if (this.unlistenResize) {\r\n            this.unlistenResize();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 点击左侧按钮触发事件\r\n     */\r\n    public onClickPrev(): void {\r\n        this.activeCard(this.currentPage - 1);\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 点击右侧按钮触发事件\r\n     */\r\n    public onClickNext(): void {\r\n        this.activeCard(this.currentPage + 1);\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     * 点击指示器触发事件\r\n     */\r\n    public onClickDot(index: number): void {\r\n        this.activeCard(index);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 点击左右侧按钮、面板指示板触发事件\r\n     */\r\n    private activeCard(index: number): void {\r\n        if(this.totalPage === 1) {\r\n            return;\r\n        }\r\n\r\n        this.renderer.setStyle(this.cards.nativeElement, 'transition', `left ${this.transitionSpeed}ms`);\r\n        if (index === this.totalPage && this.loop) {\r\n            this.currentPage = 0;\r\n            const first: Element = this.swipercardComs.first.nativeElement;\r\n            this.setPosition(first, true);\r\n            this.setLeftPosition(this.totalPage);\r\n            this.adjustPosition(first);\r\n        } else if (index === -1 && this.loop) {\r\n            this.currentPage = this.totalPage - 1;\r\n            const last: Element = this.swipercardComs.last.nativeElement;\r\n            this.setPosition(last, false);\r\n            this.setLeftPosition(-1);\r\n            this.adjustPosition(last);\r\n        } else {\r\n            this.currentPage = index <= -1 ? 0 : index >= this.totalPage ? this.totalPage - 1 : index;\r\n            this.setLeftPosition(this.currentPage);\r\n            this.activeIndexChange.emit(this.currentPage);\r\n        }\r\n    }\r\n\r\n    // 计算卡片总数及总页数\r\n    private setCardNum(): void {\r\n        this.cardNum = this.cards && this.cards.nativeElement.children && this.cards.nativeElement.children.length;\r\n        this.calculatpaging();\r\n        this.swiperBullets.length = this.totalPage;\r\n    }\r\n\r\n    // 计算卡片容器总宽度\r\n    private setCardsWidth(): void {\r\n        this.calculatecardWidth();\r\n        this.renderer.setStyle(this.cards.nativeElement, 'width', `${this.totalWidth}px`);\r\n    }\r\n\r\n    // 当点击左右按钮时，设置激活卡片相对位置\r\n    private setLeftPosition(index: number): void {\r\n        if(this.totalPage === 1) {\r\n            return;\r\n        }\r\n\r\n        // 最后一页未占完\r\n        if (index === this.totalPage - 1 && this.cardNum % this.showCardNum !== 0) {\r\n            const swiperCardNum: number = this.cardNum - this.showCardNum;\r\n            this.renderer.setStyle(this.cards.nativeElement, 'left', `${- (swiperCardNum) * this.swiperCardWidth - (swiperCardNum - 1) * this.cardSpace}px`);\r\n            this.renderer2.setStyle(this.swipercardComs.toArray()[swiperCardNum].nativeElement, 'margin-right', this.cardGap);\r\n            return;\r\n        }\r\n\r\n        // 无限循环\r\n        if (index === this.totalPage && this.loop) {\r\n            this.renderer.setStyle(this.cards.nativeElement, 'left', `${-(this.totalWidth)}px`);\r\n            return;\r\n\r\n        }\r\n        if (index === -1 && this.loop) {\r\n            this.renderer.setStyle(this.cards.nativeElement, 'left', `${this.swiperCardWidth * this.showCardNum + (this.showCardNum - 1) * this.cardSpace}px`);\r\n            return;\r\n        }\r\n\r\n        this.renderer.setStyle(this.cards.nativeElement, 'left', `${- index * 100}%`);\r\n    }\r\n\r\n    // 调整第一页或者最后一页的位置，为动画做准备\r\n    private setPosition(targetEle: Element, lastToFirst: boolean): void {\r\n        this.renderer.setStyle(targetEle, 'transform', `translateX(${lastToFirst ? this.totalWidth : this.totalWidth * -1}px)`);\r\n    }\r\n\r\n    private adjustPosition(targetEle?: Element): void {\r\n        setTimeout((): void => {\r\n            this.renderer.removeStyle(targetEle, 'transform');\r\n            this.renderer.removeStyle(this.cards.nativeElement, 'transition');\r\n            this.setLeftPosition(this.currentPage);\r\n            this.activeIndexChange.emit(this.currentPage);\r\n        }, this.transitionSpeed);\r\n    }\r\n\r\n    // 计算每页显示卡片数，总页数及当前页\r\n    private calculatpaging(): void {\r\n        this.calculateTotalPage();\r\n        this.calculateCurrentPage(this.activeIndex);\r\n    }\r\n\r\n    /**\r\n     * 计算卡片宽度\r\n     */\r\n    private calculatecardWidth(): void {\r\n        // 初始化时，多图且左右翻页按钮还没有显示，容器元素的可用宽度需要减去左右按钮的宽度之和32+32=64\r\n        if (this.totalPage === 0  && this.showCardNum > 1) {\r\n            this.pageWidth = this.wrapperEle.nativeElement.getBoundingClientRect().width - 64;\r\n        } else {\r\n            this.pageWidth = this.wrapperEle.nativeElement.getBoundingClientRect().width;\r\n        }\r\n\r\n        // 每页卡片总间距\r\n        this.cardSpace = this.showCardNum > 1 ? parseInt(this.cardGap, 10) : 0;\r\n        const cardsSpace: number = (this.showCardNum - 1) * parseInt(this.cardGap, 10);\r\n        this.swiperCardWidth = (this.pageWidth - cardsSpace) / this.showCardNum;\r\n        this.totalWidth = this.swiperCardWidth * this.cardNum + cardsSpace * this.totalPage;\r\n\r\n        this.swipercardComs.toArray().forEach((item: TpSwiperComponent, index: number) => {\r\n            // 设置卡片宽度\r\n            this.renderer2.setStyle(item.nativeElement, 'width', this.swiperCardWidth + 'px');\r\n            // 设置卡片间距，每页最后一个卡片不设置\r\n            if ((index + 1) % this.showCardNum !== 0 && index !== this.cardNum - 1) {\r\n                this.renderer2.setStyle(item.nativeElement, 'margin-right', this.cardSpace + 'px');\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 计算总页数\r\n     */\r\n    private calculateTotalPage(): void {\r\n        this.totalPage = Math.ceil(this.cardNum / this.showCardNum);\r\n        if (this.currentPage > this.totalPage) {\r\n            this.activeCard(this.totalPage);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  计算当前页\r\n     */\r\n    private calculateCurrentPage(index: number): void {\r\n        // 当前索引值不正确，不处理\r\n        if (index < 0 || index > (this.cardNum - 1)) {\r\n            return;\r\n        }\r\n\r\n        if (this.showCardNum === 1) {\r\n            this.currentPage = index;\r\n            return;\r\n        }\r\n\r\n        // 当前一页卡片的最大最小索引\r\n        const maxIndex: number = (this.currentPage + 1) * this.showCardNum - 1;\r\n        const minIndex: number = this.currentPage > 0 ? (this.currentPage * this.showCardNum - 1) : 0;\r\n        // 当前索卡片是否在当前页面\r\n        if (index < minIndex || index > maxIndex) {\r\n            this.currentPage = Math.floor((index + 1) / this.showCardNum);\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TiIconModule, TiOutlineModule } from '@cloud/tiny3';\r\n\r\nimport { TpSwiperComponent } from './TpSwiperComponent';\r\nimport { TpSwipercardComponent } from './TpSwipercardComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TiIconModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [TpSwiperComponent, TpSwipercardComponent],\r\n  declarations: [TpSwiperComponent, TpSwipercardComponent]\r\n})\r\n\r\nexport class TpSwiperModule {}\r\nexport { TpSwiperComponent } from './TpSwiperComponent';\r\nexport { TpSwipercardComponent } from './TpSwipercardComponent';\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpGoandbackModule } from '../goandback/TpGoandbackModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpGoandbackModule\r\n  ]\r\n})\r\nexport class TpBindingModule {\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TpBindingModule } from './TpBindingModule';\r\nimport { TiLocale } from '@cloud/tiny3';\r\nimport { TpGoandbackService, TpGoAndBackConfig } from '../goandback/TpGoandbackService';\r\n\r\n/**\r\n * 绑定组件  binding，使用该服务时需要引入模块TpBindingModule，导入服务TpBindingSerive,通过调用TpBindingService.open(config)方法生成绑定内容\r\n *\r\n * <example-url>../tinyplus3demo/#/binding/binding-all</example-url>\r\n */\r\n@Injectable({\r\n    providedIn: TpBindingModule\r\n})\r\nexport class TpBindingService extends TpGoandbackService {\r\n    protected words: any = TiLocale.getLocaleWords().tpBinding;\r\n\r\n    public open(config?: TpGoAndBackConfig): void {\r\n        // binding组件-url无需添加params处理\r\n        config.addUrlParams = false;\r\n        super.open(config);\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { TpGoandbackModule } from '../goandback/TpGoandbackModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpGoandbackModule\r\n  ]\r\n})\r\n\r\nexport class TpIdentificationModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { TpIdentificationModule } from './TpIdentificationModule';\r\nimport { TiLocale, TiMessageType } from '@cloud/tiny3';\r\nimport { TpGoandbackService } from '../goandback/TpGoandbackService';\r\n\r\n/**\r\n * 认证组件  identification，使用该服务时需要引入模块TpIdentificationModule，导入服务TpIdentificationSerive,通过调用TpIdentificationService.open(config)方法生成认证内容\r\n *\r\n * <example-url>../tinyplus3demo/#/identification/identification-all</example-url>\r\n */\r\n@Injectable({\r\n    providedIn: TpIdentificationModule\r\n})\r\nexport class TpIdentificationService extends TpGoandbackService {\r\n    protected words: any = TiLocale.getLocaleWords().tpIdentification;\r\n    protected firstMessageType: TiMessageType = 'prompt';\r\n}\r\n","import { Component, ElementRef, HostBinding, Input, ViewChild } from '@angular/core';\r\nimport { TiBaseComponent, TiLocale, Util } from '@cloud/tiny3';\r\n/**\r\n * @ignore\r\n */\r\n@Component({\r\n    templateUrl: './identityauthmodal.html',\r\n    styleUrls: ['./identityauthmodal.less']\r\n})\r\n\r\nexport class TpIdentityauthModalComponent extends TiBaseComponent {\r\n    @Input() userInfoRes: any;\r\n    @Input() roleInfoRes: any;\r\n    @Input() userId: string;\r\n    @Input() serviceEndpointList: Array<any>;\r\n    @Input() mask: any;\r\n    @Input() camel: any;\r\n    @Input() successFn: any;\r\n    @Input() appWebPath: string;\r\n\r\n    @HostBinding('attr.id') id: string = 'tp-identityauth';\r\n    @ViewChild('OKButton', { static: true }) OKButton: ElementRef;\r\n    /**\r\n     * 组件使用的词条，此处统一获取\r\n     */\r\n    private i18n_Identityauth: any = TiLocale.getLocaleWords().tpIdentityauth;\r\n    /**\r\n     * @ignore\r\n     * 弹窗上部的红色alert相关配置\r\n     */\r\n    public errorAlert: any = {\r\n        show: false,\r\n        label: ''\r\n    };\r\n    /**\r\n     * @ignore\r\n     * 是否显示校验的错误提示\r\n     *\r\n     * 本组件不使用校验组件，只是引入tiErrorMsgComponent，在必要的时候显示或隐藏\r\n     */\r\n    public showErrorMessage: boolean = false;\r\n    /**\r\n     * @ignore\r\n     * 不同绑定方式下，组件的通用配置\r\n     */\r\n    public identityAuthModel: any = {\r\n        title: this.i18n_Identityauth.title, // 身份验证\r\n        nowBind: this.i18n_Identityauth.bind, // 立即绑定\r\n        noBindTip: this.i18n_Identityauth.no_bind, // 未绑定\r\n        hasBound: this.i18n_Identityauth.has_bound, // 已绑定\r\n        changeBindContent: this.i18n_Identityauth.change, // 修改\r\n        okButtonLabel: this.i18n_Identityauth.okBtn,\r\n        cancelLabel: TiLocale.getLocaleWords().tiCommon.cancelBtn\r\n    };\r\n    /**\r\n     * @ignore\r\n     * Iam服务网址\r\n     */\r\n    public iamUrl: string;\r\n    /**\r\n     * @ignore\r\n     * 蓝色alert的文本\r\n     */\r\n    public alertLabelLink: string;\r\n    /**\r\n     * @ignore\r\n     * 是否为管理员\r\n     */\r\n    public isSecuAdmin: boolean;\r\n\r\n    /**\r\n     * 验证方式为虚拟MFA的配置，表单中‘验证方式’选为'虚拟MFA'时生效\r\n     */\r\n    private bindMfaModel: any = {\r\n        id: 'vmfa',\r\n        key: this.i18n_Identityauth.verification_mfa,\r\n        label: this.i18n_Identityauth.verification_mfa,\r\n        content: '',\r\n        url: '',\r\n        disabled: !TiLocale.getLocaleWords().tpSupportMFA,\r\n        forbidChange: true, // 是否允许修改已绑定虚拟mfa\r\n        hideBoundContent: true, // 是否隐藏已绑定参数\r\n        helpTip: this.i18n_Identityauth.mfa_label_tip,\r\n        codeInput: { // 验证码输入框\r\n            value: '',\r\n            helpTip: this.i18n_Identityauth.bind_mfa_help_tip,\r\n            placeholder: this.i18n_Identityauth.verification_placeholder\r\n        },\r\n        getCodeBtn: { // mfa下没有获取验证码的按钮\r\n            label: ''\r\n        }\r\n    };\r\n    /**\r\n     * 验证方式为手机的配置，表单中‘验证方式’选为'手机'时生效\r\n     */\r\n    private bindPhone: any = {\r\n        id: 'sms',\r\n        key: this.i18n_Identityauth.verification_mobile,\r\n        label: this.i18n_Identityauth.bind_mobile,\r\n        content: '',\r\n        url: '',\r\n        forbidChange: false,\r\n        hideBoundContent: false,\r\n        codeInput: {\r\n            value: '',\r\n            helpTip: '',\r\n            placeholder: this.i18n_Identityauth.verification_placeholder\r\n        },\r\n        getCodeBtn: {\r\n            label: this.i18n_Identityauth.get_verification_code\r\n        }\r\n    };\r\n    /**\r\n     * 验证方式为邮箱的配置，表单中‘验证方式’选为'邮箱'时生效\r\n     */\r\n    private bindEmail: any = {\r\n        id: 'email',\r\n        key: this.i18n_Identityauth.verification_email,\r\n        label: this.i18n_Identityauth.bind_email,\r\n        content: '',\r\n        disabled: !TiLocale.getLocaleWords().tpSupportEmail,\r\n        url: '',\r\n        forbidChange: false,\r\n        hideBoundContent: false,\r\n        codeInput: {\r\n            value: '',\r\n            helpTip: '',\r\n            placeholder: this.i18n_Identityauth.email_verification_placeholder\r\n        },\r\n        getCodeBtn: {\r\n            label: this.i18n_Identityauth.get_verification_code\r\n        }\r\n    };\r\n    /**\r\n     * @ignore\r\n     *\r\n     * 表单中使用的主要数据\r\n     */\r\n    public formModel: any = {\r\n        selected: {\r\n            content: '',\r\n            disabled: false,\r\n            url: '',\r\n            codeInput: {\r\n                label: this.i18n_Identityauth.verification_code,\r\n                value: '',\r\n                change: ($event: string): void => {\r\n                    this.formModel.selected.okBtn.disabled = !$event;\r\n                },\r\n                focus: (): void => {\r\n                    this.clearValidMessage();\r\n                }\r\n            },\r\n            getCodeBtn: {\r\n                disabled: false,\r\n                isLock: false,\r\n                tip: '',\r\n                click: (): void => {\r\n                    // 获取验证码\r\n                    this.getVerificationCode();\r\n                }\r\n            },\r\n            okBtn: {\r\n                disabled: true,\r\n                click: (): void => {\r\n                    this.verifyVerificationCode();\r\n                }\r\n            }\r\n        },\r\n        verificationModel: {\r\n            modelList: [this.bindPhone, this.bindEmail, this.bindMfaModel],\r\n            selected: {\r\n                value: '',\r\n                change: ($event): void => {\r\n                    this.formModel.selected = TpIdentityauthModalComponent.deepMerge(\r\n                        this.formModel.selected,\r\n                        this.formModel.verificationModel.modelList.filter(item => item.id === $event)[0]\r\n                    );\r\n                    this.clearValidMessage();\r\n                }\r\n            }\r\n        },\r\n        refresh: {\r\n            loaded: true,\r\n            refreshTip: this.i18n_Identityauth.refresh_tip,\r\n            click: (): void => {\r\n                this.formModel.refresh.loaded = false;\r\n                this.camel.get({\r\n                    url: {\r\n                        s: `${this.appWebPath}/rest/v3.0/OS-MFA/userinfo/{userId}`,\r\n                        o: {\r\n                            userId: this.userId\r\n                        }\r\n                    },\r\n                    timeout: 30000\r\n                })\r\n                    .then((response: any) => {\r\n                        this.formModel.refresh.loaded = true;\r\n                        this.handleUserBoundInfo(response);\r\n                    }, () => {\r\n                        this.formModel.refresh.loaded = true;\r\n                        // 错误提示\r\n                        this.requestErrorTip();\r\n                    });\r\n            }\r\n        }\r\n    };\r\n\r\n    // 获取https://console.huaweicloud.com/iam/\r\n    private static getIamEndpoint(id: string, endpointList: Array<any>): string {\r\n        const endpoint: any = endpointList.filter((item: any) => item.id === id)[0];\r\n        if (endpoint) {\r\n            return endpoint.endpoint;\r\n        }\r\n\r\n        return '';\r\n    }\r\n    /**\r\n     * 对象深合并方法，不适宜数组对象\r\n     *\r\n     * 1.targetObj中已存在的简单属性会被覆盖；已存在的同名数组被合并；已存在的对象属性会进入内部进行合并，规则同上\r\n     * 2.targetObj中不存在的属性直接添加\r\n     *\r\n     * @param targetObj 对象类型\r\n     * @param sourceObj 对象类型\r\n     * @returns 被合并的targetObj\r\n     */\r\n    private static deepMerge(targetObj: Object, sourceObj: Object): any {\r\n        for (const key in sourceObj) {\r\n            if (Array.isArray(sourceObj[key])) {\r\n                targetObj[key].push(...sourceObj[key]);\r\n            } else if (typeof sourceObj[key] === 'object') {\r\n                this.deepMerge(targetObj[key], sourceObj[key]);\r\n            } else {\r\n                targetObj[key] = sourceObj[key];\r\n            }\r\n        }\r\n\r\n        return targetObj;\r\n    }\r\n    /**\r\n     * 初始化用户信息\r\n     */\r\n    private handleUserBoundInfo(response: any): void {\r\n        const verificationModel: any = this.formModel.verificationModel;\r\n        if (!response.method) {\r\n            verificationModel.selected.value = verificationModel.selected.value || verificationModel.modelList[0].id;\r\n        }\r\n        verificationModel.modelList.forEach((item: any) => {\r\n            if (!response.method) {\r\n                item.content = '';\r\n\r\n                return;\r\n            }\r\n            // response.method默认绑定方式\r\n            if (response.method === item.id) {\r\n                // 刷新时要保持原来选择\r\n                verificationModel.selected.value = verificationModel.selected.value || item.id;\r\n                // response.info默认绑定方式的绑定信息\r\n                item.content = response.info[response.method] || response.info.mobile;\r\n            } else if (response[item.id] || (item.id === 'sms' && response.mobile)) {\r\n                item.content = response[item.id] || response.mobile;\r\n            }\r\n            // 电话号码格式需单独处理\r\n            if (item.id === 'sms' && item.content) {\r\n                const infoArr: Array<any> = item.content.split('-');\r\n                // tslint:disable-next-line: newline-per-chained-call\r\n                item.content = `+${infoArr[0].trim().replace(/^0+/, '')}${infoArr[1]}`;\r\n            }\r\n        });\r\n\r\n        verificationModel.selected.change(verificationModel.selected.value);\r\n    }\r\n\r\n    private getVerificationCode(): void {\r\n        this.mask.show();\r\n        const sendCodeRequestData: any = {\r\n            user_id: this.userId,\r\n            method: this.formModel.verificationModel.selected.value,\r\n            scene: 'opsProtect'\r\n        };\r\n        this.camel.post({\r\n            url: {\r\n                s: `${this.appWebPath}/rest/v3.0/OS-MFA/sendcode`,\r\n                o: {}\r\n            },\r\n            timeout: 30000,\r\n            params: sendCodeRequestData\r\n        })\r\n            .then((res: any) => {\r\n                this.mask.hide();\r\n                this.formModel.selected.okBtn.disabled = !this.formModel.selected.codeInput.value;\r\n                // 按钮灰化，倒计时 变化按钮提示\r\n                this.changeVerificationCodeBtnTip(res.remain_counter);\r\n                this.formModel.selected.getCodeBtn.disabled = true;\r\n                this.countDown(60);\r\n            }, (e: any) => {\r\n                this.mask.hide();\r\n                // 该功能已锁定,请30分钟之后再操作。\r\n                const label: string =\r\n                    e.status === 423 ? this.i18n_Identityauth.operation_lock : this.i18n_Identityauth.system_busy;\r\n                // 错误提示\r\n                this.requestErrorTip(label);\r\n            });\r\n    }\r\n\r\n    // 获取验证码提示变化\r\n    private changeVerificationCodeBtnTip(remainCounter: number): void {\r\n        if (remainCounter <= 3 && remainCounter > 0) { // 再请求获取验证码{0}次,该功能将被锁定。\r\n            this.formModel.selected.getCodeBtn.tip =\r\n                Util.formatEntry(this.i18n_Identityauth.get_verification_code_times, [remainCounter]);\r\n        } else if (remainCounter <= 0) { // 该功能已锁定\r\n            this.formModel.selected.getCodeBtn.isLock = true;\r\n            this.formModel.selected.getCodeBtn.tip = this.i18n_Identityauth.operation_lock_btn_tip;\r\n        } else {\r\n            this.formModel.selected.getCodeBtn.tip = '';\r\n        }\r\n    }\r\n\r\n    private requestErrorTip(label?: string): void {\r\n        this.errorAlert.label = label || this.i18n_Identityauth.system_busy;\r\n        this.errorAlert.show = true;\r\n    }\r\n\r\n    // 倒计时\r\n    private countDown(s: number): void {\r\n        let time: number = s;\r\n        time--;\r\n        if (time >= 0) {\r\n            this.formModel.selected.getCodeBtn.label =\r\n                Util.formatEntry(this.i18n_Identityauth.next_get_verification_code, [time]);\r\n            setTimeout(() => {\r\n                this.countDown(time);\r\n            }, 1000);\r\n        } else if (this.formModel.selected.getCodeBtn.isLock) { // 已锁定\r\n            this.formModel.selected.getCodeBtn.disabled = true;\r\n            this.formModel.selected.getCodeBtn.label = this.i18n_Identityauth.get_verification_code;\r\n        } else {\r\n            this.formModel.selected.getCodeBtn.disabled = false;\r\n            this.formModel.selected.getCodeBtn.label = this.i18n_Identityauth.get_verification_code;\r\n        }\r\n    }\r\n\r\n    private verifyVerificationCode(): void {\r\n        const requestData: any = {\r\n            verifycode: this.formModel.selected.codeInput.value, // 验证码输入值\r\n            method: this.formModel.verificationModel.selected.value, // 验证方式\r\n            scene: 'opsProtect'\r\n        };\r\n        this.mask.show();\r\n        this.camel.post({\r\n            url: {\r\n                s: `${this.appWebPath}/rest/v3.0/OS-MFA/verifycode`,\r\n                o: {}\r\n            },\r\n            timeout: 30000,\r\n            params: requestData\r\n        })\r\n            .then((res: any) => {\r\n                this.mask.hide();\r\n                if (res.cloud_verify_ticket) {\r\n                    // 存储验证码ticket到cookie\r\n                    document.cookie =\r\n                        `cloud_verify_ticket=${res.cloud_verify_ticket};path=/;domain=${document.domain.replace(/.+?\\./, '')}`;\r\n                    // 服务业务逻辑处理\r\n                    this.successFn();\r\n                    this.close();\r\n                } else {\r\n                    this.addValidMessage();\r\n                }\r\n            }, () => {\r\n                this.mask.hide();\r\n                this.addValidMessage();\r\n            });\r\n    }\r\n    /**\r\n     * 去掉input红色边框及背景，隐藏errorMessage\r\n     */\r\n    private clearValidMessage(): void {\r\n        this.showErrorMessage = false;\r\n        const codeInputElem: Element = this.nativeElement.querySelector('ti-item .tp-identityauth-code .tp-identityauth-code-input');\r\n        if (codeInputElem) {\r\n            this.renderer.removeClass(codeInputElem, 'ng-invalid');\r\n        }\r\n    }\r\n    /**\r\n     * 添加input红色边框及背景，显示errorMessage\r\n     */\r\n    private addValidMessage(): void {\r\n        this.showErrorMessage = true;\r\n        const codeInputElem: Element = this.nativeElement.querySelector('ti-item .tp-identityauth-code .tp-identityauth-code-input');\r\n        if (codeInputElem) {\r\n            this.renderer.addClass(codeInputElem, 'ng-invalid');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     *\r\n     * 验证码输入框回车操作\r\n     */\r\n    public enter(): void {\r\n        Util.trigger(this.OKButton.nativeElement, 'focus');\r\n        this.formModel.selected.okBtn.click();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public close(): void { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public dismiss(): void { }\r\n\r\n    ngOnInit(): void {\r\n        this.iamUrl = TpIdentityauthModalComponent.getIamEndpoint('iam', this.serviceEndpointList);\r\n        this.bindMfaModel.url = `${this.iamUrl}#/iam/bindMFA/${this.userId}`;\r\n        // ctc下定制了修改绑定内容的链接\r\n        this.bindPhone.url = this.i18n_Identityauth.changeBindContent || `${this.iamUrl}?#/modifyCredential/phone`;\r\n        this.bindEmail.url = `${this.iamUrl}?#/modifyCredential/email`;\r\n        // roles里有\"secu_admin\"时为管理员\r\n        this.isSecuAdmin = this.roleInfoRes.roles.indexOf('secu_admin') === -1 ? false : true;\r\n        // 管理员提示文本中有取消操作保护的链接\r\n        if (this.isSecuAdmin) {\r\n            // closeIdentityauth字段是ctc局点下定制的关闭二次认证的链接\r\n            this.alertLabelLink = this.i18n_Identityauth.closeIdentityauth\r\n                || this.iamUrl + this.i18n_Identityauth.method_alert_label_link_url;\r\n        }\r\n\r\n        this.handleUserBoundInfo(this.userInfoRes);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {\r\n  TiAlertModule, TiButtonModule, TiFormfieldModule, TiLoadingModule, TiLocaleModule, TiModalModule,\r\n  TiRadioModule, TiTextModule, TiTipModule, TiValidationModule, TiOutlineModule\r\n} from '@cloud/tiny3';\r\n\r\nimport { TpIconModule } from '../../components/icon/TpIconModule';\r\nimport { TpHelptipModule } from '../../components/helptip/TpHelptipModule';\r\n\r\nimport { TpIdentityauthModalComponent } from './TpIdentityauthmodalComponent';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TiAlertModule,\r\n    TiButtonModule,\r\n    TiFormfieldModule,\r\n    TiLoadingModule,\r\n    TiLocaleModule,\r\n    TiModalModule,\r\n    TiRadioModule,\r\n    TiTextModule,\r\n    TiTipModule,\r\n    TiValidationModule,\r\n    TpHelptipModule,\r\n    TpIconModule,\r\n    TiOutlineModule\r\n  ],\r\n  exports: [],\r\n  declarations: [TpIdentityauthModalComponent],\r\n  entryComponents: [TpIdentityauthModalComponent]\r\n})\r\n\r\nexport class TpIdentityauthModule {}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { TiLocale, TiModalService, Util } from '@cloud/tiny3';\r\n\r\nimport { TpIdentityauthModule } from './TpIdentityauthModule';\r\n\r\nimport { TpIdentityauthModalComponent } from './TpIdentityauthmodalComponent';\r\nimport { CfUtil } from '../../cfutils/CfUtil';\r\n\r\n/**\r\n * 二次认证组件\r\n *\r\n * <example-url>../tinyplus3demo/#/identityauth/identityauth-all</example-url>\r\n */\r\n@Injectable({\r\n    providedIn: TpIdentityauthModule\r\n})\r\n\r\nexport class TpIdentityauthService {\r\n    constructor(private tiModal: TiModalService) { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public camel: any;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public mask: any;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public msgService: any;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public userId: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public serviceEndpointList: Array<any>;\r\n    private appWebPath: string;\r\n    /**\r\n     * @ignore\r\n     */\r\n    public successFn: () => void;\r\n\r\n    private queryIsOpen(): void {\r\n        this.mask.show();\r\n        this.camel.get({\r\n            url: {\r\n                s: `${this.appWebPath}/rest/v3-ext/users/op-mfa/{user_id}`,\r\n                o: {\r\n                    user_id: this.userId\r\n                }\r\n            },\r\n            timeout: 30000\r\n        })\r\n            .then((res: any) => {\r\n                this.mask.hide();\r\n                if (res.mfa_support === 'false') {\r\n                    this.successFn();\r\n\r\n                    return;\r\n                }\r\n                // 判断是否已开启敏感操作保护，如开启则进行验证，否则直接进行业务处理\r\n                if (res.ops_switch === 'true') {\r\n                    this.checkCerifyCode();\r\n                } else {\r\n                    this.successFn();\r\n                }\r\n            }, () => {\r\n                this.mask.hide();\r\n                this.msgService.showError(TiLocale.getLocaleWords().tpBinding.confirm_system_busy);\r\n            });\r\n    }\r\n\r\n    private checkCerifyCode(): void {\r\n        // 获取cookie中cloud_verify_ticket  查询校验码合法性\r\n        const storage: any = CfUtil.getStorageService();\r\n        let cloud_verify_ticket: string | undefined;\r\n        if (storage && storage.cookieStorage && storage.cookieStorage.getItem) {\r\n            cloud_verify_ticket = storage.cookieStorage.getItem('cloud_verify_ticket');\r\n        }\r\n        if (cloud_verify_ticket) {\r\n            this.mask.show();\r\n            // 查询验证码合法性\r\n            this.camel.post({\r\n                url: {\r\n                    s: `${this.appWebPath}/rest/v3-ext/users/op-mfa/{user_id}`,\r\n                    o: {\r\n                        user_id: this.userId\r\n                    }\r\n                },\r\n                timeout: 30000,\r\n                params: {\r\n                    cloudVerifyTicket: cloud_verify_ticket\r\n                }\r\n            })\r\n                .then((res: any) => {\r\n                    this.mask.hide();\r\n                    // 验证码合法、直接进行业务处理\r\n                    if (res.id) {\r\n                        this.successFn();\r\n                    }\r\n                }, () => {\r\n                    this.mask.hide();\r\n                    this.identityAuth();\r\n                });\r\n        } else {\r\n            this.identityAuth();\r\n        }\r\n    }\r\n\r\n    private identityAuth(): void {\r\n        // 需查询用户信息(绑定状态)。\r\n        this.mask.show();\r\n        const getUserInfoPromise: Promise<any> = this.camel.get({\r\n            url: {\r\n                s: `${this.appWebPath}/rest/v3.0/OS-MFA/userinfo/{user_id}`,\r\n                o: {\r\n                    user_id: this.userId\r\n                }\r\n            },\r\n            timeout: 30000\r\n        });\r\n        const getRoleInfoPromise: Promise<any> = this.camel.get({\r\n            url: {\r\n                s: `${this.appWebPath}/rest/global/token`,\r\n                o: {}\r\n            },\r\n            timeout: 30000\r\n        });\r\n\r\n        const getServiceEndpointList: () => Promise<any> = (): Promise<any> => {\r\n            // 如果为了本地测试，open方法传入了config.serviceEndpointList，则需要特殊处理\r\n            if (this.serviceEndpointList) {\r\n                return new Promise((resolve: any): void => {\r\n                    resolve(this.serviceEndpointList);\r\n                });\r\n            } else {\r\n                return CfUtil.getEndpoints()\r\n                            .then((endpoints: any) => endpoints.serviceEndpointList);\r\n            }\r\n        };\r\n\r\n        Promise.all([getUserInfoPromise, getRoleInfoPromise, getServiceEndpointList()])\r\n            .then((response: any) => {\r\n                const userInfoRes: any = response[0];\r\n                const roleInfoRes: any = response[1];\r\n                this.mask.hide();\r\n                this.tiModal.open(TpIdentityauthModalComponent, {\r\n                    id: 'tp-identityauth',\r\n                    modalClass: 'tp-identityauth-modal',\r\n                    context: {\r\n                        userInfoRes,\r\n                        roleInfoRes,\r\n                        userId: this.userId,\r\n                        serviceEndpointList: response[2],\r\n                        mask: this.mask,\r\n                        camel: this.camel,\r\n                        successFn: this.successFn,\r\n                        appWebPath: this.appWebPath\r\n                    }\r\n                });\r\n            }, () => {\r\n                this.mask.hide();\r\n                this.msgService.showError(TiLocale.getLocaleWords().tpBinding.confirm_system_busy);\r\n            });\r\n    }\r\n    /**\r\n     * 开启二次认证\r\n     *\r\n     * @param successFn 二次认证通过或不需要认证时的回调函数\r\n     *\r\n     * @param config 组件本地测试需要的参数，开发者实际场景中不需要\r\n     */\r\n    public open(successFn: () => void, config?: any): void {\r\n        this.successFn = successFn;\r\n        this.appWebPath = CfUtil.getAppWebPath();\r\n        if (config) {\r\n            this.camel = config.camel;\r\n            this.msgService = config.msg;\r\n            this.mask = config.mask;\r\n            this.userId = config.userId;\r\n            this.serviceEndpointList = config.serviceEndpointList;\r\n            this.queryIsOpen();\r\n        } else {\r\n            CfUtil.getUser()\r\n                .then((user: any) => {\r\n                this.camel = CfUtil.getHttpService();\r\n                if (user.userId && this.camel) {\r\n                    this.userId = user.userId;\r\n                    this.msgService = CfUtil.getMessage();\r\n                    this.mask = CfUtil.getMask();\r\n                    this.queryIsOpen();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpGoandbackModule } from '../goandback/TpGoandbackModule';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TpGoandbackModule\r\n  ]\r\n})\r\n\r\nexport class TpRechargeModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { TpRechargeModule } from './TpRechargeModule';\r\nimport { TiLocale, TiMessageType } from '@cloud/tiny3';\r\nimport { TpGoandbackService } from '../goandback/TpGoandbackService';\r\n\r\n/**\r\n * 充值组件  recharge，使用该服务时需要引入模块TpRechargeModule，导入服务TpRechargeSerive,通过调用TpRechargeService.open(config)方法生成充值内容\r\n *\r\n * <example-url>../tinyplus3demo/#/recharge/recharge-all</example-url>\r\n */\r\n@Injectable({\r\n    providedIn: TpRechargeModule\r\n})\r\nexport class TpRechargeService extends TpGoandbackService {\r\n    protected words: any = TiLocale.getLocaleWords().tpRecharge;\r\n    protected firstMessageType: TiMessageType = 'error';\r\n}\r\n","\r\n\r\nimport {\r\n    Directive,\r\n    OnDestroy,\r\n    OnInit\r\n} from '@angular/core';\r\nimport { TiTableColumns, TiTableComponent, Util } from '@cloud/tiny3';\r\nimport { CfUser } from '@cloud/cfdata';\r\nimport { CfUtil } from '../../cfutils/CfUtil'\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * 表格记忆列切换指令\r\n *\r\n * 10.0.4 新增\r\n *\r\n *\r\n * <example-url>../tinyplus3demo/#/storage/storage-all</example-url>\r\n */\r\n@Directive({\r\n    selector: 'ti-table[tpStorageColumns]'\r\n})\r\nexport class TpStorageColumnsDirective implements OnInit, OnDestroy {\r\n    /**\r\n     * @ignore\r\n     */\r\n    public static readonly GET_URL: string = './rest/silvan/rest/v1.0/setting/{userid}/{category}/update.json';\r\n    /**\r\n     * @ignore\r\n     */\r\n    public static readonly POST_URL: string = './rest/silvan/rest/v1.0/setting/{userid}/update.json';\r\n    private tableCom: TiTableComponent;\r\n    private httpService: any;\r\n    private user: CfUser;\r\n    private updateColumnsSubscription: Subscription;\r\n    constructor(tableCom: TiTableComponent) {\r\n        this.tableCom = tableCom;\r\n    }\r\n    ngOnInit(): void {\r\n        if (this.shouldStorageColumnsToggle()) {\r\n            this.httpService = CfUtil.getHttpService();\r\n            CfUtil.getUser()\r\n                .then((user: CfUser) => {\r\n                    this.user = user\r\n                    this.getColumns();\r\n                    this.updateColumnsSubscription = this.tableCom.updateColumnsSubject.subscribe(() => {\r\n                        this.postColumns();\r\n                    });\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n    }\r\n    ngOnDestroy(): void {\r\n        if (this.updateColumnsSubscription) {\r\n            this.updateColumnsSubscription.unsubscribe();\r\n        }\r\n    }\r\n    private getColumns(): void {\r\n        if (!this.user && !this.httpService) {\r\n            return;\r\n        }\r\n        const userid = this.user.userId;\r\n        const storageId = this.tableCom.storageId;\r\n        this.httpService.get({\r\n            url: {\r\n                s: TpStorageColumnsDirective.GET_URL,\r\n                o: {\r\n                    userid: userid,\r\n                    category: storageId\r\n                }\r\n            }\r\n        }).then((data: Array<any>) => {\r\n            this.tableCom.columns.forEach((column: TiTableColumns, index: number) => {\r\n                if (!Util.isNull(data[index])) {\r\n                    column.show = data[index];\r\n                };\r\n            })\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n    private postColumns(): void {\r\n        if (!this.user && !this.httpService) {\r\n            return;\r\n        }\r\n\r\n        const columns = this.tableCom.columns.map((column: TiTableColumns): boolean => {\r\n            return column.show;\r\n        });\r\n        const userid = this.user.userId;\r\n        const storageId = this.tableCom.storageId;\r\n        this.httpService.post({\r\n            url: {\r\n                s: TpStorageColumnsDirective.POST_URL,\r\n                o: {\r\n                    userid: userid\r\n                }\r\n            },\r\n            params: {\r\n                ategory: storageId,\r\n                setting: JSON.stringify(columns),\r\n                lastModifiedDateLong: new Date().getTime()\r\n            }\r\n        }).then((data: any) => {\r\n            // 成功后不做处理\r\n        }).catch((error) => {\r\n            console.log(error);\r\n        });\r\n    }\r\n    private shouldStorageColumnsToggle(): boolean {\r\n        return !!(this.tableCom && this.tableCom.storageId);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TpStorageColumnsDirective } from './TpStorageColumnsDirective'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [TpStorageColumnsDirective],\r\n  declarations: [TpStorageColumnsDirective]\r\n})\r\nexport class TpStorageColumnsModule {\r\n}\r\nexport { TpStorageColumnsDirective } from './TpStorageColumnsDirective';\r\n","// tslint:disable-next-line:no-implicit-dependencies\r\nimport { Component, ContentChild, Input, SimpleChanges, TemplateRef } from '@angular/core';\r\nimport { TiBaseComponent, Util } from '@cloud/tiny3';\r\nexport interface TpTimelineOption {\r\n    /**\r\n     * 设置时间轴条目对应的轴心标识，不同状态对应的标识颜色不一样\r\n     */\r\n    type?: 'info' | 'success' | 'danger' | 'primary' | 'warning';\r\n    /**\r\n     * 设置时间轴条目的文本。\r\n     */\r\n    label: string;\r\n    /**\r\n     * 设置时间轴的时间。\r\n     */\r\n    time?: string;\r\n    /**\r\n     * 是否为时间轴标题\r\n     * 10.1.4新增\r\n     */\r\n    isTitle?: boolean;\r\n    /**\r\n     * 执行失败错误信息\r\n     * 10.1.4新增\r\n     */\r\n    errorMessage?: string;\r\n    /**\r\n     * 时间轴问号tip提示\r\n     * 10.1.4新增\r\n     */\r\n    iconTip?:  string | TemplateRef<any> | any;\r\n    /**\r\n     * tip方向\r\n     * 10.1.4新增\r\n     */\r\n    iconTipPosition?: string;\r\n    /**\r\n     * tip最大宽度\r\n     * 10.1.4新增\r\n     */\r\n    iconTipMaxWidth?: string;\r\n\r\n}\r\n/**\r\n * 时间线timeline组件\r\n * <example-url>../tinyplus3demo/#/timeline/timeline-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-timeline',\r\n    templateUrl: './timeline.html',\r\n    styleUrls: ['./timeline.less']\r\n})\r\n\r\nexport class TpTimelineComponent extends TiBaseComponent {\r\n    /**\r\n     * 时间轴配置项总接口\r\n     */\r\n    @Input() options: Array<TpTimelineOption>;\r\n    /**\r\n     * 当前激活项（正在进行时）\r\n     * 10.1.4新增\r\n     */\r\n    @Input() activeIndex: number = -1;\r\n    /**\r\n     * @ignore\r\n     */\r\n    @ContentChild('item', { static: true }) itemTemplate: TemplateRef<any>;\r\n    /**\r\n     * @ignore\r\n     * 时间轴一级信息集合\r\n     */\r\n    public titleOptions = [];\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.titleOptions = this.getTitleOptions();\r\n        this.changeToSuccess();\r\n    }\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes['activeIndex'] && !changes['activeIndex'].firstChange) {\r\n            this.changeToSuccess();\r\n        }\r\n        if (changes['options'] && !changes['options'].firstChange) {\r\n            this.titleOptions = this.getTitleOptions();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    public findItemIndex(item: TpTimelineOption) {\r\n        return this.titleOptions.findIndex( (ele: TpTimelineOption) => ele === item);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 获取时间轴一级（标题）信息集合\r\n     */\r\n    public getTitleOptions() : Array<TpTimelineOption> {\r\n        return this.options.filter( (option: TpTimelineOption) => option.isTitle);\r\n    }\r\n    /**\r\n     * @ignore\r\n     * activeIndex之前的项全部变更为success状态\r\n     */\r\n    public changeToSuccess(): void {\r\n        if (this.activeIndex === -1 || Util.isUndefined(this.activeIndex) || !Util.isNumber(this.activeIndex)) {\r\n            return;\r\n        }\r\n        this.options.forEach ( (option: TpTimelineOption, index: number) => {\r\n            option.type = index < this.activeIndex ? 'success' : 'primary';\r\n        })\r\n    }\r\n    /**\r\n     * @ignore\r\n     * 判断当前一级时间轴状态\r\n     */\r\n    public isSuccess(option: TpTimelineOption): boolean {\r\n        if(!option.isTitle) {\r\n            return;\r\n        }\r\n        let level2Options: Array<TpTimelineOption> = [];\r\n        const index: number = this.options.findIndex((item: TpTimelineOption) => item === option);\r\n        let isSucess: boolean = true;\r\n        for (let i = index + 1; i <= this.activeIndex; i++) {\r\n            if (this.options[i] && this.options[i].isTitle) {\r\n                break;\r\n            }\r\n            level2Options.push(this.options[i]);\r\n        }\r\n        if (level2Options.length > 0) {\r\n            level2Options.forEach((option: TpTimelineOption) => {\r\n                if (option.type && option.type !== 'success') {\r\n                    isSucess = false;\r\n                }\r\n            })\r\n        }\r\n\r\n        return isSucess;\r\n    }\r\n}\r\n","// tslint:disable-next-line:no-implicit-dependencies\r\nimport { CommonModule } from '@angular/common';\r\n// tslint:disable-next-line:no-implicit-dependencies\r\nimport { NgModule } from '@angular/core';\r\nimport { TiTipModule } from '@cloud/tiny3';\r\nimport { TpIconModule } from '../icon/TpIconModule';\r\nimport { TpTimelineComponent } from './TpTimelineComponent';\r\n\r\n@NgModule({\r\n  imports: [CommonModule,\r\n            TpIconModule,\r\n            TiTipModule\r\n  ],\r\n  exports: [TpTimelineComponent],\r\n  declarations: [TpTimelineComponent]\r\n})\r\n\r\nexport class TpTimelineModule {}\r\nexport { TpTimelineComponent, TpTimelineOption } from './TpTimelineComponent';\r\n","import { Component, ViewEncapsulation } from '@angular/core';\r\n/**\r\n * @ignore\r\n *\r\n * ��δ�������\r\n *\r\n * <example-url>../tinyplus3demo/#/tagsearch/tagsearch-all</example-url>\r\n */\r\n@Component({\r\n    selector: 'tp-tagsearch',\r\n    templateUrl: 'tagsearch.html',\r\n    styleUrls: ['./tagsearch.less'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class TpTagsearchComponent {}\r\n","import { NgModule } from '@angular/core';\r\nimport { TpTagsearchComponent } from './TpTagsearchComponent';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@NgModule({\r\n  exports: [TpTagsearchComponent],\r\n  declarations: [TpTagsearchComponent]\r\n})\r\n\r\nexport class TpTagsearchModule {}\r\nexport { TpTagsearchComponent } from './TpTagsearchComponent';\r\n","// 按照类名字母排序\r\nexport { TpAccessdeclinedModule, TpAccessdeclinedComponent } from './components/accessdeclined/TpAccessdeclinedModule';\r\nexport { TpAccordionlistModule, TpAccordionlistComponent, TpAccordionlistOption, TpAccordionlistActionmenuItem } from './components/accordionlist/TpAccordionlistModule';\r\nexport { TpAnchorModule, TpAnchorComponent, TpAnchorItem } from './components/anchor/TpAnchorModule';\r\nexport { TpBeingmaintainedModule, TpBeingmaintainedComponent } from './components/beingmaintained/TpBeingmaintainedModule';\r\nexport { TpBetaComponent, TpBetaModule } from './components/beta/TpBetaModule';\r\nexport { TpBuylayerComponent, TpBuylayerRightComponent, TpBuylayerLeftComponent, TpBuylayerModule, TpBuylayerConfig, TpButtons, TpCosts } from './components/buylayer/TpBuylayerModule';\r\nexport { TpCardModule, TpCardComponent, TpCardAddComponent, TpCardHeaderComponent } from './components/card/TpCardModule';\r\nexport { TpCascaderItem, TpCascaderComponent, TpCascaderModule } from './components/cascader/TpCascaderModule';\r\nexport { TpCollapseboxModule, TpCollapseboxComponent } from './components/collapsebox/TpCollapseboxModule';\r\nexport { TpCollapsebuttonModule, TpCollapsebuttonComponent, TpCollapsepanelComponent} from './components/collapsebutton/TpCollapsebuttonModule';\r\nexport { TpContactsurveyComponent, TpContactsurveyModule, TpQuestionInfo, TpSurveyOptions } from './components/contactsurvey/TpContactsurveyModule';\r\nexport { TpCopyModule, TpCopyComponent } from './components/copy/TpCopyModule';\r\nexport { TpCountdownModule, TpCountdownComponent, TpCountDownCode, TpCountDownInfos, TpCountDownTips} from './components/countdown/TpCountdownModule';\r\nexport { TpCountModule, TpCountComponent, TpCountCode, TpCountInfos, TpCountPatternComponent, TpCountStateComponent, TpCountTimeComponent,\r\n            TpCountTips, TpCountChargingMode } from './components/count/TpCountModule';\r\nexport { TpCountdownalertModule, TpCountdownalertComponent } from './components/countdownalert/TpCountdownalertModule';\r\nexport { TpCrumbModule, TpCrumbComponent, TpLink } from './components/crumb/TpCrumbModule';\r\nexport { TpDescandbuyModule, TpDescandbuyComponent, TpDescandbuyConfig } from './components/descandbuy/TpDescandbuyModule';\r\nexport { TpDiscountsModule, TpDiscountsComponent,  TpDiscoutsConfig } from './components/discounts/TpDiscountsModule';\r\nexport { TpFeedbackModule, TpFeedbackComponent, TpFeedbackContentComponent, TpFeedbackOptions, TpQuestionOption, TpAllquestionOption } from './components/feedback/TpFeedbackModule';\r\nexport { TpFoldtextModule, TpFoldtextComponent} from './components/foldtext/TpFoldtextModule';\r\nexport { TpFrozenModule, TpFrozenComponent, TpFrozenResponse } from './components/frozen/TpFrozenModule';\r\nexport { TpFrozenpageModule, TpFrozenpageComponent} from './components/frozenpage/TpFrozenpageModule';\r\nexport { TpGridModule, TpGridComponent } from './components/grid/TpGridModule';\r\nexport { TpGuidesModule, TpGuidesComponent, TpGuideComponent, TpGuideHeaderComponent, TpGuideContentComponent, TpGuideBodyComponent} from './components/guides/TpGuidesModule';\r\nexport { TpGuidestepsModule, TpGuidestepsComponent, TpGuidestepComponent, TpGuidestepHeaderComponent, TpGuidestepContentComponent} from './components/guidesteps/TpGuidestepsModule';\r\nexport { TpHalfmodalModule, TpHalfmodalComponent } from './components/halfmodal/TpHalfmodalModule';\r\nexport { TpHelptipModule, TpHelptipComponent } from './components/helptip/TpHelptipModule';\r\nexport { TpIconModule, TpIconComponent, TpIconlocalComponent } from './components/icon/TpIconModule';\r\nexport { TpIconactionModule, TpIconactionComponent } from './components/iconaction/TpIconactionModule';\r\nexport { TpInfoComponent, TpInfoModule } from './components/info/TpInfoModule';\r\nexport { TpLabeleditorModule, TpLabeleditorComponent } from './components/labeleditor/TpLabeleditorModule';\r\nexport { TpLayoutModule, TpLayoutContentComponent, TpLayoutContentBodyComponent, TpLayoutHeaderComponent,TpLayoutSectionComponent, TpLayoutContentHeaderComponent,TpLayoutColumnComponent} from './components/layout/TpLayoutModule';\r\nexport { TpLeftmenuModule, TpLeftmenuComponent, TpLeftmenuConfig, TpLeftmenuItem } from './components/leftmenu/TpLeftmenuModule';\r\nexport { TpLeftmenuthinModule, TpLeftmenuthinComponent, TpLeftmenuthinItem } from './components/leftmenuthin/TpLeftmenuthinModule';\r\nexport { TpLinkbuttonModule, TpLinkbuttonComponent } from './components/linkbutton/TpLinkbuttonModule';\r\nexport { TpLinklistModule, TpLinklistComponent, TpLinkOption, TpLinkItem } from './components/linklist/TpLinklistModule';\r\nexport { TpModalBodyModule, TpModalBodyComponent } from './components/modalbody/TpModalBodyModule';\r\nexport { TpNonsupportregionModule, TpNonsupportregionComponent, TpRegionData } from './components/nonsupportregion/TpNonsupportregionModule';\r\nexport { TpPricecalcModule, TpPricecalcComponent, TpPricecalcParam } from './components/pricecalc/TpPricecalcModule';\r\nexport { TpPricelineModule, TpPricelineComponent, TpPricelineItem } from './components/priceline/TpPricelineModule';\r\nexport { TpProductpreviewModule, TpProductpreviewComponent } from './components/productpreview/TpProductpreviewModule';\r\nexport { TpProgressbarModule, TpProgressbarComponent, TpProgressbarLabelType} from './components/progressbar/TpProgressbarModule';\r\nexport { TpHelpOptions, TpPurchaselistComponent, TpPurchaseitemComponent, TpPurchaseNodataComponent, TpPurchaselistModule } from './components/purchaselist/TpPurchaselistModule';\r\nexport { TpRecommendModule, TpRecommendComponent, TpRecommendItem } from './components/recommend/TpRecommendModule';\r\nexport { TpRegionModule, TpRegionComponent, TpRegionItem, TpRegionUtil } from './components/region/TpRegionModule';\r\nexport { TpRegionselectModule, TpRegionselectComponent } from './components/regionselect/TpRegionselectModule';\r\nexport { TpRenameModule, TpRenameComponent, TpRenameModalRef, TpRenameModalComponent, TpRenameModalContainerComponent } from './components/rename/TpRenameModule';\r\nexport { TpResourcesModule, TpResourcesComponent, TpResourceItemComponent, TpResourceItem } from './components/resources/TpResourcesModule';\r\nexport { TpRestrictModule, TpRestrictComponent } from './components/restrict/TpRestrictModule';\r\nexport { TpSearchboxModule, TpSearchboxComponent, TpSearchboxHelpComponent, TpSearchboxItem, TpSearchboxOption,\r\n         TpSearchboxTag, TpSearchboxTagType, TpSearchboxFilter,  TP_REGEXP_IP, TP_REGEXP_UUID } from './components/searchbox/TpSearchboxModule';\r\nexport { TpScoreModule, TpScoreComponent } from './components/score/TpScoreModule';\r\nexport { TpSelectgroupComponent, TpSelectitemComponent, TpSelectgroupItem, TpSelectgroupModule } from './components/selectgroup/TpSelectgroupModule';\r\nexport { TpSelectsearchboxModule, TpSelectsearchboxComponent } from './components/selectsearchbox/TpSelectsearchboxModule';\r\nexport { TpSlidecardsModule, TpSlidecardsComponent, TpSlidecardsPaginationEvent} from './components/slidecards/TpSlidecardsModule';\r\nexport { TpSmartalertModule, TpSmartalertComponent } from './components/smartalert/TpSmartalertModule';\r\nexport { TpStepguideComponent, TpStepguideModule } from './components/stepguide/TpStepguideModule';\r\nexport { TpSubtitleModule, TpSubtitleComponent, TpSubtitleItem } from './components/subtitle/TpSubtitleModule';\r\nexport { TpSupportregionlistModule, TpSupportregionlistComponent } from './components/supportregionlist/TpSupportregionlistModule';\r\nexport { TpSwiperModule, TpSwiperComponent, TpSwipercardComponent } from './components/swiper/TpSwiperModule';\r\nexport { TpBindingModule } from './services/binding/TpBindingModule';\r\nexport { TpBindingService } from './services/binding/TpBindingService';\r\nexport { TpIdentificationModule } from './services/identification/TpIdentificationModule';\r\nexport { TpIdentificationService } from './services/identification/TpIdentificationService';\r\nexport { TpIdentityauthModule } from './services/identityauth/TpIdentityauthModule';\r\nexport { TpIdentityauthService } from './services/identityauth/TpIdentityauthService';\r\nexport { TpGoandbackModule, TpGoandbackComponent } from './services/goandback/TpGoandbackModule';\r\nexport { TpGoandbackService } from './services/goandback/TpGoandbackService';\r\nexport { TpRechargeModule } from './services/recharge/TpRechargeModule';\r\nexport { TpRechargeService } from './services/recharge/TpRechargeService';\r\nexport { TpStorageColumnsModule, TpStorageColumnsDirective } from './directives/storage/TpStorageColumnsModule';\r\nexport { TpLocaleModule, TpDatePipe, TpNumberPipe, TpCurrencyPipe } from './pipes/locale/TpLocaleModule';\r\nexport { TpTimelineComponent, TpTimelineModule, TpTimelineOption } from './components/timeline/TpTimelineModule';\r\nexport { TpTagsearchModule, TpTagsearchComponent } from './components/tagsearch/TpTagsearchModule';\r\nexport { TpUtil } from './utils/TpUtil';\r\nexport { CfUtil } from './cfutils/CfUtil';\r\n// 按照类名字母排序\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {IsMajorPricePipe as ɵd,IsMinorPricePipe as ɵe} from './components/buylayer/IsMajorPrice';\nexport {TpToastComponent as ɵf} from './components/copy/TpToastComponent';\nexport {NotEqualTo01Pipe as ɵc,NotEqualTo0Pipe as ɵb,RatePipe as ɵa} from './components/discounts/RatePipe';\nexport {TpIdentityauthModalComponent as ɵg} from './services/identityauth/TpIdentityauthmodalComponent';"],"names":[],"mappings":"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"}