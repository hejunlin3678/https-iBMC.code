import { Util } from '@cloud/tiny3';
/**
 * @ignore
 * 工具类
 */
export class TpUtil {
    static setAttrs(element, attrs) {
        for (const key in attrs) {
            if (attrs.hasOwnProperty(key)) {
                element.setAttribute(key, attrs[key]);
            }
        }
    }
    static isObject(item) {
        return (item && typeof item === 'object' && !Array.isArray(item));
    }
    // 对象扩展，当前只适用于对象形式，数组形式如有需求，请在该方法中自行扩展
    static extend(target, source) {
        const output = Object.assign({}, target);
        if (!(TpUtil.isObject(target) && TpUtil.isObject(source))) {
            return;
        }
        Object.keys(source).forEach((key) => {
            if (TpUtil.isObject(source[key])) {
                if (!(key in target)) {
                    Object.assign(output, { [key]: source[key] });
                }
                else {
                    output[key] = TpUtil.extend(target[key], source[key]);
                }
            }
            else {
                Object.assign(output, { [key]: source[key] });
            }
        });
        return output;
    }
    /**
     * url 跳转的目标路径 string
     * params  参数对象集合 Object
     */
    static addUrlParams(url, params) {
        if (!Util.isString(url) || url === '' || Util.isUndefined(params)) {
            return url;
        }
        let finalUrl = url;
        for (const key in params) {
            if (Object.prototype.hasOwnProperty.call(params, key)) {
                const param = key + '=' + encodeURIComponent(params[key]);
                if (url.indexOf('?') === -1) {
                    finalUrl = finalUrl + '?' + param;
                }
                else {
                    finalUrl = finalUrl + '&' + param;
                }
            }
        }
        return finalUrl;
    }
    /**
     * url 跳转的目标路径 string
     * params 参数对象集合 Object
     */
    static addDefaultParam(url, params) {
        const defaultParam = {
            service: window.location.href // 默认参数为当前页面链接地址，方便用户实现返回原页面
        };
        const finalParams = Object.assign(Object.assign({}, defaultParam), params);
        return this.addUrlParams(url, finalParams);
    }
    /**
     * 得到cookie的值
     * @param key： cookie名对应的键值
     */
    static getCookie(key) {
        if (!document.cookie) {
            return;
        }
        const splitedCookie = document.cookie.split(';');
        for (const cookie of splitedCookie) {
            const temp = cookie.split('=');
            if (temp[0] && temp[0].trim() === key) {
                return temp[1].trim();
            }
        }
    }
    /**
     * 设置cookie的值，包括key、value
     */
    static setCookie(key, value) {
        document.cookie = `${key}=${value}`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBVdGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnlwbHVzMy91dGlscy9UcFV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUVwQzs7O0dBR0c7QUFDSCxNQUFNLE9BQU8sTUFBTTtJQUNSLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBb0IsRUFBRSxLQUFhO1FBQ3RELEtBQUssTUFBTSxHQUFHLElBQUksS0FBSyxFQUFFO1lBQ3JCLElBQUksS0FBSyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDM0IsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDekM7U0FDSjtJQUNMLENBQUM7SUFFTSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQVM7UUFDNUIsT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVELHNDQUFzQztJQUMvQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQWMsRUFBRSxNQUFjO1FBQy9DLE1BQU0sTUFBTSxxQkFBZSxNQUFNLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRTtZQUN2RCxPQUFPO1NBQ1Y7UUFDQSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFXLEVBQUUsRUFBRTtZQUMzRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQzlCLElBQUks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SSxLQUFLLEVBQUUsQ0FBQztJQUN4QyxDQUFDO0NBRUoiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlsIH0gZnJvbSAnQGNsb3VkL3RpbnkzJztcclxuXHJcbi8qKlxyXG4gKiBAaWdub3JlXHJcbiAqIOW3peWFt+exu1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRwVXRpbCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHNldEF0dHJzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhdHRyczogb2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcclxuICAgICAgICAgICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpc09iamVjdChpdGVtOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlr7nosaHmianlsZXvvIzlvZPliY3lj6rpgILnlKjkuo7lr7nosaHlvaLlvI/vvIzmlbDnu4TlvaLlvI/lpoLmnInpnIDmsYLvvIzor7flnKjor6Xmlrnms5XkuK3oh6rooYzmianlsZVcclxuICAgIHB1YmxpYyBzdGF0aWMgZXh0ZW5kKHRhcmdldDogb2JqZWN0LCBzb3VyY2U6IG9iamVjdCk6IG9iamVjdCB7XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0OiBvYmplY3QgPSB7Li4udGFyZ2V0fTtcclxuICAgICAgICBpZiAoIShUcFV0aWwuaXNPYmplY3QodGFyZ2V0KSAmJiBUcFV0aWwuaXNPYmplY3Qoc291cmNlKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAoT2JqZWN0LmtleXMoc291cmNlKSBhcyBBcnJheTxzdHJpbmc+KS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoVHBVdGlsLmlzT2JqZWN0KHNvdXJjZVtrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG91dHB1dCwgeyBba2V5XTogc291cmNlW2tleV0gfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gVHBVdGlsLmV4dGVuZCh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvdXRwdXQsIHsgW2tleV06IHNvdXJjZVtrZXldIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB1cmwg6Lez6L2s55qE55uu5qCH6Lev5b6EIHN0cmluZ1xyXG4gICAgICogcGFyYW1zICDlj4LmlbDlr7nosaHpm4blkIggT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkVXJsUGFyYW1zKHVybDogc3RyaW5nLCBwYXJhbXM6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFVdGlsLmlzU3RyaW5nKHVybCkgfHwgdXJsID09PSAnJyB8fCBVdGlsLmlzVW5kZWZpbmVkKHBhcmFtcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZpbmFsVXJsOiBzdHJpbmcgPSB1cmw7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocGFyYW1zLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbTogc3RyaW5nID0ga2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcclxuICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignPycpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsVXJsID0gZmluYWxVcmwgKyAgJz8nICsgcGFyYW07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsVXJsID0gZmluYWxVcmwgKyAgJyYnICsgcGFyYW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmaW5hbFVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHVybCDot7PovaznmoTnm67moIfot6/lvoQgc3RyaW5nXHJcbiAgICAgKiBwYXJhbXMg5Y+C5pWw5a+56LGh6ZuG5ZCIIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZERlZmF1bHRQYXJhbSh1cmw6IHN0cmluZywgcGFyYW1zOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRQYXJhbTogYW55ID0ge1xyXG4gICAgICAgICAgICBzZXJ2aWNlOiB3aW5kb3cubG9jYXRpb24uaHJlZiAgLy8g6buY6K6k5Y+C5pWw5Li65b2T5YmN6aG16Z2i6ZO+5o6l5Zyw5Z2A77yM5pa55L6/55So5oi35a6e546w6L+U5Zue5Y6f6aG16Z2iXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBmaW5hbFBhcmFtczogYW55ID0geyAuLi5kZWZhdWx0UGFyYW0sIC4uLnBhcmFtcyB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRVcmxQYXJhbXModXJsLCBmaW5hbFBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW+l+WIsGNvb2tpZeeahOWAvFxyXG4gICAgICogQHBhcmFtIGtlee+8miBjb29raWXlkI3lr7nlupTnmoTplK7lgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb29raWUoa2V5OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGlmICghZG9jdW1lbnQuY29va2llKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3BsaXRlZENvb2tpZTogQXJyYXk8c3RyaW5nPiA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xyXG4gICAgICAgIGZvciAoY29uc3QgY29va2llIG9mIHNwbGl0ZWRDb29raWUpIHtcclxuICAgICAgICAgICAgY29uc3QgdGVtcDogQXJyYXk8c3RyaW5nPiA9IGNvb2tpZS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBpZiAodGVtcFswXSAmJiB0ZW1wWzBdLnRyaW0oKSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFsxXS50cmltKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9rmNvb2tpZeeahOWAvO+8jOWMheaLrGtleeOAgXZhbHVlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0Q29va2llKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7a2V5fT0ke3ZhbHVlfWA7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==