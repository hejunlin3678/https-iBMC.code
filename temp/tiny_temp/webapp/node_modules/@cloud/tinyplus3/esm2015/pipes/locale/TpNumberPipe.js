import { Pipe } from '@angular/core';
import { TiLocale } from '@cloud/tiny3';
/**
 * 数字格式化
 *
 * 默认按照局点配置格式
 *
 * <example-url>../tinyplus3demo/#/locale/locale-all</example-url>
 */
export class TpNumberPipe {
    /**
     * 货币转换
     * @param value 数字
     * @param format 自定义保留位数，例如：1.2-4，表示整数部分最小保留1位，小数部分最小保留2位，小数部分最大保留4位。
     * @returns 转换结果
     */
    transform(value, format) {
        // 最终格式
        let myoptions = this.getOptions();
        // 如果用户传来了自定义配置保留位数
        if (format) {
            myoptions = Object.assign(Object.assign({}, myoptions), {
                minimumIntegerDigits: format.substring(0, format.indexOf('.')),
                minimumFractionDigits: format.substring(format.indexOf('.') + 1, format.indexOf('-')),
                maximumFractionDigits: format.substring(format.indexOf('-') + 1)
            });
        }
        const res = new Intl.NumberFormat(TiLocale.getLocaleWords().tiLocaleKey, myoptions)
            .format(value);
        return res;
    }
    /**
     * 获取局点中的配置
     * @returns options
     */
    getOptions() {
        return TiLocale.getLocaleWords().tpLocaleNumber;
    }
}
TpNumberPipe.decorators = [
    { type: Pipe, args: [{ name: 'tpNumber', pure: false },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBOdW1iZXJQaXBlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnlwbHVzMy9waXBlcy9sb2NhbGUvVHBOdW1iZXJQaXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFJeEM7Ozs7OztHQU1HO0FBRUgsTUFBTSxPQUFPLFlBQVk7SUFFdkI7Ozs7O09BS0c7SUFDSCxTQUFTLENBQUMsS0FBYSxFQUFFLE1BQWU7UUFDdEMsT0FBTztRQUNQLElBQUksU0FBUyxHQUFRLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUV2QyxtQkFBbUI7UUFDbkIsSUFBSSxNQUFNLEVBQUU7WUFDVixTQUFTLG1DQUNKLFNBQVMsR0FDVDtnQkFDRCxvQkFBb0IsRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM5RCxxQkFBcUIsRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3JGLHFCQUFxQixFQUFFLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDakUsQ0FDRixDQUFDO1NBQ0g7UUFFRCxNQUFNLEdBQUcsR0FBVyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUUsUUFBUSxDQUFDLGNBQWMsRUFBb0IsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDO2FBQzdHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVmLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUNEOzs7T0FHRztJQUNPLFVBQVU7UUFDbEIsT0FBUSxRQUFRLENBQUMsY0FBYyxFQUFvQixDQUFDLGNBQWMsQ0FBQztJQUNyRSxDQUFDOzs7WUFwQ0YsSUFBSSxTQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUaUxvY2FsZSB9IGZyb20gJ0BjbG91ZC90aW55Myc7XHJcbmltcG9ydCB7IFRwTG9jYWxlV29yZHMgfSBmcm9tICcuLi8uLi9sb2NhbGUvaTE4bic7XHJcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5cclxuLyoqXHJcbiAqIOaVsOWtl+agvOW8j+WMllxyXG4gKlxyXG4gKiDpu5jorqTmjInnhaflsYDngrnphY3nva7moLzlvI9cclxuICpcclxuICogPGV4YW1wbGUtdXJsPi4uL3RpbnlwbHVzM2RlbW8vIy9sb2NhbGUvbG9jYWxlLWFsbDwvZXhhbXBsZS11cmw+XHJcbiAqL1xyXG5AUGlwZSh7IG5hbWU6ICd0cE51bWJlcicsIHB1cmU6IGZhbHNlIH0pXHJcbmV4cG9ydCBjbGFzcyBUcE51bWJlclBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcclxuXHJcbiAgLyoqXHJcbiAgICog6LSn5biB6L2s5o2iXHJcbiAgICogQHBhcmFtIHZhbHVlIOaVsOWtl1xyXG4gICAqIEBwYXJhbSBmb3JtYXQg6Ieq5a6a5LmJ5L+d55WZ5L2N5pWw77yM5L6L5aaC77yaMS4yLTTvvIzooajnpLrmlbTmlbDpg6jliIbmnIDlsI/kv53nlZkx5L2N77yM5bCP5pWw6YOo5YiG5pyA5bCP5L+d55WZMuS9je+8jOWwj+aVsOmDqOWIhuacgOWkp+S/neeVmTTkvY3jgIJcclxuICAgKiBAcmV0dXJucyDovazmjaLnu5PmnpxcclxuICAgKi9cclxuICB0cmFuc2Zvcm0odmFsdWU6IG51bWJlciwgZm9ybWF0Pzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIOacgOe7iOagvOW8j1xyXG4gICAgbGV0IG15b3B0aW9uczogYW55ID0gdGhpcy5nZXRPcHRpb25zKCk7XHJcblxyXG4gICAgLy8g5aaC5p6c55So5oi35Lyg5p2l5LqG6Ieq5a6a5LmJ6YWN572u5L+d55WZ5L2N5pWwXHJcbiAgICBpZiAoZm9ybWF0KSB7XHJcbiAgICAgIG15b3B0aW9ucyA9IHtcclxuICAgICAgICAuLi5teW9wdGlvbnMsXHJcbiAgICAgICAgLi4ue1xyXG4gICAgICAgICAgbWluaW11bUludGVnZXJEaWdpdHM6IGZvcm1hdC5zdWJzdHJpbmcoMCwgZm9ybWF0LmluZGV4T2YoJy4nKSksXHJcbiAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IGZvcm1hdC5zdWJzdHJpbmcoZm9ybWF0LmluZGV4T2YoJy4nKSArIDEsIGZvcm1hdC5pbmRleE9mKCctJykpLFxyXG4gICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiBmb3JtYXQuc3Vic3RyaW5nKGZvcm1hdC5pbmRleE9mKCctJykgKyAxKVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXM6IHN0cmluZyA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCgoVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKSBhcyBUcExvY2FsZVdvcmRzKS50aUxvY2FsZUtleSwgbXlvcHRpb25zKVxyXG4gICAgLmZvcm1hdCh2YWx1ZSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W5bGA54K55Lit55qE6YWN572uXHJcbiAgICogQHJldHVybnMgb3B0aW9uc1xyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRPcHRpb25zKCk6IGFueSB7XHJcbiAgICByZXR1cm4gKFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkgYXMgVHBMb2NhbGVXb3JkcykudHBMb2NhbGVOdW1iZXI7XHJcbiAgfVxyXG59XHJcbiJdfQ==