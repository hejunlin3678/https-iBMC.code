import { Pipe } from '@angular/core';
import { TiLocale } from '@cloud/tiny3';
import { TpNumberPipe } from './TpNumberPipe';
/**
 * 货币格式化
 *
 * 默认按照局点配置格式
 *
 * <example-url>../tinyplus3demo/#/locale/locale-all</example-url>
 */
export class TpCurrencyPipe extends TpNumberPipe {
    /**
     * 转换
     * @param value 货币数字
     * @param format 自定义保留位数，例如：1.2-4，表示整数部分最少保留1位，小数部分最小保留2位，小数部分最大保留4位。
     * @param type 'short'表示美元末尾不带USD
     * @returns 转换结果
     */
    transform(value, format, type) {
        // 调用父类处理
        let res = super.transform(value, format);
        // 结果调整，符合规范
        res = res.replace('CN¥', '¥');
        res = res.replace('US$', '$');
        res = res.replace('$ ', '$');
        if (this.getOptions().currency === 'USD' && type !== 'short') {
            res = res + ' USD';
        }
        if (res.includes('€') && !res.endsWith('€')) {
            res = res.replace('€', '');
            res = res + ' €';
        }
        return res;
    }
    /**
     * 获取局点中的配置
     * @returns options
     */
    getOptions() {
        return TiLocale.getLocaleWords().tpLocaleCurrency;
    }
}
TpCurrencyPipe.decorators = [
    { type: Pipe, args: [{ name: 'tpCurrency', pure: false },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBDdXJyZW5jeVBpcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueXBsdXMzL3BpcGVzL2xvY2FsZS9UcEN1cnJlbmN5UGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUNwRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBR3hDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUU5Qzs7Ozs7O0dBTUc7QUFFSCxNQUFNLE9BQU8sY0FBZSxTQUFRLFlBQVk7SUFDaEQ7Ozs7OztPQU1HO0lBQ0gsU0FBUyxDQUFDLEtBQWEsRUFBRSxNQUFlLEVBQUUsSUFBd0I7UUFDOUQsU0FBUztRQUNULElBQUksR0FBRyxHQUFXLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2pELFlBQVk7UUFDWixHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDOUIsR0FBRyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM3QixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLEtBQUssS0FBSyxJQUFJLElBQUksS0FBSyxPQUFPLEVBQUU7WUFDNUQsR0FBRyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUM7U0FDcEI7UUFDRCxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQzNDLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUMzQixHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztTQUNsQjtRQUVELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUNEOzs7T0FHRztJQUNPLFVBQVU7UUFDbEIsT0FBUSxRQUFRLENBQUMsY0FBYyxFQUFvQixDQUFDLGdCQUFnQixDQUFDO0lBQ3ZFLENBQUM7OztZQWhDRixJQUFJLFNBQUMsRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpTG9jYWxlIH0gZnJvbSAnQGNsb3VkL3RpbnkzJztcclxuXHJcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBUcE51bWJlclBpcGUgfSBmcm9tICcuL1RwTnVtYmVyUGlwZSc7XHJcbmltcG9ydCB7IFRwTG9jYWxlV29yZHMgfSBmcm9tICcuLi8uLi9sb2NhbGUvaTE4bic7XHJcbi8qKlxyXG4gKiDotKfluIHmoLzlvI/ljJZcclxuICpcclxuICog6buY6K6k5oyJ54Wn5bGA54K56YWN572u5qC85byPXHJcbiAqXHJcbiAqIDxleGFtcGxlLXVybD4uLi90aW55cGx1czNkZW1vLyMvbG9jYWxlL2xvY2FsZS1hbGw8L2V4YW1wbGUtdXJsPlxyXG4gKi9cclxuQFBpcGUoeyBuYW1lOiAndHBDdXJyZW5jeScsIHB1cmU6IGZhbHNlIH0pXHJcbmV4cG9ydCBjbGFzcyBUcEN1cnJlbmN5UGlwZSBleHRlbmRzIFRwTnVtYmVyUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xyXG4vKipcclxuICog6L2s5o2iXHJcbiAqIEBwYXJhbSB2YWx1ZSDotKfluIHmlbDlrZdcclxuICogQHBhcmFtIGZvcm1hdCDoh6rlrprkuYnkv53nlZnkvY3mlbDvvIzkvovlpoLvvJoxLjItNO+8jOihqOekuuaVtOaVsOmDqOWIhuacgOWwkeS/neeVmTHkvY3vvIzlsI/mlbDpg6jliIbmnIDlsI/kv53nlZky5L2N77yM5bCP5pWw6YOo5YiG5pyA5aSn5L+d55WZNOS9jeOAglxyXG4gKiBAcGFyYW0gdHlwZSAnc2hvcnQn6KGo56S6576O5YWD5pyr5bC+5LiN5bimVVNEXHJcbiAqIEByZXR1cm5zIOi9rOaNoue7k+aenFxyXG4gKi9cclxudHJhbnNmb3JtKHZhbHVlOiBudW1iZXIsIGZvcm1hdD86IHN0cmluZywgdHlwZT86ICdzaG9ydCd8dW5kZWZpbmVkKTogc3RyaW5nIHtcclxuICAgIC8vIOiwg+eUqOeItuexu+WkhOeQhlxyXG4gICAgbGV0IHJlczogc3RyaW5nID0gc3VwZXIudHJhbnNmb3JtKHZhbHVlLCBmb3JtYXQpO1xyXG4gICAgLy8g57uT5p6c6LCD5pW077yM56ym5ZCI6KeE6IyDXHJcbiAgICByZXMgPSByZXMucmVwbGFjZSgnQ07CpScsICfCpScpO1xyXG4gICAgcmVzID0gcmVzLnJlcGxhY2UoJ1VTJCcsICckJyk7XHJcbiAgICByZXMgPSByZXMucmVwbGFjZSgnJMKgJywgJyQnKTtcclxuICAgIGlmICh0aGlzLmdldE9wdGlvbnMoKS5jdXJyZW5jeSA9PT0gJ1VTRCcgJiYgdHlwZSAhPT0gJ3Nob3J0Jykge1xyXG4gICAgICByZXMgPSByZXMgKyAnIFVTRCc7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzLmluY2x1ZGVzKCfigqwnKSAmJiAhcmVzLmVuZHNXaXRoKCfigqwnKSkge1xyXG4gICAgICByZXMgPSByZXMucmVwbGFjZSgn4oKsJywgJycpO1xyXG4gICAgICByZXMgPSByZXMgKyAnIOKCrCc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W5bGA54K55Lit55qE6YWN572uXHJcbiAgICogQHJldHVybnMgb3B0aW9uc1xyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRPcHRpb25zKCk6IGFueSB7XHJcbiAgICByZXR1cm4gKFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkgYXMgVHBMb2NhbGVXb3JkcykudHBMb2NhbGVDdXJyZW5jeTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==