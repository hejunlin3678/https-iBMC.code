import { Component, ContentChild, Input, QueryList, TemplateRef, ViewChildren } from '@angular/core';
import { TiAccordionItemComponent, TiBaseComponent } from '@cloud/tiny3';
/**
 *
 *  折叠面板列表组件
 *
 *  10.1.0版本新增
 *
 *  10.0.4及之前的版本是以模板的形式提供(只提供了一些样式）；10.1.0版本为了实现样式按需加载和其使用简便性，去掉了之前的模板，封装了该组件。
 *
 *  <example-url>../tinyplus3demo/#/accordionlist/accordionlist-all</example-url>
 *
 */
export class TpAccordionlistComponent extends TiBaseComponent {
    constructor() {
        super(...arguments);
        /**
         * 展开某一项时，是否关闭其它项
         */
        this.closeOthers = true;
        /**
         * 折叠面板列表数据集合
         */
        this.options = [];
    }
    /**
     * @ignore
     */
    headClick($event, option, index, actionmenuContainer) {
        // 点击非actionmenu区域时展开/收起
        if (!actionmenuContainer.contains($event.target)) {
            const currentAccordionItem = this.accordionItemComps.toArray()[index];
            if (currentAccordionItem) {
                currentAccordionItem.open = !currentAccordionItem.open;
                if (option.headClick) {
                    option.headClick($event);
                }
            }
        }
    }
    /**
     * @ignore
     */
    onActionmenuSelect(item, option) {
        if (option.actionmenu && option.actionmenu.select) {
            option.actionmenu.select(item, option);
        }
    }
    /**
     * @ignore
     */
    getActionmenuItems(option) {
        if (!option.actionmenu || !option.actionmenu.items || option.actionmenu.items.length < 1) {
            return [];
        }
        return option.actionmenu.items.map((item) => {
            item.disabled = option.disabled || item.disabled;
            return item;
        });
    }
}
TpAccordionlistComponent.decorators = [
    { type: Component, args: [{
                selector: 'tp-accordionlist',
                template: "<ti-accordion [closeOthers]=\"closeOthers\">\r\n    <ti-accordion-item *ngFor=\"let option of options; index as i;\"\r\n            [open]=\"option.open\"\r\n            [disabled]=\"option.disabled\"\r\n            [clickToggle]=\"false\"\r\n            (headClick)=\"headClick($event, option, i, actionmenuContainer)\">\r\n            <ti-accordion-head>\r\n                <ng-container *ngIf=\"headLabelTemplate else defaultHeadLabelTemplate\">\r\n                    <ng-container *ngTemplateOutlet=\"headLabelTemplate; context: {$implicit: option, index: i}\"></ng-container>\r\n                </ng-container>\r\n                <ng-template #defaultHeadLabelTemplate>\r\n                    <div class=\"tp-accordionlist-headlabel\" [innerHTML]=\"option.headLabel\"></div>\r\n                </ng-template>\r\n                <div #actionmenuContainer class=\"tp-accordionlist-headtools\">\r\n                    <ti-actionmenu [items]=\"getActionmenuItems(option)\"\r\n                                   [maxShowNum]=\"option.actionmenu.maxShowNum === undefined ? 4 : option.actionmenu.maxShowNum\"\r\n                                   [labelKey]=\"option.actionmenu.labelKey || 'label'\"\r\n                                   [panelMaxWidth]=\"option.actionmenu.panelMaxWidth || '130px'\"\r\n                                   [panelMaxHeight]=\"option.actionmenu.panelMaxHeight || '9999px'\"\r\n                                   [maxWidth]=\"option.actionmenu.maxWidth\"\r\n                                   (select)=\"onActionmenuSelect($event, option)\"></ti-actionmenu>\r\n                </div>\r\n            </ti-accordion-head>\r\n            <ng-container *ngTemplateOutlet=\"contentTemplate; context: {$implicit: option, index: i}\"></ng-container>\r\n    </ti-accordion-item>\r\n</ti-accordion>",
                styles: [":host{display:block}.tp-accordionlist-headlabel{display:inline-block}.tp-accordionlist-headtools{float:right}"]
            },] }
];
TpAccordionlistComponent.propDecorators = {
    closeOthers: [{ type: Input }],
    options: [{ type: Input }],
    headLabelTemplate: [{ type: ContentChild, args: ['headLabel', { static: true },] }],
    contentTemplate: [{ type: ContentChild, args: ['content', { static: true },] }],
    accordionItemComps: [{ type: ViewChildren, args: [TiAccordionItemComponent,] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBBY2NvcmRpb25saXN0Q29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnlwbHVzMy9jb21wb25lbnRzL2FjY29yZGlvbmxpc3QvVHBBY2NvcmRpb25saXN0Q29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyRyxPQUFPLEVBQUUsd0JBQXdCLEVBQW9CLGVBQWUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQXlFM0Y7Ozs7Ozs7Ozs7R0FVRztBQU1ILE1BQU0sT0FBTyx3QkFBeUIsU0FBUSxlQUFlO0lBTDdEOztRQU1JOztXQUVHO1FBQ00sZ0JBQVcsR0FBWSxJQUFJLENBQUM7UUFDckM7O1dBRUc7UUFDTSxZQUFPLEdBQWlDLEVBQUUsQ0FBQztJQW9EeEQsQ0FBQztJQXZDRzs7T0FFRztJQUNJLFNBQVMsQ0FBQyxNQUFhLEVBQUUsTUFBNkIsRUFBRSxLQUFhLEVBQUUsbUJBQXdCO1FBQ2xHLHdCQUF3QjtRQUN4QixJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUM5QyxNQUFNLG9CQUFvQixHQUE2QixJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDaEcsSUFBSSxvQkFBb0IsRUFBRTtnQkFDdEIsb0JBQW9CLENBQUMsSUFBSSxHQUFHLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO2dCQUN2RCxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUU7b0JBQ2xCLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQzVCO2FBQ0o7U0FDSjtJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNJLGtCQUFrQixDQUFDLElBQXNCLEVBQUUsTUFBNkI7UUFDM0UsSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO1lBQy9DLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztTQUMxQztJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNJLGtCQUFrQixDQUFDLE1BQTZCO1FBQ25ELElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN0RixPQUFPLEVBQUUsQ0FBQztTQUNiO1FBRUQsT0FBTyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFzQixFQUFvQixFQUFFO1lBQzVFLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBRWpELE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQzs7O1lBaEVKLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsa0JBQWtCO2dCQUM1QixzeURBQW1DOzthQUV0Qzs7OzBCQUtJLEtBQUs7c0JBSUwsS0FBSztnQ0FLTCxZQUFZLFNBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs4QkFLMUMsWUFBWSxTQUFDLFNBQVMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7aUNBQ3hDLFlBQVksU0FBQyx3QkFBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgSW5wdXQsIFF1ZXJ5TGlzdCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZHJlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUaUFjY29yZGlvbkl0ZW1Db21wb25lbnQsIFRpQWN0aW9ubWVudUl0ZW0sIFRpQmFzZUNvbXBvbmVudCB9IGZyb20gJ0BjbG91ZC90aW55Myc7XHJcblxyXG4vKipcclxuICog5oqY5Y+g6Z2i5p2/5YiX6KGo5Lit5Y2V5Liq5oqY5Y+g6Z2i5p2/55qE5L+h5oGv5o6l5Y+jXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRwQWNjb3JkaW9ubGlzdE9wdGlvbiB7XHJcbiAgICAvKipcclxuICAgICAqIOWNleS4quaKmOWPoOmdouadv+aYr+WQpuWkhOS6juWxleW8gOeKtuaAge+8jOeUqOS6juWIneWni+WMluiuvue9ru+8jOm7mOiupOS4jeWxleW8gFxyXG4gICAgICovXHJcbiAgICBvcGVuPzogYm9vbGVhbjtcclxuICAgIC8qKlxyXG4gICAgICog5Y2V5Liq5oqY5Y+g6Z2i5p2/5piv5ZCm56aB55SoXHJcbiAgICAgKi9cclxuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcclxuICAgIC8qKlxyXG4gICAgICog5Y2V5Liq5oqY5Y+g6Z2i5p2/55qE5aS06YOoKOmZpOi/h+WPs+S+p2FjdGlvbm1lbnXmk43kvZzljLop54K55Ye75Zue6LCDXHJcbiAgICAgKi9cclxuICAgIGhlYWRDbGljaz86ICgkZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiDljZXkuKrmipjlj6DpnaLmnb/lt6bkvqfnmoTmmL7npLrmlofmnKxcclxuICAgICAqL1xyXG4gICAgaGVhZGxhYmVsPzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDljZXkuKrmipjlj6DpnaLmnb/lj7PkvqdhY3Rpb25tZW515pON5L2c5Yy66YWN572u6aG5XHJcbiAgICAgKi9cclxuICAgIGFjdGlvbm1lbnU/OiBUcEFjY29yZGlvbmxpc3RBY3Rpb25tZW51SXRlbTtcclxuICAgIC8qKlxyXG4gICAgICog5YWB6K645pyJ5aSa5L2Z55qE5bGe5oCn5a2X5q61XHJcbiAgICAgKi9cclxuICAgIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRwQWNjb3JkaW9ubGlzdEFjdGlvbm1lbnVJdGVtIHtcclxuICAgIC8qKlxyXG4gICAgICog5pON5L2c6aG55pWw5o2u6ZuGXHJcbiAgICAgKi9cclxuICAgIGl0ZW1zOiBBcnJheTxUaUFjdGlvbm1lbnVJdGVtPjtcclxuICAgIC8qKlxyXG4gICAgICog5pWw5o2u6ZuG5Lit6KaB5pi+56S65a2X56ym5Liy55qEa2V5XHJcbiAgICAgKi9cclxuICAgIGxhYmVsS2V5Pzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkuIvmi4npnaLmnb/mnIDlpKflrr3luqbvvIzotoXov4fml7bmjaLooYzvvIzlr7nmiYDmnInlrZDoj5zljZXpg73nlJ/mlYhcclxuICAgICAqL1xyXG4gICAgcGFuZWxNYXhXaWR0aD86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICog5LiL5ouJ6Z2i5p2/5pyA5aSn6auY5bqm5bqm77yM6LaF6L+H5pe25Ye6546w56uW5ZCR5rua5Yqo5p2h77yM5a+55omA5pyJ5a2Q6I+c5Y2V6YO955Sf5pWI44CCXHJcbiAgICAgKi9cclxuICAgIHBhbmVsTWF4SGVpZ2h0Pzogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmk43kvZzpobnlpJbpg6jlrrnlmajlrr3luqZcclxuICAgICAqL1xyXG4gICAgbWF4V2lkdGg/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOacgOWkmuaYvuekuuS4quaVsCwg5YyF5ZCr5LiL5ouJ6I+c5Y2V44CCVUnop4TojIPop4TlrprmnIDlpJrmmL7npLo05LiqLCDmiYDku6XmmoLkuI3lr7nlpJblvIDmlL5cclxuICAgICAqL1xyXG4gICAgbWF4U2hvd051bT86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICog54K55Ye76YCJ5Lit5pON5L2c6I+c5Y2V6aG55LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIHNlbGVjdD86IChpdGVtOiBUaUFjdGlvbm1lbnVJdGVtLCBvcHRpb246IFRwQWNjb3JkaW9ubGlzdE9wdGlvbikgPT4gdm9pZDtcclxuXHJcbiAgICAvLyBtb3JlVGV4dD86IHN0cmluZzsg5LmL5ZCO5pyJ6ZyA5rGC5YaN5byA5pS+XHJcbiAgICAvLyBkYXRhPzogYW55O1xyXG4gICAgLy8gZGF0YVRvSXRlbXNGbj86IChkYXRhOiBhbnkpID0+IEFycmF5PFRpQWN0aW9ubWVudUl0ZW0+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWB6K645pyJ5aSa5L2Z55qE5bGe5oCn5a2X5q61XHJcbiAgICAgKi9cclxuICAgIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG4vKipcclxuICpcclxuICogIOaKmOWPoOmdouadv+WIl+ihqOe7hOS7tlxyXG4gKlxyXG4gKiAgMTAuMS4w54mI5pys5paw5aKeXHJcbiAqXHJcbiAqICAxMC4wLjTlj4rkuYvliY3nmoTniYjmnKzmmK/ku6XmqKHmnb/nmoTlvaLlvI/mj5Dkvpso5Y+q5o+Q5L6b5LqG5LiA5Lqb5qC35byP77yJ77ybMTAuMS4w54mI5pys5Li65LqG5a6e546w5qC35byP5oyJ6ZyA5Yqg6L295ZKM5YW25L2/55So566A5L6/5oCn77yM5Y675o6J5LqG5LmL5YmN55qE5qih5p2/77yM5bCB6KOF5LqG6K+l57uE5Lu244CCXHJcbiAqXHJcbiAqICA8ZXhhbXBsZS11cmw+Li4vdGlueXBsdXMzZGVtby8jL2FjY29yZGlvbmxpc3QvYWNjb3JkaW9ubGlzdC1hbGw8L2V4YW1wbGUtdXJsPlxyXG4gKlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3RwLWFjY29yZGlvbmxpc3QnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2FjY29yZGlvbmxpc3QuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9hY2NvcmRpb25saXN0Lmxlc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVHBBY2NvcmRpb25saXN0Q29tcG9uZW50IGV4dGVuZHMgVGlCYXNlQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICog5bGV5byA5p+Q5LiA6aG55pe277yM5piv5ZCm5YWz6Zet5YW25a6D6aG5XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNsb3NlT3RoZXJzOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICog5oqY5Y+g6Z2i5p2/5YiX6KGo5pWw5o2u6ZuG5ZCIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG9wdGlvbnM6IEFycmF5PFRwQWNjb3JkaW9ubGlzdE9wdGlvbj4gPSBbXTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6I635Y+W5Yiw55So5oi36Ieq5a6a5LmJ55qE5aS06YOo5bem5L6nbGFiZWzljLrmqKHmnb9cclxuICAgICAqL1xyXG4gICAgQENvbnRlbnRDaGlsZCgnaGVhZExhYmVsJywgeyBzdGF0aWM6IHRydWUgfSkgcHVibGljIGhlYWRMYWJlbFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDojrflj5bliLDnlKjmiLfoh6rlrprkuYnnmoTlsZXlvIDlhoXlrrnljLrmqKHmnb9cclxuICAgICAqL1xyXG4gICAgQENvbnRlbnRDaGlsZCgnY29udGVudCcsIHsgc3RhdGljOiB0cnVlIH0pIHB1YmxpYyBjb250ZW50VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBAVmlld0NoaWxkcmVuKFRpQWNjb3JkaW9uSXRlbUNvbXBvbmVudCkgcHJpdmF0ZSBhY2NvcmRpb25JdGVtQ29tcHM6IFF1ZXJ5TGlzdDxUaUFjY29yZGlvbkl0ZW1Db21wb25lbnQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaGVhZENsaWNrKCRldmVudDogRXZlbnQsIG9wdGlvbjogVHBBY2NvcmRpb25saXN0T3B0aW9uLCBpbmRleDogbnVtYmVyLCBhY3Rpb25tZW51Q29udGFpbmVyOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyDngrnlh7vpnZ5hY3Rpb25tZW515Yy65Z+f5pe25bGV5byAL+aUtui1t1xyXG4gICAgICAgIGlmICghYWN0aW9ubWVudUNvbnRhaW5lci5jb250YWlucygkZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QWNjb3JkaW9uSXRlbTogVGlBY2NvcmRpb25JdGVtQ29tcG9uZW50ID0gdGhpcy5hY2NvcmRpb25JdGVtQ29tcHMudG9BcnJheSgpW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRBY2NvcmRpb25JdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3JkaW9uSXRlbS5vcGVuID0gIWN1cnJlbnRBY2NvcmRpb25JdGVtLm9wZW47XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmhlYWRDbGljaykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5oZWFkQ2xpY2soJGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uQWN0aW9ubWVudVNlbGVjdChpdGVtOiBUaUFjdGlvbm1lbnVJdGVtLCBvcHRpb246IFRwQWNjb3JkaW9ubGlzdE9wdGlvbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChvcHRpb24uYWN0aW9ubWVudSAmJiBvcHRpb24uYWN0aW9ubWVudS5zZWxlY3QpIHtcclxuICAgICAgICAgICAgb3B0aW9uLmFjdGlvbm1lbnUuc2VsZWN0KGl0ZW0sIG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWN0aW9ubWVudUl0ZW1zKG9wdGlvbjogVHBBY2NvcmRpb25saXN0T3B0aW9uKTogQXJyYXk8VGlBY3Rpb25tZW51SXRlbT4ge1xyXG4gICAgICAgIGlmICghb3B0aW9uLmFjdGlvbm1lbnUgfHwgIW9wdGlvbi5hY3Rpb25tZW51Lml0ZW1zIHx8IG9wdGlvbi5hY3Rpb25tZW51Lml0ZW1zLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbi5hY3Rpb25tZW51Lml0ZW1zLm1hcCgoaXRlbTogVGlBY3Rpb25tZW51SXRlbSk6IFRpQWN0aW9ubWVudUl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmRpc2FibGVkID0gb3B0aW9uLmRpc2FibGVkIHx8IGl0ZW0uZGlzYWJsZWQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iXX0=