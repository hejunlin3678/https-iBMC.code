import { Component, ElementRef, Renderer2 } from '@angular/core';
import { TiBaseComponent } from '@cloud/tiny3';
import { TpGuidesComponent } from './TpGuidesComponent';
/**
 * TiGuideComponent 是单个引导模块组件
 */
export class TpGuideComponent extends TiBaseComponent {
    constructor(elementRef, renderer2, guidesComp) {
        super(elementRef, renderer2);
        this.elementRef = elementRef;
        this.renderer2 = renderer2;
        this.guidesComp = guidesComp;
        /**
         * @ignore
         * 下标值
         */
        this.cardIndex = -1;
        /**
         * @ignore
         * 是否含有body
         */
        this.hasBody = false;
    }
    // tslint:disable-next-line: use-life-cycle-interface
    ngAfterContentInit() {
        super.ngAfterContentInit();
        this.setCardIndex();
        this.cardIndex = this.nativeElement.cardIndex;
    }
    /**
     * @ignore
     * 设置步骤标志
     */
    setCardIndex() {
        const cardNum = this.guidesComp.nativeElement.children.length;
        for (let i = 0; i < cardNum; i++) {
            this.guidesComp.nativeElement.children[i].cardIndex = i;
            if (cardNum <= 2) {
                this.renderer.setStyle(this.guidesComp.nativeElement.children[i], 'max-width', '445px');
            }
        }
    }
    /**
     * @ignore
     * 是否待办项
     */
    isUndo(index) {
        return this.guidesComp.activeIndex >= 0 && index > this.guidesComp.activeIndex;
    }
    /**
     * @ignore
     * 是否当前项
     */
    isActive(index) {
        return this.guidesComp.activeIndex >= 0 && index === this.guidesComp.activeIndex;
    }
    /**
     * @ignore
     * 是否已完成
     */
    isDone(index) {
        return this.guidesComp.activeIndex >= 0 && index < this.guidesComp.activeIndex;
    }
    /**
     * @ignore
     * 是否含有间距
     */
    hasSpace(index) {
        return this.isActive(index) && this.hasBody;
    }
}
TpGuideComponent.decorators = [
    { type: Component, args: [{
                selector: 'tp-guide',
                template: "<!-- \u5361\u7247\u6807\u5FD7\u7EBF -->\r\n<span class=\"tp-guide-line\"></span>\r\n\r\n<!-- \u5361\u7247\u6807\u5FD7 -->\r\n<div class=\"tp-guide-circle\">\r\n    <span class=\"tp-guide-number\" *ngIf=\"!isDone(cardIndex)\">{{cardIndex + 1}}</span>\r\n    <tp-icon local name=\"cloud-action-complete2\"\r\n             class=\"tp-guide-number tp-guide-card-done\"\r\n             *ngIf=\"isDone(cardIndex)\"></tp-icon>\r\n</div>\r\n\r\n<!-- \u5361\u7247\u5185\u5BB9 -->\r\n<div class=\"tp-guide-card\">\r\n    <ng-content></ng-content>\r\n</div>\r\n\r\n<!-- \u6709\u65E0body\u95F4\u8DDD\u6837\u5F0F -->\r\n<div class=\"tp-guide-space\"\r\n     *ngIf=\"hasSpace(cardIndex)\"\r\n     [ngClass]=\"{'tp-guide-space-active': isActive(cardIndex) }\"></div>\r\n",
                host: {
                    '[class.tp-guide-card-container]': 'true',
                    '[class.tp-guide-card-undo]': 'isUndo(cardIndex)',
                    '[class.tp-guide-card-active]': 'isActive(cardIndex)',
                    '[class.tp-guide-card-done]': 'isDone(cardIndex)'
                },
                styles: [".ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host{background:var(--ti-common-color-bg-white-normal);box-shadow:var(--ti-common-shadow-1-down);display:inline-block;flex:1;margin-right:var(--ti-common-space-2x);position:relative}:host:hover{box-shadow:var(--ti-common-shadow-3-down)}:host:last-child{margin-right:0}::ng-deep .tp-guide-card{-ms-box-sizing:border-box;background:var(--ti-common-color-bg-white-normal);border-top:var(--tp-guide-card-border-top) solid var(--ti-common-color-line-active);box-sizing:border-box;padding:var(--ti-common-space-6x) var(--ti-common-space-6x) var(--ti-common-space-5x)}:host.tp-guide-card-undo ::ng-deep .tp-guide-card{border-top-color:var(--ti-common-color-line-normal)}:host.tp-guide-card-active ::ng-deep .tp-guide-card{border-top-color:var(--ti-common-color-line-active)}[small] :host.tp-guide-card-active ::ng-deep .tp-guide-card{border-top-color:var(--ti-common-color-warn)}:host.tp-guide-card-done ::ng-deep .tp-guide-card{border-top-color:var(--ti-common-color-success)}[small] :host ::ng-deep .tp-guide-card{padding:var(--ti-common-space-3x) 0 var(--ti-common-space-3x) var(--ti-common-space-6x)}::ng-deep .tp-guide-circle{-ms-box-sizing:border-box;background:var(--ti-common-color-bg-white-normal);border:2px solid var(--ti-common-color-line-active);border-radius:50%;box-sizing:border-box;height:var(--tp-guide-circle-size);left:var(--tp-guide-circle-space-left);position:absolute;top:-15px;width:var(--tp-guide-circle-size)}::ng-deep .tp-guide-circle .tp-guide-number{color:var(--ti-common-color-text-highlight);display:inline-block;font-size:var(--ti-common-font-size-4);height:100%;line-height:var(--ti-common-line-height-number);text-align:center;width:100%}:host.tp-guide-card-undo ::ng-deep .tp-guide-circle{border-color:var(--ti-common-color-line-normal)}:host.tp-guide-card-undo ::ng-deep .tp-guide-circle .tp-guide-number{color:var(--ti-common-color-text-primary)}:host.tp-guide-card-active ::ng-deep .tp-guide-circle{background:var(--ti-common-color-icon-graybg-active);border-color:var(--ti-common-color-line-active)}:host.tp-guide-card-active ::ng-deep .tp-guide-circle .tp-guide-number{color:var(--ti-common-color-text-white)}[small] :host.tp-guide-card-active ::ng-deep .tp-guide-circle{background:var(--ti-common-color-warn);border-color:var(--ti-common-color-warn)}[small] :host.tp-guide-card-active ::ng-deep .tp-guide-circle .tp-guide-number{color:var(--ti-common-color-text-white)}:host.tp-guide-card-done ::ng-deep .tp-guide-circle{border-color:var(--ti-common-color-success)}:host.tp-guide-card-done ::ng-deep .tp-guide-circle .tp-guide-number{color:var(--ti-common-color-success);line-height:var(--tp-guide-circle-size)}[small] :host ::ng-deep .tp-guide-circle{height:var(--tp-guide-circle-size-small);top:-10px;width:var(--tp-guide-circle-size-small)}[small] :host ::ng-deep .tp-guide-circle .tp-guide-number{font-size:var(--ti-common-font-size-base);line-height:16px}.tp-guide-line{background:var(--ti-common-color-bg-white-normal);height:var(--tp-guide-card-border-top);left:calc(var(--tp-guide-circle-space-left) - var(--tp-guide-circle-white-space));position:absolute;width:calc(var(--tp-guide-circle-size) + 2*var(--tp-guide-circle-white-space))}[small] :host .tp-guide-line{width:calc(var(--tp-guide-circle-size-small) + 2*var(--tp-guide-circle-white-space))}.tp-guide-space{background:transparent;bottom:calc(-1*var(--tp-guide-body-space));height:var(--tp-guide-body-space);position:absolute;width:100%}.tp-guide-space.tp-guide-space-active{background:var(--ti-common-color-bg-white-normal)}"]
            },] }
];
TpGuideComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: TpGuidesComponent }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBHdWlkZUNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL0BjbG91ZC90aW55cGx1czMvY29tcG9uZW50cy9ndWlkZXMvVHBHdWlkZUNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDakUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUUvQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RDs7R0FFRztBQWFILE1BQU0sT0FBTyxnQkFBaUIsU0FBUSxlQUFlO0lBQ2pELFlBQXNCLFVBQXNCLEVBQVksU0FBb0IsRUFBVSxVQUE2QjtRQUMvRyxLQUFLLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRFgsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUFZLGNBQVMsR0FBVCxTQUFTLENBQVc7UUFBVSxlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUluSDs7O1dBR0c7UUFDSSxjQUFTLEdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDOUI7OztXQUdHO1FBQ0ksWUFBTyxHQUFZLEtBQUssQ0FBQztJQVhoQyxDQUFDO0lBYUQscURBQXFEO0lBQ3JELGtCQUFrQjtRQUNkLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDO0lBQ2xELENBQUM7SUFFRDs7O09BR0c7SUFDSyxZQUFZO1FBQ2hCLE1BQU0sT0FBTyxHQUFXLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDdEUsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN0QyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztZQUN4RCxJQUFJLE9BQU8sSUFBSSxDQUFDLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQzthQUMzRjtTQUNKO0lBQ0wsQ0FBQztJQUVEOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxLQUFhO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLElBQUksQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQztJQUNuRixDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksUUFBUSxDQUFDLEtBQWE7UUFDekIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsSUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDO0lBQ3JGLENBQUM7SUFDRDs7O09BR0c7SUFDSSxNQUFNLENBQUMsS0FBYTtRQUN2QixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxJQUFJLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUM7SUFDbkYsQ0FBQztJQUNEOzs7T0FHRztJQUNJLFFBQVEsQ0FBQyxLQUFhO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ2hELENBQUM7OztZQTVFSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLFVBQVU7Z0JBQ3BCLCt2QkFBMkI7Z0JBRTNCLElBQUksRUFBRTtvQkFDRixpQ0FBaUMsRUFBRSxNQUFNO29CQUN6Qyw0QkFBNEIsRUFBRSxtQkFBbUI7b0JBQ2pELDhCQUE4QixFQUFFLHFCQUFxQjtvQkFDckQsNEJBQTRCLEVBQUUsbUJBQW1CO2lCQUNwRDs7YUFDSjs7O1lBakJtQixVQUFVO1lBQUUsU0FBUztZQUdoQyxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUaUJhc2VDb21wb25lbnQgfSBmcm9tICdAY2xvdWQvdGlueTMnO1xyXG5cclxuaW1wb3J0IHsgVHBHdWlkZXNDb21wb25lbnQgfSBmcm9tICcuL1RwR3VpZGVzQ29tcG9uZW50JztcclxuLyoqXHJcbiAqIFRpR3VpZGVDb21wb25lbnQg5piv5Y2V5Liq5byV5a+85qih5Z2X57uE5Lu2XHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndHAtZ3VpZGUnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2d1aWRlLmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vZ3VpZGUubGVzcyddLFxyXG4gICAgaG9zdDoge1xyXG4gICAgICAgICdbY2xhc3MudHAtZ3VpZGUtY2FyZC1jb250YWluZXJdJzogJ3RydWUnLFxyXG4gICAgICAgICdbY2xhc3MudHAtZ3VpZGUtY2FyZC11bmRvXSc6ICdpc1VuZG8oY2FyZEluZGV4KScsXHJcbiAgICAgICAgJ1tjbGFzcy50cC1ndWlkZS1jYXJkLWFjdGl2ZV0nOiAnaXNBY3RpdmUoY2FyZEluZGV4KScsXHJcbiAgICAgICAgJ1tjbGFzcy50cC1ndWlkZS1jYXJkLWRvbmVdJzogJ2lzRG9uZShjYXJkSW5kZXgpJ1xyXG4gICAgfVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFRwR3VpZGVDb21wb25lbnQgZXh0ZW5kcyBUaUJhc2VDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHByb3RlY3RlZCByZW5kZXJlcjI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBndWlkZXNDb21wOiBUcEd1aWRlc0NvbXBvbmVudCkge1xyXG4gICAgICAgIHN1cGVyKGVsZW1lbnRSZWYsIHJlbmRlcmVyMik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDkuIvmoIflgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNhcmRJbmRleDogbnVtYmVyID0gLTE7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaYr+WQpuWQq+aciWJvZHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhc0JvZHk6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHVzZS1saWZlLWN5Y2xlLWludGVyZmFjZVxyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nQWZ0ZXJDb250ZW50SW5pdCgpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2FyZEluZGV4KCk7XHJcbiAgICAgICAgdGhpcy5jYXJkSW5kZXggPSB0aGlzLm5hdGl2ZUVsZW1lbnQuY2FyZEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6K6+572u5q2l6aqk5qCH5b+XXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0Q2FyZEluZGV4KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNhcmROdW06IG51bWJlciA9IHRoaXMuZ3VpZGVzQ29tcC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgY2FyZE51bTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3VpZGVzQ29tcC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuW2ldLmNhcmRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgIGlmIChjYXJkTnVtIDw9IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5ndWlkZXNDb21wLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW5baV0sICdtYXgtd2lkdGgnLCAnNDQ1cHgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaYr+WQpuW+heWKnumhuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNVbmRvKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ndWlkZXNDb21wLmFjdGl2ZUluZGV4ID49IDAgJiYgaW5kZXggPiB0aGlzLmd1aWRlc0NvbXAuYWN0aXZlSW5kZXg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaYr+WQpuW9k+WJjemhuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNBY3RpdmUoaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmd1aWRlc0NvbXAuYWN0aXZlSW5kZXggPj0gMCAmJiBpbmRleCA9PT0gdGhpcy5ndWlkZXNDb21wLmFjdGl2ZUluZGV4O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmmK/lkKblt7LlrozmiJBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzRG9uZShpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3VpZGVzQ29tcC5hY3RpdmVJbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5ndWlkZXNDb21wLmFjdGl2ZUluZGV4O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmmK/lkKblkKvmnInpl7Tot51cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhc1NwYWNlKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0FjdGl2ZShpbmRleCkgJiYgdGhpcy5oYXNCb2R5O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==