import { Component, Input, ElementRef, Renderer2, ContentChild, TemplateRef } from '@angular/core';
import { TpSelectgroupComponent } from './TpSelectgroupComponent';
import { TiBaseComponent } from '@cloud/tiny3';
/**
 * 配合[TpSelectgroupComponent]{@link ../components/TpSelectgroupComponent.html}使用
 *
 * <example-url>../tinyplus3demo/#/selectgroup/selectgroup-all</example-url>
 */
export class TpSelectitemComponent extends TiBaseComponent {
    constructor(selectgroup, hostRef, renderer) {
        super(hostRef, renderer);
        this.hostRef = hostRef;
        this.renderer = renderer;
        /**
         * 选中标识位置
         */
        this.checkPosition = 'right-top';
        this.selectgroup = selectgroup;
    }
    /**
     * @ignore
     */
    onClick() {
        if (this.item.disabled) {
            return;
        }
        if (this.selectgroup.multiple) { // 多选
            const index = this.selectgroup.model.indexOf(this.item);
            if (index > -1) {
                this.selectgroup.model.splice(index, 1);
            }
            else {
                this.selectgroup.model.push(this.item);
            }
        }
        else { // 单选
            this.selectgroup.model = this.item;
        }
    }
    /**
     * @ignore
     * 是否选中（多选时）
     */
    isChecked() {
        if (this.selectgroup.model) {
            return this.selectgroup.model.includes(this.item);
        }
    }
}
TpSelectitemComponent.decorators = [
    { type: Component, args: [{
                selector: 'tp-selectitem',
                template: "<div *ngIf=\"selectgroup.multiple && isChecked()\"\r\n    [ngClass]=\"{'tp-selectitem-corner-right-top': checkPosition === 'right-top',\r\n                'tp-selectitem-corner-right-bottom': checkPosition === 'right-bottom'}\" >\r\n    <tp-icon local name=\"cloud-action-checkmark\" class=\"tp-selectitem-checkmark\"></tp-icon>\r\n</div>\r\n<ng-container *ngIf=\"itemTemplate else defaultTemplate\">\r\n    <ng-container *ngTemplateOutlet=\"itemTemplate\">\r\n    </ng-container>\r\n</ng-container>\r\n<ng-template #defaultTemplate>\r\n    <tp-icon [name]=\"item.iconName\" class=\"tp-selectitem-lefticon\"></tp-icon>\r\n    <div class=\"tp-selectitem-right\" [id]=\"appendId('right')\">\r\n        <ng-container *ngIf=\"item.content; else selectitemRight\">\r\n            <span class=\"tp-selectitem-title\" tiOverflow>{{item.title}}</span>\r\n            <span class=\"tp-selectitem-content\" tiOverflow>{{item.content}}</span>\r\n        </ng-container>\r\n    </div>\r\n</ng-template>\r\n<ng-content></ng-content>\r\n<ng-template #selectitemRight>\r\n    <span class=\"tp-selectitem-title tp-selectitem-title-top-space\" tiOverflow [id]=\"appendId('title')\">{{item.title}}</span>\r\n</ng-template>\r\n",
                host: {
                    '[class.tp-selectitem-box]': 'true',
                    '[class.tp-selectitem-disabled]': 'item.disabled',
                    '[class.tp-selectitem-checked]': 'selectgroup.multiple ? isChecked() : selectgroup.model === item',
                    '[class.tp-selectitem-template]': 'itemTemplate',
                    '(click)': 'onClick()'
                },
                styles: [".ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}::ng-deep :root{--tp-selectitem-border-color-hover:var(--ti-common-color-line-active);--tp-selectitem-corner-width:20px}.tp-selectitem-corner,:host.tp-selectitem-box.tp-selectitem-checked .tp-selectitem-corner-right-bottom,:host.tp-selectitem-box.tp-selectitem-checked .tp-selectitem-corner-right-top{animation:showCorner .2s;display:inline-block;height:0;position:absolute;right:0;width:0}:host.tp-selectitem-box{background-color:var(--ti-common-color-bg-white-normal);border:1px solid var(--ti-common-color-line-normal);border-radius:var(--ti-common-border-radius-normal);box-shadow:none;box-sizing:border-box;cursor:pointer;display:inline-block;height:54px;margin-right:var(--ti-common-space-3x);padding:var(--ti-common-space-2x) var(--ti-common-space-2x) var(--ti-common-space-2x) var(--ti-common-space-10);position:relative;width:190px;*zoom:1}:host.tp-selectitem-box:after{clear:both;content:\"\";display:table}:host.tp-selectitem-box:before{content:\"\";display:table}:host.tp-selectitem-box.tp-selectitem-checked{background-color:var(--ti-common-color-bg-light-normal);border:1px solid var(--tp-selectitem-border-color-hover)}:host.tp-selectitem-box.tp-selectitem-checked .tp-selectitem-corner-right-bottom{border-bottom:var(--tp-selectitem-corner-width) solid var(--tp-selectitem-border-color-hover);border-left:var(--tp-selectitem-corner-width) solid transparent;bottom:0}:host.tp-selectitem-box.tp-selectitem-checked .tp-selectitem-corner-right-bottom .tp-selectitem-checkmark{color:var(--ti-common-color-icon-white);position:absolute;right:0;top:calc(var(--tp-selectitem-corner-width) - 12px)}:host.tp-selectitem-box.tp-selectitem-checked .tp-selectitem-corner-right-top{border-bottom:var(--tp-selectitem-corner-width) solid var(--tp-selectitem-border-color-hover);border-left:var(--tp-selectitem-corner-width) solid transparent;bottom:0;top:0;transform:rotate(-90deg)}:host.tp-selectitem-box.tp-selectitem-checked .tp-selectitem-corner-right-top .tp-selectitem-checkmark{color:var(--ti-common-color-icon-white);position:absolute;right:0;top:calc(var(--tp-selectitem-corner-width) - 12px);transform:rotate(90deg)}:host.tp-selectitem-box.tp-selectitem-template{height:auto;padding-left:var(--ti-common-space-2x);vertical-align:middle;width:auto}:host.tp-selectitem-box:hover{border:1px solid var(--tp-selectitem-border-color-hover)}:host.tp-selectitem-box.tp-selectitem-disabled{background:var(--ti-common-color-bg-disabled);box-shadow:none;cursor:not-allowed}:host.tp-selectitem-box.tp-selectitem-disabled,:host.tp-selectitem-box.tp-selectitem-disabled :hover{border-color:var(--ti-common-color-line-disabled)}:host.tp-selectitem-box.tp-selectitem-disabled .tp-selectitem-content,:host.tp-selectitem-box.tp-selectitem-disabled .tp-selectitem-lefticon,:host.tp-selectitem-box.tp-selectitem-disabled .tp-selectitem-title{color:var(--ti-common-color-text-disabled)}:host.tp-selectitem-box.tp-selectitem-disabled.tp-selectitem-checked .tp-selectitem-corner-right-bottom,:host.tp-selectitem-box.tp-selectitem-disabled.tp-selectitem-checked .tp-selectitem-corner-right-top{border-bottom-color:var(--ti-common-color-line-disabled)}:host .tp-selectitem-lefticon{float:left;font-size:28px;line-height:100%;margin-right:var(--ti-common-space-2x);margin-top:var(--ti-common-space-base)}.tp-selectitem-right .tp-selectitem-content,.tp-selectitem-right .tp-selectitem-title,.tp-selectitem-text{display:block;width:100%}.tp-selectitem-right{float:left;width:calc(100% - 50px)}.tp-selectitem-right .tp-selectitem-title{color:var(--ti-common-color-text-primary);font-size:var(--ti-common-font-size-1);line-height:20px}.tp-selectitem-right .tp-selectitem-title-top-space{margin-top:var(--ti-common-space-2x)}.tp-selectitem-right .tp-selectitem-content{color:var(--ti-common-color-text-secondary);font-size:var(--ti-common-font-size-base);line-height:var(--ti-common-line-height-number)}::ng-deep.tp-selectitem-box ti-select{bottom:calc(-1*var(--ti-common-space-2x) - 1px);left:calc(-1*var(--ti-common-space-10) - 1px);position:relative}::ng-deep.tp-selectitem-box ti-select:not([disabled]){background:transparent}::ng-deep.tp-selectitem-box ti-select:not([disabled]),::ng-deep.tp-selectitem-box ti-select:not([disabled]):hover,::ng-deep.tp-selectitem-box ti-select:not([disabled])[tiFocused]{border-color:transparent;border-top-color:var(--ti-common-color-line-dividing)}::ng-deep.tp-selectitem-box.tp-selectitem-checked ti-select:not([disabled]),::ng-deep.tp-selectitem-box.tp-selectitem-checked ti-select:not([disabled]):hover,::ng-deep.tp-selectitem-box.tp-selectitem-checked ti-select:not([disabled])[tiFocused],::ng-deep.tp-selectitem-box:hover ti-select:not([disabled]),::ng-deep.tp-selectitem-box:hover ti-select:not([disabled]):hover,::ng-deep.tp-selectitem-box:hover ti-select:not([disabled])[tiFocused]{border-top-color:var(--tp-selectitem-border-color-hover)}@keyframes showCorner{0%{opacity:0}to{opacity:1}}@keyframes showCheckmark{0%{transform:scale(0)}to{transform:scale(1)}}"]
            },] }
];
TpSelectitemComponent.ctorParameters = () => [
    { type: TpSelectgroupComponent },
    { type: ElementRef },
    { type: Renderer2 }
];
TpSelectitemComponent.propDecorators = {
    item: [{ type: Input }],
    checkPosition: [{ type: Input }],
    itemTemplate: [{ type: ContentChild, args: ['item', /* TODO: add static flag */ { static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBTZWxlY3RpdGVtQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vQGNsb3VkL3RpbnlwbHVzMy9jb21wb25lbnRzL3NlbGVjdGdyb3VwL1RwU2VsZWN0aXRlbUNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkcsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDbEUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQXVCL0M7Ozs7R0FJRztBQWNILE1BQU0sT0FBTyxxQkFBc0IsU0FBUSxlQUFlO0lBZXRELFlBQVksV0FBbUMsRUFBWSxPQUFtQixFQUFZLFFBQW1CO1FBQ3pHLEtBQUssQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFEOEIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUFZLGFBQVEsR0FBUixRQUFRLENBQVc7UUFWN0c7O1dBRUc7UUFDTSxrQkFBYSxHQUFpQyxXQUFXLENBQUM7UUFTL0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7SUFDbkMsQ0FBQztJQUNEOztPQUVHO0lBQ0ksT0FBTztRQUNWLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDcEIsT0FBTztTQUNWO1FBQ0QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUs7WUFDbEMsTUFBTSxLQUFLLEdBQVcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoRSxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDWixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQzNDO2lCQUFNO2dCQUNILElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDMUM7U0FDSjthQUFNLEVBQUUsS0FBSztZQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7U0FDdEM7SUFDTCxDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksU0FBUztRQUNaLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUU7WUFDeEIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3JEO0lBQ0wsQ0FBQzs7O1lBMURKLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsZUFBZTtnQkFDekIsb3NDQUFnQztnQkFFaEMsSUFBSSxFQUFFO29CQUNGLDJCQUEyQixFQUFFLE1BQU07b0JBQ25DLGdDQUFnQyxFQUFFLGVBQWU7b0JBQ2pELCtCQUErQixFQUFFLGlFQUFpRTtvQkFDbEcsZ0NBQWdDLEVBQUUsY0FBYztvQkFDaEQsU0FBUyxFQUFFLFdBQVc7aUJBQ3pCOzthQUNKOzs7WUF4Q1Esc0JBQXNCO1lBREosVUFBVTtZQUFFLFNBQVM7OzttQkErQzNDLEtBQUs7NEJBSUwsS0FBSzsyQkFFTCxZQUFZLFNBQUMsTUFBTSxFQUFFLDJCQUEyQixDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgQ29udGVudENoaWxkLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUcFNlbGVjdGdyb3VwQ29tcG9uZW50IH0gZnJvbSAnLi9UcFNlbGVjdGdyb3VwQ29tcG9uZW50JztcclxuaW1wb3J0IHsgVGlCYXNlQ29tcG9uZW50IH0gZnJvbSAnQGNsb3VkL3RpbnkzJztcclxuZXhwb3J0IGludGVyZmFjZSBUcFNlbGVjdGdyb3VwSXRlbSB7XHJcbiAgICAvKipcclxuICAgICAqIOWNoeeJh+agh+mimFxyXG4gICAgICovXHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDljaHniYflhoXlrrlcclxuICAgICAqL1xyXG4gICAgY29udGVudD86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICog5Y2h54mH5piv5ZCm56aB55SoXHJcbiAgICAgKi9cclxuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcclxuICAgIC8qKlxyXG4gICAgICog5Y2h54mH5bem5L6n5Zu+5qCH5ZCNXHJcbiAgICAgKi9cclxuICAgIGljb25OYW1lOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOWFgeiuuOacieWkmuS9meeahOWxnuaAp+Wtl+autVxyXG4gICAgICovXHJcbiAgICBbcHJvcE5hbWU6IHN0cmluZ106IGFueTtcclxufVxyXG4vKipcclxuICog6YWN5ZCIW1RwU2VsZWN0Z3JvdXBDb21wb25lbnRde0BsaW5rIC4uL2NvbXBvbmVudHMvVHBTZWxlY3Rncm91cENvbXBvbmVudC5odG1sfeS9v+eUqFxyXG4gKlxyXG4gKiA8ZXhhbXBsZS11cmw+Li4vdGlueXBsdXMzZGVtby8jL3NlbGVjdGdyb3VwL3NlbGVjdGdyb3VwLWFsbDwvZXhhbXBsZS11cmw+XHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndHAtc2VsZWN0aXRlbScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2VsZWN0aXRlbS5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3NlbGVjdGdyb3VwLmxlc3MnXSxcclxuICAgIGhvc3Q6IHtcclxuICAgICAgICAnW2NsYXNzLnRwLXNlbGVjdGl0ZW0tYm94XSc6ICd0cnVlJyxcclxuICAgICAgICAnW2NsYXNzLnRwLXNlbGVjdGl0ZW0tZGlzYWJsZWRdJzogJ2l0ZW0uZGlzYWJsZWQnLFxyXG4gICAgICAgICdbY2xhc3MudHAtc2VsZWN0aXRlbS1jaGVja2VkXSc6ICdzZWxlY3Rncm91cC5tdWx0aXBsZSA/IGlzQ2hlY2tlZCgpIDogc2VsZWN0Z3JvdXAubW9kZWwgPT09IGl0ZW0nLFxyXG4gICAgICAgICdbY2xhc3MudHAtc2VsZWN0aXRlbS10ZW1wbGF0ZV0nOiAnaXRlbVRlbXBsYXRlJyxcclxuICAgICAgICAnKGNsaWNrKSc6ICdvbkNsaWNrKCknXHJcbiAgICB9XHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVHBTZWxlY3RpdGVtQ29tcG9uZW50IGV4dGVuZHMgVGlCYXNlQ29tcG9uZW50e1xyXG4gICAgLyoqXHJcbiAgICAgKiDmlbDmja7phY3nva5cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaXRlbTogVHBTZWxlY3Rncm91cEl0ZW07XHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reagh+ivhuS9jee9rlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBjaGVja1Bvc2l0aW9uOiAncmlnaHQtdG9wJyB8ICdyaWdodC1ib3R0b20nID0gJ3JpZ2h0LXRvcCc7XHJcbiAgICAvLyBpdGVt5qih5p2/XHJcbiAgICBAQ29udGVudENoaWxkKCdpdGVtJywgLyogVE9ETzogYWRkIHN0YXRpYyBmbGFnICovIHsgc3RhdGljOiB0cnVlIH0pIGl0ZW1UZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2VsZWN0Z3JvdXA6IGFueTtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdGdyb3VwOiBUcFNlbGVjdGdyb3VwQ29tcG9uZW50LCBwcm90ZWN0ZWQgaG9zdFJlZjogRWxlbWVudFJlZiwgcHJvdGVjdGVkIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcclxuICAgICAgICBzdXBlcihob3N0UmVmLCByZW5kZXJlcik7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rncm91cCA9IHNlbGVjdGdyb3VwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkNsaWNrKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLml0ZW0uZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rncm91cC5tdWx0aXBsZSkgeyAvLyDlpJrpgIlcclxuICAgICAgICAgICAgY29uc3QgaW5kZXg6IG51bWJlciA9IHRoaXMuc2VsZWN0Z3JvdXAubW9kZWwuaW5kZXhPZih0aGlzLml0ZW0pO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rncm91cC5tb2RlbC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rncm91cC5tb2RlbC5wdXNoKHRoaXMuaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgeyAvLyDljZXpgIlcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rncm91cC5tb2RlbCA9IHRoaXMuaXRlbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaYr+WQpumAieS4re+8iOWkmumAieaXtu+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNDaGVja2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGdyb3VwLm1vZGVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGdyb3VwLm1vZGVsLmluY2x1ZGVzKHRoaXMuaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==