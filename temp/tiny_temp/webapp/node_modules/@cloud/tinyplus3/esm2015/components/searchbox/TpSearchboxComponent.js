import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, Output, Renderer2, ViewChild, ViewChildren, QueryList } from '@angular/core';
import { FormControl, FormGroup } from '@angular/forms';
import { TiBrowser, TiDateComponent, TiDominatorComponent, TiDropComponent, TiDropsearchComponent, TiFormComponent, TiKeymap, TiLocale, TiLocaleFormat, TiValidators, Util
// tslint:disable-next-line: no-implicit-dependencies
 } from '@cloud/tiny3';
import { TpIconComponent } from '../icon/TpIconModule';
/**
 * ip正则
 * 10.0.2 新增
 */
export const TP_REGEXP_IP = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/;
/**
 * UUID正则
 * 10.0.2 新增
 */
export const TP_REGEXP_UUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
/**
 * 综合搜索组件。
 * 用户通过该组件，选择出数据过滤需要的参数
 *
 * <example-url>../tinyplus3demo/#/searchbox/searchbox-all</example-url>
 */
export class TpSearchboxComponent extends TiFormComponent {
    // eslint-disable-next-line @typescript-eslint/no-parameter-properties
    constructor(hostRef, render, changeDetectorRef) {
        super(hostRef, render);
        this.changeDetectorRef = changeDetectorRef;
        /**
         * 设置默认的过滤范围字段
         */
        this.defaultField = '';
        /**
         * 没有生成tag时的占位提示文本
         *
         */
        this.emptyPlaceholder = '';
        /**
         * 是否显示帮助图标
         *
         */
        this.showHelp = true;
        /**
         * 是否显示设置defaultField图标
         */
        this.showSettings = false;
        /**
         * 源数据
         */
        this.items = [];
        /**
         * 设置组件最多显示几行，
         */
        this.maxLine = 2;
        /**
         * 下拉框最大高度，单位为px，
         *
         */
        this.panelMaxHeight = '999px';
        /**
         * 设置属性面板宽度
         */
        this.propPanelWidth = '200px';
        /**
         * 设置属性值面板宽度
         */
        this.valuePanelWidth = '200px';
        /**
         * 设置tag的最大宽度，解决tag太长，属性值
         */
        this.tagMaxWidth = '400px';
        /**
         * help 图标提示事件
         */
        this.help = new EventEmitter();
        /**
         * 清除事件
         */
        this.clear = new EventEmitter();
        /**
         * 搜索事件
         */
        this.search = new EventEmitter();
        /**
         * 值面板打开前事件,用于懒加载值选项
         */
        this.beforeOpen = new EventEmitter();
        /**
         * @ignore
         * 选中项后，输入值变化事件
         * 10.0.2 新增
         */
        this.inputValueChange = new EventEmitter();
        /**
         * 默认匹配字段发生改变事件
         * 10.1.2 新增
         */
        this.defaultFieldChange = new EventEmitter();
        /**
         * @ignore
         * 分割符号，默认是中文冒号
         */
        this.tagSeperator = '：';
        /**
         * @ignore
         * 有选中标签后的placeholder
         */
        this.inputPlaceholder = TiLocale.getLocaleWords().tpSearchbox.addPlaceholder;
        /**
         * @ignore
         * 属性选项
         */
        this.propDropOptions = [];
        /**
         * @ignore
         * 值选项
         */
        this.valueDropOptions = [];
        /**
         * @ignore
         * 输入框的值
         */
        this.inputValue = '';
        /**
         * @ignore
         * 帮助图标提示内容
         */
        this.helpTipContent = TiLocale.getLocaleWords().tpSearchbox.help;
        /**
         * @ignore
         * 清空图标提示内容
         */
        this.clearTipContent = TiLocale.getLocaleWords().tpSearchbox.clearAll;
        /**
         * @ignore
         * 设置默认搜索项图标提示内容
         */
        this.settingTipContent = TiLocale.getLocaleWords().tpSearchbox.switchText;
        /**
         * @ignore
         * 多选值面板选中项
         */
        this.valueDropSelecteds = [];
        /**
         * @ignore
         * 设置defaultField面板选项
         */
        this.settingDropOptions = [];
        /**
         * @ignore
         * drop 面板到触发元素的距离，编辑标签时，距离是6px,所以使用变量
         */
        this.dominatorSpace = '7px';
        /**
         * 记录默认选中项旧值，用于判断两次选中是否是同一个值。如果是，则不触发defaultFieldChange事件。
         */
        this.oldDefaultField = '';
        this.dominatorPlaceholder = '';
        // 存储一致需要聚焦的元素
        this.alwaysFocusableElems = [];
        // 范围tag 使用的特殊字符串'-'
        this.rangeLine = '-';
        // 范围tag 使用的特殊字符串'≥'
        this.rangeLarge = '≥';
        // 范围tag 使用的特殊字符串'≤'
        this.rangeLess = '≤';
    }
    // tslint:disable-next-line: use-life-cycle-interface
    ngOnInit() {
        super.ngOnInit();
        this.init();
        // 非中文场景下，标签分割符号是英文冒号加空格。
        if (TiLocale.getLocaleWords().tiLocaleKey !== 'zh-CN') {
            this.tagSeperator = ': ';
        }
        this.oldDefaultField = this.defaultField;
        this.setPlaceholder(this.model);
    }
    // tslint:disable-next-line: use-life-cycle-interface
    ngOnChanges(changes) {
        super.ngOnChanges(changes);
        if (changes['items'] && this.items && !changes['items'].firstChange) {
            this.init();
        }
        if (changes['showSettings'] && this.showSettings) {
            // 初始化设置按钮下拉面板中的选项。
            this.initSettingDropOptions();
        }
        else if (changes['showSettings'] && !this.showSettings) {
            this.settingsDropDominatorElem = null;
        }
        if (changes['emptyPlaceholder'] && !changes['emptyPlaceholder'].firstChange && this.emptyPlaceholder) {
            this.setPlaceholder(this.model);
        }
    }
    ngAfterViewChecked() {
        if (this.settingsCom && !this.settingsDropDominatorElem) {
            // 根据设置按钮dom，来设置下拉面板的宽度
            this.settingsDropDominatorElem = this.settingsCom.nativeElement;
            // ngAfterViewChecked是视图已经变化检测结束的钩子函数，如果此时再去改变视图上的接口会有报错.
            // 报错信息：(ExpressionChangedAfterItHasBeenCheckedError) 所以需要强制执行一次变化检测。
            this.changeDetectorRef.detectChanges();
        }
    }
    // tslint:disable-next-line: use-life-cycle-interface
    ngAfterViewInit() {
        super.ngAfterViewInit();
        // 值面板可能对齐输入框，也可能对齐标签
        this.valueDropDominator = this.searchInputRf.nativeElement;
        if (this.showSettings) {
            this.settingsDropDominatorElem = this.settingsCom.nativeElement;
        }
        this.alwaysFocusableElems.push(this.dominatorCom.nativeElement, this.searchInputRf.nativeElement);
        this.rightIconsRef.forEach((item) => {
            this.alwaysFocusableElems.push(item.nativeElement);
        });
        this.setFocusableElems(this.alwaysFocusableElems);
        //  因为改变了valueDropDominator ，所以强制刷新一次
        this.changeDetectorRef.detectChanges();
    }
    /**
     * @ignore
     * 设置默认field字段面板选中项
     */
    onSettingDropSelect(option) {
        this.defaultField = option.field;
        this.settingsDropCom.hide();
        // 如果最新的选中项和之前不一样，才会触发defaultFieldChange事件。
        if (this.oldDefaultField !== this.defaultField) {
            this.oldDefaultField = this.defaultField;
            this.defaultFieldChange.emit(option);
        }
    }
    /**
     * @ignore
     * tag发生改变（删减、新增）时触发。
     * TODO: 为什么只有在tag删除的时候，才会触发该函数
     */
    onDominatorModelChange() {
        this.setPlaceholder(this.model);
    }
    setPlaceholder(model) {
        this.dominatorPlaceholder = (model === null || model === void 0 ? void 0 : model.length) > 0 ? this.inputPlaceholder : this.emptyPlaceholder;
    }
    // 输入框处理
    /**
     * @ignore
     * 输入点击事件
     */
    onClickInput(event) {
        this.valueDropDominator = this.searchInputRf.nativeElement;
        // 键已经选中
        if (this.selectedItem) {
            // 如果没有可选项，不显示
            if (!this.selectedItem.options && (!this.selectedItem.type || this.selectedItem.type === 'radio')) {
                return;
            }
            this.setValueDropSearchResult(this.getValueDropOptions(this.selectedItem.field));
            this.showValueDrop();
        }
        else {
            this.propDropSearch(this.inputValue);
        }
    }
    // 属性面板根据输入框中的值搜索选项
    propDropSearch(value) {
        const searchResult = this.searchOptions(value, this.propDropOptions);
        if (searchResult.length > 0) {
            this.propDropCom.searchResult = searchResult;
            this.propDropCom.show();
        }
        else {
            this.propDropCom.hide();
        }
    }
    /**
     * @ignore
     * 输入框按键按下处理Backspace和Enter键
     */
    onKeydownInput(event) {
        // tslint:disable-next-line: deprecation
        switch (event.keyCode) {
            case TiKeymap.KEY_BACKSPACE:
                this.responseBackspace();
                this.setPlaceholder(this.model);
                break;
            case TiKeymap.KEY_ENTER:
                this.responseEnter(event);
                break;
            default:
                break;
        }
    }
    /**
     * @ignore
     * 输入框值变化处理，
     * 输入值时，如果展开的是属性面板，搜索属性，如果是值面板，单选搜索选项，多选匹配选项
     */
    onInputValueChange(value) {
        // 值面板
        if (this.selectedItem) {
            // 有选中项后，输入值之间通知出去，用于值选项数据过多，自己处理搜索。
            this.inputValueChange.emit({
                value,
                item: this.selectedItem
            });
            // 单选搜索
            if (this.selectedItem.type === 'radio') {
                this.dealRadioItemSearch(value);
                // 多选只匹配
            }
            else if (this.selectedItem.type === 'checkbox') {
                this.matchCheckboxInput(value.trim());
                this.showValueDrop();
            }
        }
        else { // 属性面板
            //  ie11 初始化和placeholder改变会触发ngModelChange事件，所有此处屏蔽属性搜索
            if (TiBrowser.isIE()) {
                return;
            }
            this.propDropSearch(value);
        }
    }
    /**
     * @ignore
     * 输入框失去焦点
     *
     */
    onBlurInput() {
        this.valueDropCom.hide();
        this.propDropCom.hide();
        this.valueMultiDropCom.hide();
    }
    /**
     * @ignore
     * 输入框聚焦
     */
    onFocusInput() {
        if (this.selectedItem && this.selectedItem.type === 'radio') {
            this.dealRadioItemSearch(this.inputValue);
        }
    }
    // 整体
    /**
     * @ignore
     * 整体失去焦点
     */
    onBlur() {
        this.hideAllDrops();
    }
    /**
     * @ignore
     * 删除单个tag
     */
    onDelete() {
        // 删除一项后，输入框位置改变，防止drop对齐问题，隐藏所有drop
        this.hideAllDrops();
    }
    /**
     * @ignore
     * 整体点击
     */
    onClick(event) {
        this.searchInputRf.nativeElement.focus();
        this.onClickInput(event);
    }
    /**
     * @ignore
     * 清除所有tag
     */
    onClickClear(event) {
        event.stopPropagation(); // 防止事件冒泡到dominator后，dominator聚焦之后面板打开。
        // 有选中tag才清空，防止多触发ngmodelchange
        if (this.model.length > 0) {
            this.model = [];
        }
        this.selectedItem = undefined;
        this.inputValue = '';
        this.clear.emit();
        this.setPlaceholder(this.model);
    }
    /**
     * @ignore
     * 点击搜索
     */
    onClickSearch(event) {
        event.stopPropagation();
        // 先把输入的内容生成tag
        if (this.inputValue) {
            this.generateTagByInputValue();
        }
        this.hideAllDrops();
        const filter = this.getFilter();
        this.search.emit(filter);
    }
    /**
     * @ignore
     * 点击help图标
     */
    onClickHelp(event) {
        event.stopPropagation();
        this.help.emit(event);
    }
    /**
     * @ignore
     * 点击设置默认搜索项图标
     */
    onClickSetting(event) {
        event.stopPropagation();
        this.settingsDropCom.show();
    }
    /**
     * @ignore
     * 是否有label 类型，用于label 类型的特殊处理
     */
    hasLabeltag() {
        const index = this.items.findIndex((item) => {
            return item.type === 'noValue';
        });
        return index > -1;
    }
    // 两个tag点击切换，事件顺序 mousedown => blur => focus => click
    // tag-value 点击事件 因为要设置焦点，所以要绑定在mousedown上
    /**
     * @ignore
     * 是否有label 类型，用于label 类型的特殊处理
     */
    onMousedownTagValue(event) {
        this.setFocusableElems(this.alwaysFocusableElems.concat(event.target));
    }
    /**
     * @ignore
     */
    onClickTagValue(event, tag) {
        if (!this.tagEditable(tag.type)) {
            return;
        }
        event.stopPropagation();
        this.valueDropDominator = event.target;
        this.editingTag = tag;
        this.hideValueDrops();
        this.selectedItem = this.items.find((item) => {
            return item.field === tag.field;
        });
        this.setValueDropSearchResult(this.getValueDropOptions(tag.field));
        // 多选需要匹配已经选中的选项
        if (this.selectedItem.type === 'checkbox') {
            this.setValueDropSelecteds();
        }
        // 展开面板前更新了面板的参数，所以需要强制变检一次
        this.changeDetectorRef.detectChanges();
        // 如果没有可选项，不显示
        if (!this.selectedItem.options && (!this.selectedItem.type || this.selectedItem.type === 'radio')) {
            return;
        }
        // 在输入框选择时，再点击已选中标签编辑，面板无法展开，
        // 原因当前mousedown事件回调函数在 输入框blur事件之前，先打开后关闭，
        // 所以这里要添加延迟
        setTimeout(() => {
            this.showValueDrop();
        }, 0);
    }
    /**
     * @ignore
     * tag值聚焦
     */
    onFocusTagValue(event, tag) {
        event.preventDefault();
        const elem = event.target;
        this.valueDropDominator = elem;
        // 可编辑类型才选中
        if (tag.type === 'radio' || tag.type === 'checkbox') {
            this.selectHTMLElementText(elem);
        }
    }
    /**
     * @ignore
     * tag值失去焦点
     */
    onBlurTagValue() {
        // 非编辑状态，保持面板的dominator在input上
        this.valueDropDominator = this.searchInputRf.nativeElement;
        this.propDropCom.hide();
        this.valueDropCom.hide();
        this.valueMultiDropCom.hide();
        if (this.selectedItem && (this.selectedItem.type === 'radio' || this.selectedItem.type === 'checkbox' || this.selectedItem.type === 'map')) {
            this.selectedItem = undefined;
            this.editingTag = undefined;
        }
    }
    /**
     * @ignore
     * tag 编辑输入框keydown事件，处理编辑状态下 enter 键操作
     */
    onKeydownTagInput(event) {
        // tslint:disable-next-line: deprecation
        if (event.keyCode === TiKeymap.KEY_ENTER) {
            const tagValue = event.target.textContent;
            if (this.isTagExist(this.selectedItem, tagValue)) {
                return;
            }
            this.generateTag(this.selectedItem, tagValue);
            this.emitChange();
            this.selectedItem = undefined;
            this.editingTag = undefined;
            this.hideValueDrops();
        }
    }
    /**
     * @ignore
     * 标签编辑时只有多选需要处理匹配
     */
    onTagInput(event) {
        if (this.selectedItem.type === 'checkbox') {
            const value = event.target.textContent.trim();
            this.matchCheckboxInput(value);
        }
    }
    /**
     * @ignore
     * 是否可以编辑
     */
    tagEditable(type) {
        // map 类型标签、日期范围和数字范围不能编辑
        return type === 'radio' || type === 'checkbox';
    }
    /**
     * @ignore
     *  属性面板选中回调
     */
    onPorpDropSelect(option) {
        // label类型tag 只在属性面板中选择一次
        if (option.type === 'noValue') {
            this.generateTagByPropDrop(option);
            this.propDropCom.hide();
            return;
        }
        this.selectedItem = this.items.find((item) => {
            return item.field === option.field;
        });
        // 有beforeOpen懒加载，面板展开交给用户
        if (this.beforeOpen.observers.length > 0) {
            this.beforeOpen.emit(this);
            return;
        }
        this.dominatorPlaceholder = (option === null || option === void 0 ? void 0 : option.placeholder) || (this.model.length > 0 ? this.inputPlaceholder : this.emptyPlaceholder);
        // 如果没有可选项，则不显示值面板。
        if (!this.selectedItem || !this.selectedItem.options && (!this.selectedItem.type || this.selectedItem.type === 'radio')) {
            // 先触发动态变化检测，再清除选中属性值（属性面板不允许有选中状态）
            this.changeDetectorRef.detectChanges();
            this.clearPropDropSelected();
            return;
        }
        const options = this.getValueDropOptions(option.field);
        this.valueDropOptions = options;
        this.setValueDropSearchResult(options);
        if (this.selectedItem.type === 'checkbox') {
            this.setValueDropSelecteds();
        }
        // 面板展开前清空输入内容
        this.inputValue = '';
        // 展开面板前更新了面板的参数，所以需要强制变检一次
        this.changeDetectorRef.detectChanges();
        this.showValueDrop();
    }
    /**
     * 暴露外面的打开值面板接口
     */
    open(options) {
        this.setCustomValueDropSearchResult(options);
        this.showValueDrop();
    }
    /**
     * 获取但前选中数据项
     */
    getSelectedItem() {
        return this.selectedItem;
    }
    /**
     * @ignore
     * 单选值面板选中，(包括map类型)
     */
    onValueDropSelect(selected) {
        // 复选时，点击确定按钮结束选择
        if (!this.selectedItem || !selected) {
            return;
        }
        // 处理map类型，map类型需要选择两次
        if (this.selectedItem.type === 'map') {
            this.mapItemSelect(selected);
            return;
        }
        this.generateTagByValuePanel();
        this.clearState();
    }
    /**
     * @ignore
     * 多选底部确定按钮
     */
    onClickValueDropOK(event) {
        //  阻止按钮获取焦点，输入框失去焦点
        event.preventDefault();
        this.generateTagByValuePanel();
        this.clearState();
    }
    /**
     * @ignore
     * 多选底部取消按钮
     */
    onClickValueDropCancel() {
        this.valueMultiDropCom.hide();
    }
    /**
     * @ignore
     * 数字范围
     */
    onClickCustomDropOK() {
        if (!this.selectedItem) {
            return;
        }
        if (this.selectedItem.type === 'numRange') {
            this.generateNumRangetag();
        }
        else if (this.selectedItem.type === 'dateRange') {
            this.generateDateRangeTag();
        }
    }
    /**
     * @ignore
     * 自定义面板取消按钮回调
     */
    onClickCustomDropCancel() {
        this.hideCustomDrop();
        if (this.editingTag) {
            this.selectedItem = undefined;
            this.editingTag = undefined;
        }
    }
    /**
     * @ignore
     * numRange 和 dateRange 面板的宽度需要固定值
     */
    customDropWidth() {
        if (!this.selectedItem) {
            return;
        }
        else if (this.selectedItem.type === 'numRange') {
            return '200px';
        }
        else if (this.selectedItem.type === 'dateRange') {
            // 根据最宽小语种pt_BR词条
            return '300px';
        }
    }
    init() {
        this.initItems();
        this.initPropDropOptions();
    }
    initItems() {
        // 初始化 allValues/ emptyValue
        this.items.forEach((item) => {
            // items 中不写type, 默认单选'radio'
            if (Util.isUndefined(item.type)) {
                item.type = 'radio';
            }
            else if (item.type === 'map' && Array.isArray(item.options)) {
                item.options.forEach((option) => {
                    // 所有值项
                    if (option.allValues !== false && Array.isArray(option.options)) {
                        const allValues = TiLocale.getLocaleWords().tpSearchbox.allValues;
                        const allValueOption = option.options.find((currentOption) => {
                            return currentOption.label === allValues;
                        });
                        if (!allValueOption) {
                            option.options.unshift({
                                label: allValues
                            });
                        }
                    }
                    // 空值项 emptyValue
                    if (option.emptyValue !== false && Array.isArray(option.options)) {
                        const emptyValue = TiLocale.getLocaleWords().tpSearchbox.emptyValue;
                        const emptyValueOption = option.options.find((currentOption) => {
                            return currentOption.label === emptyValue;
                        });
                        if (!emptyValueOption) {
                            option.options.unshift({
                                label: emptyValue
                            });
                        }
                    }
                });
                // 数字范围
            }
            else if (item.type === 'numRange') {
                const start = new FormControl(item.start, [TiValidators.rangeValue(item.min, item.max), this.lessMax('end')]);
                const end = new FormControl(item.end, [TiValidators.rangeValue(item.min, item.max), this.moreMin('start')]);
                item.formControls = new FormGroup({
                    start,
                    end
                });
                // 开始值的校验状态改变后，更新一下结束值的校验状态
                start.statusChanges.subscribe((status) => {
                    if (status === TpSearchboxComponent.VALID && end.status === TpSearchboxComponent.INVALID) {
                        end.updateValueAndValidity({
                            onlySelf: true,
                            emitEvent: false
                        });
                    }
                });
                // 结束值的校验状态改变后，更新一下开始值的校验状态
                end.statusChanges.subscribe((status) => {
                    if (status === TpSearchboxComponent.VALID && start.status === TpSearchboxComponent.INVALID) {
                        start.updateValueAndValidity({
                            onlySelf: true,
                            emitEvent: false
                        });
                    }
                });
                // 日期范围
            }
            else if (item.type === 'dateRange') {
                // tslint:disable-next-line: no-null-keyword
                const startDate = this.isValidDate(new Date(item.start)) ? new Date(item.start) : null;
                // tslint:disable-next-line: no-null-keyword
                const endDate = this.isValidDate(new Date(item.end)) ? new Date(item.end) : null;
                const start = new FormControl(startDate);
                const end = new FormControl(endDate);
                item.formControls = new FormGroup({
                    start,
                    end
                });
                // 开始日期的max是结束日期的选中值，如果结束日期没有选择，使用item中设置的max
                item.startMax = endDate ? endDate : item.max;
                // 结束日期的min是开始日期的选中值，如果开始日期没有选择，使用item中设置的min
                item.endMin = startDate ? startDate : item.min;
                start.valueChanges.subscribe((value) => {
                    // tslint:disable-next-line: prefer-conditional-expression
                    if (this.isValidDate(value)) {
                        item.endMin = value;
                    }
                    else if (this.isValidDate(item.min)) {
                        item.endMin = item.min;
                    }
                    else {
                        // 没有设置 min,开始日期选中又清除后，需要设置一个min的缺省值
                        item.endMin = undefined;
                    }
                });
                end.valueChanges.subscribe((value) => {
                    // tslint:disable-next-line: prefer-conditional-expression
                    if (this.isValidDate(value)) {
                        item.startMax = value;
                    }
                    else if (this.isValidDate(item.max)) {
                        item.startMax = item.max;
                    }
                    else {
                        // 没有设置 max, 结束日期选中又清除后，需要设置一个max的缺省值
                        item.startMax = undefined;
                    }
                });
            }
        });
    }
    // Invalid Date判断
    // tslint:disable-next-line: prefer-function-over-method
    isValidDate(date) {
        return Object.prototype.toString.call(date) === '[object Date]' && String(date) !== 'Invalid Date';
    }
    // 自定义校验规则小于最大值
    // 静态方法返回箭头函数生成环境打包错误，所以使用
    // tslint:disable-next-line: prefer-function-over-method
    lessMax(field) {
        return (control) => {
            if (control.parent && control.parent.get(field)) {
                const end = control.parent.get(field).value;
                // 开始和结束值都存在时，判断开始可结束值的大小
                if (end && control.value && control.value > end) {
                    return {
                        minValue: {
                            actualValue: control.value,
                            tiErrorMessage: TiLocale.getLocaleWords().tpSearchbox.rangeMinErr
                        }
                    };
                }
            }
            // tslint:disable-next-line: no-null-keyword
            return null;
        };
    }
    // 自定义校验规则，大于最小值
    // tslint:disable-next-line: prefer-function-over-method
    moreMin(field) {
        return (control) => {
            if (control.parent && control.parent.get(field)) {
                const start = control.parent.get(field).value;
                // 开始和结束值都存在时，判断开始可结束值的大小
                if (start && control.value && control.value < start) {
                    return {
                        minValue: {
                            actualValue: control.value,
                            tiErrorMessage: TiLocale.getLocaleWords().tpSearchbox.rangeMaxErr
                        }
                    };
                }
            }
            // tslint:disable-next-line: no-null-keyword
            return null;
        };
    }
    // 初始化属性面板选项
    initPropDropOptions() {
        const options = [];
        this.items.forEach((item) => {
            const option = {
                field: item.field,
                label: item.label,
                type: item.type,
                placeholder: item === null || item === void 0 ? void 0 : item.placeholder
            };
            // label
            if (item.type === 'noValue') {
                option['children'] = item.children.map((childOption) => {
                    childOption.type = 'noValue';
                    return childOption;
                });
            }
            options.push(option);
        });
        this.propDropOptions = options;
    }
    initSettingDropOptions() {
        // 只有noValue类型不能设置为默认搜索项
        const options = this.items.filter((item) => {
            return item.type !== 'noValue';
        })
            .map((item) => {
            const option = {
                label: item.label,
                field: item.field
            };
            // 如果设置了defaultField，面板中高亮显示
            if (this.defaultField === option.field) {
                this.settingsDropSelected = option;
            }
            return option;
        });
        // 使用分组来显示面板标题
        this.settingDropOptions = [{
                label: this.settingTipContent,
                children: options
            }];
    }
    matchCheckboxInput(value) {
        const valueArray = value.split('|')
            .map((span) => {
            return span.trim();
        });
        this.valueDropSelecteds = [];
        this.selectedItem.options.forEach((option) => {
            if (valueArray.includes(option.label)) {
                this.valueDropSelecteds.push(option);
            }
        });
    }
    dealRadioItemSearch(value) {
        const searchResult = this.searchOptions(value, this.valueDropOptions);
        if (searchResult.length > 0) {
            this.setValueDropSearchResult(searchResult);
            this.showValueDrop();
        }
        else {
            this.valueDropCom.hide();
        }
    }
    // 设置值面板的选项
    setValueDropSearchResult(options) {
        if (this.selectedItem.type === 'checkbox') {
            this.valueMultiDropCom.searchResult = options;
        }
        else if (this.selectedItem.type === 'radio' || this.selectedItem.type === 'map') {
            this.valueDropCom.searchResult = options;
        }
    }
    // 懒加载时，设置值面板选项
    setCustomValueDropSearchResult(options) {
        if (this.selectedItem.type === 'checkbox') {
            this.selectedItem.options = options;
            this.valueMultiDropCom.searchResult = options;
        }
        else if (this.selectedItem.type === 'radio') {
            this.selectedItem.options = options;
            this.valueDropCom.searchResult = options;
        }
        else if (this.selectedItem.type === 'map') {
            this.selectedItem.options = options;
            this.valueDropCom.searchResult = [{
                    label: TiLocale.getLocaleWords().tpSearchbox.tagKey,
                    children: options
                }];
        }
        this.changeDetectorRef.detectChanges();
    }
    // 根据输入内容生成tag
    generateTagByInputValue() {
        // 有选中项且可编辑
        if (this.selectedItem) {
            if (this.tagEditable(this.selectedItem.type) || this.selectedItem.type === 'map') {
                if (this.isTagExist(this.selectedItem, this.inputValue)) {
                    return;
                }
                this.generateTag(this.selectedItem, this.inputValue);
                this.emitChange();
                this.selectedItem = undefined;
                this.inputValue = '';
                this.hideValueDrops();
            }
            return;
        }
        // 没有选中项，按默认值处理
        if (!this.defaultField || this.inputValue === '') {
            return;
        }
        // 属性面板展开，会触发dropsearch的快捷键，所以先关闭
        this.propDropCom.hide();
        // 输入字符串之间可能使用中英文','分割
        const values = this.inputValue.split(/[，,]/)
            .map((value) => {
            return value.trim();
        })
            .filter((value) => {
            return value !== '';
        });
        if (values.length === 0) {
            return;
        }
        // 因为要多次生成tag, 会多次更新model,
        // 用此变量标记在最后一次生成更新model后发射ngModelChange事件
        let modelChanged = false;
        // 只支持每次输入都是同一类型的，所以多个值用第一个匹配，找到匹配项
        const matchedItem = this.items.find((item) => {
            return item.regexp && item.regexp.test(values[0]);
        });
        if (matchedItem) {
            values.forEach((value) => {
                if (!this.isTagExist(matchedItem, value)) {
                    modelChanged = true;
                    this.generateTag(matchedItem, value);
                }
            });
        }
        else if (this.defaultField) {
            const defaultItem = this.items.find((item) => {
                return this.defaultField === item.field;
            });
            // 默认项生成tag,不支持逗号分隔，所以用inputValue整体
            if (!this.isTagExist(defaultItem, this.inputValue)) {
                modelChanged = true;
                this.generateTag(defaultItem, this.inputValue);
            }
        }
        this.inputValue = '';
        if (modelChanged) {
            this.emitChange();
        }
    }
    // 属性面板没有选中项,所以要清除处理。如果不进行重置，则会出现选中样式~
    clearPropDropSelected() {
        this.propDropSelected = undefined;
    }
    responseEnter(event) {
        this.generateTagByInputValue();
    }
    responseBackspace() {
        if (this.inputValue) {
            return;
        }
        // 处理map类型标签tag
        if (this.selectedOption) {
            this.selectedOption = undefined;
            this.valueDropCom.hide();
            const searchResult = this.getValueDropOptions(this.selectedItem.field);
            this.setValueDropSearchResult(searchResult);
            // 展开面板前更新了面板的参数，所以需要强制变检一次
            this.changeDetectorRef.detectChanges();
            this.showValueDrop();
        }
        else if (this.selectedItem) {
            // 处理有选中属性
            this.hideValueDrops();
            this.selectedItem = undefined;
            // 展开面板前更新了面板的参数，所以需要强制变检一次
            this.changeDetectorRef.detectChanges();
            this.propDropCom.show();
        }
        else if (this.model.length > 0) {
            // 处理已经选中的标签
            this.propDropCom.hide();
            // 清除items 中的选中项
            this.model.pop();
            // change事件
            this.emitChange();
        }
    }
    // 展示值面板封装单选和多选
    showValueDrop() {
        // 当点击选中的tag值时，dominatorSpace 需要改变，
        // 5px = （22 -16）/2 +2 ; 22-tag高度，16-文字高度，2-上下两边，2-tag和组件边框之间的距离
        this.dominatorSpace = this.editingTag ? '10px' : '7px';
        // 展开面板前更新了面板的参数，所以需要强制变检一次
        this.changeDetectorRef.detectChanges();
        this.clearPropDropSelected();
        switch (this.selectedItem.type) {
            case 'radio':
                this.valueDropCom.show();
                break;
            case 'map':
                this.valueDropCom.show();
                break;
            case 'checkbox':
                this.valueMultiDropCom.show();
                break;
            case 'numRange':
                this.customDropCom.show();
                this.setNumRangeDropFocusableElems();
                break;
            case 'dateRange':
                this.customDropCom.show();
                this.setDateRangeDropFocusableElems();
                break;
            default:
                break;
        }
    }
    hideAllDrops() {
        this.propDropCom.hide();
        this.hideValueDrops();
        if (this.showSettings) {
            this.settingsDropCom.hide();
        }
    }
    hideValueDrops() {
        this.valueDropCom.hide();
        this.valueMultiDropCom.hide();
        this.customDropCom.hide();
    }
    hideCustomDrop() {
        // 自定义面板隐藏前，让dominator重新聚焦，防止整体失焦
        this.dominatorCom.focus();
        this.customDropCom.hide();
    }
    // 根据关键词(忽略大小写)过滤options
    // tslint:disable-next-line: prefer-function-over-method
    searchOptions(keyword, options) {
        const keywordUpper = keyword.toLocaleUpperCase();
        return options.filter((option) => {
            const labelUpper = option.label.toLocaleUpperCase();
            return labelUpper.indexOf(keywordUpper) !== -1;
        });
    }
    // map 类型
    mapItemSelect(option) {
        if (this.selectedOption) {
            const field = this.selectedItem.field;
            const label = this.selectedItem.label;
            const value = `${this.selectedOption.label}=${option.label}`;
            const newTag = {
                field,
                label,
                value,
                type: 'map'
            };
            if (!this.model) {
                this.model = [newTag];
                return;
            }
            const index = this.model.findIndex((tag) => {
                return tag.field === field && tag.value === value;
            });
            // 标签编辑时，是替换
            if (this.editingTag) {
                this.editingTag = newTag;
                this.model.splice(index, 1, newTag);
            }
            else if (index === -1) {
                this.model.push(newTag);
            }
            this.emitChange();
            this.selectedItem = undefined;
            this.selectedOption = undefined;
            this.editingTag = undefined;
            this.valueDropCom.hide();
        }
        else {
            this.selectedOption = option;
            if (Array.isArray(this.selectedOption.options)) {
                const children = this.selectedOption.options;
                this.valueDropCom.searchResult = [{
                        label: TiLocale.getLocaleWords().tpSearchbox.tagValue,
                        children
                    }];
            }
            else {
                this.valueDropCom.searchResult = [];
            }
            this.changeDetectorRef.detectChanges();
            // 点击选项后默认会关闭面板，所以延迟后再次打开
            setTimeout(() => {
                this.showValueDrop();
            }, 0);
        }
    }
    setValueDropSelecteds() {
        const selectedTag = this.model.find((tag) => {
            return this.selectedItem.field === tag.field;
        });
        if (selectedTag) {
            this.matchCheckboxInput(selectedTag.value);
        }
    }
    // 清理临时状态
    clearState() {
        this.editingTag = undefined;
        this.selectedItem = undefined;
        this.inputValue = '';
        this.valueDropSelecteds = [];
        this.valueDropSelected = undefined;
        this.hideValueDrops();
    }
    generateNumRangetag() {
        const values = this.selectedItem.formControls.value;
        if (this.selectedItem.formControls.status === TpSearchboxComponent.INVALID || (!values.start && !values.end)) {
            return;
        }
        let tagValue;
        if (values.start && values.end) {
            tagValue = `${values.start}${this.rangeLine}${values.end}`;
        }
        else if (values.start) {
            tagValue = this.rangeLarge + values.start;
        }
        else if (values.end) {
            tagValue = this.rangeLess + values.end;
        }
        // 数字范围可能有单位
        let label = this.selectedItem.label;
        if (this.selectedItem.unit) {
            label = `${label}(${this.selectedItem.unit})`;
        }
        const newTag = {
            field: this.selectedItem.field,
            label,
            type: 'numRange',
            start: values.start,
            end: values.end,
            value: tagValue
        };
        if (!this.model) {
            this.model = [newTag];
            return;
        }
        const tagIndex = this.model.findIndex((tag) => {
            return tag.field === this.selectedItem.field;
        });
        if (tagIndex === -1) {
            this.model.push(newTag);
        }
        else {
            this.model.splice(tagIndex, 1, newTag);
        }
        this.afterGenerateTag();
    }
    generateDateRangeTag() {
        const values = this.selectedItem.formControls.value;
        if (!values.start && !values.end) {
            return;
        }
        let tagValue = '';
        let start;
        let end;
        if (values.start && values.end) {
            tagValue = `${this.formatDate2String(values.start)}${this.rangeLine}${this.formatDate2String(values.end)}`;
            start = values.start.toISOString();
            end = values.end.toISOString();
        }
        else if (values.start) {
            tagValue = this.rangeLarge + this.formatDate2String(values.start);
            start = values.start.toISOString();
        }
        else if (values.end) {
            tagValue = this.rangeLess + this.formatDate2String(values.end);
            end = values.end.toISOString();
        }
        const newTag = {
            field: this.selectedItem.field,
            label: this.selectedItem.label,
            start,
            end,
            type: 'dateRange',
            value: tagValue
        };
        if (!this.model) {
            this.model = [newTag];
            return;
        }
        const tagIndex = this.model.findIndex((curTag) => {
            return curTag.field === this.selectedItem.field;
        });
        if (tagIndex === -1) {
            this.model.push(newTag);
        }
        else {
            this.model.splice(tagIndex, 1, newTag);
        }
        this.afterGenerateTag();
    }
    afterGenerateTag() {
        this.emitChange();
        this.hideCustomDrop();
        this.selectedItem = undefined;
    }
    setNumRangeDropFocusableElems() {
        const inputs = this.customDropCom.nativeElement.querySelectorAll('[tiText]');
        const inputElemsArray = [].slice.call(inputs);
        this.setFocusableElems(this.alwaysFocusableElems.concat(inputElemsArray, this.getButtons(), this.customDropCom.nativeElement));
    }
    setDateRangeDropFocusableElems() {
        // 日期范围面板中的日期组件，存在焦点问题，
        const elemsNodeList = this.alwaysFocusableElems.concat(this.customDropCom.nativeElement, this.dateRangeStartCom.getFocusableElems(), this.dateRangeEndCom.getFocusableElems(), this.getButtons());
        this.setFocusableElems(elemsNodeList);
        this.changeDetectorRef.detectChanges();
        this.changeDetectorRef.markForCheck();
    }
    getButtons() {
        const buttons = this.customDropCom.nativeElement.querySelectorAll('[tiButton]');
        return [].slice.call(buttons);
    }
    // 日期对象转字符串
    formatDate2String(date) {
        if (!this.isValidDate(date)) {
            return '';
        }
        else {
            return TiLocaleFormat.formatDate(date, this.selectedItem.format);
        }
    }
    generateTagByValuePanel() {
        let tagValue = '';
        // 单选复选
        if (this.selectedItem.type === 'checkbox') {
            tagValue = this.valueDropSelecteds.reduce((acc, cur, index) => {
                return index === 0 ? cur.label : `${acc} | ${cur.label}`;
            }, '');
        }
        else {
            tagValue = this.valueDropSelected.label;
        }
        if (this.isTagExist(this.selectedItem, tagValue)) {
            return;
        }
        this.generateTag(this.selectedItem, tagValue);
        // change 事件
        this.emitChange();
    }
    // 当前要生成的tag是否已经存在
    isTagExist(selectedItem, tagValue) {
        // 新选中的tag是否已经存在
        const selectedTagIndex = this.model.findIndex((tag) => {
            return tag.field === selectedItem.field && tag.value === tagValue;
        });
        return selectedTagIndex !== -1;
    }
    // label 类型的标签，只选择一次
    generateTagByPropDrop(option) {
        const newTag = {
            field: option.field,
            label: option.label,
            value: '',
            type: 'noValue'
        };
        if (!this.model) {
            this.model = [newTag];
            return;
        }
        // 只有一个label类型的tag
        const index = this.model.findIndex((tag) => {
            return tag.type === 'noValue';
        });
        // 存在标签时替换，不存在时添加到最后
        if (index > 0) {
            this.model.splice(index, 1, newTag);
        }
        else {
            this.model.push(newTag);
        }
        this.emitChange();
    }
    // 生成tag
    generateTag(selectedItem, tagValue) {
        const newTag = {
            field: selectedItem.field,
            label: selectedItem.label,
            value: tagValue,
            type: selectedItem.type
        };
        // 如果选中field中设置了optionValueKey，给生成tag 添加额外的key, 单选为字符串，复选为字符串数组
        if (selectedItem.optionValueKey) {
            this.addOtherOptionKey(newTag, selectedItem.optionValueKey);
        }
        this.updateModel(newTag, selectedItem);
    }
    addOtherOptionKey(tag, valueKey) {
        // 只对单选和复选做处理
        if (this.selectedItem.type === 'checkbox' && this.valueDropSelecteds) {
            this.valueDropSelecteds.forEach((option) => {
                if (Array.isArray(tag[valueKey])) {
                    tag[valueKey].push(option[valueKey]);
                }
                else {
                    tag[valueKey] = [option[valueKey]];
                }
            });
        }
        else if (this.selectedItem.type === 'radio' && this.valueDropSelected) {
            tag[valueKey] = this.valueDropSelected[valueKey];
        }
    }
    updateModel(newTag, selectedItem) {
        if (!this.model) {
            this.model = [newTag];
            return;
        }
        // 编辑模式
        if (this.editingTag) {
            const editingTagIndex = this.model.findIndex((tag) => {
                return tag.field === selectedItem.field && tag.value === this.editingTag.value;
            });
            this.model.splice(editingTagIndex, 1, newTag);
        }
        else {
            // tags中相同field
            const fieldTagIndex = this.model.findIndex((tag) => {
                return tag.field === selectedItem.field;
            });
            // radio 类型可以设置是否替换，map默认不可替换,
            if (fieldTagIndex === -1 || (selectedItem.type === 'radio' && selectedItem.replace === false) || selectedItem.type === 'map') {
                this.model.push(newTag);
            }
            else {
                this.model.splice(fieldTagIndex, 1, newTag);
            }
        }
    }
    emitChange() {
        this.model = this.model.concat();
        this.setPlaceholder(this.model);
    }
    getValueDropOptions(field) {
        let options = this.selectedItem && Array.isArray(this.selectedItem.options) ?
            this.selectedItem.options : [];
        // map类型，利用分组标题显示面板标题
        if (this.selectedItem.type === 'map') {
            // 如果已经选中标签的键
            if (this.selectedOption) {
                options = [
                    {
                        label: TiLocale.getLocaleWords().tpSearchbox.tagValue,
                        children: this.selectedOption.options
                    }
                ];
            }
            else {
                options = [
                    {
                        label: TiLocale.getLocaleWords().tpSearchbox.tagKey,
                        children: this.selectedItem.options
                    }
                ];
            }
        }
        return options;
    }
    // 生成结果 filter对象
    getFilter() {
        const filter = {};
        this.model.forEach((tag) => {
            // 已经存在，合并一起
            if (Array.isArray(filter[tag.field])) {
                filter[tag.field] = filter[tag.field].concat(tag.value.split('|')
                    .map((value) => {
                    return value.trim();
                }));
            }
            else {
                filter[tag.field] = tag.value.split('|')
                    .map((value) => {
                    return value.trim();
                });
            }
        });
        return filter;
    }
    // 选中一段html，三种浏览器测试正常
    // tslint:disable-next-line: prefer-function-over-method
    selectHTMLElementText(elem) {
        const range = document.createRange();
        range.selectNodeContents(elem);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    }
}
/**
 * @ignore
 * formControl 校验状态，通过了所有有效性检查
 */
TpSearchboxComponent.VALID = 'VALID';
/**
 * @ignore
 * formControl 校验状态，至少有一个有效性检查失败了
 */
TpSearchboxComponent.INVALID = 'INVALID';
TpSearchboxComponent.decorators = [
    { type: Component, args: [{
                selector: 'tp-searchbox',
                template: "<ti-dominator\r\n    type=\"tagsinput\"\r\n    multiple=\"true\"\r\n    class=\"tp-searchbox-dominator\"\r\n    [tagMaxWidth]=\"tagMaxWidth\"\r\n    [id]=\"appendId('tp-searchbox-dominator')\"\r\n    [maxLine]=\"maxLine\"\r\n    (delete)=\"onDelete()\"\r\n    [(ngModel)]=\"model\"\r\n    (ngModelChange)=\"onDominatorModelChange()\">\r\n        <!-- tag\u5185\u5BB9 -->\r\n        <ng-template #item let-tag let-index=index>\r\n            <section class=\"tp-searchbox-tag-key\" [id]=\"appendId('tag_key_' + index)\">{{tag.label}}</section><!--\r\n        --><ng-container *ngIf=\"tag.type !=='noValue'\" >\r\n                    <section class=\"tp-searchbox-tag-seperator\" >{{tagSeperator}}</section><!--\r\n                 --><section\r\n                        [attr.contenteditable]=\"tagEditable(tag.type)\"\r\n                        tabindex=\"0\"\r\n                        class=\"tp-searchbox-tag-value\"\r\n                        (mousedown)=\"onMousedownTagValue($event)\"\r\n                        (click)=\"onClickTagValue($event,tag)\"\r\n                        (blur)=\"onBlurTagValue()\"\r\n                        (input)=\"onTagInput($event)\"\r\n                        (focus)=\"onFocusTagValue($event, tag)\"\r\n                        (keydown)=\"onKeydownTagInput($event)\"\r\n                        [id]=\"appendId('tag_value_' + index)\">{{tag.value}}</section>\r\n                </ng-container>\r\n        </ng-template>\r\n        <!-- \u8F93\u5165\u6846\u548C\u6309\u94AE\u7EC4 -->\r\n        <section\r\n            tag-editor\r\n            class=\"tp-searchbox-right\">\r\n            <section class=\"tp-searchbox-search-field\">\r\n                <span class=\"tp-searchbox-prop\" *ngIf=\"selectedItem && !editingTag\">{{selectedItem.label}}{{tagSeperator}}</span>\r\n                <span *ngIf=\"selectedItem?.type == 'map'&& selectedOption && !editingTag\">{{selectedOption?.label}}=</span>\r\n                <input #searchInput\r\n                    tiText\r\n                    noborder\r\n                    type=\"text\"\r\n                    class=\"tp-searchbox-input\"\r\n                    [ngClass]=\"{'tp-searchbox-input-grow': !inputWidth}\"\r\n                    [placeholder]=\"dominatorPlaceholder\"\r\n                    [(ngModel)]=\"inputValue\"\r\n                    (ngModelChange)=\"onInputValueChange($event)\"\r\n                    (click)=\"onClickInput($event)\"\r\n                    (blur)=\"onBlurInput()\"\r\n                    (focus)=\"onFocusInput()\"\r\n                    (keydown)=\"onKeydownInput($event)\"\r\n                    [ngStyle]=\"{width:inputWidth}\"\r\n                    [id]=\"appendId('input')\"/>\r\n            </section>\r\n            <!-- \u53F3\u4FA7\u6309\u94AE\u7EC4 -->\r\n            <section actions class=\"tp-searchbox-buttons\">\r\n                <ng-container  *ngIf=\"model?.length>0 || inputValue\">\r\n                    <tp-icon local\r\n                    class=\"tp-searchbox-clear\"\r\n                    name=\"cloud-action-cross\"\r\n                    [tiTip]=\"clearTipContent\"\r\n                    (click)=\"onClickClear($event)\"\r\n                    [id]=\"appendId('clear')\"></tp-icon>\r\n                    <span  class=\"tp-searchbox-clear-dividing-line\"></span>\r\n                </ng-container>\r\n                <tp-icon #rightIcon local tiOutline *ngIf=\"showHelp\" name=\"cloud-action-tip\"\r\n                [tabindex]=\"0\" (keydown.enter)=\"onClickHelp($event)\" style=\"outline-offset: -2px;\"\r\n                (click)=\"onClickHelp($event)\" [tiTip]=\"helpTipContent\" [id]=\"appendId('helptip')\"></tp-icon>\r\n                <tp-icon #rightIcon local tiOutline\r\n                    *ngIf=\"showSettings\"\r\n                    #settings\r\n                    name=\"cloud-action-setting\"\r\n                    [tiTip]=\"settingTipContent\"\r\n                    [tabindex]=\"0\"\r\n                    style=\"outline-offset: -2px;\"\r\n                    (keydown.enter)=\"onClickSetting($event)\"\r\n                    (click)=\"onClickSetting($event)\"\r\n                    [id]=\"appendId('setting')\">\r\n                </tp-icon>\r\n                <!--\u8BBE\u7F6Eoutline-offset: -2px;\u662F\u4E3A\u4E86\u4FDD\u8BC1\u805A\u7126\u7684\u65F6\u5019\uFF0C\u9ED8\u8BA4\u8FB9\u6846\u4E0D\u4F1A\u88AB\u906E\u6321 -->\r\n                <tp-icon #rightIcon local tiOutline name=\"cloud-action-search\" [tabindex]=\"0\"\r\n                style=\"outline-offset: -2px;\"\r\n                (keydown.enter)=\"onClickSearch($event)\" (click)=\"onClickSearch($event)\" [id]=\"appendId('search')\">\r\n                </tp-icon>\r\n            </section>\r\n        </section>\r\n</ti-dominator>\r\n\r\n<!-- \u5C5E\u6027\u9762\u677F -->\r\n<ti-dropsearch #propDrop\r\n    [dominatorElem]=\"searchInput.nativeElement\"\r\n    dominatorSpace=\"7px\"\r\n    [(ngModel)]='propDropSelected'\r\n    [id]=\"appendId('tp_searchbox_prop_drop')\"\r\n    [options]=\"propDropOptions\"\r\n    [panelMaxHeight]=\"panelMaxHeight\"\r\n    [panelWidth]=\"propPanelWidth\"\r\n    type=\"suggestion\"\r\n    (select)=\"onPorpDropSelect($event)\">\r\n    <ng-template #item let-item let-i=index let-last=last>\r\n        <ng-container *ngIf=\" item.type=='noValue'; else defaultTemplate\" >\r\n            <section\r\n              class=\"tp-searchbox-group-option\"\r\n              [ngClass]=\"{\r\n                'tp-searchbox-group-title': item.type === 'noValue'&& item.children,\r\n                'tp-searchbox-group-option-last': last\r\n               }\">\r\n                <ng-container *ngIf=\"item.children\">\r\n                    <tp-icon [name]=\"'cloud-action-state-failed'\"></tp-icon>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!item.children\">\r\n                    <i class=\"tp-searchbox-group-option-icon\"></i>\r\n                </ng-container>\r\n                <section class=\"tp-searchbox-group-text\">{{item.label}}</section>\r\n            </section>\r\n        </ng-container>\r\n        <ng-template #defaultTemplate >\r\n            <span [ngClass]=\"{'tp-searchbox-option-normal': hasLabeltag()}\" [title]=\"item['label']\">{{item['label']}}</span>\r\n        </ng-template>\r\n    </ng-template>\r\n</ti-dropsearch>\r\n\r\n<!-- \u5355\u9009\u503C\u9762\u677F -->\r\n<ti-dropsearch #valueDrop\r\n    type=\"suggestion\"\r\n    [id]=\"appendId('tp_searchbox_value_drop')\"\r\n    [options]=\"valueDropOptions\"\r\n    [dominatorElem]=\"valueDropDominator\"\r\n    [panelMaxHeight]=\"panelMaxHeight\"\r\n    [panelWidth]=\"valuePanelWidth\"\r\n    [(ngModel)]='valueDropSelected'\r\n    [dominatorSpace]=\"dominatorSpace\"\r\n    (ngModelChange)=\"onValueDropSelect($event)\"\r\n     >\r\n    <ng-template  let-item let-i=index>\r\n        <span [title]=\"item['label']\">{{item['label']}}</span>\r\n    </ng-template>\r\n</ti-dropsearch>\r\n\r\n<!-- \u591A\u9009\u503C\u9762\u677F -->\r\n<ti-dropsearch #valueMultiDrop\r\n    type=\"suggestion\"\r\n    [id]=\"appendId('tp_searchbox_value_multi_drop')\"\r\n    [options]=\"valueDropOptions\"\r\n    [(ngModel)]='valueDropSelecteds'\r\n    [multiple]=\"true\"\r\n    [selectAll]=\"true\"\r\n    [dominatorElem]=\"valueDropDominator\"\r\n    [panelWidth]=\"valuePanelWidth\"\r\n    [panelMaxHeight]=\"panelMaxHeight\"\r\n    [dominatorSpace]=\"dominatorSpace\"\r\n    >\r\n        <ng-template  let-item let-i=index>\r\n            <span [title]=\"item['label']\">{{item['label']}}</span>\r\n        </ng-template>\r\n        <!-- \u590D\u9009\u5E95\u90E8\u6309\u94AE -->\r\n       <ng-template #footer>\r\n            <section class=\"tp-searchbox-drop-buttons\">\r\n                <button\r\n                    tiButton\r\n                    (mousedown)=\"onClickValueDropOK($event)\"\r\n                    [id]=\"appendId('ok')\"\r\n                    type=\"button\" size=\"small\"\r\n                    class=\"tp-searchbox-button-ok\">{{'tpSearchbox.buttonOk'| tiTranslate}}</button>\r\n                <button\r\n                    (click)=\"onClickValueDropCancel()\"\r\n                    [id]=\"appendId('cancel')\"\r\n                    type=\"button\"\r\n                    size=\"small\"\r\n                    tiButton >{{'tpSearchbox.buttonCancel'| tiTranslate}}</button>\r\n            </section>\r\n       </ng-template>\r\n</ti-dropsearch>\r\n\r\n\r\n\r\n<!-- \u8BBE\u7F6E\u9009\u4E2D(\u53F3\u4FA7\u7684\u8BBE\u7F6E\u56FE\u6807) -->\r\n<ng-container *ngIf=\"showSettings\">\r\n    <ti-dropsearch #settingsDrop\r\n    type=\"suggestion\"\r\n    [id]=\"appendId('tp-searchbox-settings-drop')\"\r\n    [options]=\"settingDropOptions\"\r\n    [dominatorElem]=\"settingsDropDominatorElem\"\r\n    [panelMaxHeight]=\"panelMaxHeight\"\r\n    [panelWidth]=\"valuePanelWidth\"\r\n    panelAlign=\"right\"\r\n    (select)=\"onSettingDropSelect($event)\">\r\n    <ng-template  let-item let-i=index>\r\n        {{item['label']}}\r\n    </ng-template>\r\n</ti-dropsearch>\r\n</ng-container>\r\n\r\n\r\n<!-- \u6570\u5B57\u548C\u65E5\u671F\u8303\u56F4 -->\r\n<ti-drop #customDrop\r\n    [id]=\"appendId('tp-searchbox-custom-drop')\"\r\n    class=\"tp-searchbox-custom-drop\"\r\n    dominatorSpace=\"7px\"\r\n    [dominatorElem]=\"valueDropDominator\"\r\n    [fixMaxHeight]=\"true\"\r\n    [panelWidth]=\"customDropWidth()\"\r\n    >\r\n    <ng-container *ngIf=\"selectedItem && selectedItem.type=='numRange'\">\r\n        <ng-container *ngTemplateOutlet=\"numberRangeTemplate\">\r\n        </ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"selectedItem && selectedItem.type=='dateRange'\">\r\n        <ng-container *ngTemplateOutlet=\"dateRangeTemplate\">\r\n        </ng-container>\r\n    </ng-container>\r\n</ti-drop>\r\n\r\n<ng-template #numberRangeTemplate>\r\n     <form  [formGroup]=\"selectedItem.formControls\">\r\n        <section class=\"tp-searchbox-range\" >\r\n            <section class=\"tp-searchbox-range-tip\">{{'tpSearchbox.rangeNumberTitle'| tiTranslate}}</section>\r\n            <section class=\"tp-searchbox-number-range-field\" >\r\n               <label>\r\n                   {{'tpSearchbox.minValueText'| tiTranslate}}\r\n                   <ng-container *ngIf=\"selectedItem.unit\">{{'('+selectedItem.unit+')'}}</ng-container>\r\n               </label>\r\n               <input class=\"tp-searchbox-num-min\" tiText type=\"number\" formControlName=\"start\" tiValidation>\r\n            </section>\r\n            <section class=\"tp-searchbox-number-range-field\">\r\n               <label>{{'tpSearchbox.maxValueText'| tiTranslate}}\r\n                <ng-container *ngIf=\"selectedItem.unit\">{{'('+selectedItem.unit+')'}}</ng-container>\r\n               </label>\r\n               <input tiText type=\"number\" formControlName=\"end\" tiValidation >\r\n            </section>\r\n            <section  class=\"tp-searchbox-range-buttons\">\r\n                 <button\r\n                     tiButton\r\n                     (click)=\"onClickCustomDropOK()\"\r\n                     type=\"button\" size=\"small\"\r\n                     class=\"tp-searchbox-button-ok\">{{'tpSearchbox.buttonOk'| tiTranslate}}</button>\r\n                  <button\r\n                     (click)=\"onClickCustomDropCancel()\"\r\n                     type=\"button\"\r\n                     size=\"small\"\r\n                     tiButton >{{'tpSearchbox.buttonCancel'| tiTranslate}}</button>\r\n            </section>\r\n         </section>\r\n     </form>\r\n</ng-template>\r\n\r\n<ng-template #dateRangeTemplate>\r\n    <form  [formGroup]=\"selectedItem.formControls\">\r\n        <section class=\"tp-searchbox-range\">\r\n            <section class=\"tp-searchbox-range-tip\">{{'tpSearchbox.rangeDateTitle'| tiTranslate}}</section>\r\n            <section class=\"tp-searchbox-date-range-field\" >\r\n               <label >{{'tpSearchbox.rangeBeginLabel'| tiTranslate}}</label>\r\n               <ti-date\r\n                    #dateRangeStart\r\n                    class=\"tp-searchbox-date-range\"\r\n                    formControlName=\"start\"\r\n                    [max]=\"selectedItem.startMax\"\r\n                    [min]=\"selectedItem.min\"\r\n                    [format]=\"selectedItem.format\"\r\n               ></ti-date>\r\n            </section>\r\n            <section class=\"tp-searchbox-date-range-field\">\r\n               <label>{{'tpSearchbox.rangeEndLabel'| tiTranslate}}</label>\r\n               <ti-date\r\n                    #dateRangeEnd\r\n                    [max]=\"selectedItem.max\"\r\n                    [min]=\"selectedItem.endMin\"\r\n                    formControlName=\"end\"\r\n                    [format]=\"selectedItem.format\"\r\n                    class=\"tp-searchbox-date-range\"\r\n               ></ti-date>\r\n            </section>\r\n            <section  class=\"tp-searchbox-range-buttons\">\r\n                <button\r\n                     tiButton\r\n                     (click)=\"onClickCustomDropOK()\"\r\n                     type=\"button\" size=\"small\"\r\n                     class=\"tp-searchbox-button-ok\">{{'tpSearchbox.buttonOk'| tiTranslate}}</button>\r\n                <button\r\n                     (click)=\"onClickCustomDropCancel()\"\r\n                     type=\"button\"\r\n                     size=\"small\"\r\n                     tiButton >{{'tpSearchbox.buttonCancel'| tiTranslate}}</button>\r\n            </section>\r\n         </section>\r\n     </form>\r\n\r\n</ng-template>\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
                host: {
                    '(blur)': 'onBlur()',
                    '(click)': 'onClick($event)'
                },
                providers: [TiFormComponent.getValueAccessor(TpSearchboxComponent)],
                styles: [".ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}::ng-deep :root{--tp-searchbox-button-height:24px;--tp-searchbox-clear-dividing-height:14px;--tp-searchbox-clear-dividing-width:1px;--tp-searchbox-date-range-drop-width:250px;--tp-searchbox-drop-option-height:30px;--tp-searchbox-drop-option-offset:-10px;--tp-searchbox-icon-size:16px;--tp-searchbox-label-option-icon-size:6px;--tp-searchbox-number-range-drop-width:180px;--tp-searchbox-range-date-width:160px;--tp-searchbox-range-input-width:80px;--tp-searchbox-range-label-height:28px;--tp-searchbox-range-label-text-height:18px;--tp-searchbox-tag-height:22px;--tp-searchbox-tag-width-min:16px}:host{border:1px solid var(--ti-common-color-line-normal);border-radius:var(--ti-common-border-radius-normal);display:block}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text{align-items:center;border:1px solid transparent;display:flex;flex:1;flex-shrink:0;flex-wrap:wrap;justify-content:flex-start;padding:0!important}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell{display:flex;float:none}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key{background-color:var(--ti-common-color-bg-normal);float:none}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-key,::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-seperator,::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-value{display:inline;line-height:var(--tp-searchbox-clear-dividing-height)}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-key:focus,::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-seperator:focus,::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-value:focus{outline:none}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-key,::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text ::ng-deep ti-tag.ti3-multiselect-box-cell .ti3-box-cell-key .tp-searchbox-tag-value{min-width:var(--tp-searchbox-tag-width-min)}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text.ti3-tags-input-container{width:auto}::ng-deep ti-dominator.tp-searchbox-dominator>.ti3-select-dominator-text .tp-searchbox-right{align-items:center;display:flex;flex:1;justify-content:space-between;min-width:calc(var(--tp-searchbox-date-range-drop-width) + 80px)}:host:not([disabled])[tiFocused]{border-color:var(--ti-input-border-color-focus)}.tp-searchbox-buttons{align-items:center;align-self:flex-end;display:flex;height:var(--tp-searchbox-button-height);justify-content:space-between}.tp-searchbox-buttons ::ng-deep tp-icon{font-size:var(--tp-searchbox-icon-size);height:var(--tp-searchbox-button-height);line-height:var(--tp-searchbox-button-height);text-align:center;width:var(--tp-searchbox-button-height)}.tp-searchbox-buttons ::ng-deep tp-icon:hover{color:var(--ti-common-color-icon-hover);cursor:pointer}.tp-searchbox-buttons .tp-searchbox-clear-dividing-line{background-color:var(--ti-common-color-line-dividing);display:inline-block;height:var(--tp-searchbox-clear-dividing-height);margin:0 var(--ti-common-space-6);width:var(--tp-searchbox-clear-dividing-width)}.tp-searchbox-search-field{align-items:center;display:flex;flex:1;flex-shrink:0}.tp-searchbox-search-field .tp-searchbox-prop{flex-shrink:0;padding-left:var(--ti-common-space-10)}.tp-searchbox-search-field .tp-searchbox-input{background-color:transparent;flex-shrink:0;height:var(--tp-searchbox-tag-height);line-height:var(--tp-searchbox-tag-height);margin:1px}.tp-searchbox-search-field .tp-searchbox-input.tp-searchbox-input-grow{flex-grow:1}.tp-searchbox-drop-buttons{border-top:1px solid var(--ti-common-color-line-dividing);box-sizing:border-box;margin:0 var(--ti-common-space-10);padding:var(--ti-common-space-10) 0 var(--ti-common-space-6);text-align:left}.tp-searchbox-drop-buttons .tp-searchbox-button-ok{margin-right:var(--ti-common-space-2x)}.tp-searchbox-custom-drop:focus{outline:none}.tp-searchbox-range{padding:var(--ti-common-space-10)}.tp-searchbox-range .tp-searchbox-range-tip{color:var(--ti-common-color-text-weaken);height:var(--tp-searchbox-range-label-text-height);padding-bottom:var(--ti-common-space-10)}.tp-searchbox-range .tp-searchbox-number-range-field{align-items:center;display:flex;height:var(--tp-searchbox-range-label-height);justify-content:space-between;margin-bottom:var(--ti-common-space-10);min-width:var(--tp-searchbox-number-range-drop-width)}.tp-searchbox-range .tp-searchbox-number-range-field input{width:var(--tp-searchbox-range-input-width)}.tp-searchbox-range .tp-searchbox-number-range-field input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none!important;margin:0}.tp-searchbox-range .tp-searchbox-number-range-field input[type=number]{-moz-appearance:textfield}.tp-searchbox-range .tp-searchbox-date-range-field{align-items:center;display:flex;height:var(--tp-searchbox-range-label-height);justify-content:space-between;margin-bottom:var(--ti-common-space-10);min-width:var(--tp-searchbox-date-range-drop-width)}.tp-searchbox-range .tp-searchbox-date-range-field ti-date{width:var(--tp-searchbox-range-date-width)}.tp-searchbox-range .tp-searchbox-range-buttons{border-top:1px solid var(--ti-common-color-line-dividing);display:flex;justify-content:flex-end;padding-top:var(--ti-common-space-10)}.tp-searchbox-range .tp-searchbox-range-buttons button:first-child{margin-right:var(--ti-common-space-10)}.tp-searchbox-group-option,.tp-searchbox-group-title{align-items:center;display:flex;height:var(--tp-searchbox-drop-option-height);justify-content:flex-start}.tp-searchbox-group-option{box-sizing:border-box;cursor:pointer;margin-left:var(--tp-searchbox-drop-option-offset)}.tp-searchbox-group-option.tp-searchbox-group-option-last{border-bottom:1px solid var(--ti-common-color-line-dividing)}.tp-searchbox-group-option .tp-searchbox-group-option-icon{background-color:var(--ti-common-color-error);border-radius:calc(var(--tp-searchbox-label-option-icon-size)/2);display:inline-block;height:var(--tp-searchbox-label-option-icon-size);margin:var(--ti-common-space-base);vertical-align:top;width:var(--tp-searchbox-label-option-icon-size)}.tp-searchbox-group-option.tp-searchbox-group-title{color:var(--ti-common-color-text-weaken);margin-left:0}.tp-searchbox-group-option.tp-searchbox-group-title tp-icon{color:var(--ti-common-color-error);font-size:var(--tp-searchbox-icon-size)}.tp-searchbox-group-option.tp-searchbox-group-title .tp-searchbox-group-text{flex-shrink:1;margin-left:var(--ti-common-space-base)}.tp-searchbox-option-normal{margin-left:var(--tp-searchbox-drop-option-offset)}"]
            },] }
];
TpSearchboxComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef }
];
TpSearchboxComponent.propDecorators = {
    defaultField: [{ type: Input }],
    emptyPlaceholder: [{ type: Input }],
    inputWidth: [{ type: Input }],
    showHelp: [{ type: Input }],
    showSettings: [{ type: Input }],
    items: [{ type: Input }],
    maxLine: [{ type: Input }],
    panelMaxHeight: [{ type: Input }],
    propPanelWidth: [{ type: Input }],
    valuePanelWidth: [{ type: Input }],
    tagMaxWidth: [{ type: Input }],
    help: [{ type: Output }],
    clear: [{ type: Output }],
    search: [{ type: Output }],
    beforeOpen: [{ type: Output }],
    inputValueChange: [{ type: Output }],
    defaultFieldChange: [{ type: Output }],
    dominatorCom: [{ type: ViewChild, args: [TiDominatorComponent, { static: true },] }],
    propDropCom: [{ type: ViewChild, args: ['propDrop', { static: true },] }],
    valueDropCom: [{ type: ViewChild, args: ['valueDrop', { static: true },] }],
    valueMultiDropCom: [{ type: ViewChild, args: ['valueMultiDrop', { static: false },] }],
    customDropCom: [{ type: ViewChild, args: ['customDrop', { static: false },] }],
    settingsDropCom: [{ type: ViewChild, args: ['settingsDrop', { static: false },] }],
    dateRangeStartCom: [{ type: ViewChild, args: ['dateRangeStart', { static: false },] }],
    dateRangeEndCom: [{ type: ViewChild, args: ['dateRangeEnd', { static: false },] }],
    searchInputRf: [{ type: ViewChild, args: ['searchInput', { static: false },] }],
    settingsCom: [{ type: ViewChild, args: ['settings', { static: false },] }],
    rightIconsRef: [{ type: ViewChildren, args: ['rightIcon',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBTZWFyY2hib3hDb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueXBsdXMzL2NvbXBvbmVudHMvc2VhcmNoYm94L1RwU2VhcmNoYm94Q29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFDVixZQUFZLEVBQ1osS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBRVQsU0FBUyxFQUNULFlBQVksRUFDWixTQUFTLEVBQ1osTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFtQixXQUFXLEVBQUUsU0FBUyxFQUFpQyxNQUFNLGdCQUFnQixDQUFDO0FBQ3hHLE9BQU8sRUFDSCxTQUFTLEVBQUUsZUFBZSxFQUFFLG9CQUFvQixFQUFFLGVBQWUsRUFBRSxxQkFBcUIsRUFDeEYsZUFBZSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxJQUFJO0FBQ3ZFLHFEQUFxRDtFQUN4RCxNQUFNLGNBQWMsQ0FBQztBQUV0QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFvSXZEOzs7R0FHRztBQUNILE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBVywyRUFBMkUsQ0FBQztBQUNoSDs7O0dBR0c7QUFDSCxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQVcsaUVBQWlFLENBQUM7QUFFeEc7Ozs7O0dBS0c7QUFXSCxNQUFNLE9BQU8sb0JBQXFCLFNBQVEsZUFBZTtJQXFRckQsc0VBQXNFO0lBQ3RFLFlBQVksT0FBbUIsRUFBRSxNQUFpQixFQUFVLGlCQUFvQztRQUM1RixLQUFLLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRGlDLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUExUGhHOztXQUVHO1FBQ00saUJBQVksR0FBVyxFQUFFLENBQUM7UUFDbkM7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QkFBaUI7OzsyQkFpTWhCLEtBQUs7K0JBS0wsS0FBSzt5QkFLTCxLQUFLO3VCQU1MLEtBQUs7MkJBSUwsS0FBSztvQkFJTCxLQUFLO3NCQUlMLEtBQUs7NkJBTUwsS0FBSzs2QkFLTCxLQUFLOzhCQUtMLEtBQUs7MEJBSUwsS0FBSzttQkFLTCxNQUFNO29CQUlOLE1BQU07cUJBSU4sTUFBTTt5QkFJTixNQUFNOytCQU1OLE1BQU07aUNBTU4sTUFBTTsyQkFLTixTQUFTLFNBQUMsb0JBQW9CLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFOzBCQUtoRCxTQUFTLFNBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTsyQkFLdEMsU0FBUyxTQUFDLFdBQVcsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7Z0NBS3ZDLFNBQVMsU0FBQyxnQkFBZ0IsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7NEJBSzdDLFNBQVMsU0FBQyxZQUFZLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOzhCQUt6QyxTQUFTLFNBQUMsY0FBYyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtnQ0FLM0MsU0FBUyxTQUFDLGdCQUFnQixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs4QkFLN0MsU0FBUyxTQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7NEJBSzNDLFNBQVMsU0FBQyxhQUFhLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOzBCQUsxQyxTQUFTLFNBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs0QkFLdkMsWUFBWSxTQUFDLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgSW5wdXQsXHJcbiAgICBPdXRwdXQsXHJcbiAgICBSZW5kZXJlcjIsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLFxyXG4gICAgVmlld0NoaWxkLFxyXG4gICAgVmlld0NoaWxkcmVuLFxyXG4gICAgUXVlcnlMaXN0XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgVmFsaWRhdGlvbkVycm9ycywgVmFsaWRhdG9yRm4gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7XHJcbiAgICBUaUJyb3dzZXIsIFRpRGF0ZUNvbXBvbmVudCwgVGlEb21pbmF0b3JDb21wb25lbnQsIFRpRHJvcENvbXBvbmVudCwgVGlEcm9wc2VhcmNoQ29tcG9uZW50LFxyXG4gICAgVGlGb3JtQ29tcG9uZW50LCBUaUtleW1hcCwgVGlMb2NhbGUsIFRpTG9jYWxlRm9ybWF0LCBUaVZhbGlkYXRvcnMsIFV0aWxcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8taW1wbGljaXQtZGVwZW5kZW5jaWVzXHJcbn0gZnJvbSAnQGNsb3VkL3RpbnkzJztcclxuXHJcbmltcG9ydCB7IFRwSWNvbkNvbXBvbmVudCB9IGZyb20gJy4uL2ljb24vVHBJY29uTW9kdWxlJztcclxuXHJcbi8qKlxyXG4gKiB0YWfnsbvlnossIHJhZGlvLem7mOiupOWNlemAie+8jCBub1ZhbHVlLemdnuato+W4uHRhZ++8jHRhZ+WAvOS4uuepuu+8jCAgY2hlY2tib3gt5aSa6YCJ77yMbWFwLemUruWAvHRhZywgbnVtUmFuZ2Ut5pWw5a2X6IyD5Zu0dGFnLFxyXG4gKiBkYXRlUmFuZ2Ut5pel5pyf6IyD5Zu0dGFn44CCdGFnIOeahOWIhuexu+aYr+agueaNrumUruWAvOeahOe7k+aenOWIkuWIhlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVHBTZWFyY2hib3hUYWdUeXBlID0gJ3JhZGlvJyB8ICdub1ZhbHVlJyB8ICdjaGVja2JveCcgfCAnbWFwJyB8ICdudW1SYW5nZScgfCAnZGF0ZVJhbmdlJztcclxuLyoqXHJcbiAqIOWAmemAiXRhZ+aVsOaNrumFjee9rumhuVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUcFNlYXJjaGJveEl0ZW0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLlrZfmrrXvvIx0YWfnmoTplK5cclxuICAgICAqL1xyXG4gICAgZmllbGQ6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogdGFnIOmUrueahOaYvuekuuWAvO+8jOWunumZhee7k+aenOaYr2ZpZWxkXHJcbiAgICAgKi9cclxuICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOmFjee9rumhueWPr+eUn+S6p+eahHRhZ+exu+Wei1xyXG4gICAgICovXHJcbiAgICB0eXBlPzogVHBTZWFyY2hib3hUYWdUeXBlO1xyXG4gICAgLyoqXHJcbiAgICAgKiB0YWcg5YC855qE6YCJ5oup6aG55pWw5o2uXHJcbiAgICAgKi9cclxuICAgIG9wdGlvbnM6IEFycmF5PFRwU2VhcmNoYm94T3B0aW9uPjtcclxuICAgIC8qKlxyXG4gICAgICog6Ieq5Yqo6K+G5Yir5Yy56YWN5q2j5YiZXHJcbiAgICAgKiAxMC4wLjIg5paw5aKeXHJcbiAgICAgKi9cclxuICAgIHJlZ2V4cD86IFJlZ0V4cDtcclxuICAgIC8qKlxyXG4gICAgICogcmFkaW8g5Y2V6YCJ57G75Z6L5Y+v6K6+572uLCDorr7nva7kuLpmYWxzZeaXtizljZXpgInlsZ7mgKflj6/ku6XlpJrmrKHpgInmi6lcclxuICAgICAqL1xyXG4gICAgcmVwbGFjZT86IGJvb2xlYW47XHJcbiAgICAvKipcclxuICAgICAqIOWNlemAieaIluWkmumAieWAvOeahOmAieS4remhuemUruWAvFxyXG4gICAgICogMTAuMC4yIOaWsOWinlxyXG4gICAgICovXHJcbiAgICBvcHRpb25WYWx1ZUtleT86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogZGF0ZVJhbmdlIOexu+Wei+aXpeacn+aYvuekuuWSjOe7k+aenOagvOW8j++8jGRhdGVSYW5nZeaXtuW/hemAiVxyXG4gICAgICovXHJcbiAgICBmb3JtYXQ/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIG51bVJhbmdlIOacgOWwj+WAvO+8jOexu+Wei+S4um51bWJlclxyXG4gICAgICogZGF0ZVJhbmdl5byA5aeL5pel5pyf77yM57G75Z6L5Li6RGF0ZVxyXG4gICAgICovXHJcbiAgICBzdGFydD86IG51bWJlciB8IERhdGU7XHJcbiAgICAvKipcclxuICAgICAqIG51bVJhbmdlIOacgOWkp+WAvO+8jOexu+Wei+S4um51bWJlclxyXG4gICAgICogZGF0ZVJhbmdl6LW35aeL5pel5pyf77yM57G75Z6L5Li6RGF0ZVxyXG4gICAgICovXHJcbiAgICBlbmQ/OiBudW1iZXIgfCBEYXRlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBudW1SYW5nZSDlj6/loavmnIDlsI/lgLzvvIznlKjkuo7moKHpqoxcclxuICAgICAqIGRhdGVSYW5nZeWPr+mAieacgOWwj+WAvO+8jOeUqOS6juagoemqjFxyXG4gICAgICovXHJcbiAgICBtaW4/OiBudW1iZXIgfCBEYXRlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBudW1SYW5nZSDlj6/loavmnIDlpKflgLzvvIznlKjkuo7moKHpqoxcclxuICAgICAqIGRhdGVSYW5nZeWPr+mAieacgOWkp+WAvO+8jOeUqOS6juagoemqjFxyXG4gICAgICovXHJcbiAgICBtYXg/OiBudW1iZXIgfCBEYXRlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmr4/kuKppdGVt5a+55bqU55qE5o+Q56S65paH5pysXHJcbiAgICAgKi9cclxuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xyXG4gICAgW3Byb3BOYW1lOiBzdHJpbmddOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHBTZWFyY2hib3hPcHRpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKiDpgInpobnmmL7npLrlgLxcclxuICAgICAqL1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si55uu5qCH5a2X5q6177yM5Y+q5pyJ4oCYbGFiZWzigJnmiY3pnIDopoFcclxuICAgICAqL1xyXG4gICAgZmllbGQ/OiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOaOp+WItm1hcOexu+Wei+S6jOe6p+mAiemhueaYr+WQpuWHuueOsOWGhee9ruaJgOacieWAvO+8jG1hcOexu+Wei+mcgOimgVxyXG4gICAgICovXHJcbiAgICBhbGxWYWx1ZXM/OiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmjqfliLZtYXDnsbvlnovkuoznuqfpgInpobnmmK/lkKblh7rnjrDlhoXnva7nqbrlgLzvvIxtYXDnsbvlnovpnIDopoFcclxuICAgICAqL1xyXG4gICAgZW1wdHlWYWx1ZT86IGJvb2xlYW47XHJcbiAgICAvKipcclxuICAgICAqIG1hcOexu+Wei+S6jOe6p+mAiemhueaVsOaNrlxyXG4gICAgICovXHJcbiAgICBvcHRpb25zPzogQXJyYXk8YW55PjtcclxuICAgIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xyXG59XHJcbi8qKlxyXG4gKiDmr4/kuKrpgInkuK10YWfnmoTnsbvlnotcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHBTZWFyY2hib3hUYWcge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLnm67moIfmkJzlrZfmrrVcclxuICAgICAqL1xyXG4gICAgZmllbGQ6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogdGFn6ZSu77yMZmllbGTnmoTmmL7npLrlgLxcclxuICAgICAqL1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogdGFn5YC8XHJcbiAgICAgKi9cclxuICAgIHZhbHVlOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOexu+Wei1xyXG4gICAgICovXHJcbiAgICB0eXBlOiBUcFNlYXJjaGJveFRhZ1R5cGU7XHJcbiAgICAvKipcclxuICAgICAqIOaVsOWtl+iMg+WbtOWSjOaXpeacn+iMg+WbtHRhZyDlvIDlp4vlgLxcclxuICAgICAqL1xyXG4gICAgc3RhcnQ/OiBudW1iZXIgfCBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOaVsOWtl+iMg+WbtOWSjOaXpeacn+iMg+WbtHRhZyDnu5PmnZ/lgLxcclxuICAgICAqL1xyXG4gICAgZW5kPzogbnVtYmVyIHwgc3RyaW5nO1xyXG4gICAgW3Byb3BOYW1lOiBzdHJpbmddOiBhbnk7XHJcbn1cclxuLyoqXHJcbiAqIHNlYXJjaCDkuovku7blm57osIPlj4LmlbDnmoTmlbDmja7lr7nosaHvvIzlr7nosaHnmoTplK7lr7nlupRmaWVsZO+8jOWvueixoeeahOWAvOaYr+Wtl+espuS4suaVsOe7hO+8jOWNlemAieWNleS4qu+8jOWkmumAieWkmuS4qlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUcFNlYXJjaGJveEZpbHRlciB7XHJcbiAgICBbcHJvcE5hbWU6IHN0cmluZ106IEFycmF5PFN0cmluZz47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBpcOato+WImVxyXG4gKiAxMC4wLjIg5paw5aKeXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVFBfUkVHRVhQX0lQOiBSZWdFeHAgPSAvXihcXGR7MSwyfXwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKShcXC4oXFxkezEsMn18MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpezN9JC87XHJcbi8qKlxyXG4gKiBVVUlE5q2j5YiZXHJcbiAqIDEwLjAuMiDmlrDlop5cclxuICovXHJcbmV4cG9ydCBjb25zdCBUUF9SRUdFWFBfVVVJRDogUmVnRXhwID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XHJcblxyXG4vKipcclxuICog57u85ZCI5pCc57Si57uE5Lu244CCXHJcbiAqIOeUqOaIt+mAmui/h+ivpee7hOS7tu+8jOmAieaLqeWHuuaVsOaNrui/h+a7pOmcgOimgeeahOWPguaVsFxyXG4gKlxyXG4gKiA8ZXhhbXBsZS11cmw+Li4vdGlueXBsdXMzZGVtby8jL3NlYXJjaGJveC9zZWFyY2hib3gtYWxsPC9leGFtcGxlLXVybD5cclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0cC1zZWFyY2hib3gnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3NlYXJjaGJveC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3NlYXJjaGJveC5sZXNzJ10sXHJcbiAgICBob3N0OiB7XHJcbiAgICAgICAgJyhibHVyKSc6ICdvbkJsdXIoKScsXHJcbiAgICAgICAgJyhjbGljayknOiAnb25DbGljaygkZXZlbnQpJ1xyXG4gICAgfSxcclxuICAgIHByb3ZpZGVyczogW1RpRm9ybUNvbXBvbmVudC5nZXRWYWx1ZUFjY2Vzc29yKFRwU2VhcmNoYm94Q29tcG9uZW50KV1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRwU2VhcmNoYm94Q29tcG9uZW50IGV4dGVuZHMgVGlGb3JtQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogZm9ybUNvbnRyb2wg5qCh6aqM54q25oCB77yM6YCa6L+H5LqG5omA5pyJ5pyJ5pWI5oCn5qOA5p+lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgVkFMSUQ6IHN0cmluZyA9ICdWQUxJRCc7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIGZvcm1Db250cm9sIOagoemqjOeKtuaAge+8jOiHs+WwkeacieS4gOS4quacieaViOaAp+ajgOafpeWksei0peS6hlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IElOVkFMSUQ6IHN0cmluZyA9ICdJTlZBTElEJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9rum7mOiupOeahOi/h+a7pOiMg+WbtOWtl+autVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBkZWZhdWx0RmllbGQ6IHN0cmluZyA9ICcnO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmsqHmnInnlJ/miJB0YWfml7bnmoTljaDkvY3mj5DnpLrmlofmnKxcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGVtcHR5UGxhY2Vob2xkZXI6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L6T5YWl5qGG55qE5a695bqmXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGlucHV0V2lkdGg6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpuaYvuekuuW4ruWKqeWbvuagh1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0hlbHA6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKbmmL7npLrorr7nva5kZWZhdWx0RmllbGTlm77moIdcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd1NldHRpbmdzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOa6kOaVsOaNrlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBpdGVtczogQXJyYXk8VHBTZWFyY2hib3hJdGVtPiA9IFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7nu4Tku7bmnIDlpJrmmL7npLrlh6DooYzvvIxcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbWF4TGluZTogbnVtYmVyID0gMjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOS4i+aLieahhuacgOWkp+mrmOW6pu+8jOWNleS9jeS4unB477yMXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwYW5lbE1heEhlaWdodDogc3RyaW5nID0gJzk5OXB4JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWxnuaAp+mdouadv+WuveW6plxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwcm9wUGFuZWxXaWR0aDogc3RyaW5nID0gJzIwMHB4JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWxnuaAp+WAvOmdouadv+WuveW6plxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSB2YWx1ZVBhbmVsV2lkdGg6IHN0cmluZyA9ICcyMDBweCc7XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9rnRhZ+eahOacgOWkp+WuveW6pu+8jOino+WGs3RhZ+WkqumVv++8jOWxnuaAp+WAvFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSB0YWdNYXhXaWR0aDogc3RyaW5nID0gJzQwMHB4JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIGhlbHAg5Zu+5qCH5o+Q56S65LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSByZWFkb25seSBoZWxwOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXpmaTkuovku7ZcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IGNsZWFyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLkuovku7ZcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IHNlYXJjaDogRXZlbnRFbWl0dGVyPFRwU2VhcmNoYm94RmlsdGVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8VHBTZWFyY2hib3hGaWx0ZXI+KCk7XHJcbiAgICAvKipcclxuICAgICAqIOWAvOmdouadv+aJk+W8gOWJjeS6i+S7tiznlKjkuo7mh5LliqDovb3lgLzpgInpoblcclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IGJlZm9yZU9wZW46IEV2ZW50RW1pdHRlcjxUcFNlYXJjaGJveENvbXBvbmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFRwU2VhcmNoYm94Q29tcG9uZW50PigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDpgInkuK3pobnlkI7vvIzovpPlhaXlgLzlj5jljJbkuovku7ZcclxuICAgICAqIDEwLjAuMiDmlrDlop5cclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IGlucHV0VmFsdWVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpu5jorqTljLnphY3lrZfmrrXlj5HnlJ/mlLnlj5jkuovku7ZcclxuICAgICAqIDEwLjEuMiDmlrDlop5cclxuICAgICAqL1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IGRlZmF1bHRGaWVsZENoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5YaF6YOo5qCH562+ZG9uaW1hdG9y57uE5Lu2XHJcbiAgICAgKi9cclxuICAgIEBWaWV3Q2hpbGQoVGlEb21pbmF0b3JDb21wb25lbnQsIHsgc3RhdGljOiB0cnVlIH0pIGRvbWluYXRvckNvbTogVGlEb21pbmF0b3JDb21wb25lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWxnuaAp+mdouadv1xyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCdwcm9wRHJvcCcsIHsgc3RhdGljOiB0cnVlIH0pIHByb3BEcm9wQ29tOiBUaURyb3BzZWFyY2hDb21wb25lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWAvOmdouadv1xyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCd2YWx1ZURyb3AnLCB7IHN0YXRpYzogdHJ1ZSB9KSB2YWx1ZURyb3BDb206IFRpRHJvcHNlYXJjaENvbXBvbmVudDtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5aSa6YCJ5YC86Z2i5p2/XHJcbiAgICAgKi9cclxuICAgIEBWaWV3Q2hpbGQoJ3ZhbHVlTXVsdGlEcm9wJywgeyBzdGF0aWM6IGZhbHNlIH0pIHZhbHVlTXVsdGlEcm9wQ29tOiBUaURyb3BzZWFyY2hDb21wb25lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOiHquWumuS5iemdouadvyBudW1SYW5nZSAvIGRhdGVyYW5nZVxyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCdjdXN0b21Ecm9wJywgeyBzdGF0aWM6IGZhbHNlIH0pIGN1c3RvbURyb3BDb206IFRpRHJvcENvbXBvbmVudDtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6K6+572u6Z2i5p2/XHJcbiAgICAgKi9cclxuICAgIEBWaWV3Q2hpbGQoJ3NldHRpbmdzRHJvcCcsIHsgc3RhdGljOiBmYWxzZSB9KSBzZXR0aW5nc0Ryb3BDb206IFRpRHJvcENvbXBvbmVudDtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5pel5pyf6IyD5Zu05byA5aeL5pel5pyfXHJcbiAgICAgKi9cclxuICAgIEBWaWV3Q2hpbGQoJ2RhdGVSYW5nZVN0YXJ0JywgeyBzdGF0aWM6IGZhbHNlIH0pIGRhdGVSYW5nZVN0YXJ0Q29tOiBUaURhdGVDb21wb25lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaXpeacn+iMg+WbtOe7k+adn+aXpeacn1xyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCdkYXRlUmFuZ2VFbmQnLCB7IHN0YXRpYzogZmFsc2UgfSkgZGF0ZVJhbmdlRW5kQ29tOiBUaURhdGVDb21wb25lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaQnOe0oui+k+WFpeahhlxyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkKCdzZWFyY2hJbnB1dCcsIHsgc3RhdGljOiBmYWxzZSB9KSBzZWFyY2hJbnB1dFJmOiBFbGVtZW50UmVmO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiBzZXR0aW5ncyDorr7nva7lm77moIcg55So5LqOZHJvcCDorr7nva5kb21pbmF0b3JFbGVtXHJcbiAgICAgKi9cclxuICAgIEBWaWV3Q2hpbGQoJ3NldHRpbmdzJywgeyBzdGF0aWM6IGZhbHNlIH0pIHNldHRpbmdzQ29tOiBUcEljb25Db21wb25lbnQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWPs+S+p+Wbvuagh++8iGhlbHDjgIFzZXR0aW5n44CBc2VhcmNo77yJXHJcbiAgICAgKi9cclxuICAgIEBWaWV3Q2hpbGRyZW4oJ3JpZ2h0SWNvbicpIHJpZ2h0SWNvbnNSZWY6IFF1ZXJ5TGlzdDxUcEljb25Db21wb25lbnQ+O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDliIblibLnrKblj7fvvIzpu5jorqTmmK/kuK3mloflhpLlj7dcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRhZ1NlcGVyYXRvcjogc3RyaW5nID0gJ++8mic7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaciemAieS4reagh+etvuWQjueahHBsYWNlaG9sZGVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnB1dFBsYWNlaG9sZGVyOiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LmFkZFBsYWNlaG9sZGVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlsZ7mgKfpgInpoblcclxuICAgICAqL1xyXG4gICAgcHVibGljIHByb3BEcm9wT3B0aW9uczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlgLzpgInpoblcclxuICAgICAqL1xyXG4gICAgcHVibGljIHZhbHVlRHJvcE9wdGlvbnM6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6L6T5YWl5qGG55qE5YC8XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnB1dFZhbHVlOiBzdHJpbmcgPSAnJztcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6YCJ5LitaXRlbSwg57yW6L6R5ZKM6YCJ5oup5Lit6YO95Lya5a2Y5ZyoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZWxlY3RlZEl0ZW06IFRwU2VhcmNoYm94SXRlbTtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogbWFw57G75Z6L5qCH562+LOesrOS4gOe6p+mAieS4reeahOmAiemhuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2VsZWN0ZWRPcHRpb246IFRwU2VhcmNoYm94T3B0aW9uO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmraPlnKjnvJbovpF0YWdcclxuICAgICAqL1xyXG4gICAgcHVibGljIGVkaXRpbmdUYWc6IFRwU2VhcmNoYm94VGFnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5YC86Z2i5p2/ZG9taW5hdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB2YWx1ZURyb3BEb21pbmF0b3I6IEhUTUxFbGVtZW50O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlgLzpnaLmnb9kb21pbmF0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldHRpbmdzRHJvcERvbWluYXRvckVsZW06IEhUTUxFbGVtZW50O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDluK7liqnlm77moIfmj5DnpLrlhoXlrrlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhlbHBUaXBDb250ZW50OiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LmhlbHA7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOa4heepuuWbvuagh+aPkOekuuWGheWuuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2xlYXJUaXBDb250ZW50OiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LmNsZWFyQWxsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDorr7nva7pu5jorqTmkJzntKLpobnlm77moIfmj5DnpLrlhoXlrrlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldHRpbmdUaXBDb250ZW50OiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LnN3aXRjaFRleHQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWNlemAieWAvOmdouadv+mAieS4remhuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJvcERyb3BTZWxlY3RlZDogVHBTZWFyY2hib3hPcHRpb247XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWNlemAieWAvOmdouadv+mAieS4remhuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdmFsdWVEcm9wU2VsZWN0ZWQ6IFRwU2VhcmNoYm94T3B0aW9uO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDlpJrpgInlgLzpnaLmnb/pgInkuK3poblcclxuICAgICAqL1xyXG4gICAgcHVibGljIHZhbHVlRHJvcFNlbGVjdGVkczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+ID0gW107XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOiuvue9rmRlZmF1bHRGaWVsZOmdouadv+mAieS4remhuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0dGluZ3NEcm9wU2VsZWN0ZWQ6IFRwU2VhcmNoYm94T3B0aW9uO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDorr7nva5kZWZhdWx0RmllbGTpnaLmnb/pgInpoblcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldHRpbmdEcm9wT3B0aW9uczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+ID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiBkcm9wIOmdouadv+WIsOinpuWPkeWFg+e0oOeahOi3neemu++8jOe8lui+keagh+etvuaXtu+8jOi3neemu+aYrzZweCzmiYDku6Xkvb/nlKjlj5jph49cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRvbWluYXRvclNwYWNlOiBzdHJpbmcgPSAnN3B4JztcclxuICAgIC8qKlxyXG4gICAgICog6K6w5b2V6buY6K6k6YCJ5Lit6aG55pen5YC877yM55So5LqO5Yik5pat5Lik5qyh6YCJ5Lit5piv5ZCm5piv5ZCM5LiA5Liq5YC844CC5aaC5p6c5piv77yM5YiZ5LiN6Kem5Y+RZGVmYXVsdEZpZWxkQ2hhbmdl5LqL5Lu244CCXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb2xkRGVmYXVsdEZpZWxkOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBwdWJsaWMgZG9taW5hdG9yUGxhY2Vob2xkZXI6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIC8vIOWtmOWCqOS4gOiHtOmcgOimgeiBmueEpueahOWFg+e0oFxyXG4gICAgcHJpdmF0ZSBhbHdheXNGb2N1c2FibGVFbGVtczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgLy8g6IyD5Zu0dGFnIOS9v+eUqOeahOeJueauiuWtl+espuS4sictJ1xyXG4gICAgcHJpdmF0ZSByYW5nZUxpbmU6IHN0cmluZyA9ICctJztcclxuICAgIC8vIOiMg+WbtHRhZyDkvb/nlKjnmoTnibnmrorlrZfnrKbkuLIn4omlJ1xyXG4gICAgcHJpdmF0ZSByYW5nZUxhcmdlOiBzdHJpbmcgPSAn4omlJztcclxuICAgIC8vIOiMg+WbtHRhZyDkvb/nlKjnmoTnibnmrorlrZfnrKbkuLIn4omkJ1xyXG4gICAgcHJpdmF0ZSByYW5nZUxlc3M6IHN0cmluZyA9ICfiiaQnO1xyXG5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcGFyYW1ldGVyLXByb3BlcnRpZXNcclxuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWY6IEVsZW1lbnRSZWYsIHJlbmRlcjogUmVuZGVyZXIyLCBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge1xyXG4gICAgICAgIHN1cGVyKGhvc3RSZWYsIHJlbmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiB1c2UtbGlmZS1jeWNsZS1pbnRlcmZhY2VcclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nT25Jbml0KCk7XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgLy8g6Z2e5Lit5paH5Zy65pmv5LiL77yM5qCH562+5YiG5Ymy56ym5Y+35piv6Iux5paH5YaS5Y+35Yqg56m65qC844CCXHJcbiAgICAgICAgaWYgKFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudGlMb2NhbGVLZXkgIT09ICd6aC1DTicpIHtcclxuICAgICAgICAgICAgdGhpcy50YWdTZXBlcmF0b3IgPSAnOiAnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9sZERlZmF1bHRGaWVsZCA9IHRoaXMuZGVmYXVsdEZpZWxkO1xyXG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIodGhpcy5tb2RlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiB1c2UtbGlmZS1jeWNsZS1pbnRlcmZhY2VcclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5uZ09uQ2hhbmdlcyhjaGFuZ2VzKTtcclxuICAgICAgICBpZiAoY2hhbmdlc1snaXRlbXMnXSAmJiB0aGlzLml0ZW1zICYmICFjaGFuZ2VzWydpdGVtcyddLmZpcnN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ3Nob3dTZXR0aW5ncyddICYmIHRoaXMuc2hvd1NldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIC8vIOWIneWni+WMluiuvue9ruaMiemSruS4i+aLiemdouadv+S4reeahOmAiemhueOAglxyXG4gICAgICAgICAgICB0aGlzLmluaXRTZXR0aW5nRHJvcE9wdGlvbnMoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZXNbJ3Nob3dTZXR0aW5ncyddICYmICF0aGlzLnNob3dTZXR0aW5ncykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzRHJvcERvbWluYXRvckVsZW0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ2VtcHR5UGxhY2Vob2xkZXInXSAmJiAhY2hhbmdlc1snZW1wdHlQbGFjZWhvbGRlciddLmZpcnN0Q2hhbmdlICYmIHRoaXMuZW1wdHlQbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKHRoaXMubW9kZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQgKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzQ29tICYmICF0aGlzLnNldHRpbmdzRHJvcERvbWluYXRvckVsZW0pIHtcclxuICAgICAgICAgICAgLy8g5qC55o2u6K6+572u5oyJ6ZKuZG9t77yM5p2l6K6+572u5LiL5ouJ6Z2i5p2/55qE5a695bqmXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NEcm9wRG9taW5hdG9yRWxlbSA9IHRoaXMuc2V0dGluZ3NDb20ubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgLy8gbmdBZnRlclZpZXdDaGVja2Vk5piv6KeG5Zu+5bey57uP5Y+Y5YyW5qOA5rWL57uT5p2f55qE6ZKp5a2Q5Ye95pWw77yM5aaC5p6c5q2k5pe25YaN5Y675pS55Y+Y6KeG5Zu+5LiK55qE5o6l5Y+j5Lya5pyJ5oql6ZSZLlxyXG4gICAgICAgICAgICAvLyDmiqXplJnkv6Hmga/vvJooRXhwcmVzc2lvbkNoYW5nZWRBZnRlckl0SGFzQmVlbkNoZWNrZWRFcnJvcikg5omA5Lul6ZyA6KaB5by65Yi25omn6KGM5LiA5qyh5Y+Y5YyW5qOA5rWL44CCXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogdXNlLWxpZmUtY3ljbGUtaW50ZXJmYWNlXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XHJcbiAgICAgICAgLy8g5YC86Z2i5p2/5Y+v6IO95a+56b2Q6L6T5YWl5qGG77yM5Lmf5Y+v6IO95a+56b2Q5qCH562+XHJcbiAgICAgICAgdGhpcy52YWx1ZURyb3BEb21pbmF0b3IgPSB0aGlzLnNlYXJjaElucHV0UmYubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBpZiAodGhpcy5zaG93U2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nc0Ryb3BEb21pbmF0b3JFbGVtID0gdGhpcy5zZXR0aW5nc0NvbS5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hbHdheXNGb2N1c2FibGVFbGVtcy5wdXNoKHRoaXMuZG9taW5hdG9yQ29tLm5hdGl2ZUVsZW1lbnQsIHRoaXMuc2VhcmNoSW5wdXRSZi5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIHRoaXMucmlnaHRJY29uc1JlZi5mb3JFYWNoKChpdGVtOiBUcEljb25Db21wb25lbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hbHdheXNGb2N1c2FibGVFbGVtcy5wdXNoKGl0ZW0ubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c2FibGVFbGVtcyh0aGlzLmFsd2F5c0ZvY3VzYWJsZUVsZW1zKTtcclxuXHJcbiAgICAgICAgLy8gIOWboOS4uuaUueWPmOS6hnZhbHVlRHJvcERvbWluYXRvciDvvIzmiYDku6XlvLrliLbliLfmlrDkuIDmrKFcclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOiuvue9rum7mOiupGZpZWxk5a2X5q616Z2i5p2/6YCJ5Lit6aG5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblNldHRpbmdEcm9wU2VsZWN0KG9wdGlvbjogVHBTZWFyY2hib3hPcHRpb24pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHRGaWVsZCA9IG9wdGlvbi5maWVsZDtcclxuICAgICAgICB0aGlzLnNldHRpbmdzRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgLy8g5aaC5p6c5pyA5paw55qE6YCJ5Lit6aG55ZKM5LmL5YmN5LiN5LiA5qC377yM5omN5Lya6Kem5Y+RZGVmYXVsdEZpZWxkQ2hhbmdl5LqL5Lu244CCXHJcbiAgICAgICAgaWYgKHRoaXMub2xkRGVmYXVsdEZpZWxkICE9PSB0aGlzLmRlZmF1bHRGaWVsZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZERlZmF1bHRGaWVsZCA9IHRoaXMuZGVmYXVsdEZpZWxkO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRGaWVsZENoYW5nZS5lbWl0KG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiB0YWflj5HnlJ/mlLnlj5jvvIjliKDlh4/jgIHmlrDlop7vvInml7bop6blj5HjgIJcclxuICAgICAqIFRPRE86IOS4uuS7gOS5iOWPquacieWcqHRhZ+WIoOmZpOeahOaXtuWAme+8jOaJjeS8muinpuWPkeivpeWHveaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25Eb21pbmF0b3JNb2RlbENoYW5nZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKHRoaXMubW9kZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0UGxhY2Vob2xkZXIobW9kZWw6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZG9taW5hdG9yUGxhY2Vob2xkZXIgPSBtb2RlbD8ubGVuZ3RoID4gMCA/IHRoaXMuaW5wdXRQbGFjZWhvbGRlciA6IHRoaXMuZW1wdHlQbGFjZWhvbGRlcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDovpPlhaXmoYblpITnkIZcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6L6T5YWl54K55Ye75LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkNsaWNrSW5wdXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMudmFsdWVEcm9wRG9taW5hdG9yID0gdGhpcy5zZWFyY2hJbnB1dFJmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgLy8g6ZSu5bey57uP6YCJ5LitXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOayoeacieWPr+mAiemhue+8jOS4jeaYvuekulxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRJdGVtLm9wdGlvbnMgJiYgKCF0aGlzLnNlbGVjdGVkSXRlbS50eXBlIHx8IHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdyYWRpbycpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZURyb3BTZWFyY2hSZXN1bHQodGhpcy5nZXRWYWx1ZURyb3BPcHRpb25zKHRoaXMuc2VsZWN0ZWRJdGVtLmZpZWxkKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1ZhbHVlRHJvcCgpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BEcm9wU2VhcmNoKHRoaXMuaW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5bGe5oCn6Z2i5p2/5qC55o2u6L6T5YWl5qGG5Lit55qE5YC85pCc57Si6YCJ6aG5XHJcbiAgICBwcml2YXRlIHByb3BEcm9wU2VhcmNoKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHQ6IEFycmF5PFRwU2VhcmNoYm94T3B0aW9uPiA9IHRoaXMuc2VhcmNoT3B0aW9ucyh2YWx1ZSwgdGhpcy5wcm9wRHJvcE9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChzZWFyY2hSZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BEcm9wQ29tLnNlYXJjaFJlc3VsdCA9IHNlYXJjaFJlc3VsdDtcclxuICAgICAgICAgICAgdGhpcy5wcm9wRHJvcENvbS5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6L6T5YWl5qGG5oyJ6ZSu5oyJ5LiL5aSE55CGQmFja3NwYWNl5ZKMRW50ZXLplK5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uS2V5ZG93bklucHV0KGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBkZXByZWNhdGlvblxyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRpS2V5bWFwLktFWV9CQUNLU1BBQ0U6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlQmFja3NwYWNlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKHRoaXMubW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVGlLZXltYXAuS0VZX0VOVEVSOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZUVudGVyKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6L6T5YWl5qGG5YC85Y+Y5YyW5aSE55CG77yMXHJcbiAgICAgKiDovpPlhaXlgLzml7bvvIzlpoLmnpzlsZXlvIDnmoTmmK/lsZ7mgKfpnaLmnb/vvIzmkJzntKLlsZ7mgKfvvIzlpoLmnpzmmK/lgLzpnaLmnb/vvIzljZXpgInmkJzntKLpgInpobnvvIzlpJrpgInljLnphY3pgInpoblcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uSW5wdXRWYWx1ZUNoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgLy8g5YC86Z2i5p2/XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vIOaciemAieS4remhueWQju+8jOi+k+WFpeWAvOS5i+mXtOmAmuefpeWHuuWOu++8jOeUqOS6juWAvOmAiemhueaVsOaNrui/h+Wkmu+8jOiHquW3seWkhOeQhuaQnOe0ouOAglxyXG4gICAgICAgICAgICB0aGlzLmlucHV0VmFsdWVDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW06IHRoaXMuc2VsZWN0ZWRJdGVtXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyDljZXpgInmkJzntKJcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVhbFJhZGlvSXRlbVNlYXJjaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIC8vIOWkmumAieWPquWMuemFjVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hDaGVja2JveElucHV0KHZhbHVlLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dWYWx1ZURyb3AoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2UgeyAvLyDlsZ7mgKfpnaLmnb9cclxuICAgICAgICAgICAgLy8gIGllMTEg5Yid5aeL5YyW5ZKMcGxhY2Vob2xkZXLmlLnlj5jkvJrop6blj5FuZ01vZGVsQ2hhbmdl5LqL5Lu277yM5omA5pyJ5q2k5aSE5bGP6JS95bGe5oCn5pCc57SiXHJcbiAgICAgICAgICAgIGlmIChUaUJyb3dzZXIuaXNJRSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wcm9wRHJvcFNlYXJjaCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDovpPlhaXmoYblpLHljrvnhKbngrlcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkJsdXJJbnB1dCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5wcm9wRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZU11bHRpRHJvcENvbS5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOi+k+WFpeahhuiBmueEplxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25Gb2N1c0lucHV0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSAmJiB0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVhbFJhZGlvSXRlbVNlYXJjaCh0aGlzLmlucHV0VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmlbTkvZNcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5pW05L2T5aSx5Y6754Sm54K5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5oaWRlQWxsRHJvcHMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5Yig6Zmk5Y2V5LiqdGFnXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkRlbGV0ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyDliKDpmaTkuIDpobnlkI7vvIzovpPlhaXmoYbkvY3nva7mlLnlj5jvvIzpmLLmraJkcm9w5a+56b2Q6Zeu6aKY77yM6ZqQ6JeP5omA5pyJZHJvcFxyXG4gICAgICAgIHRoaXMuaGlkZUFsbERyb3BzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaVtOS9k+eCueWHu1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25DbGljayhldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlYXJjaElucHV0UmYubmF0aXZlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgIHRoaXMub25DbGlja0lucHV0KGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOa4hemZpOaJgOaciXRhZ1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25DbGlja0NsZWFyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyDpmLLmraLkuovku7blhpLms6HliLBkb21pbmF0b3LlkI7vvIxkb21pbmF0b3LogZrnhKbkuYvlkI7pnaLmnb/miZPlvIDjgIJcclxuICAgICAgICAvLyDmnInpgInkuK10YWfmiY3muIXnqbrvvIzpmLLmraLlpJrop6blj5FuZ21vZGVsY2hhbmdlXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuY2xlYXIuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIodGhpcy5tb2RlbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOeCueWHu+aQnOe0olxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25DbGlja1NlYXJjaChldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgLy8g5YWI5oqK6L6T5YWl55qE5YaF5a6555Sf5oiQdGFnXHJcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlVGFnQnlJbnB1dFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhpZGVBbGxEcm9wcygpO1xyXG5cclxuICAgICAgICBjb25zdCBmaWx0ZXI6IFRwU2VhcmNoYm94RmlsdGVyID0gdGhpcy5nZXRGaWx0ZXIoKTtcclxuICAgICAgICB0aGlzLnNlYXJjaC5lbWl0KGZpbHRlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOeCueWHu2hlbHDlm77moIdcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uQ2xpY2tIZWxwKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuaGVscC5lbWl0KGV2ZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog54K55Ye76K6+572u6buY6K6k5pCc57Si6aG55Zu+5qCHXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkNsaWNrU2V0dGluZyhldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzRHJvcENvbS5zaG93KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOaYr+WQpuaciWxhYmVsIOexu+Wei++8jOeUqOS6jmxhYmVsIOexu+Wei+eahOeJueauiuWkhOeQhlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaGFzTGFiZWx0YWcoKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSB0aGlzLml0ZW1zLmZpbmRJbmRleCgoaXRlbTogVHBTZWFyY2hib3hJdGVtKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnR5cGUgPT09ICdub1ZhbHVlJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4ID4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Lik5LiqdGFn54K55Ye75YiH5o2i77yM5LqL5Lu26aG65bqPIG1vdXNlZG93biA9PiBibHVyID0+IGZvY3VzID0+IGNsaWNrXHJcbiAgICAvLyB0YWctdmFsdWUg54K55Ye75LqL5Lu2IOWboOS4uuimgeiuvue9rueEpueCue+8jOaJgOS7peimgee7keWumuWcqG1vdXNlZG93buS4ilxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmmK/lkKbmnIlsYWJlbCDnsbvlnovvvIznlKjkuo5sYWJlbCDnsbvlnovnmoTnibnmrorlpITnkIZcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uTW91c2Vkb3duVGFnVmFsdWUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c2FibGVFbGVtcyh0aGlzLmFsd2F5c0ZvY3VzYWJsZUVsZW1zLmNvbmNhdChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25DbGlja1RhZ1ZhbHVlKGV2ZW50OiBFdmVudCwgdGFnOiBUcFNlYXJjaGJveFRhZyk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy50YWdFZGl0YWJsZSh0YWcudHlwZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLnZhbHVlRHJvcERvbWluYXRvciA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB0aGlzLmVkaXRpbmdUYWcgPSB0YWc7XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZVZhbHVlRHJvcHMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSB0aGlzLml0ZW1zLmZpbmQoKGl0ZW06IFRwU2VhcmNoYm94SXRlbSk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5maWVsZCA9PT0gdGFnLmZpZWxkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFZhbHVlRHJvcFNlYXJjaFJlc3VsdCh0aGlzLmdldFZhbHVlRHJvcE9wdGlvbnModGFnLmZpZWxkKSk7XHJcbiAgICAgICAgLy8g5aSa6YCJ6ZyA6KaB5Yy56YWN5bey57uP6YCJ5Lit55qE6YCJ6aG5XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZURyb3BTZWxlY3RlZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWxleW8gOmdouadv+WJjeabtOaWsOS6humdouadv+eahOWPguaVsO+8jOaJgOS7pemcgOimgeW8uuWItuWPmOajgOS4gOasoVxyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG5cclxuICAgICAgICAvLyDlpoLmnpzmsqHmnInlj6/pgInpobnvvIzkuI3mmL7npLpcclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRJdGVtLm9wdGlvbnMgJiYgKCF0aGlzLnNlbGVjdGVkSXRlbS50eXBlIHx8IHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdyYWRpbycpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Zyo6L6T5YWl5qGG6YCJ5oup5pe277yM5YaN54K55Ye75bey6YCJ5Lit5qCH562+57yW6L6R77yM6Z2i5p2/5peg5rOV5bGV5byA77yMXHJcbiAgICAgICAgLy8g5Y6f5Zug5b2T5YmNbW91c2Vkb3du5LqL5Lu25Zue6LCD5Ye95pWw5ZyoIOi+k+WFpeahhmJsdXLkuovku7bkuYvliY3vvIzlhYjmiZPlvIDlkI7lhbPpl63vvIxcclxuICAgICAgICAvLyDmiYDku6Xov5nph4zopoHmt7vliqDlu7bov59cclxuICAgICAgICBzZXRUaW1lb3V0KCgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaG93VmFsdWVEcm9wKCk7XHJcbiAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiB0YWflgLzogZrnhKZcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uRm9jdXNUYWdWYWx1ZShldmVudDogRXZlbnQsIHRhZzogVHBTZWFyY2hib3hUYWcpOiB2b2lkIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IGVsZW06IEhUTUxFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudmFsdWVEcm9wRG9taW5hdG9yID0gZWxlbTtcclxuICAgICAgICAvLyDlj6/nvJbovpHnsbvlnovmiY3pgInkuK1cclxuICAgICAgICBpZiAodGFnLnR5cGUgPT09ICdyYWRpbycgfHwgdGFnLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RIVE1MRWxlbWVudFRleHQoZWxlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiB0YWflgLzlpLHljrvnhKbngrlcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uQmx1clRhZ1ZhbHVlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOmdnue8lui+keeKtuaAge+8jOS/neaMgemdouadv+eahGRvbWluYXRvcuWcqGlucHV05LiKXHJcbiAgICAgICAgdGhpcy52YWx1ZURyb3BEb21pbmF0b3IgPSB0aGlzLnNlYXJjaElucHV0UmYubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLnByb3BEcm9wQ29tLmhpZGUoKTtcclxuICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZU11bHRpRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtICYmICh0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAncmFkaW8nIHx8IHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdjaGVja2JveCcgfHwgdGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ21hcCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRpbmdUYWcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogdGFnIOe8lui+kei+k+WFpeahhmtleWRvd27kuovku7bvvIzlpITnkIbnvJbovpHnirbmgIHkuIsgZW50ZXIg6ZSu5pON5L2cXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbktleWRvd25UYWdJbnB1dChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogZGVwcmVjYXRpb25cclxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gVGlLZXltYXAuS0VZX0VOVEVSKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZ1ZhbHVlOiBzdHJpbmcgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUYWdFeGlzdCh0aGlzLnNlbGVjdGVkSXRlbSwgdGFnVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVRhZyh0aGlzLnNlbGVjdGVkSXRlbSwgdGFnVmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdGluZ1RhZyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5oaWRlVmFsdWVEcm9wcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOagh+etvue8lui+keaXtuWPquacieWkmumAiemcgOimgeWkhOeQhuWMuemFjVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25UYWdJbnB1dChldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZTogc3RyaW5nID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCkudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2hlY2tib3hJbnB1dCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5piv5ZCm5Y+v5Lul57yW6L6RXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0YWdFZGl0YWJsZSh0eXBlOiBUcFNlYXJjaGJveFRhZ1R5cGUpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBtYXAg57G75Z6L5qCH562+44CB5pel5pyf6IyD5Zu05ZKM5pWw5a2X6IyD5Zu05LiN6IO957yW6L6RXHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT09ICdyYWRpbycgfHwgdHlwZSA9PT0gJ2NoZWNrYm94JztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogIOWxnuaAp+mdouadv+mAieS4reWbnuiwg1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25Qb3JwRHJvcFNlbGVjdChvcHRpb246IFRwU2VhcmNoYm94T3B0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgLy8gbGFiZWznsbvlnot0YWcg5Y+q5Zyo5bGe5oCn6Z2i5p2/5Lit6YCJ5oup5LiA5qyhXHJcbiAgICAgICAgaWYgKG9wdGlvbi50eXBlID09PSAnbm9WYWx1ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVRhZ0J5UHJvcERyb3Aob3B0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wRHJvcENvbS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHRoaXMuaXRlbXMuZmluZCgoaXRlbTogVHBTZWFyY2hib3hJdGVtKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmZpZWxkID09PSBvcHRpb24uZmllbGQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5pyJYmVmb3JlT3BlbuaHkuWKoOi9ve+8jOmdouadv+WxleW8gOS6pOe7meeUqOaIt1xyXG4gICAgICAgIGlmICh0aGlzLmJlZm9yZU9wZW4ub2JzZXJ2ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVPcGVuLmVtaXQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRvbWluYXRvclBsYWNlaG9sZGVyID0gb3B0aW9uPy5wbGFjZWhvbGRlciB8fCAodGhpcy5tb2RlbC5sZW5ndGggPiAwID8gdGhpcy5pbnB1dFBsYWNlaG9sZGVyIDogdGhpcy5lbXB0eVBsYWNlaG9sZGVyKTtcclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5Y+v6YCJ6aG577yM5YiZ5LiN5pi+56S65YC86Z2i5p2/44CCXHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkSXRlbSB8fCAhdGhpcy5zZWxlY3RlZEl0ZW0ub3B0aW9ucyAmJiAoIXRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgfHwgdGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ3JhZGlvJykpIHtcclxuICAgICAgICAgICAgLy8g5YWI6Kem5Y+R5Yqo5oCB5Y+Y5YyW5qOA5rWL77yM5YaN5riF6Zmk6YCJ5Lit5bGe5oCn5YC877yI5bGe5oCn6Z2i5p2/5LiN5YWB6K645pyJ6YCJ5Lit54q25oCB77yJXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyUHJvcERyb3BTZWxlY3RlZCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb3B0aW9uczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+ID0gdGhpcy5nZXRWYWx1ZURyb3BPcHRpb25zKG9wdGlvbi5maWVsZCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZURyb3BPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLnNldFZhbHVlRHJvcFNlYXJjaFJlc3VsdChvcHRpb25zKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZURyb3BTZWxlY3RlZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyDpnaLmnb/lsZXlvIDliY3muIXnqbrovpPlhaXlhoXlrrlcclxuICAgICAgICAgdGhpcy5pbnB1dFZhbHVlID0gJyc7XHJcblxyXG4gICAgICAgIC8vIOWxleW8gOmdouadv+WJjeabtOaWsOS6humdouadv+eahOWPguaVsO+8jOaJgOS7pemcgOimgeW8uuWItuWPmOajgOS4gOasoVxyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuc2hvd1ZhbHVlRHJvcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pq06Zyy5aSW6Z2i55qE5omT5byA5YC86Z2i5p2/5o6l5Y+jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcGVuKG9wdGlvbnM6IEFycmF5PFRwU2VhcmNoYm94T3B0aW9uPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0Q3VzdG9tVmFsdWVEcm9wU2VhcmNoUmVzdWx0KG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuc2hvd1ZhbHVlRHJvcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkvYbliY3pgInkuK3mlbDmja7poblcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFNlbGVjdGVkSXRlbSgpOiBUcFNlYXJjaGJveEl0ZW0ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkSXRlbTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWNlemAieWAvOmdouadv+mAieS4re+8jCjljIXmi6xtYXDnsbvlnospXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblZhbHVlRHJvcFNlbGVjdChzZWxlY3RlZDogVHBTZWFyY2hib3hPcHRpb24pOiB2b2lkIHtcclxuICAgICAgICAvLyDlpI3pgInml7bvvIzngrnlh7vnoa7lrprmjInpkq7nu5PmnZ/pgInmi6lcclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRJdGVtIHx8ICFzZWxlY3RlZCApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlpITnkIZtYXDnsbvlnovvvIxtYXDnsbvlnovpnIDopoHpgInmi6nkuKTmrKFcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ21hcCcpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBJdGVtU2VsZWN0KHNlbGVjdGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVRhZ0J5VmFsdWVQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5aSa6YCJ5bqV6YOo56Gu5a6a5oyJ6ZKuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkNsaWNrVmFsdWVEcm9wT0soZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gIOmYu+atouaMiemSruiOt+WPlueEpueCue+8jOi+k+WFpeahhuWkseWOu+eEpueCuVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVRhZ0J5VmFsdWVQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5aSa6YCJ5bqV6YOo5Y+W5raI5oyJ6ZKuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkNsaWNrVmFsdWVEcm9wQ2FuY2VsKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmFsdWVNdWx0aURyb3BDb20uaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiDmlbDlrZfojIPlm7RcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uQ2xpY2tDdXN0b21Ecm9wT0soKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZEl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ251bVJhbmdlJykge1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlTnVtUmFuZ2V0YWcoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdkYXRlUmFuZ2UnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVEYXRlUmFuZ2VUYWcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog6Ieq5a6a5LmJ6Z2i5p2/5Y+W5raI5oyJ6ZKu5Zue6LCDXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkNsaWNrQ3VzdG9tRHJvcENhbmNlbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmhpZGVDdXN0b21Ecm9wKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdGluZ1RhZykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5lZGl0aW5nVGFnID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICogbnVtUmFuZ2Ug5ZKMIGRhdGVSYW5nZSDpnaLmnb/nmoTlrr3luqbpnIDopoHlm7rlrprlgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGN1c3RvbURyb3BXaWR0aCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZEl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ251bVJhbmdlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJzIwMHB4JztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdkYXRlUmFuZ2UnKSB7XHJcbiAgICAgICAgICAgIC8vIOagueaNruacgOWuveWwj+ivreenjXB0X0JS6K+N5p2hXHJcbiAgICAgICAgICAgIHJldHVybiAnMzAwcHgnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbml0SXRlbXMoKTtcclxuICAgICAgICB0aGlzLmluaXRQcm9wRHJvcE9wdGlvbnMoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgaW5pdEl0ZW1zKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOWIneWni+WMliBhbGxWYWx1ZXMvIGVtcHR5VmFsdWVcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW06IFRwU2VhcmNoYm94SXRlbSk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAvLyBpdGVtcyDkuK3kuI3lhpl0eXBlLCDpu5jorqTljZXpgIkncmFkaW8nXHJcbiAgICAgICAgICAgIGlmIChVdGlsLmlzVW5kZWZpbmVkKGl0ZW0udHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0udHlwZSA9ICdyYWRpbyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbWFwJyAmJiBBcnJheS5pc0FycmF5KGl0ZW0ub3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0ub3B0aW9ucy5mb3JFYWNoKChvcHRpb246IFRwU2VhcmNoYm94T3B0aW9uKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5omA5pyJ5YC86aG5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5hbGxWYWx1ZXMgIT09IGZhbHNlICYmIEFycmF5LmlzQXJyYXkob3B0aW9uLm9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFZhbHVlczogc3RyaW5nID0gVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cFNlYXJjaGJveC5hbGxWYWx1ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFZhbHVlT3B0aW9uOiBUcFNlYXJjaGJveE9wdGlvbiA9IG9wdGlvbi5vcHRpb25zLmZpbmQoKGN1cnJlbnRPcHRpb246IFRwU2VhcmNoYm94T3B0aW9uKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudE9wdGlvbi5sYWJlbCA9PT0gYWxsVmFsdWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxsVmFsdWVPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5vcHRpb25zLnVuc2hpZnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhbGxWYWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOepuuWAvOmhuSBlbXB0eVZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5lbXB0eVZhbHVlICE9PSBmYWxzZSAmJiBBcnJheS5pc0FycmF5KG9wdGlvbi5vcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbXB0eVZhbHVlOiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LmVtcHR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcHR5VmFsdWVPcHRpb246IFRwU2VhcmNoYm94T3B0aW9uID0gb3B0aW9uLm9wdGlvbnMuZmluZCgoY3VycmVudE9wdGlvbjogVHBTZWFyY2hib3hPcHRpb24pOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50T3B0aW9uLmxhYmVsID09PSBlbXB0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbXB0eVZhbHVlT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24ub3B0aW9ucy51bnNoaWZ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZW1wdHlWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIOaVsOWtl+iMg+WbtFxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ251bVJhbmdlJykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0OiBGb3JtQ29udHJvbCA9IG5ldyBGb3JtQ29udHJvbChpdGVtLnN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIFtUaVZhbGlkYXRvcnMucmFuZ2VWYWx1ZShpdGVtLm1pbiBhcyBudW1iZXIsIGl0ZW0ubWF4IGFzIG51bWJlciksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZXNzTWF4KCdlbmQnKV0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kOiBGb3JtQ29udHJvbCA9IG5ldyBGb3JtQ29udHJvbChpdGVtLmVuZCxcclxuICAgICAgICAgICAgICAgICAgICBbVGlWYWxpZGF0b3JzLnJhbmdlVmFsdWUoaXRlbS5taW4gYXMgbnVtYmVyLCBpdGVtLm1heCBhcyBudW1iZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9yZU1pbignc3RhcnQnKV0pO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5mb3JtQ29udHJvbHMgPSBuZXcgRm9ybUdyb3VwKHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCxcclxuICAgICAgICAgICAgICAgICAgICBlbmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8g5byA5aeL5YC855qE5qCh6aqM54q25oCB5pS55Y+Y5ZCO77yM5pu05paw5LiA5LiL57uT5p2f5YC855qE5qCh6aqM54q25oCBXHJcbiAgICAgICAgICAgICAgICBzdGFydC5zdGF0dXNDaGFuZ2VzLnN1YnNjcmliZSgoc3RhdHVzOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBUcFNlYXJjaGJveENvbXBvbmVudC5WQUxJRCAmJiBlbmQuc3RhdHVzID09PSBUcFNlYXJjaGJveENvbXBvbmVudC5JTlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZC51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubHlTZWxmOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdEV2ZW50OiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDnu5PmnZ/lgLznmoTmoKHpqoznirbmgIHmlLnlj5jlkI7vvIzmm7TmlrDkuIDkuIvlvIDlp4vlgLznmoTmoKHpqoznirbmgIFcclxuICAgICAgICAgICAgICAgIGVuZC5zdGF0dXNDaGFuZ2VzLnN1YnNjcmliZSgoc3RhdHVzOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBUcFNlYXJjaGJveENvbXBvbmVudC5WQUxJRCAmJiBzdGFydC5zdGF0dXMgPT09IFRwU2VhcmNoYm94Q29tcG9uZW50LklOVkFMSUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmx5U2VsZjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRFdmVudDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyDml6XmnJ/ojIPlm7RcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdkYXRlUmFuZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLW51bGwta2V5d29yZFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlOiBEYXRlID0gdGhpcy5pc1ZhbGlkRGF0ZShuZXcgRGF0ZShpdGVtLnN0YXJ0KSkgPyBuZXcgRGF0ZShpdGVtLnN0YXJ0KSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLW51bGwta2V5d29yZFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZTogRGF0ZSA9IHRoaXMuaXNWYWxpZERhdGUobmV3IERhdGUoaXRlbS5lbmQpKSA/IG5ldyBEYXRlKGl0ZW0uZW5kKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydDogRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woc3RhcnREYXRlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZDogRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woZW5kRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmZvcm1Db250cm9scyA9IG5ldyBGb3JtR3JvdXAoe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5byA5aeL5pel5pyf55qEbWF45piv57uT5p2f5pel5pyf55qE6YCJ5Lit5YC877yM5aaC5p6c57uT5p2f5pel5pyf5rKh5pyJ6YCJ5oup77yM5L2/55SoaXRlbeS4reiuvue9rueahG1heFxyXG4gICAgICAgICAgICAgICAgaXRlbS5zdGFydE1heCA9IGVuZERhdGUgPyBlbmREYXRlIDogaXRlbS5tYXg7XHJcbiAgICAgICAgICAgICAgICAvLyDnu5PmnZ/ml6XmnJ/nmoRtaW7mmK/lvIDlp4vml6XmnJ/nmoTpgInkuK3lgLzvvIzlpoLmnpzlvIDlp4vml6XmnJ/msqHmnInpgInmi6nvvIzkvb/nlKhpdGVt5Lit6K6+572u55qEbWluXHJcbiAgICAgICAgICAgICAgICBpdGVtLmVuZE1pbiA9IHN0YXJ0RGF0ZSA/IHN0YXJ0RGF0ZSA6IGl0ZW0ubWluO1xyXG4gICAgICAgICAgICAgICAgc3RhcnQudmFsdWVDaGFuZ2VzLnN1YnNjcmliZSgodmFsdWU6IERhdGUpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHByZWZlci1jb25kaXRpb25hbC1leHByZXNzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZERhdGUodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZW5kTWluID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVmFsaWREYXRlKGl0ZW0ubWluIGFzIERhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZW5kTWluID0gaXRlbS5taW47XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5rKh5pyJ6K6+572uIG1pbizlvIDlp4vml6XmnJ/pgInkuK3lj4jmuIXpmaTlkI7vvIzpnIDopoHorr7nva7kuIDkuKptaW7nmoTnvLrnnIHlgLxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5lbmRNaW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBlbmQudmFsdWVDaGFuZ2VzLnN1YnNjcmliZSgodmFsdWU6IERhdGUpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHByZWZlci1jb25kaXRpb25hbC1leHByZXNzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZERhdGUodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3RhcnRNYXggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNWYWxpZERhdGUoaXRlbS5tYXggYXMgRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdGFydE1heCA9IGl0ZW0ubWF4O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOayoeacieiuvue9riBtYXgsIOe7k+adn+aXpeacn+mAieS4reWPiOa4hemZpOWQju+8jOmcgOimgeiuvue9ruS4gOS4qm1heOeahOe8uuecgeWAvFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YXJ0TWF4ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBJbnZhbGlkIERhdGXliKTmlq1cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogcHJlZmVyLWZ1bmN0aW9uLW92ZXItbWV0aG9kXHJcbiAgICBwcml2YXRlIGlzVmFsaWREYXRlKGRhdGU6IERhdGUgfCBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGUpID09PSAnW29iamVjdCBEYXRlXScgJiYgU3RyaW5nKGRhdGUpICE9PSAnSW52YWxpZCBEYXRlJztcclxuICAgIH1cclxuXHJcbiAgICAvLyDoh6rlrprkuYnmoKHpqozop4TliJnlsI/kuo7mnIDlpKflgLxcclxuICAgIC8vIOmdmeaAgeaWueazlei/lOWbnueureWktOWHveaVsOeUn+aIkOeOr+Wig+aJk+WMhemUmeivr++8jOaJgOS7peS9v+eUqFxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBwcmVmZXItZnVuY3Rpb24tb3Zlci1tZXRob2RcclxuICAgIHByaXZhdGUgbGVzc01heChmaWVsZDogc3RyaW5nKTogVmFsaWRhdG9yRm4ge1xyXG4gICAgICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29udHJvbC5wYXJlbnQgJiYgY29udHJvbC5wYXJlbnQuZ2V0KGZpZWxkKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kOiBudW1iZXIgPSBjb250cm9sLnBhcmVudC5nZXQoZmllbGQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgLy8g5byA5aeL5ZKM57uT5p2f5YC86YO95a2Y5Zyo5pe277yM5Yik5pat5byA5aeL5Y+v57uT5p2f5YC855qE5aSn5bCPXHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kICYmIGNvbnRyb2wudmFsdWUgJiYgY29udHJvbC52YWx1ZSA+IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblZhbHVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxWYWx1ZTogY29udHJvbC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpRXJyb3JNZXNzYWdlOiBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LnJhbmdlTWluRXJyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLW51bGwta2V5d29yZFxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8g6Ieq5a6a5LmJ5qCh6aqM6KeE5YiZ77yM5aSn5LqO5pyA5bCP5YC8XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHByZWZlci1mdW5jdGlvbi1vdmVyLW1ldGhvZFxyXG4gICAgcHJpdmF0ZSBtb3JlTWluKGZpZWxkOiBzdHJpbmcpOiBWYWxpZGF0b3JGbiB7XHJcbiAgICAgICAgcmV0dXJuIChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb250cm9sLnBhcmVudCAmJiBjb250cm9sLnBhcmVudC5nZXQoZmllbGQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydDogbnVtYmVyID0gY29udHJvbC5wYXJlbnQuZ2V0KGZpZWxkKS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIOW8gOWni+WSjOe7k+adn+WAvOmDveWtmOWcqOaXtu+8jOWIpOaWreW8gOWni+WPr+e7k+adn+WAvOeahOWkp+Wwj1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICYmIGNvbnRyb2wudmFsdWUgJiYgY29udHJvbC52YWx1ZSA8IHN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluVmFsdWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbFZhbHVlOiBjb250cm9sLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlFcnJvck1lc3NhZ2U6IFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBTZWFyY2hib3gucmFuZ2VNYXhFcnJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tbnVsbC1rZXl3b3JkXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Yid5aeL5YyW5bGe5oCn6Z2i5p2/6YCJ6aG5XHJcbiAgICBwcml2YXRlIGluaXRQcm9wRHJvcE9wdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+ID0gW107XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtOiBUcFNlYXJjaGJveEl0ZW0pOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uOiBUcFNlYXJjaGJveE9wdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBpdGVtLmZpZWxkLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXRlbT8ucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gbGFiZWxcclxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ25vVmFsdWUnKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25bJ2NoaWxkcmVuJ10gPSBpdGVtLmNoaWxkcmVuLm1hcCgoY2hpbGRPcHRpb246IFRwU2VhcmNoYm94T3B0aW9uKTogVHBTZWFyY2hib3hPcHRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uLnR5cGUgPSAnbm9WYWx1ZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZE9wdGlvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaChvcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnByb3BEcm9wT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGluaXRTZXR0aW5nRHJvcE9wdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g5Y+q5pyJbm9WYWx1Zeexu+Wei+S4jeiDveiuvue9ruS4uum7mOiupOaQnOe0oumhuVxyXG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IEFycmF5PFRwU2VhcmNoYm94T3B0aW9uPiA9IHRoaXMuaXRlbXMuZmlsdGVyKChpdGVtOiBUcFNlYXJjaGJveEl0ZW0pOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udHlwZSAhPT0gJ25vVmFsdWUnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAoKGl0ZW06IFRwU2VhcmNoYm94SXRlbSk6IFRwU2VhcmNoYm94T3B0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbjogVHBTZWFyY2hib3hPcHRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGl0ZW0uZmllbGRcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzorr7nva7kuoZkZWZhdWx0RmllbGTvvIzpnaLmnb/kuK3pq5jkuq7mmL7npLpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHRGaWVsZCA9PT0gb3B0aW9uLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc0Ryb3BTZWxlY3RlZCA9IG9wdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAvLyDkvb/nlKjliIbnu4TmnaXmmL7npLrpnaLmnb/moIfpophcclxuICAgICAgICB0aGlzLnNldHRpbmdEcm9wT3B0aW9ucyA9IFt7XHJcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnNldHRpbmdUaXBDb250ZW50LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogb3B0aW9uc1xyXG4gICAgICAgIH1dO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWF0Y2hDaGVja2JveElucHV0KHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2YWx1ZUFycmF5OiBBcnJheTxzdHJpbmc+ID0gdmFsdWUuc3BsaXQoJ3wnKVxyXG4gICAgICAgICAgICAubWFwKChzcGFuOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwYW4udHJpbSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnZhbHVlRHJvcFNlbGVjdGVkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtLm9wdGlvbnMuZm9yRWFjaCgob3B0aW9uOiBUcFNlYXJjaGJveE9wdGlvbik6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAodmFsdWVBcnJheS5pbmNsdWRlcyhvcHRpb24ubGFiZWwpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRHJvcFNlbGVjdGVkcy5wdXNoKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlYWxSYWRpb0l0ZW1TZWFyY2godmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdDogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+ID0gdGhpcy5zZWFyY2hPcHRpb25zKHZhbHVlLCB0aGlzLnZhbHVlRHJvcE9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChzZWFyY2hSZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlRHJvcFNlYXJjaFJlc3VsdChzZWFyY2hSZXN1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dWYWx1ZURyb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOiuvue9ruWAvOmdouadv+eahOmAiemhuVxyXG4gICAgcHJpdmF0ZSBzZXRWYWx1ZURyb3BTZWFyY2hSZXN1bHQob3B0aW9uczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZU11bHRpRHJvcENvbS5zZWFyY2hSZXN1bHQgPSBvcHRpb25zO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ3JhZGlvJyB8fCB0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5zZWFyY2hSZXN1bHQgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOaHkuWKoOi9veaXtu+8jOiuvue9ruWAvOmdouadv+mAiemhuVxyXG4gICAgcHJpdmF0ZSBzZXRDdXN0b21WYWx1ZURyb3BTZWFyY2hSZXN1bHQob3B0aW9uczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0ub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVNdWx0aURyb3BDb20uc2VhcmNoUmVzdWx0ID0gb3B0aW9ucztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0ub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVEcm9wQ29tLnNlYXJjaFJlc3VsdCA9IG9wdGlvbnM7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbS5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgdGhpcy52YWx1ZURyb3BDb20uc2VhcmNoUmVzdWx0ID0gW3tcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LnRhZ0tleSxcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH1dO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qC55o2u6L6T5YWl5YaF5a6555Sf5oiQdGFnXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlVGFnQnlJbnB1dFZhbHVlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOaciemAieS4remhueS4lOWPr+e8lui+kVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWdFZGl0YWJsZSh0aGlzLnNlbGVjdGVkSXRlbS50eXBlKSB8fCB0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUYWdFeGlzdCh0aGlzLnNlbGVjdGVkSXRlbSwgdGhpcy5pbnB1dFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVUYWcodGhpcy5zZWxlY3RlZEl0ZW0sIHRoaXMuaW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVWYWx1ZURyb3BzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOayoeaciemAieS4remhue+8jOaMiem7mOiupOWAvOWkhOeQhlxyXG4gICAgICAgIGlmICghdGhpcy5kZWZhdWx0RmllbGQgfHwgdGhpcy5pbnB1dFZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlsZ7mgKfpnaLmnb/lsZXlvIDvvIzkvJrop6blj5Fkcm9wc2VhcmNo55qE5b+r5o236ZSu77yM5omA5Lul5YWI5YWz6ZetXHJcbiAgICAgICAgdGhpcy5wcm9wRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgLy8g6L6T5YWl5a2X56ym5Liy5LmL6Ze05Y+v6IO95L2/55So5Lit6Iux5paHJywn5YiG5YmyXHJcbiAgICAgICAgY29uc3QgdmFsdWVzOiBBcnJheTxzdHJpbmc+ID0gdGhpcy5pbnB1dFZhbHVlLnNwbGl0KC9b77yMLF0vKVxyXG4gICAgICAgICAgICAubWFwKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09ICcnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWboOS4uuimgeWkmuasoeeUn+aIkHRhZywg5Lya5aSa5qyh5pu05pawbW9kZWwsXHJcbiAgICAgICAgLy8g55So5q2k5Y+Y6YeP5qCH6K6w5Zyo5pyA5ZCO5LiA5qyh55Sf5oiQ5pu05pawbW9kZWzlkI7lj5HlsIRuZ01vZGVsQ2hhbmdl5LqL5Lu2XHJcbiAgICAgICAgbGV0IG1vZGVsQ2hhbmdlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIC8vIOWPquaUr+aMgeavj+asoei+k+WFpemDveaYr+WQjOS4gOexu+Wei+eahO+8jOaJgOS7peWkmuS4quWAvOeUqOesrOS4gOS4quWMuemFje+8jOaJvuWIsOWMuemFjemhuVxyXG4gICAgICAgIGNvbnN0IG1hdGNoZWRJdGVtOiBUcFNlYXJjaGJveEl0ZW0gPSB0aGlzLml0ZW1zLmZpbmQoKGl0ZW06IFRwU2VhcmNoYm94SXRlbSk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5yZWdleHAgJiYgaXRlbS5yZWdleHAudGVzdCh2YWx1ZXNbMF0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAobWF0Y2hlZEl0ZW0pIHtcclxuICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RhZ0V4aXN0KG1hdGNoZWRJdGVtLCB2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVUYWcobWF0Y2hlZEl0ZW0sIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRGaWVsZCkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0SXRlbSA9IHRoaXMuaXRlbXMuZmluZCgoaXRlbTogVHBTZWFyY2hib3hJdGVtKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0RmllbGQgPT09IGl0ZW0uZmllbGQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyDpu5jorqTpobnnlJ/miJB0YWcs5LiN5pSv5oyB6YCX5Y+35YiG6ZqU77yM5omA5Lul55SoaW5wdXRWYWx1ZeaVtOS9k1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUYWdFeGlzdChkZWZhdWx0SXRlbSwgdGhpcy5pbnB1dFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgbW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVUYWcoZGVmYXVsdEl0ZW0sIHRoaXMuaW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIGlmIChtb2RlbENoYW5nZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWxnuaAp+mdouadv+ayoeaciemAieS4remhuSzmiYDku6XopoHmuIXpmaTlpITnkIbjgILlpoLmnpzkuI3ov5vooYzph43nva7vvIzliJnkvJrlh7rnjrDpgInkuK3moLflvI9+XHJcbiAgICBwcml2YXRlIGNsZWFyUHJvcERyb3BTZWxlY3RlZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnByb3BEcm9wU2VsZWN0ZWQgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNwb25zZUVudGVyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVUYWdCeUlucHV0VmFsdWUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzcG9uc2VCYWNrc3BhY2UoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWkhOeQhm1hcOexu+Wei+agh+etvnRhZ1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVEcm9wQ29tLmhpZGUoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0OiBBcnJheTxUcFNlYXJjaGJveE9wdGlvbj4gPSB0aGlzLmdldFZhbHVlRHJvcE9wdGlvbnModGhpcy5zZWxlY3RlZEl0ZW0uZmllbGQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlRHJvcFNlYXJjaFJlc3VsdChzZWFyY2hSZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgLy8g5bGV5byA6Z2i5p2/5YmN5pu05paw5LqG6Z2i5p2/55qE5Y+C5pWw77yM5omA5Lul6ZyA6KaB5by65Yi25Y+Y5qOA5LiA5qyhXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93VmFsdWVEcm9wKCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEl0ZW0pIHtcclxuICAgICAgICAgICAgLy8g5aSE55CG5pyJ6YCJ5Lit5bGe5oCnXHJcblxyXG4gICAgICAgICAgICB0aGlzLmhpZGVWYWx1ZURyb3BzKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIC8vIOWxleW8gOmdouadv+WJjeabtOaWsOS6humdouadv+eahOWPguaVsO+8jOaJgOS7pemcgOimgeW8uuWItuWPmOajgOS4gOasoVxyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wRHJvcENvbS5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8g5aSE55CG5bey57uP6YCJ5Lit55qE5qCH562+XHJcbiAgICAgICAgICAgIHRoaXMucHJvcERyb3BDb20uaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8g5riF6ZmkaXRlbXMg5Lit55qE6YCJ5Lit6aG5XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwucG9wKCk7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZeS6i+S7tlxyXG4gICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWxleekuuWAvOmdouadv+WwgeijheWNlemAieWSjOWkmumAiVxyXG4gICAgcHJpdmF0ZSBzaG93VmFsdWVEcm9wKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOW9k+eCueWHu+mAieS4reeahHRhZ+WAvOaXtu+8jGRvbWluYXRvclNwYWNlIOmcgOimgeaUueWPmO+8jFxyXG4gICAgICAgIC8vIDVweCA9IO+8iDIyIC0xNu+8iS8yICsyIDsgMjItdGFn6auY5bqm77yMMTYt5paH5a2X6auY5bqm77yMMi3kuIrkuIvkuKTovrnvvIwyLXRhZ+WSjOe7hOS7tui+ueahhuS5i+mXtOeahOi3neemu1xyXG4gICAgICAgIHRoaXMuZG9taW5hdG9yU3BhY2UgPSB0aGlzLmVkaXRpbmdUYWcgPyAnMTBweCcgOiAnN3B4JztcclxuICAgICAgICAvLyDlsZXlvIDpnaLmnb/liY3mm7TmlrDkuobpnaLmnb/nmoTlj4LmlbDvvIzmiYDku6XpnIDopoHlvLrliLblj5jmo4DkuIDmrKFcclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLmNsZWFyUHJvcERyb3BTZWxlY3RlZCgpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZURyb3BDb20uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ21hcCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZU11bHRpRHJvcENvbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbnVtUmFuZ2UnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Ecm9wQ29tLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TnVtUmFuZ2VEcm9wRm9jdXNhYmxlRWxlbXMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkYXRlUmFuZ2UnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Ecm9wQ29tLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVJhbmdlRHJvcEZvY3VzYWJsZUVsZW1zKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVBbGxEcm9wcygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnByb3BEcm9wQ29tLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmhpZGVWYWx1ZURyb3BzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1NldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NEcm9wQ29tLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGhpZGVWYWx1ZURyb3BzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmFsdWVEcm9wQ29tLmhpZGUoKTtcclxuICAgICAgICB0aGlzLnZhbHVlTXVsdGlEcm9wQ29tLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmN1c3RvbURyb3BDb20uaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZUN1c3RvbURyb3AoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g6Ieq5a6a5LmJ6Z2i5p2/6ZqQ6JeP5YmN77yM6K6pZG9taW5hdG9y6YeN5paw6IGa54Sm77yM6Ziy5q2i5pW05L2T5aSx54SmXHJcbiAgICAgICAgdGhpcy5kb21pbmF0b3JDb20uZm9jdXMoKTtcclxuICAgICAgICB0aGlzLmN1c3RvbURyb3BDb20uaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgLy8g5qC55o2u5YWz6ZSu6K+NKOW/veeVpeWkp+Wwj+WGmSnov4fmu6RvcHRpb25zXHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHByZWZlci1mdW5jdGlvbi1vdmVyLW1ldGhvZFxyXG4gICAgcHJpdmF0ZSBzZWFyY2hPcHRpb25zKGtleXdvcmQ6IHN0cmluZywgb3B0aW9uczogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+KTogQXJyYXk8VHBTZWFyY2hib3hPcHRpb24+IHtcclxuICAgICAgICBjb25zdCBrZXl3b3JkVXBwZXI6IHN0cmluZyA9IGtleXdvcmQudG9Mb2NhbGVVcHBlckNhc2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZmlsdGVyKChvcHRpb246IFRwU2VhcmNoYm94T3B0aW9uKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsVXBwZXI6IHN0cmluZyA9IG9wdGlvbi5sYWJlbC50b0xvY2FsZVVwcGVyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxhYmVsVXBwZXIuaW5kZXhPZihrZXl3b3JkVXBwZXIpICE9PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtYXAg57G75Z6LXHJcbiAgICBwcml2YXRlIG1hcEl0ZW1TZWxlY3Qob3B0aW9uOiBUcFNlYXJjaGJveE9wdGlvbik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkOiBzdHJpbmcgPSB0aGlzLnNlbGVjdGVkSXRlbS5maWVsZDtcclxuICAgICAgICAgICAgY29uc3QgbGFiZWw6IHN0cmluZyA9IHRoaXMuc2VsZWN0ZWRJdGVtLmxhYmVsO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZTogc3RyaW5nID0gYCR7dGhpcy5zZWxlY3RlZE9wdGlvbi5sYWJlbH09JHtvcHRpb24ubGFiZWx9YDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1RhZzogVHBTZWFyY2hib3hUYWcgPSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZCxcclxuICAgICAgICAgICAgICAgIGxhYmVsLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWFwJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsID0gW25ld1RhZ107XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbmRleDogbnVtYmVyID0gdGhpcy5tb2RlbC5maW5kSW5kZXgoKHRhZzogVHBTZWFyY2hib3hUYWcpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YWcuZmllbGQgPT09IGZpZWxkICYmIHRhZy52YWx1ZSA9PT0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5qCH562+57yW6L6R5pe277yM5piv5pu/5o2iXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdUYWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ1RhZyA9IG5ld1RhZztcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc3BsaWNlKGluZGV4LCAxLCBuZXdUYWcpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5wdXNoKG5ld1RhZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRpbmdUYWcgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5oaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IG9wdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0ZWRPcHRpb24ub3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuOiBBcnJheTxUcFNlYXJjaGJveE9wdGlvbj4gPSB0aGlzLnNlbGVjdGVkT3B0aW9uLm9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5zZWFyY2hSZXN1bHQgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LnRhZ1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICB9XTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRHJvcENvbS5zZWFyY2hSZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy8g54K55Ye76YCJ6aG55ZCO6buY6K6k5Lya5YWz6Zet6Z2i5p2/77yM5omA5Lul5bu26L+f5ZCO5YaN5qyh5omT5byAXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VmFsdWVEcm9wKCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFZhbHVlRHJvcFNlbGVjdGVkcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFRhZzogVHBTZWFyY2hib3hUYWcgPSB0aGlzLm1vZGVsLmZpbmQoKHRhZzogVHBTZWFyY2hib3hUYWcpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRJdGVtLmZpZWxkID09PSB0YWcuZmllbGQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVGFnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDaGVja2JveElucHV0KHNlbGVjdGVkVGFnLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDmuIXnkIbkuLTml7bnirbmgIFcclxuICAgIHByaXZhdGUgY2xlYXJTdGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVkaXRpbmdUYWcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5pbnB1dFZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy52YWx1ZURyb3BTZWxlY3RlZHMgPSBbXTtcclxuICAgICAgICB0aGlzLnZhbHVlRHJvcFNlbGVjdGVkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaGlkZVZhbHVlRHJvcHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlTnVtUmFuZ2V0YWcoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVzOiBhbnkgPSB0aGlzLnNlbGVjdGVkSXRlbS5mb3JtQ29udHJvbHMudmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLmZvcm1Db250cm9scy5zdGF0dXMgPT09IFRwU2VhcmNoYm94Q29tcG9uZW50LklOVkFMSUQgfHwgKCF2YWx1ZXMuc3RhcnQgJiYgIXZhbHVlcy5lbmQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRhZ1ZhbHVlOiBzdHJpbmc7XHJcbiAgICAgICAgaWYgKHZhbHVlcy5zdGFydCAmJiB2YWx1ZXMuZW5kKSB7XHJcbiAgICAgICAgICAgIHRhZ1ZhbHVlID0gYCR7dmFsdWVzLnN0YXJ0fSR7dGhpcy5yYW5nZUxpbmV9JHt2YWx1ZXMuZW5kfWA7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZXMuc3RhcnQpIHtcclxuICAgICAgICAgICAgdGFnVmFsdWUgPSB0aGlzLnJhbmdlTGFyZ2UgKyB2YWx1ZXMuc3RhcnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZXMuZW5kKSB7XHJcbiAgICAgICAgICAgIHRhZ1ZhbHVlID0gdGhpcy5yYW5nZUxlc3MgKyB2YWx1ZXMuZW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmlbDlrZfojIPlm7Tlj6/og73mnInljZXkvY1cclxuICAgICAgICBsZXQgbGFiZWw6IHN0cmluZyA9IHRoaXMuc2VsZWN0ZWRJdGVtLmxhYmVsO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbS51bml0KSB7XHJcbiAgICAgICAgICAgIGxhYmVsID0gYCR7bGFiZWx9KCR7dGhpcy5zZWxlY3RlZEl0ZW0udW5pdH0pYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3VGFnOiBUcFNlYXJjaGJveFRhZyA9IHtcclxuICAgICAgICAgICAgZmllbGQ6IHRoaXMuc2VsZWN0ZWRJdGVtLmZpZWxkLFxyXG4gICAgICAgICAgICBsYWJlbCxcclxuICAgICAgICAgICAgdHlwZTogJ251bVJhbmdlJyxcclxuICAgICAgICAgICAgc3RhcnQ6IHZhbHVlcy5zdGFydCxcclxuICAgICAgICAgICAgZW5kOiB2YWx1ZXMuZW5kLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGFnVmFsdWVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubW9kZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IFtuZXdUYWddO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGFnSW5kZXg6IG51bWJlciA9IHRoaXMubW9kZWwuZmluZEluZGV4KCh0YWc6IFRwU2VhcmNoYm94VGFnKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWcuZmllbGQgPT09IHRoaXMuc2VsZWN0ZWRJdGVtLmZpZWxkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGFnSW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwucHVzaChuZXdUYWcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc3BsaWNlKHRhZ0luZGV4LCAxLCBuZXdUYWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFmdGVyR2VuZXJhdGVUYWcoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlRGF0ZVJhbmdlVGFnKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlczogYW55ID0gdGhpcy5zZWxlY3RlZEl0ZW0uZm9ybUNvbnRyb2xzLnZhbHVlO1xyXG4gICAgICAgIGlmICghdmFsdWVzLnN0YXJ0ICYmICF2YWx1ZXMuZW5kKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRhZ1ZhbHVlOiBzdHJpbmcgPSAnJztcclxuICAgICAgICBsZXQgc3RhcnQ6IHN0cmluZztcclxuICAgICAgICBsZXQgZW5kOiBzdHJpbmc7XHJcbiAgICAgICAgaWYgKHZhbHVlcy5zdGFydCAmJiB2YWx1ZXMuZW5kKSB7XHJcbiAgICAgICAgICAgIHRhZ1ZhbHVlID0gYCR7dGhpcy5mb3JtYXREYXRlMlN0cmluZyh2YWx1ZXMuc3RhcnQgYXMgRGF0ZSl9JHt0aGlzLnJhbmdlTGluZX0ke3RoaXMuZm9ybWF0RGF0ZTJTdHJpbmcodmFsdWVzLmVuZCBhcyBEYXRlKX1gO1xyXG4gICAgICAgICAgICBzdGFydCA9IHZhbHVlcy5zdGFydC50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICBlbmQgPSB2YWx1ZXMuZW5kLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZXMuc3RhcnQpIHtcclxuICAgICAgICAgICAgdGFnVmFsdWUgPSB0aGlzLnJhbmdlTGFyZ2UgKyB0aGlzLmZvcm1hdERhdGUyU3RyaW5nKHZhbHVlcy5zdGFydCBhcyBEYXRlKTtcclxuICAgICAgICAgICAgc3RhcnQgPSB2YWx1ZXMuc3RhcnQudG9JU09TdHJpbmcoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlcy5lbmQpIHtcclxuICAgICAgICAgICAgdGFnVmFsdWUgPSB0aGlzLnJhbmdlTGVzcyArIHRoaXMuZm9ybWF0RGF0ZTJTdHJpbmcodmFsdWVzLmVuZCBhcyBEYXRlKTtcclxuICAgICAgICAgICAgZW5kID0gdmFsdWVzLmVuZC50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdUYWc6IFRwU2VhcmNoYm94VGFnID0ge1xyXG4gICAgICAgICAgICBmaWVsZDogdGhpcy5zZWxlY3RlZEl0ZW0uZmllbGQsXHJcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnNlbGVjdGVkSXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgIGVuZCxcclxuICAgICAgICAgICAgdHlwZTogJ2RhdGVSYW5nZScsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0YWdWYWx1ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gW25ld1RhZ107XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0YWdJbmRleDogbnVtYmVyID0gdGhpcy5tb2RlbC5maW5kSW5kZXgoKGN1clRhZzogVHBTZWFyY2hib3hUYWcpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1clRhZy5maWVsZCA9PT0gdGhpcy5zZWxlY3RlZEl0ZW0uZmllbGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0YWdJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5wdXNoKG5ld1RhZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5zcGxpY2UodGFnSW5kZXgsIDEsIG5ld1RhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWZ0ZXJHZW5lcmF0ZVRhZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWZ0ZXJHZW5lcmF0ZVRhZygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcclxuICAgICAgICB0aGlzLmhpZGVDdXN0b21Ecm9wKCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXROdW1SYW5nZURyb3BGb2N1c2FibGVFbGVtcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpbnB1dHM6IE5vZGVMaXN0ID0gdGhpcy5jdXN0b21Ecm9wQ29tLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3RpVGV4dF0nKTtcclxuICAgICAgICBjb25zdCBpbnB1dEVsZW1zQXJyYXk6IEFycmF5PGFueT4gPSBbXS5zbGljZS5jYWxsKGlucHV0cyk7XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c2FibGVFbGVtcyh0aGlzLmFsd2F5c0ZvY3VzYWJsZUVsZW1zLmNvbmNhdChpbnB1dEVsZW1zQXJyYXksIHRoaXMuZ2V0QnV0dG9ucygpLCB0aGlzLmN1c3RvbURyb3BDb20ubmF0aXZlRWxlbWVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0RGF0ZVJhbmdlRHJvcEZvY3VzYWJsZUVsZW1zKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOaXpeacn+iMg+WbtOmdouadv+S4reeahOaXpeacn+e7hOS7tu+8jOWtmOWcqOeEpueCuemXrumimO+8jFxyXG4gICAgICAgIGNvbnN0IGVsZW1zTm9kZUxpc3Q6IEFycmF5PGFueT4gPSB0aGlzLmFsd2F5c0ZvY3VzYWJsZUVsZW1zLmNvbmNhdChcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21Ecm9wQ29tLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVJhbmdlU3RhcnRDb20uZ2V0Rm9jdXNhYmxlRWxlbXMoKSxcclxuICAgICAgICAgICAgdGhpcy5kYXRlUmFuZ2VFbmRDb20uZ2V0Rm9jdXNhYmxlRWxlbXMoKSxcclxuICAgICAgICAgICAgdGhpcy5nZXRCdXR0b25zKClcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNhYmxlRWxlbXMoZWxlbXNOb2RlTGlzdCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEJ1dHRvbnMoKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uczogTm9kZUxpc3QgPSB0aGlzLmN1c3RvbURyb3BDb20ubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbdGlCdXR0b25dJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGJ1dHRvbnMpO1xyXG4gICAgfVxyXG4gICAgLy8g5pel5pyf5a+56LGh6L2s5a2X56ym5LiyXHJcbiAgICBwcml2YXRlIGZvcm1hdERhdGUyU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkRGF0ZShkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRpTG9jYWxlRm9ybWF0LmZvcm1hdERhdGUoZGF0ZSwgdGhpcy5zZWxlY3RlZEl0ZW0uZm9ybWF0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVRhZ0J5VmFsdWVQYW5lbCgpOiB2b2lkIHtcclxuICAgICAgICBsZXQgdGFnVmFsdWU6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIC8vIOWNlemAieWkjemAiVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICB0YWdWYWx1ZSA9IHRoaXMudmFsdWVEcm9wU2VsZWN0ZWRzLnJlZHVjZSgoYWNjOiBzdHJpbmcsIGN1cjogVHBTZWFyY2hib3hPcHRpb24sIGluZGV4OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID09PSAwID8gY3VyLmxhYmVsIDogYCR7YWNjfSB8ICR7Y3VyLmxhYmVsfWA7XHJcbiAgICAgICAgICAgIH0sICcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YWdWYWx1ZSA9IHRoaXMudmFsdWVEcm9wU2VsZWN0ZWQubGFiZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1RhZ0V4aXN0KHRoaXMuc2VsZWN0ZWRJdGVtLCB0YWdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdlbmVyYXRlVGFnKHRoaXMuc2VsZWN0ZWRJdGVtLCB0YWdWYWx1ZSk7XHJcbiAgICAgICAgLy8gY2hhbmdlIOS6i+S7tlxyXG4gICAgICAgIHRoaXMuZW1pdENoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgLy8g5b2T5YmN6KaB55Sf5oiQ55qEdGFn5piv5ZCm5bey57uP5a2Y5ZyoXHJcbiAgICBwcml2YXRlIGlzVGFnRXhpc3Qoc2VsZWN0ZWRJdGVtOiBUcFNlYXJjaGJveEl0ZW0sIHRhZ1ZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvLyDmlrDpgInkuK3nmoR0YWfmmK/lkKblt7Lnu4/lrZjlnKhcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFRhZ0luZGV4OiBudW1iZXIgPSB0aGlzLm1vZGVsLmZpbmRJbmRleCgodGFnOiBUcFNlYXJjaGJveFRhZyk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFnLmZpZWxkID09PSBzZWxlY3RlZEl0ZW0uZmllbGQgJiYgdGFnLnZhbHVlID09PSB0YWdWYWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkVGFnSW5kZXggIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxhYmVsIOexu+Wei+eahOagh+etvu+8jOWPqumAieaLqeS4gOasoVxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVRhZ0J5UHJvcERyb3Aob3B0aW9uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBuZXdUYWc6IFRwU2VhcmNoYm94VGFnID0ge1xyXG4gICAgICAgICAgICBmaWVsZDogb3B0aW9uLmZpZWxkLFxyXG4gICAgICAgICAgICBsYWJlbDogb3B0aW9uLmxhYmVsLFxyXG4gICAgICAgICAgICB2YWx1ZTogJycsXHJcbiAgICAgICAgICAgIHR5cGU6ICdub1ZhbHVlJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSBbbmV3VGFnXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Y+q5pyJ5LiA5LiqbGFiZWznsbvlnovnmoR0YWdcclxuICAgICAgICBjb25zdCBpbmRleDogbnVtYmVyID0gdGhpcy5tb2RlbC5maW5kSW5kZXgoKHRhZzogVHBTZWFyY2hib3hUYWcpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhZy50eXBlID09PSAnbm9WYWx1ZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5a2Y5Zyo5qCH562+5pe25pu/5o2i77yM5LiN5a2Y5Zyo5pe25re75Yqg5Yiw5pyA5ZCOXHJcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnNwbGljZShpbmRleCwgMSwgbmV3VGFnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnB1c2gobmV3VGFnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIOeUn+aIkHRhZ1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVRhZyhzZWxlY3RlZEl0ZW06IFRwU2VhcmNoYm94SXRlbSwgdGFnVmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCBuZXdUYWc6IFRwU2VhcmNoYm94VGFnID0ge1xyXG4gICAgICAgICAgICBmaWVsZDogc2VsZWN0ZWRJdGVtLmZpZWxkLFxyXG4gICAgICAgICAgICBsYWJlbDogc2VsZWN0ZWRJdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGFnVmFsdWUsXHJcbiAgICAgICAgICAgIHR5cGU6IHNlbGVjdGVkSXRlbS50eXBlXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyDlpoLmnpzpgInkuK1maWVsZOS4reiuvue9ruS6hm9wdGlvblZhbHVlS2V577yM57uZ55Sf5oiQdGFnIOa3u+WKoOmineWklueahGtleSwg5Y2V6YCJ5Li65a2X56ym5Liy77yM5aSN6YCJ5Li65a2X56ym5Liy5pWw57uEXHJcbiAgICAgICAgaWYoc2VsZWN0ZWRJdGVtLm9wdGlvblZhbHVlS2V5KXtcclxuICAgICAgICAgICAgdGhpcy5hZGRPdGhlck9wdGlvbktleShuZXdUYWcsIHNlbGVjdGVkSXRlbS5vcHRpb25WYWx1ZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKG5ld1RhZywgc2VsZWN0ZWRJdGVtKTtcclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFkZE90aGVyT3B0aW9uS2V5KHRhZzogVHBTZWFyY2hib3hUYWcsIHZhbHVlS2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyDlj6rlr7nljZXpgInlkozlpI3pgInlgZrlpITnkIZcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ2NoZWNrYm94JyAmJiB0aGlzLnZhbHVlRHJvcFNlbGVjdGVkcykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlRHJvcFNlbGVjdGVkcy5mb3JFYWNoKChvcHRpb246IFRwU2VhcmNoYm94T3B0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0YWdbdmFsdWVLZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhZ1t2YWx1ZUtleV0ucHVzaChvcHRpb25bdmFsdWVLZXldKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWdbdmFsdWVLZXldID0gW29wdGlvblt2YWx1ZUtleV1dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkSXRlbS50eXBlID09PSAncmFkaW8nICYmIHRoaXMudmFsdWVEcm9wU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGFnW3ZhbHVlS2V5XSA9IHRoaXMudmFsdWVEcm9wU2VsZWN0ZWRbdmFsdWVLZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU1vZGVsKG5ld1RhZzogVHBTZWFyY2hib3hUYWcsIHNlbGVjdGVkSXRlbTogVHBTZWFyY2hib3hJdGVtKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gW25ld1RhZ107XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDnvJbovpHmqKHlvI9cclxuICAgICAgICBpZiAodGhpcy5lZGl0aW5nVGFnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRpbmdUYWdJbmRleDogbnVtYmVyID0gdGhpcy5tb2RlbC5maW5kSW5kZXgoKHRhZzogVHBTZWFyY2hib3hUYWcpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YWcuZmllbGQgPT09IHNlbGVjdGVkSXRlbS5maWVsZCAmJiB0YWcudmFsdWUgPT09IHRoaXMuZWRpdGluZ1RhZy52YWx1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc3BsaWNlKGVkaXRpbmdUYWdJbmRleCwgMSwgbmV3VGFnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0YWdz5Lit55u45ZCMZmllbGRcclxuICAgICAgICAgICAgY29uc3QgZmllbGRUYWdJbmRleDogbnVtYmVyID0gdGhpcy5tb2RlbC5maW5kSW5kZXgoKHRhZzogVHBTZWFyY2hib3hUYWcpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YWcuZmllbGQgPT09IHNlbGVjdGVkSXRlbS5maWVsZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHJhZGlvIOexu+Wei+WPr+S7peiuvue9ruaYr+WQpuabv+aNou+8jG1hcOm7mOiupOS4jeWPr+abv+aNoixcclxuICAgICAgICAgICAgaWYgKGZpZWxkVGFnSW5kZXggPT09IC0xIHx8IChzZWxlY3RlZEl0ZW0udHlwZSA9PT0gJ3JhZGlvJyAmJiBzZWxlY3RlZEl0ZW0ucmVwbGFjZSA9PT0gZmFsc2UpIHx8IHNlbGVjdGVkSXRlbS50eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5wdXNoKG5ld1RhZyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNwbGljZShmaWVsZFRhZ0luZGV4LCAxLCBuZXdUYWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIHByaXZhdGUgZW1pdENoYW5nZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5tb2RlbC5jb25jYXQoKTtcclxuICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKHRoaXMubW9kZWwpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRWYWx1ZURyb3BPcHRpb25zKGZpZWxkOiBzdHJpbmcpOiBBcnJheTxhbnk+IHtcclxuXHJcbiAgICAgICAgbGV0IG9wdGlvbnM6IEFycmF5PFRwU2VhcmNoYm94T3B0aW9uPiA9IHRoaXMuc2VsZWN0ZWRJdGVtICYmIEFycmF5LmlzQXJyYXkodGhpcy5zZWxlY3RlZEl0ZW0ub3B0aW9ucykgP1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbS5vcHRpb25zIDogW107XHJcbiAgICAgICAgLy8gbWFw57G75Z6L77yM5Yip55So5YiG57uE5qCH6aKY5pi+56S66Z2i5p2/5qCH6aKYXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtLnR5cGUgPT09ICdtYXAnKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+mAieS4reagh+etvueahOmUrlxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwU2VhcmNoYm94LnRhZ1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogdGhpcy5zZWxlY3RlZE9wdGlvbi5vcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cFNlYXJjaGJveC50YWdLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0aGlzLnNlbGVjdGVkSXRlbS5vcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55Sf5oiQ57uT5p6cIGZpbHRlcuWvueixoVxyXG4gICAgcHJpdmF0ZSBnZXRGaWx0ZXIoKTogVHBTZWFyY2hib3hGaWx0ZXIge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcjogVHBTZWFyY2hib3hGaWx0ZXIgPSB7fTtcclxuICAgICAgICB0aGlzLm1vZGVsLmZvckVhY2goKHRhZzogVHBTZWFyY2hib3hUYWcpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgLy8g5bey57uP5a2Y5Zyo77yM5ZCI5bm25LiA6LW3XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpbHRlclt0YWcuZmllbGRdKSkge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyW3RhZy5maWVsZF0gPSBmaWx0ZXJbdGFnLmZpZWxkXS5jb25jYXQodGFnLnZhbHVlLnNwbGl0KCd8JylcclxuICAgICAgICAgICAgICAgICAgICAubWFwKCh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJbdGFnLmZpZWxkXSA9IHRhZy52YWx1ZS5zcGxpdCgnfCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgodmFsdWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcjtcclxuICAgIH1cclxuICAgIC8vIOmAieS4reS4gOautWh0bWzvvIzkuInnp43mtY/op4jlmajmtYvor5XmraPluLhcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogcHJlZmVyLWZ1bmN0aW9uLW92ZXItbWV0aG9kXHJcbiAgICBwcml2YXRlIHNlbGVjdEhUTUxFbGVtZW50VGV4dChlbGVtOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJhbmdlOiBSYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XHJcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsZW0pO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbjogU2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgfVxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBtYXgtZmlsZS1saW5lLWNvdW50XHJcbn1cclxuIl19