import { Component, ContentChild, ElementRef, EventEmitter, Input, Output, Renderer2, SecurityContext, TemplateRef, ViewChild } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { TiBaseComponent, TiBrowser, TiLocale, Util } from '@cloud/tiny3';
/**
 * 价格计算器组件
 *
 * <example-url>../tinyplus3demo/#/pricecalc/pricecalc-all</example-url>
 */
export class TpPricecalcComponent extends TiBaseComponent {
    constructor(elementRef, renderer2, domSanitizer) {
        super(elementRef, renderer2);
        this.domSanitizer = domSanitizer;
        /**
         * 图标右侧文本
         *
         * 缺省值 : 价格计算器/price Calculator（国际化）
         */
        this.label = TiLocale.getLocaleWords().tpPricecalc.label;
        /**
         * 查看价格的链接地址
         */
        this.url = 'http://www.helpcenter.com/';
        /**
         * 点击链接前的事件接口
         */
        this.beforeClick = new EventEmitter();
        /**
         * @ignore
         */
        this.detailHrefBeforeText = TiLocale.getLocaleWords().tpPricecalc.detailHrefBeforeText;
        /**
         * @ignore
         */
        this.detailHrefText = TiLocale.getLocaleWords().tpPricecalc.detailHrefText;
        /**
         * @ignore
         */
        this.detailHrefAfterText = TiLocale.getLocaleWords().tpPricecalc.detailHrefAfterText;
    }
    /**
     * @ignore
     */
    onClick() {
        this.beforeClick.emit();
        setTimeout(() => {
            // 问题背景：给 form 标签上设置 rel="noopener noreferrer" 实际是不生效的，还是存在被新打开的页面的恶意带代码重定向原页面的安全漏洞的。
            // 解决方案：先用 window.open 打开一个新的页签窗口(this.blankTab)，然后利用 form 的 target 属性将表单提交到这个窗口中, 那么就可以获取到新窗口
            //          的window对象(window.open 的返回值)，将其 opener 属性置为 null，从而消除该安全漏洞。
            // 注意：该解决方案不适用于IE, IE 下暂未找到解决方案
            if (!TiBrowser.isIE()) {
                this.blankTab = Util.getUniqueId('new_tab'); // 确保是新的页签
                const newWindow = window.open(this.domSanitizer.sanitize(SecurityContext.URL, this.url), this.blankTab);
                if (newWindow) {
                    newWindow.opener = null;
                }
            }
            this.form.nativeElement.target = TiBrowser.isIE() ? '_blank' : this.blankTab;
            this.form.nativeElement.submit();
        }, 0);
    }
    ngOnInit() {
        super.ngOnInit();
        this.isNotDefaultUrl = !!this.values && this.url !== 'http://www.helpcenter.com/';
    }
}
TpPricecalcComponent.decorators = [
    { type: Component, args: [{
                selector: 'tp-pricecalc',
                template: "<!-- <form  #myform action=\"{{url}}\" method=\"{{method}}\" target=\"_blank\" rel=\"noopener noreferrer\">-->\r\n<!-- \u7ED9 form \u6807\u7B7E\u4E0A\u8BBE\u7F6E rel=\"noopener noreferrer\" \u5B9E\u9645\u662F\u4E0D\u751F\u6548\u7684\uFF0C\u8FD8\u662F\u5B58\u5728\u88AB\u65B0\u6253\u5F00\u7684\u9875\u9762\u7684\u6076\u610F\u5E26\u4EE3\u7801\u91CD\u5B9A\u5411\u539F\u9875\u9762\u7684\u5B89\u5168\u6F0F\u6D1E\u7684\uFF0C\u6240\u4EE5\u91C7\u7528\u5176\u4ED6\u65B9\u5F0F\u89E3\u51B3 form \u7684\u8BE5\u5B89\u5168\u6F0F\u6D1E\uFF0C\u8BE6\u89C1ts\u4E2D\u7684\u6CE8\u89E3 -->\r\n<form  #myform action=\"{{url}}\" method=\"{{method}}\">\r\n    <input type=\"hidden\" *ngFor=\"let item of values\" name=\"{{item.key}}\" value=\"{{item.value}}\">\r\n    <input type=\"submit\" style=\"display: none;\" value=\"{{label}}\">\r\n</form>\r\n<span>\r\n    <tp-icon local name='cloud-action-calculator' class=\"calculator\"></tp-icon>\r\n    <ng-container *ngIf=\"isNotDefaultUrl\">\r\n        <a tiNavigation (click)=\"onClick()\"  href=\"javascript:void(0)\" oncontextmenu=\"return false\" [id]=\"appendId('label')\">{{label}}</a>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!isNotDefaultUrl\">\r\n        <a tiNavigation target=\"_blank\" rel=\"noopener noreferrer\" href=\"{{url}}\" [id]=\"appendId('label')\">{{label}}</a>\r\n    </ng-container>\r\n</span>\r\n<!-- \u8BF4\u660E\u6587\u5B57 -->\r\n<ng-container *ngIf=\"detailTemplate else defaultDetailTemplate\">\r\n    <span class=\"detail\" [id]=\"appendId('text')\">\r\n        <ng-container *ngTemplateOutlet=\"detailTemplate\">\r\n        </ng-container>\r\n    </span>\r\n</ng-container>\r\n\r\n<ng-template #defaultDetailTemplate>\r\n    <ng-container *ngIf=\"detailHref\">\r\n        <span class=\"detail\">\r\n            <span>{{detailHrefBeforeText}}</span><!--\r\n         --><a tiNavigation href=\"{{detailHref}}\" target=\"_blank\" rel=\"noopener noreferrer\">{{detailHrefText}}</a><!--\r\n         --><span>{{detailHrefAfterText}}</span>\r\n        </span>\r\n    </ng-container>\r\n</ng-template>",
                styles: [".calculator{color:var(--ti-common-color-text-link);margin-right:5px}.detail{display:inline-block;margin-left:var(--ti-common-space-2x)}"]
            },] }
];
TpPricecalcComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: DomSanitizer }
];
TpPricecalcComponent.propDecorators = {
    label: [{ type: Input }],
    detailHref: [{ type: Input }],
    values: [{ type: Input }],
    url: [{ type: Input }],
    method: [{ type: Input }],
    beforeClick: [{ type: Output }],
    form: [{ type: ViewChild, args: ['myform', { static: true },] }],
    detailTemplate: [{ type: ContentChild, args: ['detail', { static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBQcmljZWNhbGNDb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueXBsdXMzL2NvbXBvbmVudHMvcHJpY2VjYWxjL1RwUHJpY2VjYWxjQ29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckosT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFVMUU7Ozs7R0FJRztBQU1ILE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxlQUFlO0lBNERyRCxZQUFZLFVBQXNCLEVBQUUsU0FBb0IsRUFBVSxZQUEwQjtRQUN4RixLQUFLLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRGlDLGlCQUFZLEdBQVosWUFBWSxDQUFjO1FBM0Q1Rjs7OztXQUlHO1FBQ00sVUFBSyxHQUFXLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO1FBYXJFOztXQUVHO1FBQ00sUUFBRyxHQUFXLDRCQUE0QixDQUFDO1FBS3BEOztXQUVHO1FBQ2dCLGdCQUFXLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFTNUU7O1dBRUc7UUFDSSx5QkFBb0IsR0FBVyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUMsV0FBVyxDQUFDLG9CQUFvQixDQUFDO1FBQ2pHOztXQUVHO1FBQ0ksbUJBQWMsR0FBVyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQztRQUNyRjs7V0FFRztRQUNJLHdCQUFtQixHQUFXLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUM7SUFZL0YsQ0FBQztJQUNEOztPQUVHO0lBQ0ksT0FBTztRQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFeEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLHFGQUFxRjtZQUNyRiw4RkFBOEY7WUFDOUYsc0VBQXNFO1lBQ3RFLCtCQUErQjtZQUMvQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUNuQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVO2dCQUN2RCxNQUFNLFNBQVMsR0FBUSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDN0csSUFBSSxTQUFTLEVBQUU7b0JBQ1gsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7aUJBQzNCO2FBQ0o7WUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDN0UsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDckMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ1YsQ0FBQztJQUVELFFBQVE7UUFDSixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxLQUFLLDRCQUE0QixDQUFDO0lBQ3RGLENBQUM7OztZQTlGSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLGNBQWM7Z0JBQ3hCLHdoRUFBK0I7O2FBRWxDOzs7WUFyQmlDLFVBQVU7WUFBK0IsU0FBUztZQUMzRSxZQUFZOzs7b0JBMkJoQixLQUFLO3lCQUtMLEtBQUs7cUJBT0wsS0FBSztrQkFJTCxLQUFLO3FCQUlMLEtBQUs7MEJBSUwsTUFBTTttQkFJTixTQUFTLFNBQUMsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs2QkFJcEMsWUFBWSxTQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBSZW5kZXJlcjIsIFNlY3VyaXR5Q29udGV4dCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgVGlCYXNlQ29tcG9uZW50LCBUaUJyb3dzZXIsIFRpTG9jYWxlLCBVdGlsIH0gZnJvbSAnQGNsb3VkL3RpbnkzJztcclxuXHJcbi8vIOmFjee9rnZhbHVlc+aOpeWPo+S4lFVSTOS4jeaYr+m7mOiupOeahOW4ruWKqeS4reW/g+mTvuaOpeaXtu+8jOe7hOS7tuWIm+W7uuihqOWNle+8jOWwhnZhbHVl5pWw5o2u5o+Q5Lqk5Yiw6YWN572u55qEVVJM5Zyw5Z2A77ybXHJcbi8vIOWQpuWIme+8jOe7hOS7tuS4jeWIm+W7uuihqOWNle+8jOeCueWHu+ebtOaOpei3s+i9rOWIsOW4ruWKqeS4reW/g++8jOafpeeci+S6p+WTgeivpuaDhVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUcFByaWNlY2FsY1BhcmFtIHtcclxuICAgIHZhbHVlOiBzdHJpbmc7XHJcbiAgICBrZXk6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIOS7t+agvOiuoeeul+WZqOe7hOS7tlxyXG4gKlxyXG4gKiA8ZXhhbXBsZS11cmw+Li4vdGlueXBsdXMzZGVtby8jL3ByaWNlY2FsYy9wcmljZWNhbGMtYWxsPC9leGFtcGxlLXVybD5cclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0cC1wcmljZWNhbGMnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3ByaWNlY2FsYy5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3ByaWNlY2FsYy5sZXNzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFRwUHJpY2VjYWxjQ29tcG9uZW50IGV4dGVuZHMgVGlCYXNlQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICog5Zu+5qCH5Y+z5L6n5paH5pysXHJcbiAgICAgKlxyXG4gICAgICog57y655yB5YC8IDog5Lu35qC86K6h566X5ZmoL3ByaWNlIENhbGN1bGF0b3LvvIjlm73pmYXljJbvvIlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbGFiZWw6IHN0cmluZyA9IFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBQcmljZWNhbGMubGFiZWw7XHJcbiAgICAvKipcclxuICAgICAqIOafpeeci+ivpuaDheeahOmTvuaOpeWcsOWdgFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgZGV0YWlsSHJlZjogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l6K+i55qE5Lqn5ZOB5L+h5oGvXHJcbiAgICAgKlxyXG4gICAgICog57G75Z6L5Li65a+56LGh5pWw57uE77yM5a+56LGh5YyF5ZCr5Lik5Liq5bGe5oCn77yaa2V55ZKMdmFsdWXvvIh1cmzlnLDlnYDlj4LmlbDlvaLlvI/kuLprZXkxPXZhbHVlMSZrZXkyPXZhbHVlMu+8iVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSB2YWx1ZXM6IEFycmF5PFRwUHJpY2VjYWxjUGFyYW0+O1xyXG4gICAgLyoqXHJcbiAgICAgKiDmn6XnnIvku7fmoLznmoTpk77mjqXlnLDlnYBcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgdXJsOiBzdHJpbmcgPSAnaHR0cDovL3d3dy5oZWxwY2VudGVyLmNvbS8nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDooajljZXlkJF1cmzlnLDlnYDnmoTmj5DkuqTmlrnlvI9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbWV0aG9kOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOeCueWHu+mTvuaOpeWJjeeahOS6i+S7tuaOpeWPo1xyXG4gICAgICovXHJcbiAgICBAT3V0cHV0KCkgcmVhZG9ubHkgYmVmb3JlQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgQFZpZXdDaGlsZCgnbXlmb3JtJywgeyBzdGF0aWM6IHRydWUgfSkgZm9ybTogRWxlbWVudFJlZjtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBAQ29udGVudENoaWxkKCdkZXRhaWwnLCB7IHN0YXRpYzogdHJ1ZSB9KSBkZXRhaWxUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGV0YWlsSHJlZkJlZm9yZVRleHQ6IHN0cmluZyA9IFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBQcmljZWNhbGMuZGV0YWlsSHJlZkJlZm9yZVRleHQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRldGFpbEhyZWZUZXh0OiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwUHJpY2VjYWxjLmRldGFpbEhyZWZUZXh0O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXRhaWxIcmVmQWZ0ZXJUZXh0OiBzdHJpbmcgPSBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwUHJpY2VjYWxjLmRldGFpbEhyZWZBZnRlclRleHQ7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzTm90RGVmYXVsdFVybDogYm9vbGVhbjtcclxuICAgIC8qKlxyXG4gICAgICog5o+Q5LqkIGZvcm0g5pe25paw5omT5byA55qE6aG1562+56qX5Y+j5ZCNXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYmxhbmtUYWI6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50UmVmOiBFbGVtZW50UmVmLCByZW5kZXJlcjI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBkb21TYW5pdGl6ZXI6IERvbVNhbml0aXplcikge1xyXG4gICAgICAgIHN1cGVyKGVsZW1lbnRSZWYsIHJlbmRlcmVyMik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uQ2xpY2soKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5iZWZvcmVDbGljay5lbWl0KCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDpl67popjog4zmma/vvJrnu5kgZm9ybSDmoIfnrb7kuIrorr7nva4gcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIOWunumZheaYr+S4jeeUn+aViOeahO+8jOi/mOaYr+WtmOWcqOiiq+aWsOaJk+W8gOeahOmhtemdoueahOaBtuaEj+W4puS7o+eggemHjeWumuWQkeWOn+mhtemdoueahOWuieWFqOa8j+a0nueahOOAglxyXG4gICAgICAgICAgICAvLyDop6PlhrPmlrnmoYjvvJrlhYjnlKggd2luZG93Lm9wZW4g5omT5byA5LiA5Liq5paw55qE6aG1562+56qX5Y+jKHRoaXMuYmxhbmtUYWIp77yM54S25ZCO5Yip55SoIGZvcm0g55qEIHRhcmdldCDlsZ7mgKflsIbooajljZXmj5DkuqTliLDov5nkuKrnqpflj6PkuK0sIOmCo+S5iOWwseWPr+S7peiOt+WPluWIsOaWsOeql+WPo1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICDnmoR3aW5kb3flr7nosaEod2luZG93Lm9wZW4g55qE6L+U5Zue5YC8Ke+8jOWwhuWFtiBvcGVuZXIg5bGe5oCn572u5Li6IG51bGzvvIzku47ogIzmtojpmaTor6XlronlhajmvI/mtJ7jgIJcclxuICAgICAgICAgICAgLy8g5rOo5oSP77ya6K+l6Kej5Yaz5pa55qGI5LiN6YCC55So5LqOSUUsIElFIOS4i+aaguacquaJvuWIsOino+WGs+aWueahiFxyXG4gICAgICAgICAgICBpZiAoIVRpQnJvd3Nlci5pc0lFKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmxhbmtUYWIgPSBVdGlsLmdldFVuaXF1ZUlkKCduZXdfdGFiJyk7IC8vIOehruS/neaYr+aWsOeahOmhteetvlxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3V2luZG93OiBhbnkgPSB3aW5kb3cub3Blbih0aGlzLmRvbVNhbml0aXplci5zYW5pdGl6ZShTZWN1cml0eUNvbnRleHQuVVJMLCB0aGlzLnVybCksIHRoaXMuYmxhbmtUYWIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1dpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1dpbmRvdy5vcGVuZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybS5uYXRpdmVFbGVtZW50LnRhcmdldCA9IFRpQnJvd3Nlci5pc0lFKCkgPyAnX2JsYW5rJyA6IHRoaXMuYmxhbmtUYWI7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybS5uYXRpdmVFbGVtZW50LnN1Ym1pdCgpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nT25Jbml0KCk7XHJcbiAgICAgICAgdGhpcy5pc05vdERlZmF1bHRVcmwgPSAhIXRoaXMudmFsdWVzICYmIHRoaXMudXJsICE9PSAnaHR0cDovL3d3dy5oZWxwY2VudGVyLmNvbS8nO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==