import { Component, Input } from '@angular/core';
// tslint:disable-next-line: no-implicit-dependencies
import { TiBaseComponent, TiLocale } from '@cloud/tiny3';
import { TpDatePipe } from '../../pipes/locale/TpDatePipe';
/**
 * 表格倒计时组件
 *
 * <example-url>../tinyplus3demo/#/count/count-all</example-url>
 */
export class TpCountTimeComponent extends TiBaseComponent {
    constructor() {
        super(...arguments);
        /**
         * @ignore
         * 内部使用，only 单独使用，combine 和tp-count-state 一起使用
         */
        this.pattern = 'only';
        /**
         * @ignore
         * 倒计时最后显示的文本
         */
        this.countdownText = '';
        /**
         * @ignore
         * tip 的内容
         */
        this.tipContext = [];
        /**
         * @ignore
         * tip 的最大宽度
         */
        this.tipMaxWidth = '500px';
    }
    // tslint:disable-next-line: use-life-cycle-interface
    ngOnInit() {
        super.ngOnInit();
        // 生成倒计时内容
        this.generateContent();
        // 生成tip内容
        if (this.showTip()) {
            this.generateTipContent();
        }
    }
    // tslint:disable-next-line: use-life-cycle-interface
    ngOnChanges(changes) {
        super.ngOnChanges(changes);
        // 倒计时内容跟countDownCode和countDownInfos有关
        // 倒计时的颜色提示类别跟countDownCode和countDownInfos有关
        // 倒计时tip提示内容跟 countDownCode和countDownTips有关
        if (changes['countDownCode'] && !changes['countDownCode'].firstChange) {
            this.generateContent();
            this.updateStateLevel();
            this.generateTipContent();
            return;
        }
        if (changes['countDownInfos'] && !changes['countDownInfos'].firstChange) {
            this.generateContent();
            this.updateStateLevel();
        }
        if (changes['countDownTips'] && !changes['countDownTips'].firstChange) {
            this.generateTipContent();
        }
    }
    /**
     * @ignore
     * 是否需要tip
     */
    showTip() {
        // tp-count-time 单独使用且资源倒计时不是按需使用状态
        return this.countDownTips && this.countDownCode !== 'hws_countdown_ondemand_using';
    }
    /**
     * 生成倒计时内容
     */
    generateContent() {
        // 时间间隔
        let timespan = '';
        // 时间信息
        let hourInfo = '';
        let minuteInfo = '';
        //  根据返回时间拼接出时间间隔  {d} 天数 {h} 小时数 {m} 分钟数
        if (this.countDownInfos) {
            if (this.countDownInfos.nextOperationRemainingDay) {
                timespan = this.countDownInfos.nextOperationRemainingDay > 1 ?
                    TiLocale.getLocaleWords().tpCountdown.day
                        .replace(/{d}/, this.countDownInfos.nextOperationRemainingDay) :
                    TiLocale.getLocaleWords().tpCountdown.day
                        .replace(/s/, '')
                        .replace(/{d}/, this.countDownInfos.nextOperationRemainingDay);
            }
            else if (this.countDownInfos.nextOperationRemainingHour) {
                hourInfo = this.countDownInfos.nextOperationRemainingHour > 1 ?
                    TiLocale.getLocaleWords().tpCountdown.hour
                        .replace(/{h}/, this.countDownInfos.nextOperationRemainingHour) :
                    TiLocale.getLocaleWords().tpCountdown.hour
                        .replace(/s/, '')
                        .replace(/{h}/, this.countDownInfos.nextOperationRemainingHour);
                minuteInfo = this.countDownInfos.nextOperationRemainingMinute > 1 ?
                    TiLocale.getLocaleWords().tpCountdown.minute
                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute) :
                    TiLocale.getLocaleWords().tpCountdown.minute
                        .replace(/s/, '')
                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute);
                timespan = `${hourInfo} ${minuteInfo}`;
            }
            else if (this.countDownInfos.nextOperationRemainingMinute) {
                timespan = this.countDownInfos.nextOperationRemainingMinute > 1 ?
                    TiLocale.getLocaleWords().tpCountdown.minute
                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute) :
                    TiLocale.getLocaleWords().tpCountdown.minute
                        .replace(/s/, '')
                        .replace(/{m}/, this.countDownInfos.nextOperationRemainingMinute);
            }
            else if (this.countDownInfos.nextOperationRemainingSecond) {
                timespan = TiLocale.getLocaleWords().tpCountdown.second;
            }
        }
        // 根据状态码，得到倒计时整体字符串。 {TS} 时间间隔
        const statusKey = this.countDownCode ? this.countDownCode.slice(14) : '';
        if (TiLocale.getLocaleWords().tpCount[statusKey]) {
            this.countdownText = TiLocale.getLocaleWords().tpCount[statusKey]
                .replace(/{TS}/, timespan);
        }
        // 如果是按需正常使用，没有倒计时，只提示创建时间，单独处理 {ymdhms} 是 格式为yyyy/mm/dd  hh:mm:ss 日期时间
        if (this.countDownCode === 'hws_countdown_ondemand_using') {
            // tslint:disable-next-line: max-line-length
            this.countdownText = this.countdownText.replace(/{ymdhms}/, new TpDatePipe().transform(this.countDownInfos.createTime, 'dateTimeZone'));
        }
        // 更新样式提示
        this.updateStateLevel();
    }
    updateStateLevel() {
        // 添加样式类 宽限期，冻结期，违规冻结 提示红色，正常使用，如果小于七天，提示黄色
        if (this.countDownInfos.status > 2) {
            this.stateLevel = 'alarm';
        }
        else if ((this.countDownCode === 'hws_countdown_period_using' || this.countDownCode === 'hws_countdown_period_toondemand')
            && this.isDayLess7()) {
            this.stateLevel = 'warn';
        }
    }
    // 倒计时是否小于七天
    isDayLess7() {
        return !(this.countDownInfos.nextOperationRemainingDay && this.countDownInfos.nextOperationRemainingDay > 7);
    }
    /**
     * @ignore
     * 生成tips 内容
     */
    generateTipContent() {
        // 当tp-count-time 作为 tp-count 子元素时不传countDownTips
        if (!this.countDownTips) {
            return;
        }
        this.tipContext = [];
        switch (this.countDownCode) {
            case 'hws_countdown_period_using':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,
                    time: `${this.countDownTips.effTime}`
                });
                this.tipContext.push({
                    title: ` ${TiLocale.getLocaleWords().tpCountdown.expire_time} `,
                    time: `${this.countDownTips.expTime}`
                });
                break;
            case 'hws_countdown_period_gracing':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.expire_time}`,
                    time: `${this.countDownTips.expTime}`
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,
                    time: `${this.countDownTips.graceTime}`
                });
                break;
            case 'hws_countdown_period_frozen':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,
                    time: `${this.countDownTips.frozenTime}`
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,
                    time: `${this.countDownTips.releaseTime}`
                });
                break;
            case 'hws_countdown_period_illegalfrozen':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,
                    time: `${this.countDownTips.frozenTime}`
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,
                    time: `${this.countDownTips.releaseTime}`
                });
                break;
            case 'hws_countdown_period_policefrozen':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time} `,
                    time: `${this.countDownTips.frozenTime}`
                });
                break;
            case 'hws_countdown_period_toondemand':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.create_time}`,
                    time: `${this.countDownTips.effTime}`
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.toonneed_time}`,
                    time: `${this.countDownTips.expTime}`
                });
                break;
            case 'hws_countdown_ondemand_using':
                // 按需正在使用不添加tip
                break;
            case 'hws_countdown_ondemand_gracing':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.arrears_time}`,
                    time: `${this.countDownTips.expTime}`
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,
                    time: `${this.countDownTips.graceTime}`
                });
                break;
            case 'hws_countdown_ondemand_frozen':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,
                    time: `${this.countDownTips.frozenTime}`
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time} `,
                    time: `${this.countDownTips.releaseTime}`
                });
                break;
            case 'hws_countdown_ondemand_illegalfrozen':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,
                    time: `${this.countDownTips.frozenTime}`
                });
                break;
            case 'hws_countdown_ondemand_illegalfrozen_arrear':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,
                    time: ` ${this.countDownTips.frozenTime} `
                });
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.release_time}`,
                    time: `${this.countDownTips.releaseTime}`
                });
                break;
            case 'hws_countdown_ondemand_policefrozen':
                this.tipContext.push({
                    title: `${TiLocale.getLocaleWords().tpCountdown.frozen_time}`,
                    time: `${this.countDownTips.frozenTime}`
                });
                break;
            default:
                break;
        }
    }
}
TpCountTimeComponent.decorators = [
    { type: Component, args: [{
                selector: 'tp-count-time',
                template: "<!-- \u5355\u72EC\u4F7F\u7528\uFF0C\u5904\u7406\u6DFB\u52A0tip -->\r\n<ng-container *ngIf=\"pattern === 'only'\">\r\n    <!-- \u65E0\u8BBA\u6587\u672C\u662F\u5426\u6EA2\u51FA\uFF0C\u90FD\u8981\u6709tip \uFF0C\u4E14tip\u5185\u5BB9\u4E0D\u662F\u5143\u7D20\u5185\u6587\u672C -->\r\n    <span class=\"tp-count-time-text tp-count-time-underline\" *ngIf=\"showTip()\" [ngClass]=\"{'tp-count-warn': stateLevel === 'warn',\r\n        'tp-count-alarm' : stateLevel === 'alarm'}\" [tiTip]=\"tipContent\" [tiTipContext]='tipContext'\r\n        [tiTipMaxWidth]='tipMaxWidth' [id]=\"appendId('countdown_text')\">{{countdownText}}</span>\r\n    <!-- \u6587\u672C\u6EA2\u51FA\u65F6\u624D\u51FAtip,\u4E14tip\u5185\u5BB9\u4E3A\u5143\u7D20\u6587\u672C -->\r\n    <span class=\"tp-count-time-text\" *ngIf=\"!showTip()\" [id]=\"appendId('countdown_text')\"  tiOverflow>\r\n        {{countdownText}}\r\n    </span>\r\n</ng-container>\r\n<!-- \u5728tp-count \u4E2D\u548Ctp-count-state \u4E00\u8D77\u4F7F\u7528\u4E0D\u9700\u8981\u5904\u7406tip -->\r\n<ng-container *ngIf=\"pattern === 'combine'\">\r\n    <span  class=\"tp-count-time-text\" [id]=\"appendId('countdown_text')\">\r\n        {{countdownText}}\r\n    </span>\r\n</ng-container>\r\n<ng-template #tipContent let-context='context'>\r\n    <ng-container *ngFor=\"let item of context\">{{item.title}} {{item.time| tpDate: 'dateTimeZone'}}<br></ng-container>\r\n</ng-template>",
                host: {
                    // 标记 tp-count-time 是单独使用还是在tp-count中和tp-count-state一起使用
                    '[class.tp-count-time-only]': 'pattern === "only" '
                },
                styles: [":host{display:inline}:host.tp-count-time-only .tp-count-time-text{box-sizing:border-box;display:inline-block;max-width:100%}:host.tp-count-time-only .tp-count-time-text.tp-count-time-underline{border-bottom:1px dashed var(--ti-common-color-dash-line-normal);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]
            },] }
];
TpCountTimeComponent.propDecorators = {
    countDownCode: [{ type: Input }],
    countDownInfos: [{ type: Input }],
    countDownTips: [{ type: Input }],
    pattern: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHBDb3VudFRpbWVDb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9AY2xvdWQvdGlueXBsdXMzL2NvbXBvbmVudHMvY291bnQvVHBDb3VudFRpbWVDb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQ2hFLHFEQUFxRDtBQUNyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUV6RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFJM0Q7Ozs7R0FJRztBQVVILE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxlQUFlO0lBVHpEOztRQXNCSTs7O1dBR0c7UUFDTSxZQUFPLEdBQXVCLE1BQU0sQ0FBQztRQUU5Qzs7O1dBR0c7UUFDSSxrQkFBYSxHQUFXLEVBQUUsQ0FBQztRQU1sQzs7O1dBR0c7UUFDSSxlQUFVLEdBQVEsRUFBRSxDQUFDO1FBQzVCOzs7V0FHRztRQUNJLGdCQUFXLEdBQVcsT0FBTyxDQUFDO0lBNk96QyxDQUFDO0lBM09HLHFEQUFxRDtJQUNyRCxRQUFRO1FBQ0osS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2pCLFVBQVU7UUFDVixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsVUFBVTtRQUNWLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQ2hCLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1NBQzdCO0lBQ0wsQ0FBQztJQUVELHFEQUFxRDtJQUNyRCxXQUFXLENBQUMsT0FBc0I7UUFDOUIsS0FBSyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMzQix1Q0FBdUM7UUFDdkMsNENBQTRDO1FBQzVDLDRDQUE0QztRQUM1QyxJQUFJLE9BQU8sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE9B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QUU7b0JBQ0Ysd0RBQXdEO29CQUN4RCw0QkFBNEIsRUFBRSxxQkFBcUI7aUJBQ3REOzthQUNKOzs7NEJBS0ksS0FBSzs2QkFJTCxLQUFLOzRCQUlMLEtBQUs7c0JBS0wsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1pbXBsaWNpdC1kZXBlbmRlbmNpZXNcclxuaW1wb3J0IHsgVGlCYXNlQ29tcG9uZW50LCBUaUxvY2FsZSB9IGZyb20gJ0BjbG91ZC90aW55Myc7XHJcblxyXG5pbXBvcnQgeyBUcERhdGVQaXBlIH0gZnJvbSAnLi4vLi4vcGlwZXMvbG9jYWxlL1RwRGF0ZVBpcGUnO1xyXG5cclxuaW1wb3J0IHsgVHBDb3VudENvZGUsIFRwQ291bnREb3duU3RhdGVMZXZlbCwgVHBDb3VudEluZm9zLCBUcENvdW50VGlwcyB9IGZyb20gJy4vVHBDb3VudENvbXBvbmVudCc7XHJcblxyXG4vKipcclxuICog6KGo5qC85YCS6K6h5pe257uE5Lu2XHJcbiAqXHJcbiAqIDxleGFtcGxlLXVybD4uLi90aW55cGx1czNkZW1vLyMvY291bnQvY291bnQtYWxsPC9leGFtcGxlLXVybD5cclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0cC1jb3VudC10aW1lJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9jb3VudC10aW1lLmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vY291bnQtdGltZS5sZXNzJ10sXHJcbiAgICBob3N0OiB7XHJcbiAgICAgICAgLy8g5qCH6K6wIHRwLWNvdW50LXRpbWUg5piv5Y2V54us5L2/55So6L+Y5piv5ZyodHAtY291bnTkuK3lkox0cC1jb3VudC1zdGF0ZeS4gOi1t+S9v+eUqFxyXG4gICAgICAgICdbY2xhc3MudHAtY291bnQtdGltZS1vbmx5XSc6ICdwYXR0ZXJuID09PSBcIm9ubHlcIiAnXHJcbiAgICB9XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcENvdW50VGltZUNvbXBvbmVudCBleHRlbmRzIFRpQmFzZUNvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqIOWAkuiuoeaXtuexu+WIq++8jOWNs+WAkuiuoeaXtmNvdW50RG93bkNvZGXlrZfmrrVcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY291bnREb3duQ29kZTogVHBDb3VudENvZGU7XHJcbiAgICAvKipcclxuICAgICAqIOWAkuiuoeaXtuaVsOaNriwg5ZKMMi4yMeS6keacjeWKoeWAkuiuoeaXtuS/oeaBr+afpeivouaOpeWPo+i/lOWbnueahGNvdW50RG93bkluZm9z5LiA6Ie0XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNvdW50RG93bkluZm9zOiBUcENvdW50SW5mb3M7XHJcbiAgICAvKipcclxuICAgICAqIHRpcOaPkOekuuaVsOaNru+8jOWSjDIuMjHkupHmnI3liqHlgJLorqHml7bkv6Hmga/mn6Xor6LmjqXlj6Pov5Tlm57nmoRUcENvdW50RG93blRpcHPkuIDoh7RcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY291bnREb3duVGlwczogVHBDb3VudFRpcHM7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOWGhemDqOS9v+eUqO+8jG9ubHkg5Y2V54us5L2/55So77yMY29tYmluZSDlkox0cC1jb3VudC1zdGF0ZSDkuIDotbfkvb/nlKhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcGF0dGVybjogJ29ubHknIHwgJ2NvbWJpbmUnID0gJ29ubHknO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5YCS6K6h5pe25pyA5ZCO5pi+56S655qE5paH5pysXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb3VudGRvd25UZXh0OiBzdHJpbmcgPSAnJztcclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5paH5a2X5o+Q56S655qE6aKc6Imy562J57qnXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0ZUxldmVsOiBUcENvdW50RG93blN0YXRlTGV2ZWw7XHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIHRpcCDnmoTlhoXlrrlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRpcENvbnRleHQ6IGFueSA9IFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKiB0aXAg55qE5pyA5aSn5a695bqmXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0aXBNYXhXaWR0aDogc3RyaW5nID0gJzUwMHB4JztcclxuXHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHVzZS1saWZlLWN5Y2xlLWludGVyZmFjZVxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICAvLyDnlJ/miJDlgJLorqHml7blhoXlrrlcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ29udGVudCgpO1xyXG4gICAgICAgIC8vIOeUn+aIkHRpcOWGheWuuVxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUaXAoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlVGlwQ29udGVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHVzZS1saWZlLWN5Y2xlLWludGVyZmFjZVxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nT25DaGFuZ2VzKGNoYW5nZXMpO1xyXG4gICAgICAgIC8vIOWAkuiuoeaXtuWGheWuuei3n2NvdW50RG93bkNvZGXlkoxjb3VudERvd25JbmZvc+acieWFs1xyXG4gICAgICAgIC8vIOWAkuiuoeaXtueahOminOiJsuaPkOekuuexu+WIq+i3n2NvdW50RG93bkNvZGXlkoxjb3VudERvd25JbmZvc+acieWFs1xyXG4gICAgICAgIC8vIOWAkuiuoeaXtnRpcOaPkOekuuWGheWuuei3nyBjb3VudERvd25Db2Rl5ZKMY291bnREb3duVGlwc+acieWFs1xyXG4gICAgICAgIGlmIChjaGFuZ2VzWydjb3VudERvd25Db2RlJ10gJiYgIWNoYW5nZXNbJ2NvdW50RG93bkNvZGUnXS5maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ29udGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlTGV2ZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVRpcENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ2NvdW50RG93bkluZm9zJ10gJiYgIWNoYW5nZXNbJ2NvdW50RG93bkluZm9zJ10uZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUxldmVsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzWydjb3VudERvd25UaXBzJ10gJiYgIWNoYW5nZXNbJ2NvdW50RG93blRpcHMnXS5maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlVGlwQ29udGVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGlnbm9yZVxyXG4gICAgICog5piv5ZCm6ZyA6KaBdGlwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzaG93VGlwKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIHRwLWNvdW50LXRpbWUg5Y2V54us5L2/55So5LiU6LWE5rqQ5YCS6K6h5pe25LiN5piv5oyJ6ZyA5L2/55So54q25oCBXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnREb3duVGlwcyAmJiB0aGlzLmNvdW50RG93bkNvZGUgIT09ICdod3NfY291bnRkb3duX29uZGVtYW5kX3VzaW5nJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeUn+aIkOWAkuiuoeaXtuWGheWuuVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlQ29udGVudCgpOiB2b2lkIHtcclxuICAgICAgICAvLyDml7bpl7Tpl7TpmpRcclxuICAgICAgICBsZXQgdGltZXNwYW46IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIC8vIOaXtumXtOS/oeaBr1xyXG4gICAgICAgIGxldCBob3VySW5mbzogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgbGV0IG1pbnV0ZUluZm86IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIC8vICDmoLnmja7ov5Tlm57ml7bpl7Tmi7zmjqXlh7rml7bpl7Tpl7TpmpQgIHtkfSDlpKnmlbAge2h9IOWwj+aXtuaVsCB7bX0g5YiG6ZKf5pWwXHJcbiAgICAgICAgaWYgKHRoaXMuY291bnREb3duSW5mb3MpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY291bnREb3duSW5mb3MubmV4dE9wZXJhdGlvblJlbWFpbmluZ0RheSkge1xyXG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdEYXkgPiAxID9cclxuICAgICAgICAgICAgICAgICAgICBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmRheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgve2R9LywgdGhpcy5jb3VudERvd25JbmZvcy5uZXh0T3BlcmF0aW9uUmVtYWluaW5nRGF5KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5kYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3MvLCAnJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3tkfS8sIHRoaXMuY291bnREb3duSW5mb3MubmV4dE9wZXJhdGlvblJlbWFpbmluZ0RheSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb3VudERvd25JbmZvcy5uZXh0T3BlcmF0aW9uUmVtYWluaW5nSG91cikge1xyXG4gICAgICAgICAgICAgICAgaG91ckluZm8gPSB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdIb3VyID4gMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5ob3VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97aH0vLCB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdIb3VyKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5ob3VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9zLywgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97aH0vLCB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdIb3VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtaW51dGVJbmZvID0gdGhpcy5jb3VudERvd25JbmZvcy5uZXh0T3BlcmF0aW9uUmVtYWluaW5nTWludXRlID4gMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5taW51dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3ttfS8sIHRoaXMuY291bnREb3duSW5mb3MubmV4dE9wZXJhdGlvblJlbWFpbmluZ01pbnV0ZSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24ubWludXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9zLywgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97bX0vLCB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdNaW51dGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gYCR7aG91ckluZm99ICR7bWludXRlSW5mb31gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY291bnREb3duSW5mb3MubmV4dE9wZXJhdGlvblJlbWFpbmluZ01pbnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdNaW51dGUgPiAxID9cclxuICAgICAgICAgICAgICAgICAgICBUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLm1pbnV0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgve219LywgdGhpcy5jb3VudERvd25JbmZvcy5uZXh0T3BlcmF0aW9uUmVtYWluaW5nTWludXRlKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5taW51dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3MvLCAnJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3ttfS8sIHRoaXMuY291bnREb3duSW5mb3MubmV4dE9wZXJhdGlvblJlbWFpbmluZ01pbnV0ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb3VudERvd25JbmZvcy5uZXh0T3BlcmF0aW9uUmVtYWluaW5nU2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IFRpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24uc2Vjb25kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmoLnmja7nirbmgIHnoIHvvIzlvpfliLDlgJLorqHml7bmlbTkvZPlrZfnrKbkuLLjgIIge1RTfSDml7bpl7Tpl7TpmpRcclxuICAgICAgICBjb25zdCBzdGF0dXNLZXk6IHN0cmluZyA9IHRoaXMuY291bnREb3duQ29kZSA/IHRoaXMuY291bnREb3duQ29kZS5zbGljZSgxNCkgOiAnJztcclxuICAgICAgICBpZiAoVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50W3N0YXR1c0tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudGRvd25UZXh0ID0gVGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50W3N0YXR1c0tleV1cclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97VFN9LywgdGltZXNwYW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5piv5oyJ6ZyA5q2j5bi45L2/55So77yM5rKh5pyJ5YCS6K6h5pe277yM5Y+q5o+Q56S65Yib5bu65pe26Ze077yM5Y2V54us5aSE55CGIHt5bWRobXN9IOaYryDmoLzlvI/kuLp5eXl5L21tL2RkICBoaDptbTpzcyDml6XmnJ/ml7bpl7RcclxuICAgICAgICBpZiAodGhpcy5jb3VudERvd25Db2RlID09PSAnaHdzX2NvdW50ZG93bl9vbmRlbWFuZF91c2luZycpIHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBtYXgtbGluZS1sZW5ndGhcclxuICAgICAgICAgICAgdGhpcy5jb3VudGRvd25UZXh0ID0gdGhpcy5jb3VudGRvd25UZXh0LnJlcGxhY2UoL3t5bWRobXN9LywgbmV3IFRwRGF0ZVBpcGUoKS50cmFuc2Zvcm0odGhpcy5jb3VudERvd25JbmZvcy5jcmVhdGVUaW1lLCAnZGF0ZVRpbWVab25lJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5pu05paw5qC35byP5o+Q56S6XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUxldmVsKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZVN0YXRlTGV2ZWwoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g5re75Yqg5qC35byP57G7IOWuvemZkOacn++8jOWGu+e7k+acn++8jOi/neinhOWGu+e7kyDmj5DnpLrnuqLoibLvvIzmraPluLjkvb/nlKjvvIzlpoLmnpzlsI/kuo7kuIPlpKnvvIzmj5DnpLrpu4ToibJcclxuICAgICAgICBpZiAodGhpcy5jb3VudERvd25JbmZvcy5zdGF0dXMgPiAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVMZXZlbCA9ICdhbGFybSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICgodGhpcy5jb3VudERvd25Db2RlID09PSAnaHdzX2NvdW50ZG93bl9wZXJpb2RfdXNpbmcnIHx8IHRoaXMuY291bnREb3duQ29kZSA9PT0gJ2h3c19jb3VudGRvd25fcGVyaW9kX3Rvb25kZW1hbmQnKVxyXG4gICAgICAgICAgICAmJiB0aGlzLmlzRGF5TGVzczcoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlTGV2ZWwgPSAnd2Fybic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWAkuiuoeaXtuaYr+WQpuWwj+S6juS4g+WkqVxyXG4gICAgcHJpdmF0ZSBpc0RheUxlc3M3KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhKHRoaXMuY291bnREb3duSW5mb3MubmV4dE9wZXJhdGlvblJlbWFpbmluZ0RheSAmJiB0aGlzLmNvdW50RG93bkluZm9zLm5leHRPcGVyYXRpb25SZW1haW5pbmdEYXkgPiA3KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqIOeUn+aIkHRpcHMg5YaF5a65XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZW5lcmF0ZVRpcENvbnRlbnQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g5b2TdHAtY291bnQtdGltZSDkvZzkuLogdHAtY291bnQg5a2Q5YWD57Sg5pe25LiN5LygY291bnREb3duVGlwc1xyXG4gICAgICAgIGlmICghdGhpcy5jb3VudERvd25UaXBzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aXBDb250ZXh0ID0gW107XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmNvdW50RG93bkNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnaHdzX2NvdW50ZG93bl9wZXJpb2RfdXNpbmcnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmNyZWF0ZV90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmVmZlRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmV4cGlyZV90aW1lfSBgLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5leHBUaW1lfWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2h3c19jb3VudGRvd25fcGVyaW9kX2dyYWNpbmcnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmV4cGlyZV90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmV4cFRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24uZnJvemVuX3RpbWV9IGAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmdyYWNlVGltZX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdod3NfY291bnRkb3duX3BlcmlvZF9mcm96ZW4nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmZyb3plbl90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmZyb3plblRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24ucmVsZWFzZV90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLnJlbGVhc2VUaW1lfWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2h3c19jb3VudGRvd25fcGVyaW9kX2lsbGVnYWxmcm96ZW4nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmZyb3plbl90aW1lfSBgLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5mcm96ZW5UaW1lfWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLnJlbGVhc2VfdGltZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5yZWxlYXNlVGltZX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdod3NfY291bnRkb3duX3BlcmlvZF9wb2xpY2Vmcm96ZW4nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmZyb3plbl90aW1lfSBgLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5mcm96ZW5UaW1lfWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2h3c19jb3VudGRvd25fcGVyaW9kX3Rvb25kZW1hbmQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmNyZWF0ZV90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmVmZlRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24udG9vbm5lZWRfdGltZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5leHBUaW1lfWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2h3c19jb3VudGRvd25fb25kZW1hbmRfdXNpbmcnOlxyXG4gICAgICAgICAgICAgICAgLy8g5oyJ6ZyA5q2j5Zyo5L2/55So5LiN5re75YqgdGlwXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnaHdzX2NvdW50ZG93bl9vbmRlbWFuZF9ncmFjaW5nJzpcclxuICAgICAgICAgICAgICAgIHRoaXMudGlwQ29udGV4dC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogYCR7VGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5hcnJlYXJzX3RpbWV9YCxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBgJHt0aGlzLmNvdW50RG93blRpcHMuZXhwVGltZX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGlwQ29udGV4dC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogYCR7VGlMb2NhbGUuZ2V0TG9jYWxlV29yZHMoKS50cENvdW50ZG93bi5mcm96ZW5fdGltZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5ncmFjZVRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnaHdzX2NvdW50ZG93bl9vbmRlbWFuZF9mcm96ZW4nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmZyb3plbl90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmZyb3plblRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24ucmVsZWFzZV90aW1lfSBgLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5yZWxlYXNlVGltZX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdod3NfY291bnRkb3duX29uZGVtYW5kX2lsbGVnYWxmcm96ZW4nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLmZyb3plbl90aW1lfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYCR7dGhpcy5jb3VudERvd25UaXBzLmZyb3plblRpbWV9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnaHdzX2NvdW50ZG93bl9vbmRlbWFuZF9pbGxlZ2FsZnJvemVuX2FycmVhcic6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24uZnJvemVuX3RpbWV9YCxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBgICR7dGhpcy5jb3VudERvd25UaXBzLmZyb3plblRpbWV9IGBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aXBDb250ZXh0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtUaUxvY2FsZS5nZXRMb2NhbGVXb3JkcygpLnRwQ291bnRkb3duLnJlbGVhc2VfdGltZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGAke3RoaXMuY291bnREb3duVGlwcy5yZWxlYXNlVGltZX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdod3NfY291bnRkb3duX29uZGVtYW5kX3BvbGljZWZyb3plbic6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENvbnRleHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke1RpTG9jYWxlLmdldExvY2FsZVdvcmRzKCkudHBDb3VudGRvd24uZnJvemVuX3RpbWV9YCxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBgJHt0aGlzLmNvdW50RG93blRpcHMuZnJvemVuVGltZX1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=