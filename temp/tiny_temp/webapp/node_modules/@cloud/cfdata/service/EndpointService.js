"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.EndpointService = void 0;
var ApiService_1 = require("./ApiService");
var HttpService_1 = require("./HttpService");
var FrameData_1 = require("../FrameData");
var EndpointService = /** @class */ (function (_super) {
    __extends(EndpointService, _super);
    function EndpointService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    EndpointService.queryEndpoints = function (options) {
        options = options || {};
        var promise = HttpService_1.HttpService.get({
            url: FrameData_1.FrameData.getAppWebPath() + '/rest/silvan/rest/v1.0/endpoints',
            timeout: 60000,
            params: {
                region: options.region,
                include: options.include,
            },
            targetUrl: 'silvan=/silvan/rest/v1.0/endpoints',
            headers: {
                'Frame-Domain-Type': ApiService_1.ApiService.getDomainType(),
            },
            cacheKey: {
                locale: FrameData_1.FrameData.getLanguage(),
                region: options.region,
                cfApiName: 'endpoints',
            },
            cacheTimeout: 604800,
            cacheResult: true,
        });
        return promise;
    };
    EndpointService.favoriteEndpoints = function (options) {
        options = options || {};
        var promise = HttpService_1.HttpService.get({
            url: {
                s: FrameData_1.FrameData.getAppWebPath() + '/rest/silvan/rest/v1.0/users/{user_id}/endpoints',
                o: {
                    user_id: options.user_id,
                },
            },
            mask: options.maskFlag || false,
            timeout: 60000,
            targetUrl: 'silvan=/silvan/rest/v1.0/users/' + options.user_id + '/endpoints',
            headers: {
                'Frame-Domain-Type': ApiService_1.ApiService.getDomainType(),
            },
        });
        return promise;
    };
    /**
     * @internal
     * Adds favorite endpoint
     * @param options
     * @returns
     */
    EndpointService.addFavoriteEndpoint = function (options) {
        options = options || {};
        var reqOptions = {
            url: {
                s: FrameData_1.FrameData.getAppWebPath() + '/rest/silvan/rest/v1.0/users/{user_id}/endpoints/{id}',
                o: {
                    user_id: options.user_id,
                    id: options.id,
                },
            },
            timeout: 60000,
            targetUrl: 'silvan=/silvan/rest/v1.0/users/' + options.user_id + '/endpoints/' + options.id,
            headers: {
                'Frame-Domain-Type': ApiService_1.ApiService.getDomainType(),
            },
        };
        // 清空收藏后刷新展示默认的收藏，之后首次点击添加收藏
        if (options.id === 'all') {
            Object.assign(reqOptions, { params: options.params });
        }
        var promise = HttpService_1.HttpService.post(reqOptions);
        return promise;
    };
    /**
     * @internal
     * Deletes favorite endpoint
     * @param options
     * @returns
     */
    EndpointService.deleteFavoriteEndpoint = function (options) {
        options = options || {};
        var promise;
        // 清空收藏后刷新展示默认的收藏，之后首次点击删除
        var reqOptions = {
            url: {
                s: FrameData_1.FrameData.getAppWebPath() + '/rest/silvan/rest/v1.0/users/{user_id}/endpoints/{id}',
                o: {
                    user_id: options.user_id,
                    id: options.id,
                },
            },
            timeout: 60000,
            targetUrl: 'silvan=/silvan/rest/v1.0/users/' + options.user_id + '/endpoints/' + options.id,
        };
        if (options.id === 'all') {
            Object.assign(reqOptions, {
                params: options.params,
            });
            promise = HttpService_1.HttpService.post(reqOptions);
        }
        else {
            promise = HttpService_1.HttpService.delete(reqOptions);
        }
        return promise;
    };
    /**
     * @internal
     * Sorts favorite endpoint
     * @param options
     * @returns
     */
    EndpointService.sortFavoriteEndpoint = function (options) {
        options = options || {};
        var promise = HttpService_1.HttpService.post({
            url: {
                s: FrameData_1.FrameData.getAppWebPath() + '/rest/silvan/rest/v1.0/users/{user_id}/endpoints/{id}',
                o: {
                    user_id: options.user_id,
                    id: 'all',
                },
            },
            timeout: 60000,
            params: {
                endpointResources: options.endpointResources,
            },
            targetUrl: 'silvan=/silvan/rest/v1.0/users/' + options.user_id + '/endpoints/' + options.id,
        });
        return promise;
    };
    return EndpointService;
}(ApiService_1.ApiService));
exports.EndpointService = EndpointService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW5kcG9pbnRTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlcnZpY2UvRW5kcG9pbnRTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBMEM7QUFDMUMsNkNBQTRDO0FBQzVDLDBDQUF5QztBQUV6QztJQUFxQyxtQ0FBVTtJQUEvQzs7SUFrSUEsQ0FBQztJQWpJaUIsOEJBQWMsR0FBNUIsVUFBNkIsT0FBTztRQUNoQyxPQUFPLEdBQUcsT0FBTyxJQUFJLEVBQUUsQ0FBQztRQUN4QixJQUFJLE9BQU8sR0FBRyx5QkFBVyxDQUFDLEdBQUcsQ0FBQztZQUMxQixHQUFHLEVBQUUscUJBQVMsQ0FBQyxhQUFhLEVBQUUsR0FBRyxrQ0FBa0M7WUFDbkUsT0FBTyxFQUFFLEtBQUs7WUFDZCxNQUFNLEVBQUU7Z0JBQ0osTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO2dCQUN0QixPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU87YUFDM0I7WUFDRCxTQUFTLEVBQUUsb0NBQW9DO1lBQy9DLE9BQU8sRUFBRTtnQkFDTCxtQkFBbUIsRUFBRSx1QkFBVSxDQUFDLGFBQWEsRUFBRTthQUNsRDtZQUNELFFBQVEsRUFBRTtnQkFDTixNQUFNLEVBQUUscUJBQVMsQ0FBQyxXQUFXLEVBQUU7Z0JBQy9CLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTTtnQkFDdEIsU0FBUyxFQUFFLFdBQVc7YUFDekI7WUFDRCxZQUFZLEVBQUUsTUFBTTtZQUNwQixXQUFXLEVBQUUsSUFBSTtTQUNwQixDQUFDLENBQUM7UUFDSCxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0lBRWEsaUNBQWlCLEdBQS9CLFVBQWdDLE9BQU87UUFDbkMsT0FBTyxHQUFHLE9BQU8sSUFBSSxFQUFFLENBQUM7UUFDeEIsSUFBSSxPQUFPLEdBQUcseUJBQVcsQ0FBQyxHQUFHLENBQUM7WUFDMUIsR0FBRyxFQUFFO2dCQUNELENBQUMs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