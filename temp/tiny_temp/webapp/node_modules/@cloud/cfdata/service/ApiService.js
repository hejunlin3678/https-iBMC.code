"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ApiService = void 0;
var ConfigData_1 = require("../ConfigData");
var StorageService_1 = require("./StorageService");
/**
 * http api访问的基类
 *
 * @export
 * @class ApiSerivce
 */
var ApiService = /** @class */ (function () {
    function ApiService() {
        var thirdPartner = StorageService_1.StorageService.getCookie('third-party-access');
        if (ConfigData_1.ConfigData.getUiSwitchConfig().multiObSwitch) {
            var frameworkOB = StorageService_1.StorageService.getCookie('x-framework-ob');
            ApiService.domainType =
                frameworkOB && frameworkOB.replace('""', '') !== '' && frameworkOB !== 'null' ? frameworkOB : 'hec-hk';
        }
        else {
            var isCOC = (ConfigData_1.ConfigData.getUiSwitchConfig().COCDomains && ConfigData_1.ConfigData.getUiSwitchConfig().COCDomains.indexOf(window.location.hostname) > -1 && window.self !== window.top) || (thirdPartner && /^(COC_)/.test(thirdPartner));
            // 针对白牌用户增加白牌用户标识的request header字段Frame-Domain-Type
            ApiService.domainType = isCOC ? thirdPartner : ConfigData_1.ConfigData.getUiSwitchConfig().x_domain_type || '';
        }
    }
    /**
     * @internal
     * 貌似内外都没有用到
     * Gets domain type
     * @returns
     */
    ApiService.getDomainType = function () {
        if (!ApiService.domainType) {
            if (ConfigData_1.ConfigData.getUiSwitchConfig().multiObSwitch) {
                var frameworkOB = StorageService_1.StorageService.getCookie('x-framework-ob');
                ApiService.domainType =
                    frameworkOB && frameworkOB.replace('""', '') !== '' && frameworkOB !== 'null'
                        ? frameworkOB
                        : 'hec-hk';
            }
            else {
                ApiService.domainType = ConfigData_1.ConfigData.getUiSwitchConfig().x_domain_type || '';
            }
        }
        return ApiService.domainType;
    };
    return ApiService;
}());
exports.ApiService = ApiService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBpU2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlL0FwaVNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNENBQTJDO0FBQzNDLG1EQUFrRDtBQUVsRDs7Ozs7R0FLRztBQUNIO0lBR0k7UUFDSSxJQUFNLFlBQVksR0FBRywrQkFBYyxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQ3BFLElBQUksdUJBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLGFBQWEsRUFBRTtZQUM5QyxJQUFNLFdBQVcsR0FBRywrQkFBYyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQy9ELFVBQVUsQ0FBQyxVQUFVO2dCQUNqQixXQUFXLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLFdBQVcsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO1NBQzlHO2FBQU07WUFDSCxJQUFJLEtBQUssR0FBRyxDQUFDLHVCQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxVQUFVLElBQUksdUJBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUE7WUFDM04sbURBQW1EO1lBQ25ELFVBQVUsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLHVCQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxhQUFhLElBQUksRUFBRSxDQUFDO1NBQ3JHO0lBQ0wsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ2Msd0JBQWEsR0FBOUI7UUFDSSxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRTtZQUN4QixJQUFJLHVCQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxhQUFhLEVBQUU7Z0JBQzlDLElBQU0sV0FBVyxHQUFHLCtCQUFjLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBQy9ELFVBQVUsQ0FBQyxVQUFVO29CQUNqQixXQUFXLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLFdBQVcsS0FBSyxNQUFNO3dCQUN6RSxDQUFDLENBQUMsV0FBVzt3QkFDYixDQUFDLENBQUMsUUFBUSxDQUFDO2FBQ3RCO2lCQUFNO2dCQUNILFVBQVUsQ0FBQyxVQUFVLEdBQUcsdUJBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLGFBQWEsSUFBSSxFQUFFLENBQUM7YUFDOUU7U0FDSjtRQUNELE9BQU8sVUFBVSxDQUFDLFVBQVUsQ0FBQztJQUNqQyxDQUFDO0lBQ0wsaUJBQUM7QUFBRCxDQUFDLEFBcENELElBb0NDO0FBcENZLGdDQUFVIn0=