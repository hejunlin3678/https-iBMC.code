"use strict";
/**
 * StorageService API：
 *
 * CookieStorage
 * public static setCookie(key: string, value: any, ttl?: number)
 * public static getCookie(key: string): any
 * public static delCookie(key: string): void
 * public static flushCookie(): void
 *
 * LocalStorage
 * public static getLocalStorage(key: string): any
 * public static setLocalStorage(key: string, value: any, expires?: number)
 * public static delLocalStorage(name: string): boolean
 *
 * SessionStorage
 * public static getSessionStorage(key: string): any
 * public static setSessionStorage(key: string, value: any, expires?: number)
 * public static delSessionStorage(name: string): boolean
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.StorageService = void 0;
var cookieStorage = {
    cache: [],
    setItem: function (key, value, ttl, domain) {
        var cookieString = key + '=' + value + ';path=/;domain=' + domain;
        // 判断是否设置过期时间
        if (ttl > 0) {
            var date = new Date();
            date.setTime(date.getTime() + ttl * 1000);
            cookieString = cookieString + '; expires=' + date.toUTCString();
        }
        var hasCache = this.cache.findIndex(function (item) {
            return item.key === key && item.domain === domain;
        });
        if (hasCache === -1) {
            this.cache.push({
                key: key,
                domain: domain,
            });
        }
        document.cookie = cookieString;
    },
    getItem: function (key, isLatest) {
        if (isLatest === void 0) { isLatest = false; }
        var cookies = document.cookie.split('; ');
        var arr = null;
        var i = 0;
        var result = '';
        while (i < cookies.length) {
            arr = cookies[i++].split('=');
            if (arr[0] === key) {
                if (isLatest)
                    result = arr[1];
                else
                    return arr[1];
            }
        }
        return result;
    },
    removeItem: function (key, domain) {
        var date = new Date();
        date.setTime(date.getTime() - 10000);
        domain
            ? (document.cookie = key + '=v; expires=' + date.toUTCString() + ';path=/;domain=' + domain)
            : (document.cookie = key + '=v; expires=' + date.toUTCString());
    },
    clear: function () {
        var cache = this.cache;
        var i = 0;
        while (i < cache.length) {
            var _a = cache[i++], key = _a.key, domain = _a.domain;
            this.removeItem(key, domain);
        }
    },
};
var StorageService = /** @class */ (function () {
    function StorageService() {
    }
    StorageService.setCookie = function (key, value, expires, domain) {
        var storage = StorageService.cookieStorage;
        if (typeof value === 'object') {
            value = JSON.stringify(value);
        }
        var defaultDomain = document.domain.replace(/.+?\./, '');
        var specialKeysDomain = document.domain
            .split('.')
            .slice(-2)
            .join('.');
        var _domain = domain ? domain : this.specialKeys.includes(key) ? specialKeysDomain : defaultDomain;
        storage.setItem(key, value, expires, _domain);
    };
    StorageService.getCookie = function (key) {
        var storage = StorageService.cookieStorage;
        var value = storage.getItem(key, this.specialKeys.includes(key));
        try {
            return JSON.parse(value);
        }
        catch (e) {
            return value;
        }
    };
    StorageService.delCookie = function (key) {
        var storage = StorageService.cookieStorage;
        storage.removeItem(key);
    };
    // 在页面点击注销的时候调用该API
    StorageService.flushCookie = function () {
        var storage = StorageService.cookieStorage;
        storage.clear();
    };
    /**
     * getLocalStorage: retrieves a key from localStorage previously set with setLocalStorage().
     * @param key <string> : localStorage key
     * @return
     *        <string> : value of localStorage key
     *        null : in case of expired key or failure
     */
    StorageService.getLocalStorage = function (key, isErr, cacheVersion) {
        if (isErr === void 0) { isErr = false; }
        if (cacheVersion === void 0) { cacheVersion = 'cfdata-default'; }
        if (!window.localStorage)
            return;
        var versionItem = localStorage.getItem(key + '_cacheVersion');
        var expiresItem = localStorage.getItem(key + '_expiresIn');
        var value = localStorage.getItem(key);
        if (expiresItem === undefined || expiresItem === null)
            return StorageService.JsonParse(value);
        var expiresIn = Number(expiresItem) || 0;
        if (cacheVersion !== versionItem) {
            StorageService.delLocalStorage(key);
            return null;
        }
        if (expiresIn < Date.now() && !isErr) {
            StorageService.delLocalStorage(key);
            return null;
        }
        return StorageService.JsonParse(value);
    };
    StorageService.JsonParse = function (value) {
        try {
            var res = JSON.parse(value);
            return res;
        }
        catch (error) {
            return value;
        }
    };
    StorageService.endsWith = function (str, suffix) {
        if (typeof str !== 'string' || typeof suffix !== 'string' || str === '' || suffix === '')
            return false;
        return str.indexOf(suffix, str.length - suffix.length) !== -1;
    };
    // 清除过期的cache
    StorageService.clearExpiredStorage = function () {
        Object.keys(localStorage).forEach(function (item) {
            if (StorageService.endsWith(item, '_expiresIn')) {
                var expireTime = localStorage.getItem(item);
                if (!expireTime || !Number(expireTime) || Number(expireTime) < Date.now()) {
                    StorageService.delLocalStorage(item.replace('_expiresIn', ''));
                }
            }
        });
    };
    /**
     * setLocalStorage: writes a key into localStorage setting a expire time
     * @param key localStorage key
     * @param value localStorage value
     * @param expires number of seconds from now to expire the key
     * @return <boolean> : telling if operation succeeded
     */
    StorageService.setLocalStorage = function (key, value, expires, cacheVersion) {
        if (cacheVersion === void 0) { cacheVersion = 'cfdata-default'; }
        if (!localStorage)
            return;
        StorageService.clearExpiredStorage();
        var expireSecs;
        if (expires === undefined || expires === null) {
            expireSecs = 24 * 60 * 60; // default: seconds for 1 day
        }
        else {
            expireSecs = Math.abs(expires); // make sure it's positive
        }
        var schedule = Date.now() + expireSecs * 1000;
        try {
            localStorage.setItem(key, JSON.stringify(value));
            localStorage.setItem(key + '_expiresIn', schedule.toString());
            localStorage.setItem(key + '_cacheVersion', cacheVersion);
        }
        catch (e) {
            // localstorage容量不够，根据保存的时间删除最早的
            if (e.name.toUpperCase().indexOf('QUOTA') >= 0) {
                var item = void 0;
                var tempScripts = [];
                // 先把所有的缓存对象来出来，放到 tempScripts里
                for (item in localStorage) {
                    if (item.indexOf(key) === 0) {
                        tempScripts.push(JSON.parse(localStorage[item]));
                    }
                }
                // 如果有缓存对象
                if (tempScripts.length) {
                    // 按缓存时间升序排列数组
                    tempScripts.sort(function (a, b) { return a.stamp - b.stamp; });
                    // 删除缓存时间最早的js
                    StorageService.delLocalStorage(tempScripts[0].key);
                    // 删除后在再添加，利用递归完成
                    return StorageService.setLocalStorage(key, value, expireSecs);
                }
                else {
                    // 已经没有可以删除的缓存对象了，证明这个将要缓存的目标太大了。返回undefined。
                    return;
                }
            }
            else {
                // 其他的错误，例如JSON的解析错误
                return;
            }
        }
        return true;
    };
    /*
     * delLocalStorage: removes a key from localStorage and its sibling expiracy key
     * params: key <string>     : localStorage key to remove
     * returns: <boolean> : telling if operation succeeded
     */
    StorageService.delLocalStorage = function (name) {
        try {
            localStorage.removeItem(name);
            localStorage.removeItem(name + '_expiresIn');
        }
        catch (e) {
            console.log('Error removing key [' + name + '] from localStorage: ' + JSON.stringify(e));
            return false;
        }
        return true;
    };
    /**
     * getSessionStorage: retrieves a key from sessionStorage previously set with setSessionStorage().
     * @param key <string> : sessionStorage key
     * @return
     *        <string> : value of sessionStorage key
     *        null : in case of expired key or failure
     */
    StorageService.getSessionStorage = function (key) {
        if (!window.sessionStorage)
            return;
        try {
            var value = sessionStorage.getItem(key);
            return JSON.parse(value);
        }
        catch (e) {
            console.log('getSessionStorage: Error reading key [' + key + '] from sessionStorage: ' + JSON.stringify(e));
            return null;
        }
    };
    /**
     * setSessionStorage: writes a key into sessionStorage
     * @param key sessionStorage key
     * @param value sessionStorage value
     * @return <boolean> : telling if operation succeeded
     */
    StorageService.setSessionStorage = function (key, value) {
        try {
            sessionStorage.setItem(key, JSON.stringify(value));
        }
        catch (e) {
            console.log('setSessionStorage: Error setting key [' + key + '] : ' + JSON.stringify(e));
            return false;
        }
        return true;
    };
    /*
     * delSessionStorage: removes a key from sessionStorage and its sibling expiracy key
     * params: key <string>     : sessionStorage key to remove
     * returns: <boolean> : telling if operation succeeded
     */
    StorageService.delSessionStorage = function (name) {
        try {
            sessionStorage.removeItem(name);
        }
        catch (e) {
            console.log('Error removing key [' + name + '] from sessionStorage: ' + JSON.stringify(e));
            return false;
        }
        return true;
    };
    StorageService.cookieStorage = cookieStorage;
    StorageService.specialKeys = ['locale', 'cfLatestRecordTimestamp'];
    return StorageService;
}());
exports.StorageService = StorageService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RvcmFnZVNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2VydmljZS9TdG9yYWdlU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtCRzs7O0FBRUgsSUFBTSxhQUFhLEdBQUc7SUFDbEIsS0FBSyxFQUFFLEVBQUU7SUFDVCxPQUFPLEVBQUUsVUFBUyxHQUFXLEVBQUUsS0FBVSxFQUFFLEdBQVcsRUFBRSxNQUFjO1FBQ2xFLElBQUksWUFBWSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLGlCQUFpQixHQUFHLE1BQU0sQ0FBQztRQUVsRSxhQUFhO1FBQ2IsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFO1lBQ1QsSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDMUMsWUFBWSxHQUFHLFlBQVksR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ25FO1FBQ0QsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQSxJQUFJO1lBQ3RDLE9BQU8sSUFBSSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLFFBQVEsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNqQixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztnQkFDWixHQUFHLEtBQUE7Z0JBQ0gsTUFBTSxRQUFBO2FBQ1QsQ0FBQyxDQUFDO1NBQ047UUFDRCxRQUFRLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQztJQUNuQyxDQUFDO0lBQ0QsT0FBTyxFQUFFLFVBQVMsR0FBVyxF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